<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Design spaces</title>

        <!-- jQuery -->
        <script src='https://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js'></script>
        <script src='https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.23/jquery-ui.min.js'></script>
        <link rel='stylesheet' href='http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.23/themes/base/jquery-ui.css'>

        <!-- Angular -->
        <script src='https://ajax.googleapis.com/ajax/libs/angularjs/1.2.16/angular.min.js' type='text/javascript'></script>
        <script src='js/app.js' type='text/javascript'></script>
        <script src='js/designSpaceController.js' type='text/javascript'></script>
        <script src='js/sortable.js' type='text/javascript'></script>
        <script src='js/directives.js' type='text/javascript'></script>

        <!-- d3 JS -->
        <script src="js/d3-v3-min.js" charset="utf-8"></script>

        <style>
            html {
            }

            body {
                -webkit-touch-callout: none;
                -webkit-user-select: none;
                -khtml-user-select: none;
                -moz-user-select: moz-none;
                -ms-user-select: none;
                user-select: none;
            }

            * {
                box-sizing: border-box;
                -webkit-box-sizing: border-box;
                -moz-box-sizing: border-box;
            }

            #masters-panel {
                float: left;
                padding-right: 50px;
            }

            ul {
                list-style: none;
                margin: 0;
                padding: 0;
            }

            .master {
                height: 40px;
                width: 100px;
                background: #f85c37;
                border: 1px solid #fff;
                color: #fff;
                padding: 10px;
                cursor: move;
            }

            #design-space-panel {
                float: left;
                width: 700px;
                margin: 0 auto;
                height: 100%;
            }

            #design-space-tabs {
                list-style: none;
                overflow: auto;
                margin: 0;
                padding: 0;
            }

            #design-space-tabs li {
                float: left;
                padding: 6px 10px;
                border-top-left-radius: 8px;
                border-top-right-radius: 8px;
                margin-right: 4px;
                cursor: pointer;
                background: #ddd;
            }

            #design-space-tabs li.selected {
                background: #f85c37;
                color: #fff;
            }

            #design-space-tabs li div {
                float: left;
            }

            #design-space-tabs li img {
                height: 12px;
                width: 12px;
                margin-right: 4px;
            }

            .design-space {
                height: 300px;
                background: #fff;
                border: 1px solid #ddd;
            }

            .unconfigured {
                background: #ddd;
            }

            .choose-space-type {
                width: 50%;
                float: left;
                text-align: center;
                padding-top: 5%;
            }

            .choose-space-type-button {
                text-decoration: underline;
                cursor: pointer;
            }

            .choose-space-type-button:hover {
                color: #f85c37;
            }

            .drop-area {
                height: 100%;
                width: 100%;
                background: #fff;
                border: 1px solid #ddd;
                padding: 10px;
                position: relative;
            }
            
                .li-control {
                    position: relative;
                    width: 200px;
                    height: 50px;
                }

                        .slider-tray {
                            position: absolute;
                            width: 200px;
                            height: 6px;
                            border: solid 1px #ccc;
                            border-top-color: #aaa;
                            border-radius: 4px;
                            background-color: #f0f0f0;
                        }
                        
                        .slider-hidden {
                            position: absolute;
                            width: 200px;
                            height: 6px;
                        }
            
                        .slider-handle {
                            position: absolute;
                            top: 3px;
                        }
            
                            .slider-handle-icon {
                                width: 14px;
                                height: 14px;
                                border: solid 1px #aaa;
                                position: absolute;
                                border-radius: 10px;
                                background-color: #fff;
                                top: -7px;
                                left: -7px;
                            }
                            
                        .slider-label {
                            z-index: 100;
                            font-size: 12px;
                            top: 10px;
                            position: absolute;
                        }
                        
                        li:first-child .slider-label-first {
                            display: none;
                        }
                        
                        li:first-child .slider-label-last {
                            left: 50%;
                        }
                        
                            .slider-label {
                                border: none;
                                background: transparent;
                            }

                        .slider-label-first {
                            left: 0;
                            top: 10px;
                        }
                        
                        .slider-label-last {
                            text-align: right;
                            right: 0;
                        }
                        
                        .slider-label-middle {
                            position: absolute;
                            text-align: center;
                            right: 0;
                            top: 10px;
                            width: 100%;
                            font-size: 16px;
                        }
                        
                .li-explore {
                    position: absolute;
                    width: 20px;
                    height: 20px;
                    background: #000;
                    border-radius: 10px;
                    cursor: pointer;
                }
                
                    .explore-name {
                        position: absolute;
                        z-index: 10;
                        color: #fff;
                        left: 6px;
                        top: 4px;
                        text-align: center;
                        font-size: 12px;
                    }
                    
                    .explore-name-full {
                        position: absolute;
                        z-index: 10;
                        left: 24px;
                        top: 0px;
                        background: #ddd;
                        color: #333;
                        padding: 4px 8px;
                        font-size: 12px;
                        opacity: 0;
                        transition: all 1s ease;
                    }
                    
                    .show-name-full .explore-name-full {
                        opacity: 1;
                    }
        </style>

    </head>

    <BODY ng-app="Metapolator" ng-controller="designSpaceController">
        <div id="masters-panel">
            <ul ng-model="sequences">
                <li ng-repeat="sequence in sequences">
                    <div class="sequence-name">
                        {{sequence.name}}
                    </div>
                    <ul ui-sortable="sortableOptionsMasters" ng-model="sequence.masters" class="sequence">
                        <li ng-repeat="master in sequence.masters" class="master">
                            {{master.name}}
                        </li>
                    </ul>
                </li>
            </ul>
        </div>
        <!-- end of masters -->

        <div id="design-space-panel">
            <ul id="design-space-tabs">
                <li ng-repeat="space in designSpaces" ng-click="selectDesignSpace(space)" ng-class="{selected : space == selectedDesignSpaces}">
                    <div><img ng-src="{{ 'img/' + space.type + '.png'}}">
                    </div>
                    <div>
                        {{space.name}}
                    </div>
                </li>
                <li ng-click="addDesignSpace()">
                    +
                </li>
            </ul>
            <!-- end of tabs -->
            
            <div class="design-space" ng-class="{unconfigured : selectedDesignSpaces.type =='x'}">
                <div ng-show="selectedDesignSpaces.type == 'x'">
                    <div class="choose-space-type">
                        <div class="choose-space-type-button" ng-click="selectedDesignSpaces.type = 'Explore'">
                            <img src="img/Explore.png">
                            <br>
                            Explore
                        </div>
                    </div>
                    <div class="choose-space-type">
                        <div class="choose-space-type-button" ng-click="selectedDesignSpaces.type = 'Control'">
                            <img src="img/Control.png">
                            <br>
                            Control
                        </div>
                    </div>
                </div>
                <ul class="drop-area" ui-sortable="sortableOptionsMasters" ng-model="selectedDesignSpaces.masters" ng-show="selectedDesignSpaces.type != 'x'">
                    <!-- if type = Control -->
                    <div ng-if="selectedDesignSpaces.type == 'Control'">
                         <li class="no-drag li-control" ng-repeat="axis in selectedDesignSpaces.axes track by $index">
                            <control nr="{{$index}}" ng-model='selectedDesignSpaces.axes[$index]'></control>
                            <select class="slider-label slider-label-first" ng-model="master1" ng-init="master1 = selectedDesignSpaces.masters[$index - 1]" ng-options="master.master.name for master in selectedDesignSpaces.masters"></select>
                            <select class="slider-label slider-label-last" ng-model="master2" ng-init="master2 = selectedDesignSpaces.masters[$index]" ng-options="master.master.name for master in selectedDesignSpaces.masters"></select>
                        </li>
                    </div>
                    <!-- if type = Explore -->
                    <div ng-if="selectedDesignSpaces.type == 'Explore'">
                        <li explore ng-if="selectedDesignSpaces.type == 'Explore'" class="no-drag li-explore" ng-repeat="axis in selectedDesignSpaces.axes track by $index" nr="{{$index}}">
                            <div class="explore-name">{{selectedDesignSpaces.masters[$index].master.name | limitTo: 1}}</div>
                            <div class="explore-name-full">{{selectedDesignSpaces.masters[$index].master.name}}</div>
                        </li>
                    </div>
                </ul> 
            </div>
            <!-- end of design space -->

            <div>
                <br>
                {{selectedDesignSpaces}}
            </div>
        </div>

    </body>
</html>