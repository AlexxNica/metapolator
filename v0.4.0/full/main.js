/** vim: et:ts=4:sw=4:sts=4
 * @license RequireJS 2.2.0 Copyright jQuery Foundation and other contributors.
 * Released under MIT license, http://github.com/requirejs/requirejs/LICENSE
 */

/**
 * @license RequireJS domReady 2.0.1 Copyright (c) 2010-2012, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/requirejs/domReady for details
 */

/*! jQuery v2.2.3 | (c) jQuery Foundation | jquery.org/license */

/**
 * @license AngularJS v1.5.5
 * (c) 2010-2016 Google, Inc. http://angularjs.org
 * License: MIT
 */

/**
 * @license text 2.0.15 Copyright jQuery Foundation and other contributors.
 * Released under MIT license, http://github.com/requirejs/text/LICENSE
 */

/*!
 * mustache.js - Logic-less {{mustache}} templates with JavaScript
 * http://github.com/janl/mustache.js
 */

/**
 * Copyright (c) 2011, Lasse Fister lasse@graphicore.de, http://graphicore.de
 *
 * You should have received a copy of the MIT License along with this program.
 * If not, see http://www.opensource.org/licenses/mit-license.php
 *
 * This is a translation of the contents of fontTools/misc/transform.py
 * The svn revision of the source file in trunk/Lib/  was 588 from 2011-03-28 12:18:27 +0200
 *
 * Some cool python features do not work on this thing but I put in some
 * efforts to mimic the python implementation. The future will show whether
 * the direction is good
 *
 * I even copied the docstrings and comments! (These may still refer to
 * the Python code)
 *
 * Affine 2D transformation matrix class.
 *
 * The Transform class implements various transformation matrix operations,
 * both on the matrix itself, as well as on 2D coordinates.
 *
 * This module exports the following symbols:
 *
 *     Transform -- this is the main class
 *     Identity  -- Transform instance set to the identity transformation
 *     Offset    -- Convenience function that returns a translating transformation
 *     Scale     -- Convenience function that returns a scaling transformation
 *
 * Examples: //still in python
 *
 *     >>> t = Transform(2, 0, 0, 3, 0, 0)
 *     >>> t.transformPoint((100, 100))
 *     (200, 300)
 *     >>> t = Scale(2, 3)
 *     >>> t.transformPoint((100, 100))
 *     (200, 300)
 *     >>> t.transformPoint((0, 0))
 *     (0, 0)
 *     >>> t = Offset(2, 3)
 *     >>> t.transformPoint((100, 100))
 *     (102, 103)
 *     >>> t.transformPoint((0, 0))
 *     (2, 3)
 *     >>> t2 = t.scale(0.5)
 *     >>> t2.transformPoint((100, 100))
 *     (52.0, 53.0)
 *     >>> import math
 *     >>> t3 = t2.rotate(math.pi / 2)
 *     >>> t3.transformPoint((0, 0))
 *     (2.0, 3.0)
 *     >>> t3.transformPoint((100, 100))
 *     (-48.0, 53.0)
 *     >>> t = Identity.scale(0.5).translate(100, 200).skew(0.1, 0.2)
 *     >>> t.transformPoints([(0, 0), (1, 1), (100, 100)])
 *     [(50.0, 100.0), (50.550167336042726, 100.60135501775433), (105.01673360427253, 160.13550177543362)]
 *     >>>
 */

// Copyright Joyent, Inc. and other Node contributors.
//
// Permission is hereby granted, free of charge, to any person obtaining a
// copy of this software and associated documentation files (the
// "Software"), to deal in the Software without restriction, including
// without limitation the rights to use, copy, modify, merge, publish,
// distribute, sublicense, and/or sell copies of the Software, and to permit
// persons to whom the Software is furnished to do so, subject to the
// following conditions:
//
// The above copyright notice and this permission notice shall be included
// in all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
// USE OR OTHER DEALINGS IN THE SOFTWARE.

/**
 * marked - a markdown parser
 * Copyright (c) 2011-2014, Christopher Jeffrey. (MIT Licensed)
 * https://github.com/chjj/marked
 */

/*!
 * jQuery UI Core 1.11.4
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/category/ui-core/
 */

/*!
 * jQuery UI Widget 1.11.4
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/jQuery.widget/
 */

/*!
 * jQuery UI Mouse 1.11.4
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/mouse/
 */

/*!
 * jQuery UI Sortable 1.11.4
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/sortable/
 */

/**
 * angular-ui-sortable - This directive allows you to jQueryUI Sortable.
 * @version v0.14.0 - 2016-03-28
 * @link http://angular-ui.github.com
 * @license MIT
 */

/*!

JSZip - A Javascript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2014 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/master/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/master/LICENSE
*/

/**
 * The following functions come from pako, from pako/lib/zlib/crc32.js
 * released under the MIT license, see pako https://github.com/nodeca/pako/
 */

/**
 * The following functions come from pako, from pako/lib/utils/strings
 * released under the MIT license, see pako https://github.com/nodeca/pako/
 */

/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/jakearchibald/es6-promise/master/LICENSE
 * @version   3.0.2
 */

/*! @source http://purl.eligrey.com/github/FileSaver.js/blob/master/FileSaver.js */

/*!
 * jQuery UI Draggable 1.11.4
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/draggable/
 */

/**
 * Copyright (c) 2012, Lasse Fister lasse@graphicore.de, http://graphicore.de
 *
 * You should have received a copy of the MIT License along with this program.
 * If not, see http://www.opensource.org/licenses/mit-license.php
 *
 * This is a port of the constants of glifLib defined in robofab/branches/ufo3k/Lib/ufoLib/gliflib.py
 *
 */

/**
 * Copyright (c) 2011, Lasse Fister lasse@graphicore.de, http://graphicore.de
 *
 * You should have received a copy of the MIT License along with this program.
 * If not, see http://www.opensource.org/licenses/mit-license.php
 *
 */

/**
    * parseDate came with the following header. I just tailored it in here.
    * it returns a timestamp indicating the milliseconds since the Unix Epoch
    *
    * Date.parse with progressive enhancement for ISO 8601 <https://github.com/csnover/js-iso8601>
    * Â© 2011 Colin Snover <http://zetafleet.com>
    * Released under MIT license.
    */

/**
 * Copyright (c) 2011, Lasse Fister lasse@graphicore.de, http://graphicore.de
 *
 * You should have received a copy of the MIT License along with this program.
 * If not, see http://www.opensource.org/licenses/mit-license.php
 *
 * This returns the browsers xml tools or if in nodejs a mapping to the
 * libxmljs api so that it can be used like the w3c tools.
 *
 * IMPORTANT for nodejs with libxmljs: As the need of this project regarding
 * xml tools is not so big, there will likely be no full DOM w3c api
 * available. Thus, things like running jQuery on a libxmljs element won't
 * work.
 * As it appears the jsdom people are making exactly that possible, so the
 * notice above might become outdated.
 */

/**
 * Copyright (c) 2011, Lasse Fister lasse@graphicore.de, http://graphicore.de
 * 
 * You should have received a copy of the MIT License along with this program.
 * If not, see http://www.opensource.org/licenses/mit-license.php
 * 
 * This Object is to store the "data" object of a plist file.
 * 
 * Since there is currently no case where I need the decoding/encoding
 * feature and since the window.btoa/atob are not available everywhere
 * this object is nothing more than a marker that the data came-from/should-end-in
 * a "data" Object of a plist file. Handling of decoding encoding is delayed.
 * See the commented out code if is helpful for the task.
 */

/**
 * Copyright (c) 2011, Lasse Fister lasse@graphicore.de, http://graphicore.de
 * 
 * You should have received a copy of the MIT License along with this program.
 * If not, see http://www.opensource.org/licenses/mit-license.php
 * 
 * This Object is to store the "integer" object of a plist file. Its needed
 * because the number object of javascript is always like a float.
 * 
 * note that doing things like
 * var i = IntObject(12);
 * i++;
 * makes it a number, no longer an IntObject
 */

/**
 * Copyright (c) 2011, Lasse Fister lasse@graphicore.de, http://graphicore.de
 *
 * You should have received a copy of the MIT License along with this program.
 * If not, see http://www.opensource.org/licenses/mit-license.php
 *
 * just in case your need the definition of a plist and your internet died,
 * this are the contents of http://www.apple.com/DTDs/PropertyList-1.0.dtd:
<!ENTITY % plistObject "(array | data | date | dict | real | integer | string | true | false )" >
<!ELEMENT plist %plistObject;>
<!ATTLIST plist version CDATA "1.0" >

<!-- Collections -->
<!ELEMENT array (%plistObject;)*>
<!ELEMENT dict (key, %plistObject;)*>
<!ELEMENT key (#PCDATA)>

<!--- Primitive types -->
<!ELEMENT string (#PCDATA)>
<!ELEMENT data (#PCDATA)> <!-- Contents interpreted as Base-64 encoded -->
<!ELEMENT date (#PCDATA)> <!-- Contents should conform to a subset of ISO 8601 (in particular, YYYY '-' MM '-' DD 'T' HH ':' MM ':' SS 'Z'.  Smaller units may be omitted with a loss of precision) -->

<!-- Numerical primitives -->
<!ELEMENT true EMPTY>  <!-- Boolean constant true -->
<!ELEMENT false EMPTY> <!-- Boolean constant false -->
<!ELEMENT real (#PCDATA)> <!-- Contents should represent a floating point number matching ("+" | "-")? d+ ("."d*)? ("E" ("+" | "-") d+)? where d is a digit 0-9.  -->
<!ELEMENT integer (#PCDATA)> <!-- Contents should represent a (possibly signed) integer number in base 10 -->
 */

/**
 * Copyright (c) 2012, Lasse Fister lasse@graphicore.de, http://graphicore.de
 * 
 * You should have received a copy of the MIT License along with this program.
 * If not, see http://www.opensource.org/licenses/mit-license.php
 * 
 * This is a port of the validators defined in robofab/branches/ufo3k/Lib/ufoLib/validators.py
 * The svn revision of the source file was 576 from 2012-05-11 20:00:18 +0200
 * 
 * There are blocking functions in here:
 *    pngValidator
 *    layerContentsValidator
 * for these non-blocking counterparts exist
 *    pngValidatorAsync
 *    layerContentsValidatorAsync
 * 
 * todo:
 *    pngValidator throws NotImplementedError when 'fileObj' as Input
 *    it might be nice to have a fileObj api as seen in python
 */

/**
 * Copyright (c) 2012, Lasse Fister lasse@graphicore.de, http://graphicore.de
 * 
 * You should have received a copy of the MIT License along with this program.
 * If not, see http://www.opensource.org/licenses/mit-license.php
 * 
 * This is a port of the validators defined in robofab/branches/ufo3k/Lib/ufoLib/validators.py
 * The svn revision of the source file was 576 from 2012-05-11 20:00:18 +0200
 * 
 * 
 * 
 * User name to file name conversion.
 * This was taken form the UFO 3 spec.
 * 
 */

/**
 * Copyright (c) 2012, Lasse Fister lasse@graphicore.de, http://graphicore.de
 * 
 * You should have received a copy of the MIT License along with this program.
 * If not, see http://www.opensource.org/licenses/mit-license.php
 * 
 * This is a port of various functions  defined in robofab/branches/ufo3k/Lib/ufoLib/gliflib.py
 *
 */

/**
 * Copyright (c) 2011, Lasse Fister lasse@graphicore.de, http://graphicore.de
 *
 * You should have received a copy of the MIT License along with this program.
 * If not, see http://www.opensource.org/licenses/mit-license.php
 *
 * This is a translation of AbstractPointPen defined in robofab/pens/pointPen.py
 * The svn revision of the source file in trunk/Lib/ was 67 from 2008-03-11 10:18:32 +0100
 * Ther very same pen is to be found in robofab/branches/ufo3k/Lib/ufoLib/pointPen.py
 * revision 517 2011-12-07 18:17:40 +0100 (Wed, 07 Dec 2011)
 *
 * I even copied the docstrings and comments! (These may still refer to the Python code)
 *
 *
 * =========
 * PointPens
 * =========
 *
 * Where **SegmentPens** have an intuitive approach to drawing
 * (if you're familiar with postscript anyway), the **PointPen**
 * is geared towards accessing all the data in the contours of
 * the glyph. A PointsPen has a very simple interface, it just
 * steps through all the points in a call from glyph.drawPoints().
 * This allows the caller to provide more data for each point.
 * For instance, whether or not a point is smooth, and its name.
 */

/**
 * Copyright (c) 2011, Lasse Fister lasse@graphicore.de, http://graphicore.de
 *
 * You should have received a copy of the MIT License along with this program.
 * If not, see http://www.opensource.org/licenses/mit-license.php
 *
 * This is a translation of BasePointToSegmentPen defined in robofab/pens/pointPen.py
 * The svn revision of the source file in trunk/Lib/ was 67 from 2008-03-11 10:18:32 +0100
 *
 * I even copied the docstrings and comments! (These may still refer to the Python code)
 */

/**
 * Copyright (c) 2011, Lasse Fister lasse@graphicore.de, http://graphicore.de
 *
 * You should have received a copy of the MIT License along with this program.
 * If not, see http://www.opensource.org/licenses/mit-license.php
 *
 * This is a translation of PointToSegmentPen defined in robofab/pens/adapterPens.py
 * The svn revision of the source file in trunk/Lib/ was 67 from 2008-03-11 10:18:32 +0100
 *
 * I even copied the docstrings and comments! (These may still refer to the Python code)
 */

/**
 * Copyright (c) 2012, Lasse Fister lasse@graphicore.de, http://graphicore.de
 *
 * You should have received a copy of the MIT License along with this program.
 * If not, see http://www.opensource.org/licenses/mit-license.php
 *
 * This is a port of glifLib.Glyph defined in robofab/branches/ufo3k/Lib/ufoLib/gliflib.py
 *
 */

/**
 * Copyright (c) 2012, Lasse Fister lasse@graphicore.de, http://graphicore.de
 *
 * You should have received a copy of the MIT License along with this program.
 * If not, see http://www.opensource.org/licenses/mit-license.php
 *
 * This is a port of various functions to read a glif xml into a generic
 * glyph object defined in robofab/branches/ufo3k/Lib/ufoLib/gliflib.py
 *
 * There have been modifications from the python sources because XML is
 * treated with the DOM in here.
 */

/**
 * Copyright (c) 2012, Lasse Fister lasse@graphicore.de, http://graphicore.de
 *
 * You should have received a copy of the MIT License along with this program.
 * If not, see http://www.opensource.org/licenses/mit-license.php
 *
 * This is a port of glifLib.GLIFPointPen defined in
 * robofab/branches/ufo3k/Lib/ufoLib/gliflib.py
 *
 */

/**
 * Copyright (c) 2012, Lasse Fister lasse@graphicore.de, http://graphicore.de
 *
 * You should have received a copy of the MIT License along with this program.
 * If not, see http://www.opensource.org/licenses/mit-license.php
 *
 * This is a port of various functions to write a generic glyph object
 * into a glif xml defined in robofab/branches/ufo3k/Lib/ufoLib/gliflib.py
 *
 * There have been modifications from the python sources because XML is
 * treated with the DOM in here.
 */

/**
 * Copyright (c) 2012, Lasse Fister lasse@graphicore.de, http://graphicore.de
 * 
 * You should have received a copy of the MIT License along with this program.
 * If not, see http://www.opensource.org/licenses/mit-license.php
 * 
 * This is a port of various functions for "rapid value fetching" defined in
 * robofab/branches/ufo3k/Lib/ufoLib/gliflib.py
 * 
 * it uses XPATH and DOM Documents, so its very different to the python
 * code.
 */

/**
 * Copyright (c) 2012,2014 Lasse Fister lasse@graphicore.de, http://graphicore.de
 *
 * You should have received a copy of the MIT License along with this program.
 * If not, see http://www.opensource.org/licenses/mit-license.php
 *
 * This is a port of glifLib.Glyph defined in robofab/branches/ufo3k/Lib/ufoLib/gliflib.py
 *
 * Modifications were made in order to use DOM Methods with the glifs.
 * Because there is no native SAX parser in the Browser, we parse the glifs
 * completely, not just partly on some operations as the Python
 * implementation does.
 *
 * added a method:
 *     getGLIFDocumnet
 *
 * The file reading/writing methods use the io module to abstract file writing.
 * TODO: use dependency injection to set up I/O on a per-GlyphSet-instance
 * basis.
 *
 * I implemented all otherwise blocking methods using obtainJS to provide
 * a switch beteween synchronous/asynchronous execution. See obtainJS for
 * details.
 *
 */

/**
 * Copyright (c) 2011, Lasse Fister lasse@graphicore.de, http://graphicore.de
 *
 * You should have received a copy of the MIT License along with this program.
 * If not, see http://www.opensource.org/licenses/mit-license.php
 *
 * The functions decomposeSuperBezierSegment and decomposeQuadraticSegment
 * are a translation of the equally named functions defined in
 * fontTools/pens/basePen.py The svn revision of the source file in
 * trunk/Lib/ was 498 from 2005-04-10 15:18:42 +0200
 *
 * I even copied the docstrings and comments! (These may still refer to the Python code)
 *
 * //////////////////////////////////////////////
 *
 * straight from fontTools/pens/basePen.py
 * fontTools.pens.basePen.py -- Tools and base classes to build pen objects.
 *
 * The Pen Protocol
 *
 * A Pen is a kind of object that standardizes the way how to "draw" outlines:
 * it is a middle man between an outline and a drawing. In other words:
 * it is an abstraction for drawing outlines, making sure that outline objects
 * don't need to know the details about how and where they're being drawn, and
 * that drawings don't need to know the details of how outlines are stored.
 *
 * The most basic pattern is this:
 *
 *     outline.draw(pen)  # 'outline' draws itself onto 'pen'
 *
 * Pens can be used to render outlines to the screen, but also to construct
 * new outlines. Eg. an outline object can be both a drawable object (it has a
 * draw() method) as well as a pen itself: you *build* an outline using pen
 * methods.
 *
 * The AbstractPen class defines the Pen protocol. It implements almost
 * nothing (only no-op closePath() and endPath() methods), but is useful
 * for documentation purposes. Subclassing it basically tells the reader:
 * "this class implements the Pen protocol.". An examples of an AbstractPen
 * subclass is fontTools.pens.transformPen.TransformPen.
 *
 * The BasePen class is a base implementation useful for pens that actually
 * draw (for example a pen renders outlines using a native graphics engine).
 * BasePen contains a lot of base functionality, making it very easy to build
 * a pen that fully conforms to the pen protocol. Note that if you subclass
 * BasePen, you _don't_ override moveTo(), lineTo(), etc., but _moveTo(),
 * _lineTo(), etc. See the BasePen doc string for details. Examples of
 * BasePen subclasses are fontTools.pens.boundsPen.BoundsPen and
 * fontTools.pens.cocoaPen.CocoaPen.
 *
 * Coordinates are usually expressed as (x, y) tuples, but generally any
 * sequence of length 2 will do.
 */

/**
 * Copyright (c) 2011, Lasse Fister lasse@graphicore.de, http://graphicore.de
 *
 * You should have received a copy of the MIT License along with this program.
 * If not, see http://www.opensource.org/licenses/mit-license.php
 *
 * This is a translation of AbstractPen defined in fontTools/pens/basePen.py
 * The svn revision of the source file in trunk/Lib/ was 498 from 2005-04-10 15:18:42 +0200
 *
 * I even copied the docstrings and comments! (These may still refer to the Python code)
 */

/**
 * Copyright (c) 2011, Lasse Fister lasse@graphicore.de, http://graphicore.de
 *
 * You should have received a copy of the MIT License along with this program.
 * If not, see http://www.opensource.org/licenses/mit-license.php
 *
 * This is a translation of TransformPen defined in fontTools/pens/transformPen.py
 * The svn revision of the source file in trunk/Lib/ was 453 from 2003-09-16 12:14:48 +0200
 *
 * I even copied the docstrings and comments! (These may still refer to the Python code)
 */

/**
 * Copyright (c) 2011, Lasse Fister lasse@graphicore.de, http://graphicore.de
 *
 * You should have received a copy of the MIT License along with this program.
 * If not, see http://www.opensource.org/licenses/mit-license.php
 *
 * This is a translation of BasePen defined in fontTools/pens/basePen.py
 * The svn revision of the source file in trunk/Lib/ was 498 from 2005-04-10 15:18:42  +0200
 *
 * I even copied the docstrings and comments! (These may still refer to the Python code)
 */

/**
 * Copyright (c) 2015, Felipe Correa da Silva Sanches <juca@members.fsf.org>
 *
 * You should have received a copy of the MIT License along with this program.
 * If not, see http://www.opensource.org/licenses/mit-license.php
 *
 */

/*!
 * event-emitter.js
 * 
 * Copyright (c) 2014
 */

/**
 * Copyright (c) 2011, Lasse Fister lasse@graphicore.de, http://graphicore.de
 *
 * You should have received a copy of the MIT License along with this program.
 * If not, see http://www.opensource.org/licenses/mit-license.php
 *
 * This pen draws path data to a SVG path element. It inherts from BasePen.
 *
 * Noteable documents:
 *    http://www.w3.org/TR/SVG/paths.html#InterfaceSVGPathSegList
 *    http://www.w3.org/TR/SVG/paths.html#InterfaceSVGPathElement
 */

var requirejs,require,define;!function(global){function commentReplace(e,t,n,r){return r||""}function isFunction(e){return"[object Function]"===ostring.call(e)}function isArray(e){return"[object Array]"===ostring.call(e)}function each(e,t){if(e){var n;for(n=0;n<e.length&&(!e[n]||!t(e[n],n,e));n+=1);}}function eachReverse(e,t){if(e){var n;for(n=e.length-1;n>-1&&(!e[n]||!t(e[n],n,e));n-=1);}}function hasProp(e,t){return hasOwn.call(e,t)}function getOwn(e,t){return hasProp(e,t)&&e[t]}function eachProp(e,t){var n;for(n in e)if(hasProp(e,n)&&t(e[n],n))break}function mixin(e,t,n,r){return t&&eachProp(t,function(t,i){(n||!hasProp(e,i))&&(!r||"object"!=typeof t||!t||isArray(t)||isFunction(t)||t instanceof RegExp?e[i]=t:(e[i]||(e[i]={}),mixin(e[i],t,n,r)))}),e}function bind(e,t){return function(){return t.apply(e,arguments)}}function scripts(){return document.getElementsByTagName("script")}function defaultOnError(e){throw e}function getGlobal(e){if(!e)return e;var t=global;return each(e.split("."),function(e){t=t[e]}),t}function makeError(e,t,n,r){var i=new Error(t+"\nhttp://requirejs.org/docs/errors.html#"+e);return i.requireType=e,i.requireModules=r,n&&(i.originalError=n),i}function newContext(e){function t(e){var t,n;for(t=0;t<e.length;t++)if(n=e[t],"."===n)e.splice(t,1),t-=1;else if(".."===n){if(0===t||1===t&&".."===e[2]||".."===e[t-1])continue;t>0&&(e.splice(t-1,2),t-=2)}}function n(e,n,r){var i,o,a,s,u,l,c,h,f,p,d,m,g=n&&n.split("/"),v=S.map,y=v&&v["*"];if(e&&(e=e.split("/"),c=e.length-1,S.nodeIdCompat&&jsSuffixRegExp.test(e[c])&&(e[c]=e[c].replace(jsSuffixRegExp,"")),"."===e[0].charAt(0)&&g&&(m=g.slice(0,g.length-1),e=m.concat(e)),t(e),e=e.join("/")),r&&v&&(g||y)){a=e.split("/");e:for(s=a.length;s>0;s-=1){if(l=a.slice(0,s).join("/"),g)for(u=g.length;u>0;u-=1)if(o=getOwn(v,g.slice(0,u).join("/")),o&&(o=getOwn(o,l))){h=o,f=s;break e}!p&&y&&getOwn(y,l)&&(p=getOwn(y,l),d=s)}!h&&p&&(h=p,f=d),h&&(a.splice(0,f,h),e=a.join("/"))}return i=getOwn(S.pkgs,e),i?i:e}function r(e){isBrowser&&each(scripts(),function(t){return t.getAttribute("data-requiremodule")===e&&t.getAttribute("data-requirecontext")===_.contextName?(t.parentNode.removeChild(t),!0):void 0})}function i(e){var t=getOwn(S.paths,e);return t&&isArray(t)&&t.length>1?(t.shift(),_.require.undef(e),_.makeRequire(null,{skipMap:!0})([e]),!0):void 0}function o(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function a(e,t,r,i){var a,s,u,l,c=null,h=t?t.name:null,f=e,p=!0,d="";return e||(p=!1,e="_@r"+(E+=1)),l=o(e),c=l[0],e=l[1],c&&(c=n(c,h,i),s=getOwn(T,c)),e&&(c?d=s&&s.normalize?s.normalize(e,function(e){return n(e,h,i)}):-1===e.indexOf("!")?n(e,h,i):e:(d=n(e,h,i),l=o(d),c=l[0],d=l[1],r=!0,a=_.nameToUrl(d))),u=!c||s||r?"":"_unnormalized"+($+=1),{prefix:c,name:d,parentMap:t,unnormalized:!!u,url:a,originalName:f,isDefine:p,id:(c?c+"!"+d:d)+u}}function s(e){var t=e.id,n=getOwn(C,t);return n||(n=C[t]=new _.Module(e)),n}function u(e,t,n){var r=e.id,i=getOwn(C,r);!hasProp(T,r)||i&&!i.defineEmitComplete?(i=s(e),i.error&&"error"===t?n(i.error):i.on(t,n)):"defined"===t&&n(T[r])}function l(e,t){var n=e.requireModules,r=!1;t?t(e):(each(n,function(t){var n=getOwn(C,t);n&&(n.error=e,n.events.error&&(r=!0,n.emit("error",e)))}),r||req.onError(e))}function c(){globalDefQueue.length&&(each(globalDefQueue,function(e){var t=e[0];"string"==typeof t&&(_.defQueueMap[t]=!0),M.push(e)}),globalDefQueue=[])}function h(e){delete C[e],delete k[e]}function f(e,t,n){var r=e.map.id;e.error?e.emit("error",e.error):(t[r]=!0,each(e.depMaps,function(r,i){var o=r.id,a=getOwn(C,o);!a||e.depMatched[i]||n[o]||(getOwn(t,o)?(e.defineDep(i,T[o]),e.check()):f(a,t,n))}),n[r]=!0)}function p(){var e,t,n=1e3*S.waitSeconds,o=n&&_.startTime+n<(new Date).getTime(),a=[],s=[],u=!1,c=!0;if(!y){if(y=!0,eachProp(k,function(e){var n=e.map,l=n.id;if(e.enabled&&(n.isDefine||s.push(e),!e.error))if(!e.inited&&o)i(l)?(t=!0,u=!0):(a.push(l),r(l));else if(!e.inited&&e.fetched&&n.isDefine&&(u=!0,!n.prefix))return c=!1}),o&&a.length)return e=makeError("timeout","Load timeout for modules: "+a,null,a),e.contextName=_.contextName,l(e);c&&each(s,function(e){f(e,{},{})}),o&&!t||!u||!isBrowser&&!isWebWorker||x||(x=setTimeout(function(){x=0,p()},50)),y=!1}}function d(e){hasProp(T,e[0])||s(a(e[0],null,!0)).init(e[1],e[2])}function m(e,t,n,r){e.detachEvent&&!isOpera?r&&e.detachEvent(r,t):e.removeEventListener(n,t,!1)}function g(e){var t=e.currentTarget||e.srcElement;return m(t,_.onScriptLoad,"load","onreadystatechange"),m(t,_.onScriptError,"error"),{node:t,id:t&&t.getAttribute("data-requiremodule")}}function v(){var e;for(c();M.length;){if(e=M.shift(),null===e[0])return l(makeError("mismatch","Mismatched anonymous define() module: "+e[e.length-1]));d(e)}_.defQueueMap={}}var y,b,_,w,x,S={waitSeconds:7,baseUrl:"./",paths:{},bundles:{},pkgs:{},shim:{},config:{}},C={},k={},P={},M=[],T={},A={},O={},E=1,$=1;return w={require:function(e){return e.require?e.require:e.require=_.makeRequire(e.map)},exports:function(e){return e.usingExports=!0,e.map.isDefine?e.exports?T[e.map.id]=e.exports:e.exports=T[e.map.id]={}:void 0},module:function(e){return e.module?e.module:e.module={id:e.map.id,uri:e.map.url,config:function(){return getOwn(S.config,e.map.id)||{}},exports:e.exports||(e.exports={})}}},b=function(e){this.events=getOwn(P,e.id)||{},this.map=e,this.shim=getOwn(S.shim,e.id),this.depExports=[],this.depMaps=[],this.depMatched=[],this.pluginMaps={},this.depCount=0},b.prototype={init:function(e,t,n,r){r=r||{},this.inited||(this.factory=t,n?this.on("error",n):this.events.error&&(n=bind(this,function(e){this.emit("error",e)})),this.depMaps=e&&e.slice(0),this.errback=n,this.inited=!0,this.ignore=r.ignore,r.enabled||this.enabled?this.enable():this.check())},defineDep:function(e,t){this.depMatched[e]||(this.depMatched[e]=!0,this.depCount-=1,this.depExports[e]=t)},fetch:function(){if(!this.fetched){this.fetched=!0,_.startTime=(new Date).getTime();var e=this.map;return this.shim?void _.makeRequire(this.map,{enableBuildCallback:!0})(this.shim.deps||[],bind(this,function(){return e.prefix?this.callPlugin():this.load()})):e.prefix?this.callPlugin():this.load()}},load:function(){var e=this.map.url;A[e]||(A[e]=!0,_.load(this.map.id,e))},check:function(){if(this.enabled&&!this.enabling){var e,t,n=this.map.id,r=this.depExports,i=this.exports,o=this.factory;if(this.inited){if(this.error)this.emit("error",this.error);else if(!this.defining){if(this.defining=!0,this.depCount<1&&!this.defined){if(isFunction(o)){if(this.events.error&&this.map.isDefine||req.onError!==defaultOnError)try{i=_.execCb(n,o,r,i)}catch(a){e=a}else i=_.execCb(n,o,r,i);if(this.map.isDefine&&void 0===i&&(t=this.module,t?i=t.exports:this.usingExports&&(i=this.exports)),e)return e.requireMap=this.map,e.requireModules=this.map.isDefine?[this.map.id]:null,e.requireType=this.map.isDefine?"define":"require",l(this.error=e)}else i=o;if(this.exports=i,this.map.isDefine&&!this.ignore&&(T[n]=i,req.onResourceLoad)){var s=[];each(this.depMaps,function(e){s.push(e.normalizedMap||e)}),req.onResourceLoad(_,this.map,s)}h(n),this.defined=!0}this.defining=!1,this.defined&&!this.defineEmitted&&(this.defineEmitted=!0,this.emit("defined",this.exports),this.defineEmitComplete=!0)}}else hasProp(_.defQueueMap,n)||this.fetch()}},callPlugin:function(){var e=this.map,t=e.id,r=a(e.prefix);this.depMaps.push(r),u(r,"defined",bind(this,function(r){var i,o,c,f=getOwn(O,this.map.id),p=this.map.name,d=this.map.parentMap?this.map.parentMap.name:null,m=_.makeRequire(e.parentMap,{enableBuildCallback:!0});return this.map.unnormalized?(r.normalize&&(p=r.normalize(p,function(e){return n(e,d,!0)})||""),o=a(e.prefix+"!"+p,this.map.parentMap),u(o,"defined",bind(this,function(e){this.map.normalizedMap=o,this.init([],function(){return e},null,{enabled:!0,ignore:!0})})),c=getOwn(C,o.id),void(c&&(this.depMaps.push(o),this.events.error&&c.on("error",bind(this,function(e){this.emit("error",e)})),c.enable()))):f?(this.map.url=_.nameToUrl(f),void this.load()):(i=bind(this,function(e){this.init([],function(){return e},null,{enabled:!0})}),i.error=bind(this,function(e){this.inited=!0,this.error=e,e.requireModules=[t],eachProp(C,function(e){0===e.map.id.indexOf(t+"_unnormalized")&&h(e.map.id)}),l(e)}),i.fromText=bind(this,function(n,r){var o=e.name,u=a(o),c=useInteractive;r&&(n=r),c&&(useInteractive=!1),s(u),hasProp(S.config,t)&&(S.config[o]=S.config[t]);try{req.exec(n)}catch(h){return l(makeError("fromtexteval","fromText eval for "+t+" failed: "+h,h,[t]))}c&&(useInteractive=!0),this.depMaps.push(u),_.completeLoad(o),m([o],i)}),void r.load(e.name,m,i,S))})),_.enable(r,this),this.pluginMaps[r.id]=r},enable:function(){k[this.map.id]=this,this.enabled=!0,this.enabling=!0,each(this.depMaps,bind(this,function(e,t){var n,r,i;if("string"==typeof e){if(e=a(e,this.map.isDefine?this.map:this.map.parentMap,!1,!this.skipMap),this.depMaps[t]=e,i=getOwn(w,e.id))return void(this.depExports[t]=i(this));this.depCount+=1,u(e,"defined",bind(this,function(e){this.undefed||(this.defineDep(t,e),this.check())})),this.errback?u(e,"error",bind(this,this.errback)):this.events.error&&u(e,"error",bind(this,function(e){this.emit("error",e)}))}n=e.id,r=C[n],hasProp(w,n)||!r||r.enabled||_.enable(e,this)})),eachProp(this.pluginMaps,bind(this,function(e){var t=getOwn(C,e.id);t&&!t.enabled&&_.enable(e,this)})),this.enabling=!1,this.check()},on:function(e,t){var n=this.events[e];n||(n=this.events[e]=[]),n.push(t)},emit:function(e,t){each(this.events[e],function(e){e(t)}),"error"===e&&delete this.events[e]}},_={config:S,contextName:e,registry:C,defined:T,urlFetched:A,defQueue:M,defQueueMap:{},Module:b,makeModuleMap:a,nextTick:req.nextTick,onError:l,configure:function(e){if(e.baseUrl&&"/"!==e.baseUrl.charAt(e.baseUrl.length-1)&&(e.baseUrl+="/"),"string"==typeof e.urlArgs){var t=e.urlArgs;e.urlArgs=function(e,n){return(-1===n.indexOf("?")?"?":"&")+t}}var n=S.shim,r={paths:!0,bundles:!0,config:!0,map:!0};eachProp(e,function(e,t){r[t]?(S[t]||(S[t]={}),mixin(S[t],e,!0,!0)):S[t]=e}),e.bundles&&eachProp(e.bundles,function(e,t){each(e,function(e){e!==t&&(O[e]=t)})}),e.shim&&(eachProp(e.shim,function(e,t){isArray(e)&&(e={deps:e}),!e.exports&&!e.init||e.exportsFn||(e.exportsFn=_.makeShimExports(e)),n[t]=e}),S.shim=n),e.packages&&each(e.packages,function(e){var t,n;e="string"==typeof e?{name:e}:e,n=e.name,t=e.location,t&&(S.paths[n]=e.location),S.pkgs[n]=e.name+"/"+(e.main||"main").replace(currDirRegExp,"").replace(jsSuffixRegExp,"")}),eachProp(C,function(e,t){e.inited||e.map.unnormalized||(e.map=a(t,null,!0))}),(e.deps||e.callback)&&_.require(e.deps||[],e.callback)},makeShimExports:function(e){function t(){var t;return e.init&&(t=e.init.apply(global,arguments)),t||e.exports&&getGlobal(e.exports)}return t},makeRequire:function(t,i){function o(n,r,u){var c,h,f;return i.enableBuildCallback&&r&&isFunction(r)&&(r.__requireJsBuild=!0),"string"==typeof n?isFunction(r)?l(makeError("requireargs","Invalid require call"),u):t&&hasProp(w,n)?w[n](C[t.id]):req.get?req.get(_,n,t,o):(h=a(n,t,!1,!0),c=h.id,hasProp(T,c)?T[c]:l(makeError("notloaded",'Module name "'+c+'" has not been loaded yet for context: '+e+(t?"":". Use require([])")))):(v(),_.nextTick(function(){v(),f=s(a(null,t)),f.skipMap=i.skipMap,f.init(n,r,u,{enabled:!0}),p()}),o)}return i=i||{},mixin(o,{isBrowser:isBrowser,toUrl:function(e){var r,i=e.lastIndexOf("."),o=e.split("/")[0],a="."===o||".."===o;return-1!==i&&(!a||i>1)&&(r=e.substring(i,e.length),e=e.substring(0,i)),_.nameToUrl(n(e,t&&t.id,!0),r,!0)},defined:function(e){return hasProp(T,a(e,t,!1,!0).id)},specified:function(e){return e=a(e,t,!1,!0).id,hasProp(T,e)||hasProp(C,e)}}),t||(o.undef=function(e){c();var n=a(e,t,!0),i=getOwn(C,e);i.undefed=!0,r(e),delete T[e],delete A[n.url],delete P[e],eachReverse(M,function(t,n){t[0]===e&&M.splice(n,1)}),delete _.defQueueMap[e],i&&(i.events.defined&&(P[e]=i.events),h(e))}),o},enable:function(e){var t=getOwn(C,e.id);t&&s(e).enable()},completeLoad:function(e){var t,n,r,o=getOwn(S.shim,e)||{},a=o.exports;for(c();M.length;){if(n=M.shift(),null===n[0]){if(n[0]=e,t)break;t=!0}else n[0]===e&&(t=!0);d(n)}if(_.defQueueMap={},r=getOwn(C,e),!t&&!hasProp(T,e)&&r&&!r.inited){if(!(!S.enforceDefine||a&&getGlobal(a)))return i(e)?void 0:l(makeError("nodefine","No define call for "+e,null,[e]));d([e,o.deps||[],o.exportsFn])}p()},nameToUrl:function(e,t,n){var r,i,o,a,s,u,l,c=getOwn(S.pkgs,e);if(c&&(e=c),l=getOwn(O,e))return _.nameToUrl(l,t,n);if(req.jsExtRegExp.test(e))s=e+(t||"");else{for(r=S.paths,i=e.split("/"),o=i.length;o>0;o-=1)if(a=i.slice(0,o).join("/"),u=getOwn(r,a)){isArray(u)&&(u=u[0]),i.splice(0,o,u);break}s=i.join("/"),s+=t||(/^data\:|^blob\:|\?/.test(s)||n?"":".js"),s=("/"===s.charAt(0)||s.match(/^[\w\+\.\-]+:/)?"":S.baseUrl)+s}return S.urlArgs&&!/^blob\:/.test(s)?s+S.urlArgs(e,s):s},load:function(e,t){req.load(_,e,t)},execCb:function(e,t,n,r){return t.apply(r,n)},onScriptLoad:function(e){if("load"===e.type||readyRegExp.test((e.currentTarget||e.srcElement).readyState)){interactiveScript=null;var t=g(e);_.completeLoad(t.id)}},onScriptError:function(e){var t=g(e);if(!i(t.id)){var n=[];return eachProp(C,function(e,r){0!==r.indexOf("_@r")&&each(e.depMaps,function(e){return e.id===t.id?(n.push(r),!0):void 0})}),l(makeError("scripterror",'Script error for "'+t.id+(n.length?'", needed by: '+n.join(", "):'"'),e,[t.id]))}}},_.require=_.makeRequire(),_}function getInteractiveScript(){return interactiveScript&&"interactive"===interactiveScript.readyState?interactiveScript:(eachReverse(scripts(),function(e){return"interactive"===e.readyState?interactiveScript=e:void 0}),interactiveScript)}var req,s,head,baseElement,dataMain,src,interactiveScript,currentlyAddingScript,mainScript,subPath,version="2.2.0",commentRegExp=/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/gm,cjsRequireRegExp=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,jsSuffixRegExp=/\.js$/,currDirRegExp=/^\.\//,op=Object.prototype,ostring=op.toString,hasOwn=op.hasOwnProperty,isBrowser=!("undefined"==typeof window||"undefined"==typeof navigator||!window.document),isWebWorker=!isBrowser&&"undefined"!=typeof importScripts,readyRegExp=isBrowser&&"PLAYSTATION 3"===navigator.platform?/^complete$/:/^(complete|loaded)$/,defContextName="_",isOpera="undefined"!=typeof opera&&"[object Opera]"===opera.toString(),contexts={},cfg={},globalDefQueue=[],useInteractive=!1;if("undefined"==typeof define){if("undefined"!=typeof requirejs){if(isFunction(requirejs))return;cfg=requirejs,requirejs=void 0}"undefined"==typeof require||isFunction(require)||(cfg=require,require=void 0),req=requirejs=function(e,t,n,r){var i,o,a=defContextName;return isArray(e)||"string"==typeof e||(o=e,isArray(t)?(e=t,t=n,n=r):e=[]),o&&o.context&&(a=o.context),i=getOwn(contexts,a),i||(i=contexts[a]=req.s.newContext(a)),o&&i.configure(o),i.require(e,t,n)},req.config=function(e){return req(e)},req.nextTick="undefined"!=typeof setTimeout?function(e){setTimeout(e,4)}:function(e){e()},require||(require=req),req.version=version,req.jsExtRegExp=/^\/|:|\?|\.js$/,req.isBrowser=isBrowser,s=req.s={contexts:contexts,newContext:newContext},req({}),each(["toUrl","undef","defined","specified"],function(e){req[e]=function(){var t=contexts[defContextName];return t.require[e].apply(t,arguments)}}),isBrowser&&(head=s.head=document.getElementsByTagName("head")[0],baseElement=document.getElementsByTagName("base")[0],baseElement&&(head=s.head=baseElement.parentNode)),req.onError=defaultOnError,req.createNode=function(e,t,n){var r=e.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script");return r.type=e.scriptType||"text/javascript",r.charset="utf-8",r.async=!0,r},req.load=function(e,t,n){var r,i=e&&e.config||{};if(isBrowser)return r=req.createNode(i,t,n),r.setAttribute("data-requirecontext",e.contextName),r.setAttribute("data-requiremodule",t),!r.attachEvent||r.attachEvent.toString&&r.attachEvent.toString().indexOf("[native code")<0||isOpera?(r.addEventListener("load",e.onScriptLoad,!1),r.addEventListener("error",e.onScriptError,!1)):(useInteractive=!0,r.attachEvent("onreadystatechange",e.onScriptLoad)),r.src=n,i.onNodeCreated&&i.onNodeCreated(r,i,t,n),currentlyAddingScript=r,baseElement?head.insertBefore(r,baseElement):head.appendChild(r),currentlyAddingScript=null,r;if(isWebWorker)try{setTimeout(function(){},0),importScripts(n),e.completeLoad(t)}catch(o){e.onError(makeError("importscripts","importScripts failed for "+t+" at "+n,o,[t]))}},isBrowser&&!cfg.skipDataMain&&eachReverse(scripts(),function(e){return head||(head=e.parentNode),dataMain=e.getAttribute("data-main"),dataMain?(mainScript=dataMain,cfg.baseUrl||-1!==mainScript.indexOf("!")||(src=mainScript.split("/"),mainScript=src.pop(),subPath=src.length?src.join("/")+"/":"./",cfg.baseUrl=subPath),mainScript=mainScript.replace(jsSuffixRegExp,""),req.jsExtRegExp.test(mainScript)&&(mainScript=dataMain),cfg.deps=cfg.deps?cfg.deps.concat(mainScript):[mainScript],!0):void 0}),define=function(e,t,n){var r,i;"string"!=typeof e&&(n=t,t=e,e=null),isArray(t)||(n=t,t=null),!t&&isFunction(n)&&(t=[],n.length&&(n.toString().replace(commentRegExp,commentReplace).replace(cjsRequireRegExp,function(e,n){t.push(n)}),t=(1===n.length?["require"]:["require","exports","module"]).concat(t))),useInteractive&&(r=currentlyAddingScript||getInteractiveScript(),r&&(e||(e=r.getAttribute("data-requiremodule")),i=contexts[r.getAttribute("data-requirecontext")])),i?(i.defQueue.push([e,t,n]),i.defQueueMap[e]=!0):globalDefQueue.push([e,t,n])},define.amd={jQuery:!0},req.exec=function(text){return eval(text)},req(cfg)}}(this),define("requireLib",function(){}),define("bower_components/Atem-RequireJS-Config/tools",[],function(){"use strict";function copyItems(e,t){var n,r,i,o=Object.keys(e);for(n=0,r=o.length;r>n;n++)i=o[n],t[i]=e[i]}function copySetup(e,t,n){var r;for(r in e)n&&r in n||(e[r]instanceof Array&&t[r]instanceof Array?Array.prototype.push.apply(t[r],e[r]):"object"==typeof e[r]&&"object"==typeof t[r]?copyItems(e[r],t[r]):e[r]instanceof Array?t[r]=e[r].slice():"object"==typeof e[r]?(t[r]={},copyItems(e[r],t[r])):t[r]=e[r])}function configure(e,t,n){var r,i,o,a,s={};if(copySetup(e,s),copySetup(t,s,{bowerPrefix:1}),"bowerPrefix"in t&&"paths"in s)for(r in s.paths)s.paths[r]=s.paths[r].replace(/%bower%/g,t.bowerPrefix);if(hasGenerators&&"es6Variants"in s){for(i=0,o=s.es6Variants.length;o>i;i++){if(r=s.es6Variants[i],r in s.paths)throw new Error('es6Variant "'+r+'" is already key in requirejs config.path.');a=r.split("/"),a[0]in s.paths&&(a[0]=s.paths[a[0]]),a=a.join("/")+".es6",s.paths[r]=a}delete s.es6Variants}n.config(s)}var hasGenerators=!1;try{eval("(function *(){})()"),hasGenerators=!0}catch(err){}return{configure:configure,copyItems:copyItems,copySetup:copySetup}}),define("bower_components/Atem-RequireJS-Config/genericConfig",[],function(){"use strict";var e={paths:{"Atem-CPS":"%bower%/Atem-CPS/lib","Atem-CPS-whitelisting":"%bower%/Atem-CPS-whitelisting/lib","Atem-CPS-Toolkit":"%bower%/Atem-CPS-Toolkit/lib","Atem-Errors":"%bower%/Atem-Errors/lib","Atem-IO":"%bower%/Atem-IO/lib","Atem-Math-Tools":"%bower%/Atem-Math-Tools/lib","Atem-Pen-Case":"%bower%/Atem-Pen-Case/lib","Atem-Property-Language":"%bower%/Atem-Property-Language/lib","Atem-Logging":"%bower%/Atem-Logging/lib","Atem-MOM":"%bower%/Atem-MOM/lib","Atem-MOM-Toolkit":"%bower%/Atem-MOM-Toolkit/lib",obtain:"%bower%/obtainjs/lib",complex:"%bower%/complex/lib",gonzales:"%bower%/gonzales/amd",bloomfilter:"%bower%/bloomfilter.js/bloomfilter",ufojs:"%bower%/ufoJS/lib","util-logging":"%bower%/util-logging-amd/lib","metapolator-cpsLib":"%bower%/metapolator-cpsLib/lib",requireLib:"%bower%/requirejs/require","require/text":"%bower%/requirejs-text/text",yaml:"%bower%/js-yaml/dist/js-yaml.min",jszip:"%bower%/jszip/dist/jszip",EventEmitter:"%bower%/event-emitter.js/dist/event-emitter",opentype:"%bower%/opentype.js/dist/opentype.min",marked:"%bower%/marked/lib/marked",mustache:"%bower%/mustache.js/mustache",metapolator:"%bower%/metapolator/app/lib",BEF:"%bower%/Bauhaus-Emblem-Font/app/lib","Atem-CPS-Developer-Tool":"%bower%/Atem-CPS-Developer-Tool/app/lib"},es6Variants:["Atem-MOM/rendering/basics","Atem-MOM/export/UFOExporter","Atem-MOM/export/OTFExporter","Atem-MOM/import/UFOImporter"]};return e}),define("bower_components/Atem-RequireJS-Config/browserConfig",["./tools","./genericConfig"],function(e,t){"use strict";var n,r=(e.copyItems,e.configure),i=e.copySetup,o=Object.create(null);return i(t,o),n={paths:{"require/domReady":"%bower%/requirejs-domReady/domReady",angular:"%bower%/angular/angular",filesaver:"%bower%/file-saver.js/FileSaver",jquery:"%bower%/jquery/dist/jquery.min",d3:"%bower%/d3/d3.min","jquery-ui":"%bower%/jquery.ui/ui","angular-ui-sortable":"bower_components/angular-ui-sortable/sortable.min",path:"%bower%/path/path",util:"%bower%/util/util",socketio:"../socket.io/socket.io"},excludeShallow:["Atem-MOM/rendering/basics","Atem-MOM/export/UFOExporter","Atem-MOM/export/OTFExporter","Atem-MOM/import/UFOImporter"],shim:{angular:{exports:"angular"},"angular-ui-sortable":{deps:["jquery-ui/sortable","angular"]},yaml:{exports:"jsyaml"},socketio:{exports:"io"}}},i(n,o),r.bind(null,o)}),define("bootstrap",["bower_components/Atem-RequireJS-Config/browserConfig"],function(e){"use strict";var t={baseUrl:"lib",bowerPrefix:"bower_components",paths:{metapolator:"./"},shim:{angular:{deps:["jquery"],exports:"angular"}}};return e(t,require),require}),require(["bootstrap"],function(e){e(["main"],function(e){e()})}),define("init",function(){}),define("require/domReady",[],function(){"use strict";function e(e){var t;for(t=0;t<e.length;t+=1)e[t](l)}function t(){var t=c;u&&t.length&&(c=[],e(t))}function n(){u||(u=!0,a&&clearInterval(a),t())}function r(e){return u?e(l):c.push(e),r}var i,o,a,s="undefined"!=typeof window&&window.document,u=!s,l=s?document:null,c=[];if(s){if(document.addEventListener)document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1);else if(window.attachEvent){window.attachEvent("onload",n),o=document.createElement("div");try{i=null===window.frameElement}catch(h){}o.doScroll&&i&&window.external&&(a=setInterval(function(){try{o.doScroll(),n()}catch(e){}},30))}"complete"===document.readyState&&n()}return r.version="2.0.1",r.load=function(e,t,n,i){i.isBuild?n(null):r(n)},r}),!function(e,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){function n(e){var t=!!e&&"length"in e&&e.length,n=oe.type(e);return"function"===n||oe.isWindow(e)?!1:"array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e}function r(e,t,n){if(oe.isFunction(t))return oe.grep(e,function(e,r){return!!t.call(e,r,e)!==n});if(t.nodeType)return oe.grep(e,function(e){return e===t!==n});if("string"==typeof t){if(me.test(t))return oe.filter(t,e,n);t=oe.filter(t,e)}return oe.grep(e,function(e){return J.call(t,e)>-1!==n})}function i(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}function o(e){var t={};return oe.each(e.match(we)||[],function(e,n){t[n]=!0}),t}function a(){X.removeEventListener("DOMContentLoaded",a),e.removeEventListener("load",a),oe.ready()}function s(){this.expando=oe.expando+s.uid++}function u(e,t,n){var r;if(void 0===n&&1===e.nodeType)if(r="data-"+t.replace(Te,"-$&").toLowerCase(),n=e.getAttribute(r),"string"==typeof n){try{n="true"===n?!0:"false"===n?!1:"null"===n?null:+n+""===n?+n:Me.test(n)?oe.parseJSON(n):n}catch(i){}Pe.set(e,t,n)}else n=void 0;return n}function l(e,t,n,r){var i,o=1,a=20,s=r?function(){return r.cur()}:function(){return oe.css(e,t,"")},u=s(),l=n&&n[3]||(oe.cssNumber[t]?"":"px"),c=(oe.cssNumber[t]||"px"!==l&&+u)&&Oe.exec(oe.css(e,t));if(c&&c[3]!==l){l=l||c[3],n=n||[],c=+u||1;do o=o||".5",c/=o,oe.style(e,t,c+l);while(o!==(o=s()/u)&&1!==o&&--a)}return n&&(c=+c||+u||0,i=n[1]?c+(n[1]+1)*n[2]:+n[2],r&&(r.unit=l,r.start=c,r.end=i)),i}function c(e,t){var n="undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName(t||"*"):"undefined"!=typeof e.querySelectorAll?e.querySelectorAll(t||"*"):[];return void 0===t||t&&oe.nodeName(e,t)?oe.merge([e],n):n}function h(e,t){for(var n=0,r=e.length;r>n;n++)ke.set(e[n],"globalEval",!t||ke.get(t[n],"globalEval"))}function f(e,t,n,r,i){for(var o,a,s,u,l,f,p=t.createDocumentFragment(),d=[],m=0,g=e.length;g>m;m++)if(o=e[m],o||0===o)if("object"===oe.type(o))oe.merge(d,o.nodeType?[o]:o);else if(Fe.test(o)){for(a=a||p.appendChild(t.createElement("div")),s=(Ie.exec(o)||["",""])[1].toLowerCase(),u=je[s]||je._default,a.innerHTML=u[1]+oe.htmlPrefilter(o)+u[2],f=u[0];f--;)a=a.lastChild;oe.merge(d,a.childNodes),a=p.firstChild,a.textContent=""}else d.push(t.createTextNode(o));for(p.textContent="",m=0;o=d[m++];)if(r&&oe.inArray(o,r)>-1)i&&i.push(o);else if(l=oe.contains(o.ownerDocument,o),a=c(p.appendChild(o),"script"),l&&h(a),n)for(f=0;o=a[f++];)De.test(o.type||"")&&n.push(o);return p}function p(){return!0}function d(){return!1}function m(){try{return X.activeElement}catch(e){}}function g(e,t,n,r,i,o){var a,s;if("object"==typeof t){"string"!=typeof n&&(r=r||n,n=void 0);for(s in t)g(e,s,n,r,t[s],o);return e}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&("string"==typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),i===!1)i=d;else if(!i)return e;return 1===o&&(a=i,i=function(e){return oe().off(e),a.apply(this,arguments)},i.guid=a.guid||(a.guid=oe.guid++)),e.each(function(){oe.event.add(this,t,i,r,n)})}function v(e,t){return oe.nodeName(e,"table")&&oe.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function y(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function b(e){var t=Be.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function _(e,t){var n,r,i,o,a,s,u,l;if(1===t.nodeType){if(ke.hasData(e)&&(o=ke.access(e),a=ke.set(t,o),l=o.events)){delete a.handle,a.events={};for(i in l)for(n=0,r=l[i].length;r>n;n++)oe.event.add(t,i,l[i][n])}Pe.hasData(e)&&(s=Pe.access(e),u=oe.extend({},s),Pe.set(t,u))}}function w(e,t){var n=t.nodeName.toLowerCase();"input"===n&&Ne.test(e.type)?t.checked=e.checked:"input"!==n&&"textarea"!==n||(t.defaultValue=e.defaultValue)}function x(e,t,n,r){t=Z.apply([],t);var i,o,a,s,u,l,h=0,p=e.length,d=p-1,m=t[0],g=oe.isFunction(m);if(g||p>1&&"string"==typeof m&&!re.checkClone&&ze.test(m))return e.each(function(i){var o=e.eq(i);g&&(t[0]=m.call(this,i,o.html())),x(o,t,n,r)});if(p&&(i=f(t,e[0].ownerDocument,!1,e,r),o=i.firstChild,1===i.childNodes.length&&(i=o),o||r)){for(a=oe.map(c(i,"script"),y),s=a.length;p>h;h++)u=i,h!==d&&(u=oe.clone(u,!0,!0),s&&oe.merge(a,c(u,"script"))),n.call(e[h],u,h);if(s)for(l=a[a.length-1].ownerDocument,oe.map(a,b),h=0;s>h;h++)u=a[h],De.test(u.type||"")&&!ke.access(u,"globalEval")&&oe.contains(l,u)&&(u.src?oe._evalUrl&&oe._evalUrl(u.src):oe.globalEval(u.textContent.replace(He,"")))}return e}function S(e,t,n){for(var r,i=t?oe.filter(t,e):e,o=0;null!=(r=i[o]);o++)n||1!==r.nodeType||oe.cleanData(c(r)),r.parentNode&&(n&&oe.contains(r.ownerDocument,r)&&h(c(r,"script")),r.parentNode.removeChild(r));return e}function C(e,t){var n=oe(t.createElement(e)).appendTo(t.body),r=oe.css(n[0],"display");return n.detach(),r}function k(e){var t=X,n=We[e];return n||(n=C(e,t),"none"!==n&&n||(Ge=(Ge||oe("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement),t=Ge[0].contentDocument,t.write(),t.close(),n=C(e,t),Ge.detach()),We[e]=n),n}function P(e,t,n){var r,i,o,a,s=e.style;return n=n||Ke(e),a=n?n.getPropertyValue(t)||n[t]:void 0,""!==a&&void 0!==a||oe.contains(e.ownerDocument,e)||(a=oe.style(e,t)),n&&!re.pixelMarginRight()&&Xe.test(a)&&Ye.test(t)&&(r=s.width,i=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=r,s.minWidth=i,s.maxWidth=o),void 0!==a?a+"":a}function M(e,t){return{get:function(){return e()?void delete this.get:(this.get=t).apply(this,arguments)}}}function T(e){if(e in rt)return e;for(var t=e[0].toUpperCase()+e.slice(1),n=nt.length;n--;)if(e=nt[n]+t,e in rt)return e}function A(e,t,n){var r=Oe.exec(t);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):t}function O(e,t,n,r,i){for(var o=n===(r?"border":"content")?4:"width"===t?1:0,a=0;4>o;o+=2)"margin"===n&&(a+=oe.css(e,n+Ee[o],!0,i)),r?("content"===n&&(a-=oe.css(e,"padding"+Ee[o],!0,i)),"margin"!==n&&(a-=oe.css(e,"border"+Ee[o]+"Width",!0,i))):(a+=oe.css(e,"padding"+Ee[o],!0,i),"padding"!==n&&(a+=oe.css(e,"border"+Ee[o]+"Width",!0,i)));return a}function E(t,n,r){var i=!0,o="width"===n?t.offsetWidth:t.offsetHeight,a=Ke(t),s="border-box"===oe.css(t,"boxSizing",!1,a);if(X.msFullscreenElement&&e.top!==e&&t.getClientRects().length&&(o=Math.round(100*t.getBoundingClientRect()[n])),0>=o||null==o){if(o=P(t,n,a),(0>o||null==o)&&(o=t.style[n]),Xe.test(o))return o;i=s&&(re.boxSizingReliable()||o===t.style[n]),o=parseFloat(o)||0}return o+O(t,n,r||(s?"border":"content"),i,a)+"px"}function $(e,t){for(var n,r,i,o=[],a=0,s=e.length;s>a;a++)r=e[a],r.style&&(o[a]=ke.get(r,"olddisplay"),n=r.style.display,t?(o[a]||"none"!==n||(r.style.display=""),""===r.style.display&&$e(r)&&(o[a]=ke.access(r,"olddisplay",k(r.nodeName)))):(i=$e(r),"none"===n&&i||ke.set(r,"olddisplay",i?n:oe.css(r,"display"))));for(a=0;s>a;a++)r=e[a],r.style&&(t&&"none"!==r.style.display&&""!==r.style.display||(r.style.display=t?o[a]||"":"none"));return e}function N(e,t,n,r,i){return new N.prototype.init(e,t,n,r,i)}function I(){return e.setTimeout(function(){it=void 0}),it=oe.now()}function D(e,t){var n,r=0,i={height:e};for(t=t?1:0;4>r;r+=2-t)n=Ee[r],i["margin"+n]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function j(e,t,n){for(var r,i=(R.tweeners[t]||[]).concat(R.tweeners["*"]),o=0,a=i.length;a>o;o++)if(r=i[o].call(n,t,e))return r}function F(e,t,n){var r,i,o,a,s,u,l,c,h=this,f={},p=e.style,d=e.nodeType&&$e(e),m=ke.get(e,"fxshow");n.queue||(s=oe._queueHooks(e,"fx"),null==s.unqueued&&(s.unqueued=0,u=s.empty.fire,s.empty.fire=function(){s.unqueued||u()}),s.unqueued++,h.always(function(){h.always(function(){s.unqueued--,oe.queue(e,"fx").length||s.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],l=oe.css(e,"display"),c="none"===l?ke.get(e,"olddisplay")||k(e.nodeName):l,"inline"===c&&"none"===oe.css(e,"float")&&(p.display="inline-block")),n.overflow&&(p.overflow="hidden",h.always(function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]}));for(r in t)if(i=t[r],at.exec(i)){if(delete t[r],o=o||"toggle"===i,i===(d?"hide":"show")){if("show"!==i||!m||void 0===m[r])continue;d=!0}f[r]=m&&m[r]||oe.style(e,r)}else l=void 0;if(oe.isEmptyObject(f))"inline"===("none"===l?k(e.nodeName):l)&&(p.display=l);else{m?"hidden"in m&&(d=m.hidden):m=ke.access(e,"fxshow",{}),o&&(m.hidden=!d),d?oe(e).show():h.done(function(){oe(e).hide()}),h.done(function(){var t;ke.remove(e,"fxshow");for(t in f)oe.style(e,t,f[t])});for(r in f)a=j(d?m[r]:0,r,h),r in m||(m[r]=a.start,d&&(a.end=a.start,a.start="width"===r||"height"===r?1:0))}}function L(e,t){var n,r,i,o,a;for(n in e)if(r=oe.camelCase(n),i=t[r],o=e[n],oe.isArray(o)&&(i=o[1],o=e[n]=o[0]),n!==r&&(e[r]=o,delete e[n]),a=oe.cssHooks[r],a&&"expand"in a){o=a.expand(o),delete e[r];for(n in o)n in e||(e[n]=o[n],t[n]=i)}else t[r]=i}function R(e,t,n){var r,i,o=0,a=R.prefilters.length,s=oe.Deferred().always(function(){delete u.elem}),u=function(){if(i)return!1;for(var t=it||I(),n=Math.max(0,l.startTime+l.duration-t),r=n/l.duration||0,o=1-r,a=0,u=l.tweens.length;u>a;a++)l.tweens[a].run(o);return s.notifyWith(e,[l,o,n]),1>o&&u?n:(s.resolveWith(e,[l]),!1)},l=s.promise({elem:e,props:oe.extend({},t),opts:oe.extend(!0,{specialEasing:{},easing:oe.easing._default},n),originalProperties:t,originalOptions:n,startTime:it||I(),duration:n.duration,tweens:[],createTween:function(t,n){var r=oe.Tween(e,l.opts,t,n,l.opts.specialEasing[t]||l.opts.easing);return l.tweens.push(r),r},stop:function(t){
var n=0,r=t?l.tweens.length:0;if(i)return this;for(i=!0;r>n;n++)l.tweens[n].run(1);return t?(s.notifyWith(e,[l,1,0]),s.resolveWith(e,[l,t])):s.rejectWith(e,[l,t]),this}}),c=l.props;for(L(c,l.opts.specialEasing);a>o;o++)if(r=R.prefilters[o].call(l,e,c,l.opts))return oe.isFunction(r.stop)&&(oe._queueHooks(l.elem,l.opts.queue).stop=oe.proxy(r.stop,r)),r;return oe.map(c,j,l),oe.isFunction(l.opts.start)&&l.opts.start.call(e,l),oe.fx.timer(oe.extend(u,{elem:e,anim:l,queue:l.opts.queue})),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always)}function U(e){return e.getAttribute&&e.getAttribute("class")||""}function V(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,i=0,o=t.toLowerCase().match(we)||[];if(oe.isFunction(n))for(;r=o[i++];)"+"===r[0]?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function q(e,t,n,r){function i(s){var u;return o[s]=!0,oe.each(e[s]||[],function(e,s){var l=s(t,n,r);return"string"!=typeof l||a||o[l]?a?!(u=l):void 0:(t.dataTypes.unshift(l),i(l),!1)}),u}var o={},a=e===Pt;return i(t.dataTypes[0])||!o["*"]&&i("*")}function z(e,t){var n,r,i=oe.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((i[n]?e:r||(r={}))[n]=t[n]);return r&&oe.extend(!0,e,r),e}function B(e,t,n){for(var r,i,o,a,s=e.contents,u=e.dataTypes;"*"===u[0];)u.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(i in s)if(s[i]&&s[i].test(r)){u.unshift(i);break}if(u[0]in n)o=u[0];else{for(i in n){if(!u[0]||e.converters[i+" "+u[0]]){o=i;break}a||(a=i)}o=o||a}return o?(o!==u[0]&&u.unshift(o),n[o]):void 0}function H(e,t,n,r){var i,o,a,s,u,l={},c=e.dataTypes.slice();if(c[1])for(a in e.converters)l[a.toLowerCase()]=e.converters[a];for(o=c.shift();o;)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!u&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),u=o,o=c.shift())if("*"===o)o=u;else if("*"!==u&&u!==o){if(a=l[u+" "+o]||l["* "+o],!a)for(i in l)if(s=i.split(" "),s[1]===o&&(a=l[u+" "+s[0]]||l["* "+s[0]])){a===!0?a=l[i]:l[i]!==!0&&(o=s[0],c.unshift(s[1]));break}if(a!==!0)if(a&&e["throws"])t=a(t);else try{t=a(t)}catch(h){return{state:"parsererror",error:a?h:"No conversion from "+u+" to "+o}}}return{state:"success",data:t}}function G(e,t,n,r){var i;if(oe.isArray(t))oe.each(t,function(t,i){n||Ot.test(e)?r(e,i):G(e+"["+("object"==typeof i&&null!=i?t:"")+"]",i,n,r)});else if(n||"object"!==oe.type(t))r(e,t);else for(i in t)G(e+"["+i+"]",t[i],n,r)}function W(e){return oe.isWindow(e)?e:9===e.nodeType&&e.defaultView}var Y=[],X=e.document,K=Y.slice,Z=Y.concat,Q=Y.push,J=Y.indexOf,ee={},te=ee.toString,ne=ee.hasOwnProperty,re={},ie="2.2.3",oe=function(e,t){return new oe.fn.init(e,t)},ae=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,se=/^-ms-/,ue=/-([\da-z])/gi,le=function(e,t){return t.toUpperCase()};oe.fn=oe.prototype={jquery:ie,constructor:oe,selector:"",length:0,toArray:function(){return K.call(this)},get:function(e){return null!=e?0>e?this[e+this.length]:this[e]:K.call(this)},pushStack:function(e){var t=oe.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e){return oe.each(this,e)},map:function(e){return this.pushStack(oe.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(K.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(0>e?t:0);return this.pushStack(n>=0&&t>n?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:Q,sort:Y.sort,splice:Y.splice},oe.extend=oe.fn.extend=function(){var e,t,n,r,i,o,a=arguments[0]||{},s=1,u=arguments.length,l=!1;for("boolean"==typeof a&&(l=a,a=arguments[s]||{},s++),"object"==typeof a||oe.isFunction(a)||(a={}),s===u&&(a=this,s--);u>s;s++)if(null!=(e=arguments[s]))for(t in e)n=a[t],r=e[t],a!==r&&(l&&r&&(oe.isPlainObject(r)||(i=oe.isArray(r)))?(i?(i=!1,o=n&&oe.isArray(n)?n:[]):o=n&&oe.isPlainObject(n)?n:{},a[t]=oe.extend(l,o,r)):void 0!==r&&(a[t]=r));return a},oe.extend({expando:"jQuery"+(ie+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===oe.type(e)},isArray:Array.isArray,isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){var t=e&&e.toString();return!oe.isArray(e)&&t-parseFloat(t)+1>=0},isPlainObject:function(e){var t;if("object"!==oe.type(e)||e.nodeType||oe.isWindow(e))return!1;if(e.constructor&&!ne.call(e,"constructor")&&!ne.call(e.constructor.prototype||{},"isPrototypeOf"))return!1;for(t in e);return void 0===t||ne.call(e,t)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?ee[te.call(e)]||"object":typeof e},globalEval:function(e){var t,n=eval;e=oe.trim(e),e&&(1===e.indexOf("use strict")?(t=X.createElement("script"),t.text=e,X.head.appendChild(t).parentNode.removeChild(t)):n(e))},camelCase:function(e){return e.replace(se,"ms-").replace(ue,le)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t){var r,i=0;if(n(e))for(r=e.length;r>i&&t.call(e[i],i,e[i])!==!1;i++);else for(i in e)if(t.call(e[i],i,e[i])===!1)break;return e},trim:function(e){return null==e?"":(e+"").replace(ae,"")},makeArray:function(e,t){var r=t||[];return null!=e&&(n(Object(e))?oe.merge(r,"string"==typeof e?[e]:e):Q.call(r,e)),r},inArray:function(e,t,n){return null==t?-1:J.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;n>r;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){for(var r,i=[],o=0,a=e.length,s=!n;a>o;o++)r=!t(e[o],o),r!==s&&i.push(e[o]);return i},map:function(e,t,r){var i,o,a=0,s=[];if(n(e))for(i=e.length;i>a;a++)o=t(e[a],a,r),null!=o&&s.push(o);else for(a in e)o=t(e[a],a,r),null!=o&&s.push(o);return Z.apply([],s)},guid:1,proxy:function(e,t){var n,r,i;return"string"==typeof t&&(n=e[t],t=e,e=n),oe.isFunction(e)?(r=K.call(arguments,2),i=function(){return e.apply(t||this,r.concat(K.call(arguments)))},i.guid=e.guid=e.guid||oe.guid++,i):void 0},now:Date.now,support:re}),"function"==typeof Symbol&&(oe.fn[Symbol.iterator]=Y[Symbol.iterator]),oe.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){ee["[object "+t+"]"]=t.toLowerCase()});var ce=function(e){function t(e,t,n,r){var i,o,a,s,u,l,h,p,d=t&&t.ownerDocument,m=t?t.nodeType:9;if(n=n||[],"string"!=typeof e||!e||1!==m&&9!==m&&11!==m)return n;if(!r&&((t?t.ownerDocument||t:U)!==$&&E(t),t=t||$,I)){if(11!==m&&(l=ve.exec(e)))if(i=l[1]){if(9===m){if(!(a=t.getElementById(i)))return n;if(a.id===i)return n.push(a),n}else if(d&&(a=d.getElementById(i))&&L(t,a)&&a.id===i)return n.push(a),n}else{if(l[2])return Q.apply(n,t.getElementsByTagName(e)),n;if((i=l[3])&&w.getElementsByClassName&&t.getElementsByClassName)return Q.apply(n,t.getElementsByClassName(i)),n}if(w.qsa&&!H[e+" "]&&(!D||!D.test(e))){if(1!==m)d=t,p=e;else if("object"!==t.nodeName.toLowerCase()){for((s=t.getAttribute("id"))?s=s.replace(be,"\\$&"):t.setAttribute("id",s=R),h=k(e),o=h.length,u=fe.test(s)?"#"+s:"[id='"+s+"']";o--;)h[o]=u+" "+f(h[o]);p=h.join(","),d=ye.test(e)&&c(t.parentNode)||t}if(p)try{return Q.apply(n,d.querySelectorAll(p)),n}catch(g){}finally{s===R&&t.removeAttribute("id")}}}return M(e.replace(se,"$1"),t,n,r)}function n(){function e(n,r){return t.push(n+" ")>x.cacheLength&&delete e[t.shift()],e[n+" "]=r}var t=[];return e}function r(e){return e[R]=!0,e}function i(e){var t=$.createElement("div");try{return!!e(t)}catch(n){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function o(e,t){for(var n=e.split("|"),r=n.length;r--;)x.attrHandle[n[r]]=t}function a(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||W)-(~e.sourceIndex||W);if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function s(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function u(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function l(e){return r(function(t){return t=+t,r(function(n,r){for(var i,o=e([],n.length,t),a=o.length;a--;)n[i=o[a]]&&(n[i]=!(r[i]=n[i]))})})}function c(e){return e&&"undefined"!=typeof e.getElementsByTagName&&e}function h(){}function f(e){for(var t=0,n=e.length,r="";n>t;t++)r+=e[t].value;return r}function p(e,t,n){var r=t.dir,i=n&&"parentNode"===r,o=q++;return t.first?function(t,n,o){for(;t=t[r];)if(1===t.nodeType||i)return e(t,n,o)}:function(t,n,a){var s,u,l,c=[V,o];if(a){for(;t=t[r];)if((1===t.nodeType||i)&&e(t,n,a))return!0}else for(;t=t[r];)if(1===t.nodeType||i){if(l=t[R]||(t[R]={}),u=l[t.uniqueID]||(l[t.uniqueID]={}),(s=u[r])&&s[0]===V&&s[1]===o)return c[2]=s[2];if(u[r]=c,c[2]=e(t,n,a))return!0}}}function d(e){return e.length>1?function(t,n,r){for(var i=e.length;i--;)if(!e[i](t,n,r))return!1;return!0}:e[0]}function m(e,n,r){for(var i=0,o=n.length;o>i;i++)t(e,n[i],r);return r}function g(e,t,n,r,i){for(var o,a=[],s=0,u=e.length,l=null!=t;u>s;s++)(o=e[s])&&(n&&!n(o,r,i)||(a.push(o),l&&t.push(s)));return a}function v(e,t,n,i,o,a){return i&&!i[R]&&(i=v(i)),o&&!o[R]&&(o=v(o,a)),r(function(r,a,s,u){var l,c,h,f=[],p=[],d=a.length,v=r||m(t||"*",s.nodeType?[s]:s,[]),y=!e||!r&&t?v:g(v,f,e,s,u),b=n?o||(r?e:d||i)?[]:a:y;if(n&&n(y,b,s,u),i)for(l=g(b,p),i(l,[],s,u),c=l.length;c--;)(h=l[c])&&(b[p[c]]=!(y[p[c]]=h));if(r){if(o||e){if(o){for(l=[],c=b.length;c--;)(h=b[c])&&l.push(y[c]=h);o(null,b=[],l,u)}for(c=b.length;c--;)(h=b[c])&&(l=o?ee(r,h):f[c])>-1&&(r[l]=!(a[l]=h))}}else b=g(b===a?b.splice(d,b.length):b),o?o(null,a,b,u):Q.apply(a,b)})}function y(e){for(var t,n,r,i=e.length,o=x.relative[e[0].type],a=o||x.relative[" "],s=o?1:0,u=p(function(e){return e===t},a,!0),l=p(function(e){return ee(t,e)>-1},a,!0),c=[function(e,n,r){var i=!o&&(r||n!==T)||((t=n).nodeType?u(e,n,r):l(e,n,r));return t=null,i}];i>s;s++)if(n=x.relative[e[s].type])c=[p(d(c),n)];else{if(n=x.filter[e[s].type].apply(null,e[s].matches),n[R]){for(r=++s;i>r&&!x.relative[e[r].type];r++);return v(s>1&&d(c),s>1&&f(e.slice(0,s-1).concat({value:" "===e[s-2].type?"*":""})).replace(se,"$1"),n,r>s&&y(e.slice(s,r)),i>r&&y(e=e.slice(r)),i>r&&f(e))}c.push(n)}return d(c)}function b(e,n){var i=n.length>0,o=e.length>0,a=function(r,a,s,u,l){var c,h,f,p=0,d="0",m=r&&[],v=[],y=T,b=r||o&&x.find.TAG("*",l),_=V+=null==y?1:Math.random()||.1,w=b.length;for(l&&(T=a===$||a||l);d!==w&&null!=(c=b[d]);d++){if(o&&c){for(h=0,a||c.ownerDocument===$||(E(c),s=!I);f=e[h++];)if(f(c,a||$,s)){u.push(c);break}l&&(V=_)}i&&((c=!f&&c)&&p--,r&&m.push(c))}if(p+=d,i&&d!==p){for(h=0;f=n[h++];)f(m,v,a,s);if(r){if(p>0)for(;d--;)m[d]||v[d]||(v[d]=K.call(u));v=g(v)}Q.apply(u,v),l&&!r&&v.length>0&&p+n.length>1&&t.uniqueSort(u)}return l&&(V=_,T=y),m};return i?r(a):a}var _,w,x,S,C,k,P,M,T,A,O,E,$,N,I,D,j,F,L,R="sizzle"+1*new Date,U=e.document,V=0,q=0,z=n(),B=n(),H=n(),G=function(e,t){return e===t&&(O=!0),0},W=1<<31,Y={}.hasOwnProperty,X=[],K=X.pop,Z=X.push,Q=X.push,J=X.slice,ee=function(e,t){for(var n=0,r=e.length;r>n;n++)if(e[n]===t)return n;return-1},te="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ne="[\\x20\\t\\r\\n\\f]",re="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",ie="\\["+ne+"*("+re+")(?:"+ne+"*([*^$|!~]?=)"+ne+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+re+"))|)"+ne+"*\\]",oe=":("+re+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+ie+")*)|.*)\\)|)",ae=new RegExp(ne+"+","g"),se=new RegExp("^"+ne+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ne+"+$","g"),ue=new RegExp("^"+ne+"*,"+ne+"*"),le=new RegExp("^"+ne+"*([>+~]|"+ne+")"+ne+"*"),ce=new RegExp("="+ne+"*([^\\]'\"]*?)"+ne+"*\\]","g"),he=new RegExp(oe),fe=new RegExp("^"+re+"$"),pe={ID:new RegExp("^#("+re+")"),CLASS:new RegExp("^\\.("+re+")"),TAG:new RegExp("^("+re+"|[*])"),ATTR:new RegExp("^"+ie),PSEUDO:new RegExp("^"+oe),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ne+"*(even|odd|(([+-]|)(\\d*)n|)"+ne+"*(?:([+-]|)"+ne+"*(\\d+)|))"+ne+"*\\)|)","i"),bool:new RegExp("^(?:"+te+")$","i"),needsContext:new RegExp("^"+ne+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ne+"*((?:-\\d)?\\d*)"+ne+"*\\)|)(?=[^-]|$)","i")},de=/^(?:input|select|textarea|button)$/i,me=/^h\d$/i,ge=/^[^{]+\{\s*\[native \w/,ve=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ye=/[+~]/,be=/'|\\/g,_e=new RegExp("\\\\([\\da-f]{1,6}"+ne+"?|("+ne+")|.)","ig"),we=function(e,t,n){var r="0x"+t-65536;return r!==r||n?t:0>r?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)},xe=function(){E()};try{Q.apply(X=J.call(U.childNodes),U.childNodes),X[U.childNodes.length].nodeType}catch(Se){Q={apply:X.length?function(e,t){Z.apply(e,J.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}w=t.support={},C=t.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},E=t.setDocument=function(e){var t,n,r=e?e.ownerDocument||e:U;return r!==$&&9===r.nodeType&&r.documentElement?($=r,N=$.documentElement,I=!C($),(n=$.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener("unload",xe,!1):n.attachEvent&&n.attachEvent("onunload",xe)),w.attributes=i(function(e){return e.className="i",!e.getAttribute("className")}),w.getElementsByTagName=i(function(e){return e.appendChild($.createComment("")),!e.getElementsByTagName("*").length}),w.getElementsByClassName=ge.test($.getElementsByClassName),w.getById=i(function(e){return N.appendChild(e).id=R,!$.getElementsByName||!$.getElementsByName(R).length}),w.getById?(x.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&I){var n=t.getElementById(e);return n?[n]:[]}},x.filter.ID=function(e){var t=e.replace(_e,we);return function(e){return e.getAttribute("id")===t}}):(delete x.find.ID,x.filter.ID=function(e){var t=e.replace(_e,we);return function(e){var n="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}}),x.find.TAG=w.getElementsByTagName?function(e,t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e):w.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if("*"===e){for(;n=o[i++];)1===n.nodeType&&r.push(n);return r}return o},x.find.CLASS=w.getElementsByClassName&&function(e,t){return"undefined"!=typeof t.getElementsByClassName&&I?t.getElementsByClassName(e):void 0},j=[],D=[],(w.qsa=ge.test($.querySelectorAll))&&(i(function(e){N.appendChild(e).innerHTML="<a id='"+R+"'></a><select id='"+R+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&D.push("[*^$]="+ne+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||D.push("\\["+ne+"*(?:value|"+te+")"),e.querySelectorAll("[id~="+R+"-]").length||D.push("~="),e.querySelectorAll(":checked").length||D.push(":checked"),e.querySelectorAll("a#"+R+"+*").length||D.push(".#.+[+~]")}),i(function(e){var t=$.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&D.push("name"+ne+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||D.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),D.push(",.*:")})),(w.matchesSelector=ge.test(F=N.matches||N.webkitMatchesSelector||N.mozMatchesSelector||N.oMatchesSelector||N.msMatchesSelector))&&i(function(e){w.disconnectedMatch=F.call(e,"div"),F.call(e,"[s!='']:x"),j.push("!=",oe)}),D=D.length&&new RegExp(D.join("|")),j=j.length&&new RegExp(j.join("|")),t=ge.test(N.compareDocumentPosition),L=t||ge.test(N.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},G=t?function(e,t){if(e===t)return O=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n?n:(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&n||!w.sortDetached&&t.compareDocumentPosition(e)===n?e===$||e.ownerDocument===U&&L(U,e)?-1:t===$||t.ownerDocument===U&&L(U,t)?1:A?ee(A,e)-ee(A,t):0:4&n?-1:1)}:function(e,t){if(e===t)return O=!0,0;var n,r=0,i=e.parentNode,o=t.parentNode,s=[e],u=[t];if(!i||!o)return e===$?-1:t===$?1:i?-1:o?1:A?ee(A,e)-ee(A,t):0;if(i===o)return a(e,t);for(n=e;n=n.parentNode;)s.unshift(n);for(n=t;n=n.parentNode;)u.unshift(n);for(;s[r]===u[r];)r++;return r?a(s[r],u[r]):s[r]===U?-1:u[r]===U?1:0},$):$},t.matches=function(e,n){return t(e,null,null,n)},t.matchesSelector=function(e,n){if((e.ownerDocument||e)!==$&&E(e),n=n.replace(ce,"='$1']"),w.matchesSelector&&I&&!H[n+" "]&&(!j||!j.test(n))&&(!D||!D.test(n)))try{var r=F.call(e,n);if(r||w.disconnectedMatch||e.document&&11!==e.document.nodeType)return r}catch(i){}return t(n,$,null,[e]).length>0},t.contains=function(e,t){return(e.ownerDocument||e)!==$&&E(e),L(e,t)},t.attr=function(e,t){(e.ownerDocument||e)!==$&&E(e);var n=x.attrHandle[t.toLowerCase()],r=n&&Y.call(x.attrHandle,t.toLowerCase())?n(e,t,!I):void 0;return void 0!==r?r:w.attributes||!I?e.getAttribute(t):(r=e.getAttributeNode(t))&&r.specified?r.value:null},t.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},t.uniqueSort=function(e){var t,n=[],r=0,i=0;if(O=!w.detectDuplicates,A=!w.sortStable&&e.slice(0),e.sort(G),O){for(;t=e[i++];)t===e[i]&&(r=n.push(i));for(;r--;)e.splice(n[r],1)}return A=null,e},S=t.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=S(e)}else if(3===i||4===i)return e.nodeValue}else for(;t=e[r++];)n+=S(t);return n},x=t.selectors={cacheLength:50,createPseudo:r,match:pe,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(_e,we),e[3]=(e[3]||e[4]||e[5]||"").replace(_e,we),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||t.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&t.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return pe.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&he.test(n)&&(t=k(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(_e,we).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=z[e+" "];return t||(t=new RegExp("(^|"+ne+")"+e+"("+ne+"|$)"))&&z(e,function(e){return t.test("string"==typeof e.className&&e.className||"undefined"!=typeof e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,n,r){return function(i){var o=t.attr(i,e);return null==o?"!="===n:n?(o+="","="===n?o===r:"!="===n?o!==r:"^="===n?r&&0===o.indexOf(r):"*="===n?r&&o.indexOf(r)>-1:"$="===n?r&&o.slice(-r.length)===r:"~="===n?(" "+o.replace(ae," ")+" ").indexOf(r)>-1:"|="===n?o===r||o.slice(0,r.length+1)===r+"-":!1):!0}},CHILD:function(e,t,n,r,i){var o="nth"!==e.slice(0,3),a="last"!==e.slice(-4),s="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,u){var l,c,h,f,p,d,m=o!==a?"nextSibling":"previousSibling",g=t.parentNode,v=s&&t.nodeName.toLowerCase(),y=!u&&!s,b=!1;if(g){if(o){for(;m;){for(f=t;f=f[m];)if(s?f.nodeName.toLowerCase()===v:1===f.nodeType)return!1;d=m="only"===e&&!d&&"nextSibling"}return!0}if(d=[a?g.firstChild:g.lastChild],a&&y){for(f=g,h=f[R]||(f[R]={}),c=h[f.uniqueID]||(h[f.uniqueID]={}),l=c[e]||[],p=l[0]===V&&l[1],b=p&&l[2],f=p&&g.childNodes[p];f=++p&&f&&f[m]||(b=p=0)||d.pop();)if(1===f.nodeType&&++b&&f===t){c[e]=[V,p,b];break}}else if(y&&(f=t,h=f[R]||(f[R]={}),c=h[f.uniqueID]||(h[f.uniqueID]={}),l=c[e]||[],p=l[0]===V&&l[1],b=p),b===!1)for(;(f=++p&&f&&f[m]||(b=p=0)||d.pop())&&((s?f.nodeName.toLowerCase()!==v:1!==f.nodeType)||!++b||(y&&(h=f[R]||(f[R]={}),c=h[f.uniqueID]||(h[f.uniqueID]={}),c[e]=[V,b]),f!==t)););return b-=i,b===r||b%r===0&&b/r>=0}}},PSEUDO:function(e,n){var i,o=x.pseudos[e]||x.setFilters[e.toLowerCase()]||t.error("unsupported pseudo: "+e);return o[R]?o(n):o.length>1?(i=[e,e,"",n],x.setFilters.hasOwnProperty(e.toLowerCase())?r(function(e,t){for(var r,i=o(e,n),a=i.length;a--;)r=ee(e,i[a]),e[r]=!(t[r]=i[a])}):function(e){return o(e,0,i)}):o}},pseudos:{not:r(function(e){var t=[],n=[],i=P(e.replace(se,"$1"));return i[R]?r(function(e,t,n,r){for(var o,a=i(e,null,r,[]),s=e.length;s--;)(o=a[s])&&(e[s]=!(t[s]=o))}):function(e,r,o){return t[0]=e,i(t,null,o,n),t[0]=null,!n.pop()}}),has:r(function(e){return function(n){return t(e,n).length>0}}),contains:r(function(e){return e=e.replace(_e,we),function(t){return(t.textContent||t.innerText||S(t)).indexOf(e)>-1}}),lang:r(function(e){return fe.test(e||"")||t.error("unsupported lang: "+e),e=e.replace(_e,we).toLowerCase(),function(t){var n;do if(n=I?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return n=n.toLowerCase(),n===e||0===n.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===N},focus:function(e){return e===$.activeElement&&(!$.hasFocus||$.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!x.pseudos.empty(e)},header:function(e){return me.test(e.nodeName)},input:function(e){return de.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:l(function(){return[0]}),last:l(function(e,t){return[t-1]}),eq:l(function(e,t,n){return[0>n?n+t:n]}),even:l(function(e,t){for(var n=0;t>n;n+=2)e.push(n);return e}),odd:l(function(e,t){for(var n=1;t>n;n+=2)e.push(n);return e}),lt:l(function(e,t,n){for(var r=0>n?n+t:n;--r>=0;)e.push(r);return e}),gt:l(function(e,t,n){for(var r=0>n?n+t:n;++r<t;)e.push(r);return e})}},x.pseudos.nth=x.pseudos.eq;for(_ in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})x.pseudos[_]=s(_);for(_ in{submit:!0,reset:!0})x.pseudos[_]=u(_);return h.prototype=x.filters=x.pseudos,x.setFilters=new h,k=t.tokenize=function(e,n){var r,i,o,a,s,u,l,c=B[e+" "];if(c)return n?0:c.slice(0);for(s=e,u=[],l=x.preFilter;s;){r&&!(i=ue.exec(s))||(i&&(s=s.slice(i[0].length)||s),u.push(o=[])),r=!1,(i=le.exec(s))&&(r=i.shift(),o.push({value:r,type:i[0].replace(se," ")}),s=s.slice(r.length));for(a in x.filter)!(i=pe[a].exec(s))||l[a]&&!(i=l[a](i))||(r=i.shift(),o.push({value:r,type:a,matches:i}),s=s.slice(r.length));if(!r)break}return n?s.length:s?t.error(e):B(e,u).slice(0)},P=t.compile=function(e,t){var n,r=[],i=[],o=H[e+" "];if(!o){for(t||(t=k(e)),n=t.length;n--;)o=y(t[n]),o[R]?r.push(o):i.push(o);o=H(e,b(i,r)),o.selector=e}return o},M=t.select=function(e,t,n,r){var i,o,a,s,u,l="function"==typeof e&&e,h=!r&&k(e=l.selector||e);if(n=n||[],1===h.length){if(o=h[0]=h[0].slice(0),o.length>2&&"ID"===(a=o[0]).type&&w.getById&&9===t.nodeType&&I&&x.relative[o[1].type]){if(t=(x.find.ID(a.matches[0].replace(_e,we),t)||[])[0],!t)return n;l&&(t=t.parentNode),e=e.slice(o.shift().value.length)}for(i=pe.needsContext.test(e)?0:o.length;i--&&(a=o[i],!x.relative[s=a.type]);)if((u=x.find[s])&&(r=u(a.matches[0].replace(_e,we),ye.test(o[0].type)&&c(t.parentNode)||t))){if(o.splice(i,1),e=r.length&&f(o),!e)return Q.apply(n,r),n;break}}return(l||P(e,h))(r,t,!I,n,!t||ye.test(e)&&c(t.parentNode)||t),n},w.sortStable=R.split("").sort(G).join("")===R,w.detectDuplicates=!!O,E(),w.sortDetached=i(function(e){return 1&e.compareDocumentPosition($.createElement("div"))}),i(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||o("type|href|height|width",function(e,t,n){return n?void 0:e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),w.attributes&&i(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||o("value",function(e,t,n){return n||"input"!==e.nodeName.toLowerCase()?void 0:e.defaultValue}),i(function(e){return null==e.getAttribute("disabled")})||o(te,function(e,t,n){var r;return n?void 0:e[t]===!0?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),t}(e);oe.find=ce,oe.expr=ce.selectors,oe.expr[":"]=oe.expr.pseudos,oe.uniqueSort=oe.unique=ce.uniqueSort,oe.text=ce.getText,oe.isXMLDoc=ce.isXML,oe.contains=ce.contains;var he=function(e,t,n){for(var r=[],i=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(i&&oe(e).is(n))break;r.push(e)}return r},fe=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},pe=oe.expr.match.needsContext,de=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,me=/^.[^:#\[\.,]*$/;oe.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?oe.find.matchesSelector(r,e)?[r]:[]:oe.find.matches(e,oe.grep(t,function(e){return 1===e.nodeType}))},oe.fn.extend({find:function(e){var t,n=this.length,r=[],i=this;if("string"!=typeof e)return this.pushStack(oe(e).filter(function(){for(t=0;n>t;t++)if(oe.contains(i[t],this))return!0}));for(t=0;n>t;t++)oe.find(e,i[t],r);return r=this.pushStack(n>1?oe.unique(r):r),r.selector=this.selector?this.selector+" "+e:e,r},filter:function(e){return this.pushStack(r(this,e||[],!1))},not:function(e){return this.pushStack(r(this,e||[],!0))},is:function(e){return!!r(this,"string"==typeof e&&pe.test(e)?oe(e):e||[],!1).length}});var ge,ve=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,ye=oe.fn.init=function(e,t,n){var r,i;if(!e)return this;if(n=n||ge,"string"==typeof e){if(r="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:ve.exec(e),!r||!r[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof oe?t[0]:t,oe.merge(this,oe.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:X,!0)),de.test(r[1])&&oe.isPlainObject(t))for(r in t)oe.isFunction(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return i=X.getElementById(r[2]),i&&i.parentNode&&(this.length=1,this[0]=i),this.context=X,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):oe.isFunction(e)?void 0!==n.ready?n.ready(e):e(oe):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),oe.makeArray(e,this))};ye.prototype=oe.fn,ge=oe(X);var be=/^(?:parents|prev(?:Until|All))/,_e={children:!0,contents:!0,next:!0,prev:!0};oe.fn.extend({has:function(e){var t=oe(e,this),n=t.length;return this.filter(function(){for(var e=0;n>e;e++)if(oe.contains(this,t[e]))return!0})},closest:function(e,t){for(var n,r=0,i=this.length,o=[],a=pe.test(e)||"string"!=typeof e?oe(e,t||this.context):0;i>r;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?a.index(n)>-1:1===n.nodeType&&oe.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(o.length>1?oe.uniqueSort(o):o)},index:function(e){return e?"string"==typeof e?J.call(oe(e),this[0]):J.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(oe.uniqueSort(oe.merge(this.get(),oe(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),oe.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return he(e,"parentNode")},parentsUntil:function(e,t,n){return he(e,"parentNode",n)},next:function(e){return i(e,"nextSibling")},prev:function(e){return i(e,"previousSibling")},nextAll:function(e){return he(e,"nextSibling")},prevAll:function(e){return he(e,"previousSibling")},nextUntil:function(e,t,n){return he(e,"nextSibling",n)},prevUntil:function(e,t,n){return he(e,"previousSibling",n)},siblings:function(e){return fe((e.parentNode||{}).firstChild,e)},children:function(e){return fe(e.firstChild)},contents:function(e){return e.contentDocument||oe.merge([],e.childNodes)}},function(e,t){oe.fn[e]=function(n,r){var i=oe.map(this,t,n);return"Until"!==e.slice(-5)&&(r=n),r&&"string"==typeof r&&(i=oe.filter(r,i)),this.length>1&&(_e[e]||oe.uniqueSort(i),be.test(e)&&i.reverse()),this.pushStack(i)}});var we=/\S+/g;oe.Callbacks=function(e){e="string"==typeof e?o(e):oe.extend({},e);var t,n,r,i,a=[],s=[],u=-1,l=function(){for(i=e.once,r=t=!0;s.length;u=-1)for(n=s.shift();++u<a.length;)a[u].apply(n[0],n[1])===!1&&e.stopOnFalse&&(u=a.length,n=!1);e.memory||(n=!1),t=!1,i&&(a=n?[]:"")},c={add:function(){return a&&(n&&!t&&(u=a.length-1,s.push(n)),function r(t){oe.each(t,function(t,n){oe.isFunction(n)?e.unique&&c.has(n)||a.push(n):n&&n.length&&"string"!==oe.type(n)&&r(n)})}(arguments),n&&!t&&l()),this},remove:function(){return oe.each(arguments,function(e,t){for(var n;(n=oe.inArray(t,a,n))>-1;)a.splice(n,1),u>=n&&u--}),this},has:function(e){return e?oe.inArray(e,a)>-1:a.length>0},empty:function(){return a&&(a=[]),this},disable:function(){return i=s=[],a=n="",this},disabled:function(){return!a},lock:function(){return i=s=[],n||(a=n=""),this},locked:function(){return!!i},fireWith:function(e,n){return i||(n=n||[],n=[e,n.slice?n.slice():n],s.push(n),t||l()),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!r}};return c},oe.extend({Deferred:function(e){var t=[["resolve","done",oe.Callbacks("once memory"),"resolved"],["reject","fail",oe.Callbacks("once memory"),"rejected"],["notify","progress",oe.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var e=arguments;return oe.Deferred(function(n){oe.each(t,function(t,o){var a=oe.isFunction(e[t])&&e[t];i[o[1]](function(){var e=a&&a.apply(this,arguments);e&&oe.isFunction(e.promise)?e.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[o[0]+"With"](this===r?n.promise():this,a?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?oe.extend(e,r):r}},i={};return r.pipe=r.then,oe.each(t,function(e,o){var a=o[2],s=o[3];r[o[1]]=a.add,s&&a.add(function(){n=s},t[1^e][2].disable,t[2][2].lock),i[o[0]]=function(){return i[o[0]+"With"](this===i?r:this,arguments),this},i[o[0]+"With"]=a.fireWith}),r.promise(i),e&&e.call(i,i),i},when:function(e){var t,n,r,i=0,o=K.call(arguments),a=o.length,s=1!==a||e&&oe.isFunction(e.promise)?a:0,u=1===s?e:oe.Deferred(),l=function(e,n,r){return function(i){n[e]=this,r[e]=arguments.length>1?K.call(arguments):i,r===t?u.notifyWith(n,r):--s||u.resolveWith(n,r)}};if(a>1)for(t=new Array(a),n=new Array(a),r=new Array(a);a>i;i++)o[i]&&oe.isFunction(o[i].promise)?o[i].promise().progress(l(i,n,t)).done(l(i,r,o)).fail(u.reject):--s;return s||u.resolveWith(r,o),u.promise()}});var xe;oe.fn.ready=function(e){return oe.ready.promise().done(e),this},oe.extend({isReady:!1,readyWait:1,holdReady:function(e){e?oe.readyWait++:oe.ready(!0)},ready:function(e){(e===!0?--oe.readyWait:oe.isReady)||(oe.isReady=!0,e!==!0&&--oe.readyWait>0||(xe.resolveWith(X,[oe]),oe.fn.triggerHandler&&(oe(X).triggerHandler("ready"),oe(X).off("ready"))))}}),oe.ready.promise=function(t){return xe||(xe=oe.Deferred(),"complete"===X.readyState||"loading"!==X.readyState&&!X.documentElement.doScroll?e.setTimeout(oe.ready):(X.addEventListener("DOMContentLoaded",a),e.addEventListener("load",a))),xe.promise(t)},oe.ready.promise();var Se=function(e,t,n,r,i,o,a){var s=0,u=e.length,l=null==n;if("object"===oe.type(n)){i=!0;for(s in n)Se(e,t,s,n[s],!0,o,a)}else if(void 0!==r&&(i=!0,
oe.isFunction(r)||(a=!0),l&&(a?(t.call(e,r),t=null):(l=t,t=function(e,t,n){return l.call(oe(e),n)})),t))for(;u>s;s++)t(e[s],n,a?r:r.call(e[s],s,t(e[s],n)));return i?e:l?t.call(e):u?t(e[0],n):o},Ce=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};s.uid=1,s.prototype={register:function(e,t){var n=t||{};return e.nodeType?e[this.expando]=n:Object.defineProperty(e,this.expando,{value:n,writable:!0,configurable:!0}),e[this.expando]},cache:function(e){if(!Ce(e))return{};var t=e[this.expando];return t||(t={},Ce(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var r,i=this.cache(e);if("string"==typeof t)i[t]=n;else for(r in t)i[r]=t[r];return i},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][t]},access:function(e,t,n){var r;return void 0===t||t&&"string"==typeof t&&void 0===n?(r=this.get(e,t),void 0!==r?r:this.get(e,oe.camelCase(t))):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r,i,o=e[this.expando];if(void 0!==o){if(void 0===t)this.register(e);else{oe.isArray(t)?r=t.concat(t.map(oe.camelCase)):(i=oe.camelCase(t),t in o?r=[t,i]:(r=i,r=r in o?[r]:r.match(we)||[])),n=r.length;for(;n--;)delete o[r[n]]}(void 0===t||oe.isEmptyObject(o))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!oe.isEmptyObject(t)}};var ke=new s,Pe=new s,Me=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Te=/[A-Z]/g;oe.extend({hasData:function(e){return Pe.hasData(e)||ke.hasData(e)},data:function(e,t,n){return Pe.access(e,t,n)},removeData:function(e,t){Pe.remove(e,t)},_data:function(e,t,n){return ke.access(e,t,n)},_removeData:function(e,t){ke.remove(e,t)}}),oe.fn.extend({data:function(e,t){var n,r,i,o=this[0],a=o&&o.attributes;if(void 0===e){if(this.length&&(i=Pe.get(o),1===o.nodeType&&!ke.get(o,"hasDataAttrs"))){for(n=a.length;n--;)a[n]&&(r=a[n].name,0===r.indexOf("data-")&&(r=oe.camelCase(r.slice(5)),u(o,r,i[r])));ke.set(o,"hasDataAttrs",!0)}return i}return"object"==typeof e?this.each(function(){Pe.set(this,e)}):Se(this,function(t){var n,r;if(o&&void 0===t){if(n=Pe.get(o,e)||Pe.get(o,e.replace(Te,"-$&").toLowerCase()),void 0!==n)return n;if(r=oe.camelCase(e),n=Pe.get(o,r),void 0!==n)return n;if(n=u(o,r,void 0),void 0!==n)return n}else r=oe.camelCase(e),this.each(function(){var n=Pe.get(this,r);Pe.set(this,r,t),e.indexOf("-")>-1&&void 0!==n&&Pe.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){Pe.remove(this,e)})}}),oe.extend({queue:function(e,t,n){var r;return e?(t=(t||"fx")+"queue",r=ke.get(e,t),n&&(!r||oe.isArray(n)?r=ke.access(e,t,oe.makeArray(n)):r.push(n)),r||[]):void 0},dequeue:function(e,t){t=t||"fx";var n=oe.queue(e,t),r=n.length,i=n.shift(),o=oe._queueHooks(e,t),a=function(){oe.dequeue(e,t)};"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete o.stop,i.call(e,a,o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return ke.get(e,n)||ke.access(e,n,{empty:oe.Callbacks("once memory").add(function(){ke.remove(e,[t+"queue",n])})})}}),oe.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?oe.queue(this[0],e):void 0===t?this:this.each(function(){var n=oe.queue(this,e,t);oe._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&oe.dequeue(this,e)})},dequeue:function(e){return this.each(function(){oe.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,i=oe.Deferred(),o=this,a=this.length,s=function(){--r||i.resolveWith(o,[o])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";a--;)n=ke.get(o[a],e+"queueHooks"),n&&n.empty&&(r++,n.empty.add(s));return s(),i.promise(t)}});var Ae=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Oe=new RegExp("^(?:([+-])=|)("+Ae+")([a-z%]*)$","i"),Ee=["Top","Right","Bottom","Left"],$e=function(e,t){return e=t||e,"none"===oe.css(e,"display")||!oe.contains(e.ownerDocument,e)},Ne=/^(?:checkbox|radio)$/i,Ie=/<([\w:-]+)/,De=/^$|\/(?:java|ecma)script/i,je={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};je.optgroup=je.option,je.tbody=je.tfoot=je.colgroup=je.caption=je.thead,je.th=je.td;var Fe=/<|&#?\w+;/;!function(){var e=X.createDocumentFragment(),t=e.appendChild(X.createElement("div")),n=X.createElement("input");n.setAttribute("type","radio"),n.setAttribute("checked","checked"),n.setAttribute("name","t"),t.appendChild(n),re.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,t.innerHTML="<textarea>x</textarea>",re.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue}();var Le=/^key/,Re=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Ue=/^([^.]*)(?:\.(.+)|)/;oe.event={global:{},add:function(e,t,n,r,i){var o,a,s,u,l,c,h,f,p,d,m,g=ke.get(e);if(g)for(n.handler&&(o=n,n=o.handler,i=o.selector),n.guid||(n.guid=oe.guid++),(u=g.events)||(u=g.events={}),(a=g.handle)||(a=g.handle=function(t){return"undefined"!=typeof oe&&oe.event.triggered!==t.type?oe.event.dispatch.apply(e,arguments):void 0}),t=(t||"").match(we)||[""],l=t.length;l--;)s=Ue.exec(t[l])||[],p=m=s[1],d=(s[2]||"").split(".").sort(),p&&(h=oe.event.special[p]||{},p=(i?h.delegateType:h.bindType)||p,h=oe.event.special[p]||{},c=oe.extend({type:p,origType:m,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&oe.expr.match.needsContext.test(i),namespace:d.join(".")},o),(f=u[p])||(f=u[p]=[],f.delegateCount=0,h.setup&&h.setup.call(e,r,d,a)!==!1||e.addEventListener&&e.addEventListener(p,a)),h.add&&(h.add.call(e,c),c.handler.guid||(c.handler.guid=n.guid)),i?f.splice(f.delegateCount++,0,c):f.push(c),oe.event.global[p]=!0)},remove:function(e,t,n,r,i){var o,a,s,u,l,c,h,f,p,d,m,g=ke.hasData(e)&&ke.get(e);if(g&&(u=g.events)){for(t=(t||"").match(we)||[""],l=t.length;l--;)if(s=Ue.exec(t[l])||[],p=m=s[1],d=(s[2]||"").split(".").sort(),p){for(h=oe.event.special[p]||{},p=(r?h.delegateType:h.bindType)||p,f=u[p]||[],s=s[2]&&new RegExp("(^|\\.)"+d.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=f.length;o--;)c=f[o],!i&&m!==c.origType||n&&n.guid!==c.guid||s&&!s.test(c.namespace)||r&&r!==c.selector&&("**"!==r||!c.selector)||(f.splice(o,1),c.selector&&f.delegateCount--,h.remove&&h.remove.call(e,c));a&&!f.length&&(h.teardown&&h.teardown.call(e,d,g.handle)!==!1||oe.removeEvent(e,p,g.handle),delete u[p])}else for(p in u)oe.event.remove(e,p+t[l],n,r,!0);oe.isEmptyObject(u)&&ke.remove(e,"handle events")}},dispatch:function(e){e=oe.event.fix(e);var t,n,r,i,o,a=[],s=K.call(arguments),u=(ke.get(this,"events")||{})[e.type]||[],l=oe.event.special[e.type]||{};if(s[0]=e,e.delegateTarget=this,!l.preDispatch||l.preDispatch.call(this,e)!==!1){for(a=oe.event.handlers.call(this,e,u),t=0;(i=a[t++])&&!e.isPropagationStopped();)for(e.currentTarget=i.elem,n=0;(o=i.handlers[n++])&&!e.isImmediatePropagationStopped();)e.rnamespace&&!e.rnamespace.test(o.namespace)||(e.handleObj=o,e.data=o.data,r=((oe.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,s),void 0!==r&&(e.result=r)===!1&&(e.preventDefault(),e.stopPropagation()));return l.postDispatch&&l.postDispatch.call(this,e),e.result}},handlers:function(e,t){var n,r,i,o,a=[],s=t.delegateCount,u=e.target;if(s&&u.nodeType&&("click"!==e.type||isNaN(e.button)||e.button<1))for(;u!==this;u=u.parentNode||this)if(1===u.nodeType&&(u.disabled!==!0||"click"!==e.type)){for(r=[],n=0;s>n;n++)o=t[n],i=o.selector+" ",void 0===r[i]&&(r[i]=o.needsContext?oe(i,this).index(u)>-1:oe.find(i,this,null,[u]).length),r[i]&&r.push(o);r.length&&a.push({elem:u,handlers:r})}return s<t.length&&a.push({elem:this,handlers:t.slice(s)}),a},props:"altKey bubbles cancelable ctrlKey currentTarget detail eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var n,r,i,o=t.button;return null==e.pageX&&null!=t.clientX&&(n=e.target.ownerDocument||X,r=n.documentElement,i=n.body,e.pageX=t.clientX+(r&&r.scrollLeft||i&&i.scrollLeft||0)-(r&&r.clientLeft||i&&i.clientLeft||0),e.pageY=t.clientY+(r&&r.scrollTop||i&&i.scrollTop||0)-(r&&r.clientTop||i&&i.clientTop||0)),e.which||void 0===o||(e.which=1&o?1:2&o?3:4&o?2:0),e}},fix:function(e){if(e[oe.expando])return e;var t,n,r,i=e.type,o=e,a=this.fixHooks[i];for(a||(this.fixHooks[i]=a=Re.test(i)?this.mouseHooks:Le.test(i)?this.keyHooks:{}),r=a.props?this.props.concat(a.props):this.props,e=new oe.Event(o),t=r.length;t--;)n=r[t],e[n]=o[n];return e.target||(e.target=X),3===e.target.nodeType&&(e.target=e.target.parentNode),a.filter?a.filter(e,o):e},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==m()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===m()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&oe.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(e){return oe.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},oe.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},oe.Event=function(e,t){return this instanceof oe.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&e.returnValue===!1?p:d):this.type=e,t&&oe.extend(this,t),this.timeStamp=e&&e.timeStamp||oe.now(),void(this[oe.expando]=!0)):new oe.Event(e,t)},oe.Event.prototype={constructor:oe.Event,isDefaultPrevented:d,isPropagationStopped:d,isImmediatePropagationStopped:d,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=p,e&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=p,e&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=p,e&&e.stopImmediatePropagation(),this.stopPropagation()}},oe.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){oe.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,o=e.handleObj;return i&&(i===r||oe.contains(r,i))||(e.type=o.origType,n=o.handler.apply(this,arguments),e.type=t),n}}}),oe.fn.extend({on:function(e,t,n,r){return g(this,e,t,n,r)},one:function(e,t,n,r){return g(this,e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,oe(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(i in e)this.off(i,t,e[i]);return this}return t!==!1&&"function"!=typeof t||(n=t,t=void 0),n===!1&&(n=d),this.each(function(){oe.event.remove(this,e,n,t)})}});var Ve=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,qe=/<script|<style|<link/i,ze=/checked\s*(?:[^=]|=\s*.checked.)/i,Be=/^true\/(.*)/,He=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;oe.extend({htmlPrefilter:function(e){return e.replace(Ve,"<$1></$2>")},clone:function(e,t,n){var r,i,o,a,s=e.cloneNode(!0),u=oe.contains(e.ownerDocument,e);if(!(re.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||oe.isXMLDoc(e)))for(a=c(s),o=c(e),r=0,i=o.length;i>r;r++)w(o[r],a[r]);if(t)if(n)for(o=o||c(e),a=a||c(s),r=0,i=o.length;i>r;r++)_(o[r],a[r]);else _(e,s);return a=c(s,"script"),a.length>0&&h(a,!u&&c(e,"script")),s},cleanData:function(e){for(var t,n,r,i=oe.event.special,o=0;void 0!==(n=e[o]);o++)if(Ce(n)){if(t=n[ke.expando]){if(t.events)for(r in t.events)i[r]?oe.event.remove(n,r):oe.removeEvent(n,r,t.handle);n[ke.expando]=void 0}n[Pe.expando]&&(n[Pe.expando]=void 0)}}}),oe.fn.extend({domManip:x,detach:function(e){return S(this,e,!0)},remove:function(e){return S(this,e)},text:function(e){return Se(this,function(e){return void 0===e?oe.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return x(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=v(this,e);t.appendChild(e)}})},prepend:function(){return x(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=v(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return x(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return x(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(oe.cleanData(c(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return oe.clone(this,e,t)})},html:function(e){return Se(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!qe.test(e)&&!je[(Ie.exec(e)||["",""])[1].toLowerCase()]){e=oe.htmlPrefilter(e);try{for(;r>n;n++)t=this[n]||{},1===t.nodeType&&(oe.cleanData(c(t,!1)),t.innerHTML=e);t=0}catch(i){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=[];return x(this,arguments,function(t){var n=this.parentNode;oe.inArray(this,e)<0&&(oe.cleanData(c(this)),n&&n.replaceChild(t,this))},e)}}),oe.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){oe.fn[e]=function(e){for(var n,r=[],i=oe(e),o=i.length-1,a=0;o>=a;a++)n=a===o?this:this.clone(!0),oe(i[a])[t](n),Q.apply(r,n.get());return this.pushStack(r)}});var Ge,We={HTML:"block",BODY:"block"},Ye=/^margin/,Xe=new RegExp("^("+Ae+")(?!px)[a-z%]+$","i"),Ke=function(t){var n=t.ownerDocument.defaultView;return n&&n.opener||(n=e),n.getComputedStyle(t)},Ze=function(e,t,n,r){var i,o,a={};for(o in t)a[o]=e.style[o],e.style[o]=t[o];i=n.apply(e,r||[]);for(o in t)e.style[o]=a[o];return i},Qe=X.documentElement;!function(){function t(){s.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",s.innerHTML="",Qe.appendChild(a);var t=e.getComputedStyle(s);n="1%"!==t.top,o="2px"===t.marginLeft,r="4px"===t.width,s.style.marginRight="50%",i="4px"===t.marginRight,Qe.removeChild(a)}var n,r,i,o,a=X.createElement("div"),s=X.createElement("div");s.style&&(s.style.backgroundClip="content-box",s.cloneNode(!0).style.backgroundClip="",re.clearCloneStyle="content-box"===s.style.backgroundClip,a.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",a.appendChild(s),oe.extend(re,{pixelPosition:function(){return t(),n},boxSizingReliable:function(){return null==r&&t(),r},pixelMarginRight:function(){return null==r&&t(),i},reliableMarginLeft:function(){return null==r&&t(),o},reliableMarginRight:function(){var t,n=s.appendChild(X.createElement("div"));return n.style.cssText=s.style.cssText="-webkit-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",n.style.marginRight=n.style.width="0",s.style.width="1px",Qe.appendChild(a),t=!parseFloat(e.getComputedStyle(n).marginRight),Qe.removeChild(a),s.removeChild(n),t}}))}();var Je=/^(none|table(?!-c[ea]).+)/,et={position:"absolute",visibility:"hidden",display:"block"},tt={letterSpacing:"0",fontWeight:"400"},nt=["Webkit","O","Moz","ms"],rt=X.createElement("div").style;oe.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=P(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,o,a,s=oe.camelCase(t),u=e.style;return t=oe.cssProps[s]||(oe.cssProps[s]=T(s)||s),a=oe.cssHooks[t]||oe.cssHooks[s],void 0===n?a&&"get"in a&&void 0!==(i=a.get(e,!1,r))?i:u[t]:(o=typeof n,"string"===o&&(i=Oe.exec(n))&&i[1]&&(n=l(e,t,i),o="number"),void(null!=n&&n===n&&("number"===o&&(n+=i&&i[3]||(oe.cssNumber[s]?"":"px")),re.clearCloneStyle||""!==n||0!==t.indexOf("background")||(u[t]="inherit"),a&&"set"in a&&void 0===(n=a.set(e,n,r))||(u[t]=n))))}},css:function(e,t,n,r){var i,o,a,s=oe.camelCase(t);return t=oe.cssProps[s]||(oe.cssProps[s]=T(s)||s),a=oe.cssHooks[t]||oe.cssHooks[s],a&&"get"in a&&(i=a.get(e,!0,n)),void 0===i&&(i=P(e,t,r)),"normal"===i&&t in tt&&(i=tt[t]),""===n||n?(o=parseFloat(i),n===!0||isFinite(o)?o||0:i):i}}),oe.each(["height","width"],function(e,t){oe.cssHooks[t]={get:function(e,n,r){return n?Je.test(oe.css(e,"display"))&&0===e.offsetWidth?Ze(e,et,function(){return E(e,t,r)}):E(e,t,r):void 0},set:function(e,n,r){var i,o=r&&Ke(e),a=r&&O(e,t,r,"border-box"===oe.css(e,"boxSizing",!1,o),o);return a&&(i=Oe.exec(n))&&"px"!==(i[3]||"px")&&(e.style[t]=n,n=oe.css(e,t)),A(e,n,a)}}}),oe.cssHooks.marginLeft=M(re.reliableMarginLeft,function(e,t){return t?(parseFloat(P(e,"marginLeft"))||e.getBoundingClientRect().left-Ze(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px":void 0}),oe.cssHooks.marginRight=M(re.reliableMarginRight,function(e,t){return t?Ze(e,{display:"inline-block"},P,[e,"marginRight"]):void 0}),oe.each({margin:"",padding:"",border:"Width"},function(e,t){oe.cssHooks[e+t]={expand:function(n){for(var r=0,i={},o="string"==typeof n?n.split(" "):[n];4>r;r++)i[e+Ee[r]+t]=o[r]||o[r-2]||o[0];return i}},Ye.test(e)||(oe.cssHooks[e+t].set=A)}),oe.fn.extend({css:function(e,t){return Se(this,function(e,t,n){var r,i,o={},a=0;if(oe.isArray(t)){for(r=Ke(e),i=t.length;i>a;a++)o[t[a]]=oe.css(e,t[a],!1,r);return o}return void 0!==n?oe.style(e,t,n):oe.css(e,t)},e,t,arguments.length>1)},show:function(){return $(this,!0)},hide:function(){return $(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){$e(this)?oe(this).show():oe(this).hide()})}}),oe.Tween=N,N.prototype={constructor:N,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||oe.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(oe.cssNumber[n]?"":"px")},cur:function(){var e=N.propHooks[this.prop];return e&&e.get?e.get(this):N.propHooks._default.get(this)},run:function(e){var t,n=N.propHooks[this.prop];return this.options.duration?this.pos=t=oe.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):N.propHooks._default.set(this),this}},N.prototype.init.prototype=N.prototype,N.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=oe.css(e.elem,e.prop,""),t&&"auto"!==t?t:0)},set:function(e){oe.fx.step[e.prop]?oe.fx.step[e.prop](e):1!==e.elem.nodeType||null==e.elem.style[oe.cssProps[e.prop]]&&!oe.cssHooks[e.prop]?e.elem[e.prop]=e.now:oe.style(e.elem,e.prop,e.now+e.unit)}}},N.propHooks.scrollTop=N.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},oe.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},oe.fx=N.prototype.init,oe.fx.step={};var it,ot,at=/^(?:toggle|show|hide)$/,st=/queueHooks$/;oe.Animation=oe.extend(R,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return l(n.elem,e,Oe.exec(t),n),n}]},tweener:function(e,t){oe.isFunction(e)?(t=e,e=["*"]):e=e.match(we);for(var n,r=0,i=e.length;i>r;r++)n=e[r],R.tweeners[n]=R.tweeners[n]||[],R.tweeners[n].unshift(t)},prefilters:[F],prefilter:function(e,t){t?R.prefilters.unshift(e):R.prefilters.push(e)}}),oe.speed=function(e,t,n){var r=e&&"object"==typeof e?oe.extend({},e):{complete:n||!n&&t||oe.isFunction(e)&&e,duration:e,easing:n&&t||t&&!oe.isFunction(t)&&t};return r.duration=oe.fx.off?0:"number"==typeof r.duration?r.duration:r.duration in oe.fx.speeds?oe.fx.speeds[r.duration]:oe.fx.speeds._default,null!=r.queue&&r.queue!==!0||(r.queue="fx"),r.old=r.complete,r.complete=function(){oe.isFunction(r.old)&&r.old.call(this),r.queue&&oe.dequeue(this,r.queue)},r},oe.fn.extend({fadeTo:function(e,t,n,r){return this.filter($e).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=oe.isEmptyObject(e),o=oe.speed(t,n,r),a=function(){var t=R(this,oe.extend({},e),o);(i||ke.get(this,"finish"))&&t.stop(!0)};return a.finish=a,i||o.queue===!1?this.each(a):this.queue(o.queue,a)},stop:function(e,t,n){var r=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,i=null!=e&&e+"queueHooks",o=oe.timers,a=ke.get(this);if(i)a[i]&&a[i].stop&&r(a[i]);else for(i in a)a[i]&&a[i].stop&&st.test(i)&&r(a[i]);for(i=o.length;i--;)o[i].elem!==this||null!=e&&o[i].queue!==e||(o[i].anim.stop(n),t=!1,o.splice(i,1));!t&&n||oe.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=ke.get(this),r=n[e+"queue"],i=n[e+"queueHooks"],o=oe.timers,a=r?r.length:0;for(n.finish=!0,oe.queue(this,e,[]),i&&i.stop&&i.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;a>t;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}}),oe.each(["toggle","show","hide"],function(e,t){var n=oe.fn[t];oe.fn[t]=function(e,r,i){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(D(t,!0),e,r,i)}}),oe.each({slideDown:D("show"),slideUp:D("hide"),slideToggle:D("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){oe.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),oe.timers=[],oe.fx.tick=function(){var e,t=0,n=oe.timers;for(it=oe.now();t<n.length;t++)e=n[t],e()||n[t]!==e||n.splice(t--,1);n.length||oe.fx.stop(),it=void 0},oe.fx.timer=function(e){oe.timers.push(e),e()?oe.fx.start():oe.timers.pop()},oe.fx.interval=13,oe.fx.start=function(){ot||(ot=e.setInterval(oe.fx.tick,oe.fx.interval))},oe.fx.stop=function(){e.clearInterval(ot),ot=null},oe.fx.speeds={slow:600,fast:200,_default:400},oe.fn.delay=function(t,n){return t=oe.fx?oe.fx.speeds[t]||t:t,n=n||"fx",this.queue(n,function(n,r){var i=e.setTimeout(n,t);r.stop=function(){e.clearTimeout(i)}})},function(){var e=X.createElement("input"),t=X.createElement("select"),n=t.appendChild(X.createElement("option"));e.type="checkbox",re.checkOn=""!==e.value,re.optSelected=n.selected,t.disabled=!0,re.optDisabled=!n.disabled,e=X.createElement("input"),e.value="t",e.type="radio",re.radioValue="t"===e.value}();var ut,lt=oe.expr.attrHandle;oe.fn.extend({attr:function(e,t){return Se(this,oe.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){oe.removeAttr(this,e)})}}),oe.extend({attr:function(e,t,n){var r,i,o=e.nodeType;return 3!==o&&8!==o&&2!==o?"undefined"==typeof e.getAttribute?oe.prop(e,t,n):(1===o&&oe.isXMLDoc(e)||(t=t.toLowerCase(),i=oe.attrHooks[t]||(oe.expr.match.bool.test(t)?ut:void 0)),void 0!==n?null===n?void oe.removeAttr(e,t):i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:(e.setAttribute(t,n+""),n):i&&"get"in i&&null!==(r=i.get(e,t))?r:(r=oe.find.attr(e,t),null==r?void 0:r)):void 0},attrHooks:{type:{set:function(e,t){if(!re.radioValue&&"radio"===t&&oe.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,r,i=0,o=t&&t.match(we);if(o&&1===e.nodeType)for(;n=o[i++];)r=oe.propFix[n]||n,oe.expr.match.bool.test(n)&&(e[r]=!1),e.removeAttribute(n)}}),ut={set:function(e,t,n){return t===!1?oe.removeAttr(e,n):e.setAttribute(n,n),n}},oe.each(oe.expr.match.bool.source.match(/\w+/g),function(e,t){var n=lt[t]||oe.find.attr;lt[t]=function(e,t,r){var i,o;return r||(o=lt[t],lt[t]=i,i=null!=n(e,t,r)?t.toLowerCase():null,lt[t]=o),i}});var ct=/^(?:input|select|textarea|button)$/i,ht=/^(?:a|area)$/i;oe.fn.extend({prop:function(e,t){return Se(this,oe.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[oe.propFix[e]||e]})}}),oe.extend({prop:function(e,t,n){var r,i,o=e.nodeType;return 3!==o&&8!==o&&2!==o?(1===o&&oe.isXMLDoc(e)||(t=oe.propFix[t]||t,i=oe.propHooks[t]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:e[t]=n:i&&"get"in i&&null!==(r=i.get(e,t))?r:e[t]):void 0},propHooks:{tabIndex:{get:function(e){var t=oe.find.attr(e,"tabindex");return t?parseInt(t,10):ct.test(e.nodeName)||ht.test(e.nodeName)&&e.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}}),re.optSelected||(oe.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),oe.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){oe.propFix[this.toLowerCase()]=this});var ft=/[\t\r\n\f]/g;oe.fn.extend({addClass:function(e){var t,n,r,i,o,a,s,u=0;if(oe.isFunction(e))return this.each(function(t){oe(this).addClass(e.call(this,t,U(this)))});if("string"==typeof e&&e)for(t=e.match(we)||[];n=this[u++];)if(i=U(n),r=1===n.nodeType&&(" "+i+" ").replace(ft," ")){for(a=0;o=t[a++];)r.indexOf(" "+o+" ")<0&&(r+=o+" ");s=oe.trim(r),i!==s&&n.setAttribute("class",s)}return this},removeClass:function(e){var t,n,r,i,o,a,s,u=0;if(oe.isFunction(e))return this.each(function(t){oe(this).removeClass(e.call(this,t,U(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof e&&e)for(t=e.match(we)||[];n=this[u++];)if(i=U(n),r=1===n.nodeType&&(" "+i+" ").replace(ft," ")){for(a=0;o=t[a++];)for(;r.indexOf(" "+o+" ")>-1;)r=r.replace(" "+o+" "," ");s=oe.trim(r),i!==s&&n.setAttribute("class",s)}return this},toggleClass:function(e,t){var n=typeof e;return"boolean"==typeof t&&"string"===n?t?this.addClass(e):this.removeClass(e):oe.isFunction(e)?this.each(function(n){oe(this).toggleClass(e.call(this,n,U(this),t),t)}):this.each(function(){var t,r,i,o;if("string"===n)for(r=0,i=oe(this),o=e.match(we)||[];t=o[r++];)i.hasClass(t)?i.removeClass(t):i.addClass(t);else void 0!==e&&"boolean"!==n||(t=U(this),t&&ke.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||e===!1?"":ke.get(this,"__className__")||""))})},hasClass:function(e){var t,n,r=0;for(t=" "+e+" ";n=this[r++];)if(1===n.nodeType&&(" "+U(n)+" ").replace(ft," ").indexOf(t)>-1)return!0;return!1}});var pt=/\r/g,dt=/[\x20\t\r\n\f]+/g;oe.fn.extend({val:function(e){var t,n,r,i=this[0];return arguments.length?(r=oe.isFunction(e),this.each(function(n){var i;1===this.nodeType&&(i=r?e.call(this,n,oe(this).val()):e,null==i?i="":"number"==typeof i?i+="":oe.isArray(i)&&(i=oe.map(i,function(e){return null==e?"":e+""})),t=oe.valHooks[this.type]||oe.valHooks[this.nodeName.toLowerCase()],t&&"set"in t&&void 0!==t.set(this,i,"value")||(this.value=i))})):i?(t=oe.valHooks[i.type]||oe.valHooks[i.nodeName.toLowerCase()],t&&"get"in t&&void 0!==(n=t.get(i,"value"))?n:(n=i.value,"string"==typeof n?n.replace(pt,""):null==n?"":n)):void 0}}),oe.extend({valHooks:{option:{get:function(e){var t=oe.find.attr(e,"value");return null!=t?t:oe.trim(oe.text(e)).replace(dt," ")}},select:{get:function(e){for(var t,n,r=e.options,i=e.selectedIndex,o="select-one"===e.type||0>i,a=o?null:[],s=o?i+1:r.length,u=0>i?s:o?i:0;s>u;u++)if(n=r[u],(n.selected||u===i)&&(re.optDisabled?!n.disabled:null===n.getAttribute("disabled"))&&(!n.parentNode.disabled||!oe.nodeName(n.parentNode,"optgroup"))){if(t=oe(n).val(),o)return t;a.push(t)}return a},set:function(e,t){for(var n,r,i=e.options,o=oe.makeArray(t),a=i.length;a--;)r=i[a],(r.selected=oe.inArray(oe.valHooks.option.get(r),o)>-1)&&(n=!0);return n||(e.selectedIndex=-1),o}}}}),oe.each(["radio","checkbox"],function(){oe.valHooks[this]={set:function(e,t){return oe.isArray(t)?e.checked=oe.inArray(oe(e).val(),t)>-1:void 0}},re.checkOn||(oe.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var mt=/^(?:focusinfocus|focusoutblur)$/;oe.extend(oe.event,{trigger:function(t,n,r,i){var o,a,s,u,l,c,h,f=[r||X],p=ne.call(t,"type")?t.type:t,d=ne.call(t,"namespace")?t.namespace.split("."):[];if(a=s=r=r||X,3!==r.nodeType&&8!==r.nodeType&&!mt.test(p+oe.event.triggered)&&(p.indexOf(".")>-1&&(d=p.split("."),p=d.shift(),d.sort()),l=p.indexOf(":")<0&&"on"+p,t=t[oe.expando]?t:new oe.Event(p,"object"==typeof t&&t),t.isTrigger=i?2:3,t.namespace=d.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+d.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=r),n=null==n?[t]:oe.makeArray(n,[t]),h=oe.event.special[p]||{},i||!h.trigger||h.trigger.apply(r,n)!==!1)){if(!i&&!h.noBubble&&!oe.isWindow(r)){for(u=h.delegateType||p,mt.test(u+p)||(a=a.parentNode);a;a=a.parentNode)f.push(a),s=a;s===(r.ownerDocument||X)&&f.push(s.defaultView||s.parentWindow||e)}for(o=0;(a=f[o++])&&!t.isPropagationStopped();)t.type=o>1?u:h.bindType||p,c=(ke.get(a,"events")||{})[t.type]&&ke.get(a,"handle"),c&&c.apply(a,n),c=l&&a[l],c&&c.apply&&Ce(a)&&(t.result=c.apply(a,n),t.result===!1&&t.preventDefault());return t.type=p,i||t.isDefaultPrevented()||h._default&&h._default.apply(f.pop(),n)!==!1||!Ce(r)||l&&oe.isFunction(r[p])&&!oe.isWindow(r)&&(s=r[l],s&&(r[l]=null),oe.event.triggered=p,r[p](),oe.event.triggered=void 0,s&&(r[l]=s)),t.result}},simulate:function(e,t,n){var r=oe.extend(new oe.Event,n,{type:e,isSimulated:!0});oe.event.trigger(r,null,t),r.isDefaultPrevented()&&n.preventDefault()}}),oe.fn.extend({trigger:function(e,t){return this.each(function(){oe.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];return n?oe.event.trigger(e,t,n,!0):void 0}}),oe.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){oe.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),oe.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),re.focusin="onfocusin"in e,re.focusin||oe.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){oe.event.simulate(t,e.target,oe.event.fix(e))};oe.event.special[t]={setup:function(){var r=this.ownerDocument||this,i=ke.access(r,t);i||r.addEventListener(e,n,!0),ke.access(r,t,(i||0)+1)},teardown:function(){var r=this.ownerDocument||this,i=ke.access(r,t)-1;i?ke.access(r,t,i):(r.removeEventListener(e,n,!0),ke.remove(r,t))}}});var gt=e.location,vt=oe.now(),yt=/\?/;oe.parseJSON=function(e){return JSON.parse(e+"")},oe.parseXML=function(t){var n;if(!t||"string"!=typeof t)return null;try{n=(new e.DOMParser).parseFromString(t,"text/xml")}catch(r){n=void 0}return n&&!n.getElementsByTagName("parsererror").length||oe.error("Invalid XML: "+t),n};var bt=/#.*$/,_t=/([?&])_=[^&]*/,wt=/^(.*?):[ \t]*([^\r\n]*)$/gm,xt=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,St=/^(?:GET|HEAD)$/,Ct=/^\/\//,kt={},Pt={},Mt="*/".concat("*"),Tt=X.createElement("a");Tt.href=gt.href,oe.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:gt.href,type:"GET",isLocal:xt.test(gt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Mt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{
xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":oe.parseJSON,"text xml":oe.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?z(z(e,oe.ajaxSettings),t):z(oe.ajaxSettings,e)},ajaxPrefilter:V(kt),ajaxTransport:V(Pt),ajax:function(t,n){function r(t,n,r,s){var l,h,y,b,w,S=n;2!==_&&(_=2,u&&e.clearTimeout(u),i=void 0,a=s||"",x.readyState=t>0?4:0,l=t>=200&&300>t||304===t,r&&(b=B(f,x,r)),b=H(f,b,x,l),l?(f.ifModified&&(w=x.getResponseHeader("Last-Modified"),w&&(oe.lastModified[o]=w),w=x.getResponseHeader("etag"),w&&(oe.etag[o]=w)),204===t||"HEAD"===f.type?S="nocontent":304===t?S="notmodified":(S=b.state,h=b.data,y=b.error,l=!y)):(y=S,!t&&S||(S="error",0>t&&(t=0))),x.status=t,x.statusText=(n||S)+"",l?m.resolveWith(p,[h,S,x]):m.rejectWith(p,[x,S,y]),x.statusCode(v),v=void 0,c&&d.trigger(l?"ajaxSuccess":"ajaxError",[x,f,l?h:y]),g.fireWith(p,[x,S]),c&&(d.trigger("ajaxComplete",[x,f]),--oe.active||oe.event.trigger("ajaxStop")))}"object"==typeof t&&(n=t,t=void 0),n=n||{};var i,o,a,s,u,l,c,h,f=oe.ajaxSetup({},n),p=f.context||f,d=f.context&&(p.nodeType||p.jquery)?oe(p):oe.event,m=oe.Deferred(),g=oe.Callbacks("once memory"),v=f.statusCode||{},y={},b={},_=0,w="canceled",x={readyState:0,getResponseHeader:function(e){var t;if(2===_){if(!s)for(s={};t=wt.exec(a);)s[t[1].toLowerCase()]=t[2];t=s[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===_?a:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return _||(e=b[n]=b[n]||e,y[e]=t),this},overrideMimeType:function(e){return _||(f.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>_)for(t in e)v[t]=[v[t],e[t]];else x.always(e[x.status]);return this},abort:function(e){var t=e||w;return i&&i.abort(t),r(0,t),this}};if(m.promise(x).complete=g.add,x.success=x.done,x.error=x.fail,f.url=((t||f.url||gt.href)+"").replace(bt,"").replace(Ct,gt.protocol+"//"),f.type=n.method||n.type||f.method||f.type,f.dataTypes=oe.trim(f.dataType||"*").toLowerCase().match(we)||[""],null==f.crossDomain){l=X.createElement("a");try{l.href=f.url,l.href=l.href,f.crossDomain=Tt.protocol+"//"+Tt.host!=l.protocol+"//"+l.host}catch(S){f.crossDomain=!0}}if(f.data&&f.processData&&"string"!=typeof f.data&&(f.data=oe.param(f.data,f.traditional)),q(kt,f,n,x),2===_)return x;c=oe.event&&f.global,c&&0===oe.active++&&oe.event.trigger("ajaxStart"),f.type=f.type.toUpperCase(),f.hasContent=!St.test(f.type),o=f.url,f.hasContent||(f.data&&(o=f.url+=(yt.test(o)?"&":"?")+f.data,delete f.data),f.cache===!1&&(f.url=_t.test(o)?o.replace(_t,"$1_="+vt++):o+(yt.test(o)?"&":"?")+"_="+vt++)),f.ifModified&&(oe.lastModified[o]&&x.setRequestHeader("If-Modified-Since",oe.lastModified[o]),oe.etag[o]&&x.setRequestHeader("If-None-Match",oe.etag[o])),(f.data&&f.hasContent&&f.contentType!==!1||n.contentType)&&x.setRequestHeader("Content-Type",f.contentType),x.setRequestHeader("Accept",f.dataTypes[0]&&f.accepts[f.dataTypes[0]]?f.accepts[f.dataTypes[0]]+("*"!==f.dataTypes[0]?", "+Mt+"; q=0.01":""):f.accepts["*"]);for(h in f.headers)x.setRequestHeader(h,f.headers[h]);if(f.beforeSend&&(f.beforeSend.call(p,x,f)===!1||2===_))return x.abort();w="abort";for(h in{success:1,error:1,complete:1})x[h](f[h]);if(i=q(Pt,f,n,x)){if(x.readyState=1,c&&d.trigger("ajaxSend",[x,f]),2===_)return x;f.async&&f.timeout>0&&(u=e.setTimeout(function(){x.abort("timeout")},f.timeout));try{_=1,i.send(y,r)}catch(S){if(!(2>_))throw S;r(-1,S)}}else r(-1,"No Transport");return x},getJSON:function(e,t,n){return oe.get(e,t,n,"json")},getScript:function(e,t){return oe.get(e,void 0,t,"script")}}),oe.each(["get","post"],function(e,t){oe[t]=function(e,n,r,i){return oe.isFunction(n)&&(i=i||r,r=n,n=void 0),oe.ajax(oe.extend({url:e,type:t,dataType:i,data:n,success:r},oe.isPlainObject(e)&&e))}}),oe._evalUrl=function(e){return oe.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},oe.fn.extend({wrapAll:function(e){var t;return oe.isFunction(e)?this.each(function(t){oe(this).wrapAll(e.call(this,t))}):(this[0]&&(t=oe(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this)},wrapInner:function(e){return oe.isFunction(e)?this.each(function(t){oe(this).wrapInner(e.call(this,t))}):this.each(function(){var t=oe(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=oe.isFunction(e);return this.each(function(n){oe(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){oe.nodeName(this,"body")||oe(this).replaceWith(this.childNodes)}).end()}}),oe.expr.filters.hidden=function(e){return!oe.expr.filters.visible(e)},oe.expr.filters.visible=function(e){return e.offsetWidth>0||e.offsetHeight>0||e.getClientRects().length>0};var At=/%20/g,Ot=/\[\]$/,Et=/\r?\n/g,$t=/^(?:submit|button|image|reset|file)$/i,Nt=/^(?:input|select|textarea|keygen)/i;oe.param=function(e,t){var n,r=[],i=function(e,t){t=oe.isFunction(t)?t():null==t?"":t,r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(void 0===t&&(t=oe.ajaxSettings&&oe.ajaxSettings.traditional),oe.isArray(e)||e.jquery&&!oe.isPlainObject(e))oe.each(e,function(){i(this.name,this.value)});else for(n in e)G(n,e[n],t,i);return r.join("&").replace(At,"+")},oe.fn.extend({serialize:function(){return oe.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=oe.prop(this,"elements");return e?oe.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!oe(this).is(":disabled")&&Nt.test(this.nodeName)&&!$t.test(e)&&(this.checked||!Ne.test(e))}).map(function(e,t){var n=oe(this).val();return null==n?null:oe.isArray(n)?oe.map(n,function(e){return{name:t.name,value:e.replace(Et,"\r\n")}}):{name:t.name,value:n.replace(Et,"\r\n")}}).get()}}),oe.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch(t){}};var It={0:200,1223:204},Dt=oe.ajaxSettings.xhr();re.cors=!!Dt&&"withCredentials"in Dt,re.ajax=Dt=!!Dt,oe.ajaxTransport(function(t){var n,r;return re.cors||Dt&&!t.crossDomain?{send:function(i,o){var a,s=t.xhr();if(s.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(a in t.xhrFields)s[a]=t.xhrFields[a];t.mimeType&&s.overrideMimeType&&s.overrideMimeType(t.mimeType),t.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest");for(a in i)s.setRequestHeader(a,i[a]);n=function(e){return function(){n&&(n=r=s.onload=s.onerror=s.onabort=s.onreadystatechange=null,"abort"===e?s.abort():"error"===e?"number"!=typeof s.status?o(0,"error"):o(s.status,s.statusText):o(It[s.status]||s.status,s.statusText,"text"!==(s.responseType||"text")||"string"!=typeof s.responseText?{binary:s.response}:{text:s.responseText},s.getAllResponseHeaders()))}},s.onload=n(),r=s.onerror=n("error"),void 0!==s.onabort?s.onabort=r:s.onreadystatechange=function(){4===s.readyState&&e.setTimeout(function(){n&&r()})},n=n("abort");try{s.send(t.hasContent&&t.data||null)}catch(u){if(n)throw u}},abort:function(){n&&n()}}:void 0}),oe.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return oe.globalEval(e),e}}}),oe.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),oe.ajaxTransport("script",function(e){if(e.crossDomain){var t,n;return{send:function(r,i){t=oe("<script>").prop({charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&i("error"===e.type?404:200,e.type)}),X.head.appendChild(t[0])},abort:function(){n&&n()}}}});var jt=[],Ft=/(=)\?(?=&|$)|\?\?/;oe.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=jt.pop()||oe.expando+"_"+vt++;return this[e]=!0,e}}),oe.ajaxPrefilter("json jsonp",function(t,n,r){var i,o,a,s=t.jsonp!==!1&&(Ft.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Ft.test(t.data)&&"data");return s||"jsonp"===t.dataTypes[0]?(i=t.jsonpCallback=oe.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,s?t[s]=t[s].replace(Ft,"$1"+i):t.jsonp!==!1&&(t.url+=(yt.test(t.url)?"&":"?")+t.jsonp+"="+i),t.converters["script json"]=function(){return a||oe.error(i+" was not called"),a[0]},t.dataTypes[0]="json",o=e[i],e[i]=function(){a=arguments},r.always(function(){void 0===o?oe(e).removeProp(i):e[i]=o,t[i]&&(t.jsonpCallback=n.jsonpCallback,jt.push(i)),a&&oe.isFunction(o)&&o(a[0]),a=o=void 0}),"script"):void 0}),oe.parseHTML=function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||X;var r=de.exec(e),i=!n&&[];return r?[t.createElement(r[1])]:(r=f([e],t,i),i&&i.length&&oe(i).remove(),oe.merge([],r.childNodes))};var Lt=oe.fn.load;oe.fn.load=function(e,t,n){if("string"!=typeof e&&Lt)return Lt.apply(this,arguments);var r,i,o,a=this,s=e.indexOf(" ");return s>-1&&(r=oe.trim(e.slice(s)),e=e.slice(0,s)),oe.isFunction(t)?(n=t,t=void 0):t&&"object"==typeof t&&(i="POST"),a.length>0&&oe.ajax({url:e,type:i||"GET",dataType:"html",data:t}).done(function(e){o=arguments,a.html(r?oe("<div>").append(oe.parseHTML(e)).find(r):e)}).always(n&&function(e,t){a.each(function(){n.apply(this,o||[e.responseText,t,e])})}),this},oe.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){oe.fn[t]=function(e){return this.on(t,e)}}),oe.expr.filters.animated=function(e){return oe.grep(oe.timers,function(t){return e===t.elem}).length},oe.offset={setOffset:function(e,t,n){var r,i,o,a,s,u,l,c=oe.css(e,"position"),h=oe(e),f={};"static"===c&&(e.style.position="relative"),s=h.offset(),o=oe.css(e,"top"),u=oe.css(e,"left"),l=("absolute"===c||"fixed"===c)&&(o+u).indexOf("auto")>-1,l?(r=h.position(),a=r.top,i=r.left):(a=parseFloat(o)||0,i=parseFloat(u)||0),oe.isFunction(t)&&(t=t.call(e,n,oe.extend({},s))),null!=t.top&&(f.top=t.top-s.top+a),null!=t.left&&(f.left=t.left-s.left+i),"using"in t?t.using.call(e,f):h.css(f)}},oe.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){oe.offset.setOffset(this,e,t)});var t,n,r=this[0],i={top:0,left:0},o=r&&r.ownerDocument;return o?(t=o.documentElement,oe.contains(t,r)?(i=r.getBoundingClientRect(),n=W(o),{top:i.top+n.pageYOffset-t.clientTop,left:i.left+n.pageXOffset-t.clientLeft}):i):void 0},position:function(){if(this[0]){var e,t,n=this[0],r={top:0,left:0};return"fixed"===oe.css(n,"position")?t=n.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),oe.nodeName(e[0],"html")||(r=e.offset()),r.top+=oe.css(e[0],"borderTopWidth",!0),r.left+=oe.css(e[0],"borderLeftWidth",!0)),{top:t.top-r.top-oe.css(n,"marginTop",!0),left:t.left-r.left-oe.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===oe.css(e,"position");)e=e.offsetParent;return e||Qe})}}),oe.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var n="pageYOffset"===t;oe.fn[e]=function(r){return Se(this,function(e,r,i){var o=W(e);return void 0===i?o?o[t]:e[r]:void(o?o.scrollTo(n?o.pageXOffset:i,n?i:o.pageYOffset):e[r]=i)},e,r,arguments.length)}}),oe.each(["top","left"],function(e,t){oe.cssHooks[t]=M(re.pixelPosition,function(e,n){return n?(n=P(e,t),Xe.test(n)?oe(e).position()[t]+"px":n):void 0})}),oe.each({Height:"height",Width:"width"},function(e,t){oe.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,r){oe.fn[r]=function(r,i){var o=arguments.length&&(n||"boolean"!=typeof r),a=n||(r===!0||i===!0?"margin":"border");return Se(this,function(t,n,r){var i;return oe.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(i=t.documentElement,Math.max(t.body["scroll"+e],i["scroll"+e],t.body["offset"+e],i["offset"+e],i["client"+e])):void 0===r?oe.css(t,n,a):oe.style(t,n,r,a)},t,o?r:void 0,o,null)}})}),oe.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},size:function(){return this.length}}),oe.fn.andSelf=oe.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return oe});var Rt=e.jQuery,Ut=e.$;return oe.noConflict=function(t){return e.$===oe&&(e.$=Ut),t&&e.jQuery===oe&&(e.jQuery=Rt),oe},t||(e.jQuery=e.$=oe),oe}),function(e){"use strict";function t(e,t){return t=t||Error,function(){var n,r,i=2,o=arguments,a=o[0],s="["+(e?e+":":"")+a+"] ",u=o[1];for(s+=u.replace(/\{\d+\}/g,function(e){var t=+e.slice(1,-1),n=t+i;return n<o.length?ye(o[n]):e}),s+="\nhttp://errors.angularjs.org/1.5.5/"+(e?e+"/":"")+a,r=i,n="?";r<o.length;r++,n="&")s+=n+"p"+(r-i)+"="+encodeURIComponent(ye(o[r]));return new t(s)}}function n(e){if(null==e||P(e))return!1;if(Gr(e)||w(e)||Dr&&e instanceof Dr)return!0;var t="length"in Object(e)&&e.length;return x(t)&&(t>=0&&(t-1 in e||e instanceof Array)||"function"==typeof e.item)}function r(e,t,i){var o,a;if(e)if(C(e))for(o in e)"prototype"==o||"length"==o||"name"==o||e.hasOwnProperty&&!e.hasOwnProperty(o)||t.call(i,e[o],o,e);else if(Gr(e)||n(e)){var s="object"!=typeof e;for(o=0,a=e.length;a>o;o++)(s||o in e)&&t.call(i,e[o],o,e)}else if(e.forEach&&e.forEach!==r)e.forEach(t,i,e);else if(_(e))for(o in e)t.call(i,e[o],o,e);else if("function"==typeof e.hasOwnProperty)for(o in e)e.hasOwnProperty(o)&&t.call(i,e[o],o,e);else for(o in e)Ar.call(e,o)&&t.call(i,e[o],o,e);return e}function i(e,t,n){for(var r=Object.keys(e).sort(),i=0;i<r.length;i++)t.call(n,e[r[i]],r[i]);return r}function o(e){return function(t,n){e(n,t)}}function a(){return++Hr}function s(e,t){t?e.$$hashKey=t:delete e.$$hashKey}function u(e,t,n){for(var r=e.$$hashKey,i=0,o=t.length;o>i;++i){var a=t[i];if(b(a)||C(a))for(var l=Object.keys(a),c=0,h=l.length;h>c;c++){var f=l[c],p=a[f];n&&b(p)?S(p)?e[f]=new Date(p.valueOf()):k(p)?e[f]=new RegExp(p):p.nodeName?e[f]=p.cloneNode(!0):D(p)?e[f]=p.clone():(b(e[f])||(e[f]=Gr(p)?[]:{}),u(e[f],[p],!0)):e[f]=p}}return s(e,r),e}function l(e){return u(e,Lr.call(arguments,1),!1)}function c(e){return u(e,Lr.call(arguments,1),!0)}function h(e){return parseInt(e,10)}function f(e,t){return l(Object.create(e),t)}function p(){}function d(e){return e}function m(e){return function(){return e}}function g(e){return C(e.toString)&&e.toString!==Vr}function v(e){return"undefined"==typeof e}function y(e){return"undefined"!=typeof e}function b(e){return null!==e&&"object"==typeof e}function _(e){return null!==e&&"object"==typeof e&&!qr(e)}function w(e){return"string"==typeof e}function x(e){return"number"==typeof e}function S(e){return"[object Date]"===Vr.call(e)}function C(e){return"function"==typeof e}function k(e){return"[object RegExp]"===Vr.call(e)}function P(e){return e&&e.window===e}function M(e){return e&&e.$evalAsync&&e.$watch}function T(e){return"[object File]"===Vr.call(e)}function A(e){return"[object FormData]"===Vr.call(e)}function O(e){return"[object Blob]"===Vr.call(e)}function E(e){return"boolean"==typeof e}function $(e){return e&&C(e.then)}function N(e){return e&&x(e.length)&&Wr.test(Vr.call(e))}function I(e){return"[object ArrayBuffer]"===Vr.call(e)}function D(e){return!(!e||!(e.nodeName||e.prop&&e.attr&&e.find))}function j(e){var t,n={},r=e.split(",");for(t=0;t<r.length;t++)n[r[t]]=!0;return n}function F(e){return Or(e.nodeName||e[0]&&e[0].nodeName)}function L(e,t){var n=e.indexOf(t);return n>=0&&e.splice(n,1),n}function R(e,t){function n(e,t){var n,r=t.$$hashKey;if(Gr(e))for(var o=0,a=e.length;a>o;o++)t.push(i(e[o]));else if(_(e))for(n in e)t[n]=i(e[n]);else if(e&&"function"==typeof e.hasOwnProperty)for(n in e)e.hasOwnProperty(n)&&(t[n]=i(e[n]));else for(n in e)Ar.call(e,n)&&(t[n]=i(e[n]));return s(t,r),t}function i(e){if(!b(e))return e;var t=a.indexOf(e);if(-1!==t)return u[t];if(P(e)||M(e))throw zr("cpws","Can't copy! Making copies of Window or Scope instances is not supported.");var r=!1,i=o(e);return void 0===i&&(i=Gr(e)?[]:Object.create(qr(e)),r=!0),a.push(e),u.push(i),r?n(e,i):i}function o(e){switch(Vr.call(e)){case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Float32Array]":case"[object Float64Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return new e.constructor(i(e.buffer));case"[object ArrayBuffer]":if(!e.slice){var t=new ArrayBuffer(e.byteLength);return new Uint8Array(t).set(new Uint8Array(e)),t}return e.slice(0);case"[object Boolean]":case"[object Number]":case"[object String]":case"[object Date]":return new e.constructor(e.valueOf());case"[object RegExp]":var n=new RegExp(e.source,e.toString().match(/[^\/]*$/)[0]);return n.lastIndex=e.lastIndex,n;case"[object Blob]":return new e.constructor([e],{type:e.type})}return C(e.cloneNode)?e.cloneNode(!0):void 0}var a=[],u=[];if(t){if(N(t)||I(t))throw zr("cpta","Can't copy! TypedArray destination cannot be mutated.");if(e===t)throw zr("cpi","Can't copy! Source and destination are identical.");return Gr(t)?t.length=0:r(t,function(e,n){"$$hashKey"!==n&&delete t[n]}),a.push(e),u.push(t),n(e,t)}return i(e)}function U(e,t){if(Gr(e)){t=t||[];for(var n=0,r=e.length;r>n;n++)t[n]=e[n]}else if(b(e)){t=t||{};for(var i in e)("$"!==i.charAt(0)||"$"!==i.charAt(1))&&(t[i]=e[i])}return t||e}function V(e,t){if(e===t)return!0;if(null===e||null===t)return!1;if(e!==e&&t!==t)return!0;var n,r,i,o=typeof e,a=typeof t;if(o==a&&"object"==o){if(!Gr(e)){if(S(e))return S(t)?V(e.getTime(),t.getTime()):!1;if(k(e))return k(t)?e.toString()==t.toString():!1;if(M(e)||M(t)||P(e)||P(t)||Gr(t)||S(t)||k(t))return!1;i=me();for(r in e)if("$"!==r.charAt(0)&&!C(e[r])){if(!V(e[r],t[r]))return!1;i[r]=!0}for(r in t)if(!(r in i)&&"$"!==r.charAt(0)&&y(t[r])&&!C(t[r]))return!1;return!0}if(!Gr(t))return!1;if((n=e.length)==t.length){for(r=0;n>r;r++)if(!V(e[r],t[r]))return!1;return!0}}return!1}function q(e,t,n){return e.concat(Lr.call(t,n))}function z(e,t){return Lr.call(e,t||0)}function B(e,t){var n=arguments.length>2?z(arguments,2):[];return!C(t)||t instanceof RegExp?t:n.length?function(){return arguments.length?t.apply(e,q(n,arguments,0)):t.apply(e,n)}:function(){return arguments.length?t.apply(e,arguments):t.call(e)}}function H(t,n){var r=n;return"string"==typeof t&&"$"===t.charAt(0)&&"$"===t.charAt(1)?r=void 0:P(n)?r="$WINDOW":n&&e.document===n?r="$DOCUMENT":M(n)&&(r="$SCOPE"),r}function G(e,t){return v(e)?void 0:(x(t)||(t=t?2:null),JSON.stringify(e,H,t))}function W(e){return w(e)?JSON.parse(e):e}function Y(e,t){e=e.replace(Qr,"");var n=Date.parse("Jan 01, 1970 00:00:00 "+e)/6e4;return isNaN(n)?t:n}function X(e,t){return e=new Date(e.getTime()),e.setMinutes(e.getMinutes()+t),e}function K(e,t,n){n=n?-1:1;var r=e.getTimezoneOffset(),i=Y(t,r);return X(e,n*(i-r))}function Z(e){e=Dr(e).clone();try{e.empty()}catch(t){}var n=Dr("<div>").append(e).html();try{return e[0].nodeType===ii?Or(n):n.match(/^(<[^>]+>)/)[1].replace(/^<([\w\-]+)/,function(e,t){return"<"+Or(t)})}catch(t){return Or(n)}}function Q(e){try{return decodeURIComponent(e)}catch(t){}}function J(e){var t={};return r((e||"").split("&"),function(e){var n,r,i;e&&(r=e=e.replace(/\+/g,"%20"),n=e.indexOf("="),-1!==n&&(r=e.substring(0,n),i=e.substring(n+1)),r=Q(r),y(r)&&(i=y(i)?Q(i):!0,Ar.call(t,r)?Gr(t[r])?t[r].push(i):t[r]=[t[r],i]:t[r]=i))}),t}function ee(e){var t=[];return r(e,function(e,n){Gr(e)?r(e,function(e){t.push(ne(n,!0)+(e===!0?"":"="+ne(e,!0)))}):t.push(ne(n,!0)+(e===!0?"":"="+ne(e,!0)))}),t.length?t.join("&"):""}function te(e){return ne(e,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function ne(e,t){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,t?"%20":"+")}function re(e,t){var n,r,i=Jr.length;for(r=0;i>r;++r)if(n=Jr[r]+t,w(n=e.getAttribute(n)))return n;return null}function ie(e,t){var n,i,o={};r(Jr,function(t){var r=t+"app";!n&&e.hasAttribute&&e.hasAttribute(r)&&(n=e,i=e.getAttribute(r))}),r(Jr,function(t){var r,o=t+"app";!n&&(r=e.querySelector("["+o.replace(":","\\:")+"]"))&&(n=r,i=r.getAttribute(o))}),n&&(o.strictDi=null!==re(n,"strict-di"),t(n,i?[i]:[],o))}function oe(t,n,i){b(i)||(i={});var o={strictDi:!1};i=l(o,i);var a=function(){if(t=Dr(t),t.injector()){var r=t[0]===e.document?"document":Z(t);throw zr("btstrpd","App already bootstrapped with this element '{0}'",r.replace(/</,"&lt;").replace(/>/,"&gt;"))}n=n||[],n.unshift(["$provide",function(e){e.value("$rootElement",t)}]),i.debugInfoEnabled&&n.push(["$compileProvider",function(e){e.debugInfoEnabled(!0)}]),n.unshift("ng");var o=nt(n,i.strictDi);return o.invoke(["$rootScope","$rootElement","$compile","$injector",function(e,t,n,r){e.$apply(function(){t.data("$injector",r),n(t)(e)})}]),o},s=/^NG_ENABLE_DEBUG_INFO!/,u=/^NG_DEFER_BOOTSTRAP!/;return e&&s.test(e.name)&&(i.debugInfoEnabled=!0,e.name=e.name.replace(s,"")),e&&!u.test(e.name)?a():(e.name=e.name.replace(u,""),Br.resumeBootstrap=function(e){return r(e,function(e){n.push(e)}),a()},void(C(Br.resumeDeferredBootstrap)&&Br.resumeDeferredBootstrap()))}function ae(){e.name="NG_ENABLE_DEBUG_INFO!"+e.name,e.location.reload()}function se(e){var t=Br.element(e).injector();if(!t)throw zr("test","no injector found for element argument to getTestability");return t.get("$$testability")}function ue(e,t){return t=t||"_",e.replace(ei,function(e,n){return(n?t:"")+e.toLowerCase()})}function le(){var t;if(!ti){var n=Zr();jr=v(n)?e.jQuery:n?e[n]:void 0,jr&&jr.fn.on?(Dr=jr,l(jr.fn,{scope:Si.scope,isolateScope:Si.isolateScope,controller:Si.controller,injector:Si.injector,inheritedData:Si.inheritedData}),t=jr.cleanData,jr.cleanData=function(e){for(var n,r,i=0;null!=(r=e[i]);i++)n=jr._data(r,"events"),n&&n.$destroy&&jr(r).triggerHandler("$destroy");t(e)}):Dr=Ae,Br.element=Dr,ti=!0}}function ce(e,t,n){if(!e)throw zr("areq","Argument '{0}' is {1}",t||"?",n||"required");return e}function he(e,t,n){return n&&Gr(e)&&(e=e[e.length-1]),ce(C(e),t,"not a function, got "+(e&&"object"==typeof e?e.constructor.name||"Object":typeof e)),e}function fe(e,t){if("hasOwnProperty"===e)throw zr("badname","hasOwnProperty is not a valid {0} name",t)}function pe(e,t,n){if(!t)return e;for(var r,i=t.split("."),o=e,a=i.length,s=0;a>s;s++)r=i[s],e&&(e=(o=e)[r]);return!n&&C(e)?B(o,e):e}function de(e){for(var t,n=e[0],r=e[e.length-1],i=1;n!==r&&(n=n.nextSibling);i++)(t||e[i]!==n)&&(t||(t=Dr(Lr.call(e,0,i))),t.push(n));return t||e}function me(){return Object.create(null)}function ge(e){function n(e,t,n){return e[t]||(e[t]=n())}var r=t("$injector"),i=t("ng"),o=n(e,"angular",Object);return o.$$minErr=o.$$minErr||t,n(o,"module",function(){var e={};return function(t,o,a){var s=function(e,t){if("hasOwnProperty"===e)throw i("badname","hasOwnProperty is not a valid {0} name",t)};return s(t,"module"),o&&e.hasOwnProperty(t)&&(e[t]=null),n(e,t,function(){function e(e,t,n,r){return r||(r=i),function(){return r[n||"push"]([e,t,arguments]),c}}function n(e,n){return function(r,o){return o&&C(o)&&(o.$$moduleName=t),i.push([e,n,arguments]),c}}if(!o)throw r("nomod","Module '{0}' is not available! You either misspelled the module name or forgot to load it. If registering a module ensure that you specify the dependencies as the second argument.",t);var i=[],s=[],u=[],l=e("$injector","invoke","push",s),c={_invokeQueue:i,_configBlocks:s,_runBlocks:u,requires:o,name:t,provider:n("$provide","provider"),factory:n("$provide","factory"),service:n("$provide","service"),value:e("$provide","value"),constant:e("$provide","constant","unshift"),decorator:n("$provide","decorator"),animation:n("$animateProvider","register"),filter:n("$filterProvider","register"),controller:n("$controllerProvider","register"),directive:n("$compileProvider","directive"),component:n("$compileProvider","component"),config:l,run:function(e){return u.push(e),this}};return a&&l(a),c})}})}function ve(e){var t=[];return JSON.stringify(e,function(e,n){if(n=H(e,n),b(n)){if(t.indexOf(n)>=0)return"...";t.push(n)}return n})}function ye(e){return"function"==typeof e?e.toString().replace(/ \{[\s\S]*$/,""):v(e)?"undefined":"string"!=typeof e?ve(e):e}function be(n){l(n,{bootstrap:oe,copy:R,extend:l,merge:c,equals:V,element:Dr,forEach:r,injector:nt,noop:p,bind:B,toJson:G,fromJson:W,identity:d,isUndefined:v,isDefined:y,isString:w,isFunction:C,isObject:b,isNumber:x,isElement:D,isArray:Gr,version:ui,isDate:S,lowercase:Or,uppercase:Er,callbacks:{counter:0},getTestability:se,$$minErr:t,$$csp:Kr,reloadWithDebugInfo:ae}),(Fr=ge(e))("ng",["ngLocale"],["$provide",function(e){e.provider({$$sanitizeUri:Sn}),e.provider("$compile",pt).directive({a:Eo,input:Ko,textarea:Ko,form:jo,script:Ha,select:Ya,style:Ka,option:Xa,ngBind:Jo,ngBindHtml:ta,ngBindTemplate:ea,ngClass:ra,ngClassEven:oa,ngClassOdd:ia,ngCloak:aa,ngController:sa,ngForm:Fo,ngHide:La,ngIf:ca,ngInclude:ha,ngInit:pa,ngNonBindable:Aa,ngPluralize:Na,ngRepeat:Ia,ngShow:Fa,ngStyle:Ra,ngSwitch:Ua,ngSwitchWhen:Va,ngSwitchDefault:qa,ngOptions:$a,ngTransclude:Ba,ngModel:Pa,ngList:da,ngChange:na,pattern:Qa,ngPattern:Qa,required:Za,ngRequired:Za,minlength:es,ngMinlength:es,maxlength:Ja,ngMaxlength:Ja,ngValue:Qo,ngModelOptions:Ta}).directive({ngInclude:fa}).directive($o).directive(ua),e.provider({$anchorScroll:rt,$animate:Ri,$animateCss:qi,$$animateJs:Fi,$$animateQueue:Li,$$AnimateRunner:Vi,$$animateAsyncRun:Ui,$browser:lt,$cacheFactory:ct,$controller:bt,$document:_t,$exceptionHandler:wt,$filter:Fn,$$forceReflow:Yi,$interpolate:Dt,$interval:jt,$http:Et,$httpParamSerializer:St,$httpParamSerializerJQLike:Ct,$httpBackend:Nt,$xhrFactory:$t,$location:Kt,$log:Zt,$parse:vn,$rootScope:xn,$q:yn,$$q:bn,$sce:Mn,$sceDelegate:Pn,$sniffer:Tn,$templateCache:ht,$templateRequest:An,$$testability:On,$timeout:En,$window:In,$$rAF:wn,$$jqLite:Ke,$$HashMap:Mi,$$cookieReader:jn})}])}function _e(){return++ci}function we(e){return e.replace(pi,function(e,t,n,r){return r?n.toUpperCase():n}).replace(di,"Moz$1")}function xe(e){return!yi.test(e)}function Se(e){var t=e.nodeType;return t===ni||!t||t===ai}function Ce(e){for(var t in li[e.ng339])return!0;return!1}function ke(e){for(var t=0,n=e.length;n>t;t++)Ne(e[t])}function Pe(e,t){var n,i,o,a,s=t.createDocumentFragment(),u=[];if(xe(e))u.push(t.createTextNode(e));else{for(n=n||s.appendChild(t.createElement("div")),i=(bi.exec(e)||["",""])[1].toLowerCase(),o=wi[i]||wi._default,n.innerHTML=o[1]+e.replace(_i,"<$1></$2>")+o[2],a=o[0];a--;)n=n.lastChild;u=q(u,n.childNodes),n=s.firstChild,n.textContent=""}return s.textContent="",s.innerHTML="",r(u,function(e){s.appendChild(e)}),s}function Me(t,n){n=n||e.document;var r;return(r=vi.exec(t))?[n.createElement(r[1])]:(r=Pe(t,n))?r.childNodes:[]}function Te(e,t){var n=e.parentNode;n&&n.replaceChild(t,e),t.appendChild(e)}function Ae(e){if(e instanceof Ae)return e;var t;if(w(e)&&(e=Yr(e),t=!0),!(this instanceof Ae)){if(t&&"<"!=e.charAt(0))throw gi("nosel","Looking up elements via selectors is not supported by jqLite! See: http://docs.angularjs.org/api/angular.element");return new Ae(e)}t?Re(this,Me(e)):Re(this,e)}function Oe(e){return e.cloneNode(!0)}function Ee(e,t){if(t||Ne(e),e.querySelectorAll)for(var n=e.querySelectorAll("*"),r=0,i=n.length;i>r;r++)Ne(n[r])}function $e(e,t,n,i){if(y(i))throw gi("offargs","jqLite#off() does not support the `selector` argument");var o=Ie(e),a=o&&o.events,s=o&&o.handle;if(s)if(t){var u=function(t){var r=a[t];y(n)&&L(r||[],n),y(n)&&r&&r.length>0||(fi(e,t,s),delete a[t])};r(t.split(" "),function(e){u(e),mi[e]&&u(mi[e])})}else for(t in a)"$destroy"!==t&&fi(e,t,s),delete a[t]}function Ne(e,t){var n=e.ng339,r=n&&li[n];if(r){if(t)return void delete r.data[t];r.handle&&(r.events.$destroy&&r.handle({},"$destroy"),$e(e)),delete li[n],e.ng339=void 0}}function Ie(e,t){var n=e.ng339,r=n&&li[n];return t&&!r&&(e.ng339=n=_e(),r=li[n]={events:{},data:{},handle:void 0}),r}function De(e,t,n){if(Se(e)){var r=y(n),i=!r&&t&&!b(t),o=!t,a=Ie(e,!i),s=a&&a.data;if(r)s[t]=n;else{if(o)return s;if(i)return s&&s[t];l(s,t)}}}function je(e,t){return e.getAttribute?(" "+(e.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+t+" ")>-1:!1}function Fe(e,t){t&&e.setAttribute&&r(t.split(" "),function(t){e.setAttribute("class",Yr((" "+(e.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").replace(" "+Yr(t)+" "," ")))})}function Le(e,t){if(t&&e.setAttribute){var n=(" "+(e.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ");r(t.split(" "),function(e){e=Yr(e),-1===n.indexOf(" "+e+" ")&&(n+=e+" ")}),e.setAttribute("class",Yr(n))}}function Re(e,t){if(t)if(t.nodeType)e[e.length++]=t;else{var n=t.length;if("number"==typeof n&&t.window!==t){if(n)for(var r=0;n>r;r++)e[e.length++]=t[r]}else e[e.length++]=t}}function Ue(e,t){return Ve(e,"$"+(t||"ngController")+"Controller")}function Ve(e,t,n){e.nodeType==ai&&(e=e.documentElement);for(var r=Gr(t)?t:[t];e;){for(var i=0,o=r.length;o>i;i++)if(y(n=Dr.data(e,r[i])))return n;e=e.parentNode||e.nodeType===si&&e.host}}function qe(e){for(Ee(e,!0);e.firstChild;)e.removeChild(e.firstChild)}function ze(e,t){t||Ee(e);var n=e.parentNode;n&&n.removeChild(e)}function Be(t,n){n=n||e,"complete"===n.document.readyState?n.setTimeout(t):Dr(n).on("load",t)}function He(e,t){var n=Ci[t.toLowerCase()];return n&&ki[F(e)]&&n}function Ge(e){return Pi[e]}function We(e,t){var n=function(n,r){n.isDefaultPrevented=function(){return n.defaultPrevented};var i=t[r||n.type],o=i?i.length:0;if(o){if(v(n.immediatePropagationStopped)){var a=n.stopImmediatePropagation;n.stopImmediatePropagation=function(){n.immediatePropagationStopped=!0,n.stopPropagation&&n.stopPropagation(),a&&a.call(n)}}n.isImmediatePropagationStopped=function(){return n.immediatePropagationStopped===!0};var s=i.specialHandlerWrapper||Ye;o>1&&(i=U(i));for(var u=0;o>u;u++)n.isImmediatePropagationStopped()||s(e,n,i[u])}};return n.elem=e,n}function Ye(e,t,n){n.call(e,t)}function Xe(e,t,n){var r=t.relatedTarget;(!r||r!==e&&!xi.call(e,r))&&n.call(e,t)}function Ke(){this.$get=function(){return l(Ae,{hasClass:function(e,t){return e.attr&&(e=e[0]),je(e,t)},addClass:function(e,t){return e.attr&&(e=e[0]),Le(e,t)},removeClass:function(e,t){return e.attr&&(e=e[0]),Fe(e,t)}})}}function Ze(e,t){var n=e&&e.$$hashKey;if(n)return"function"==typeof n&&(n=e.$$hashKey()),n;var r=typeof e;return n="function"==r||"object"==r&&null!==e?e.$$hashKey=r+":"+(t||a)():r+":"+e}function Qe(e,t){if(t){var n=0;this.nextUid=function(){return++n}}r(e,this.put,this)}function Je(e){var t=Function.prototype.toString.call(e).replace($i,""),n=t.match(Ti)||t.match(Ai);return n}function et(e){var t=Je(e);return t?"function("+(t[1]||"").replace(/[\s\r\n]+/," ")+")":"fn"}function tt(e,t,n){var i,o,a;if("function"==typeof e){if(!(i=e.$inject)){if(i=[],e.length){if(t)throw w(n)&&n||(n=e.name||et(e)),Ni("strictdi","{0} is not using explicit annotation and cannot be invoked in strict mode",n);o=Je(e),r(o[1].split(Oi),function(e){e.replace(Ei,function(e,t,n){i.push(n)})})}e.$inject=i}}else Gr(e)?(a=e.length-1,he(e[a],"fn"),i=e.slice(0,a)):he(e,"fn",!0);return i}function nt(e,t){function n(e){return function(t,n){return b(t)?void r(t,o(e)):e(t,n)}}function i(e,t){if(fe(e,"service"),(C(t)||Gr(t))&&(t=S.instantiate(t)),!t.$get)throw Ni("pget","Provider '{0}' must define $get factory method.",e);return x[e+g]=t}function a(e,t){return function(){var n=M.invoke(t,this);if(v(n))throw Ni("undef","Provider '{0}' must return a value from $get factory method.",e);return n}}function s(e,t,n){return i(e,{$get:n!==!1?a(e,t):t})}function u(e,t){return s(e,["$injector",function(e){return e.instantiate(t)}])}function l(e,t){return s(e,m(t),!1)}function c(e,t){fe(e,"constant"),x[e]=t,k[e]=t}function h(e,t){var n=S.get(e+g),r=n.$get;n.$get=function(){var e=M.invoke(r,n);return M.invoke(t,null,{$delegate:e})}}function f(e){ce(v(e)||Gr(e),"modulesToLoad","not an array");var t,n=[];return r(e,function(e){function r(e){var t,n;for(t=0,n=e.length;n>t;t++){var r=e[t],i=S.get(r[0]);
i[r[1]].apply(i,r[2])}}if(!_.get(e)){_.put(e,!0);try{w(e)?(t=Fr(e),n=n.concat(f(t.requires)).concat(t._runBlocks),r(t._invokeQueue),r(t._configBlocks)):C(e)?n.push(S.invoke(e)):Gr(e)?n.push(S.invoke(e)):he(e,"module")}catch(i){throw Gr(e)&&(e=e[e.length-1]),i.message&&i.stack&&-1==i.stack.indexOf(i.message)&&(i=i.message+"\n"+i.stack),Ni("modulerr","Failed to instantiate module {0} due to:\n{1}",e,i.stack||i.message||i)}}}),n}function p(e,n){function r(t,r){if(e.hasOwnProperty(t)){if(e[t]===d)throw Ni("cdep","Circular dependency found: {0}",t+" <- "+y.join(" <- "));return e[t]}try{return y.unshift(t),e[t]=d,e[t]=n(t,r)}catch(i){throw e[t]===d&&delete e[t],i}finally{y.shift()}}function i(e,n,i){for(var o=[],a=nt.$$annotate(e,t,i),s=0,u=a.length;u>s;s++){var l=a[s];if("string"!=typeof l)throw Ni("itkn","Incorrect injection token! Expected service name as string, got {0}",l);o.push(n&&n.hasOwnProperty(l)?n[l]:r(l,i))}return o}function o(e){return 11>=Ir?!1:"function"==typeof e&&/^(?:class\s|constructor\()/.test(Function.prototype.toString.call(e))}function a(e,t,n,r){"string"==typeof n&&(r=n,n=null);var a=i(e,n,r);return Gr(e)&&(e=e[e.length-1]),o(e)?(a.unshift(null),new(Function.prototype.bind.apply(e,a))):e.apply(t,a)}function s(e,t,n){var r=Gr(e)?e[e.length-1]:e,o=i(e,t,n);return o.unshift(null),new(Function.prototype.bind.apply(r,o))}return{invoke:a,instantiate:s,get:r,annotate:nt.$$annotate,has:function(t){return x.hasOwnProperty(t+g)||e.hasOwnProperty(t)}}}t=t===!0;var d={},g="Provider",y=[],_=new Qe([],!0),x={$provide:{provider:n(i),factory:n(s),service:n(u),value:n(l),constant:n(c),decorator:h}},S=x.$injector=p(x,function(e,t){throw Br.isString(t)&&y.push(t),Ni("unpr","Unknown provider: {0}",y.join(" <- "))}),k={},P=p(k,function(e,t){var n=S.get(e+g,t);return M.invoke(n.$get,n,void 0,e)}),M=P;x["$injector"+g]={$get:m(P)};var T=f(e);return M=P.get("$injector"),M.strictDi=t,r(T,function(e){e&&M.invoke(e)}),M}function rt(){var e=!0;this.disableAutoScrolling=function(){e=!1},this.$get=["$window","$location","$rootScope",function(t,n,r){function i(e){var t=null;return Array.prototype.some.call(e,function(e){return"a"===F(e)?(t=e,!0):void 0}),t}function o(){var e=s.yOffset;if(C(e))e=e();else if(D(e)){var n=e[0],r=t.getComputedStyle(n);e="fixed"!==r.position?0:n.getBoundingClientRect().bottom}else x(e)||(e=0);return e}function a(e){if(e){e.scrollIntoView();var n=o();if(n){var r=e.getBoundingClientRect().top;t.scrollBy(0,r-n)}}else t.scrollTo(0,0)}function s(e){e=w(e)?e:n.hash();var t;e?(t=u.getElementById(e))?a(t):(t=i(u.getElementsByName(e)))?a(t):"top"===e&&a(null):a(null)}var u=t.document;return e&&r.$watch(function(){return n.hash()},function(e,t){(e!==t||""!==e)&&Be(function(){r.$evalAsync(s)})}),s}]}function it(e,t){return e||t?e?t?(Gr(e)&&(e=e.join(" ")),Gr(t)&&(t=t.join(" ")),e+" "+t):e:t:""}function ot(e){for(var t=0;t<e.length;t++){var n=e[t];if(n.nodeType===Di)return n}}function at(e){w(e)&&(e=e.split(" "));var t=me();return r(e,function(e){e.length&&(t[e]=!0)}),t}function st(e){return b(e)?e:{}}function ut(e,t,n,i){function o(e){try{e.apply(null,z(arguments,1))}finally{if(y--,0===y)for(;b.length;)try{b.pop()()}catch(t){n.error(t)}}}function a(e){var t=e.indexOf("#");return-1===t?"":e.substr(t)}function s(){C=null,u(),l()}function u(){_=k(),_=v(_)?null:_,V(_,T)&&(_=T),T=_}function l(){(x!==c.url()||w!==_)&&(x=c.url(),w=_,r(P,function(e){e(c.url(),_)}))}var c=this,h=e.location,f=e.history,d=e.setTimeout,m=e.clearTimeout,g={};c.isMock=!1;var y=0,b=[];c.$$completeOutstandingRequest=o,c.$$incOutstandingRequestCount=function(){y++},c.notifyWhenNoOutstandingRequests=function(e){0===y?e():b.push(e)};var _,w,x=h.href,S=t.find("base"),C=null,k=i.history?function(){try{return f.state}catch(e){}}:p;u(),w=_,c.url=function(t,n,r){if(v(r)&&(r=null),h!==e.location&&(h=e.location),f!==e.history&&(f=e.history),t){var o=w===r;if(x===t&&(!i.history||o))return c;var s=x&&Vt(x)===Vt(t);return x=t,w=r,!i.history||s&&o?((!s||C)&&(C=t),n?h.replace(t):s?h.hash=a(t):h.href=t,h.href!==t&&(C=t)):(f[n?"replaceState":"pushState"](r,"",t),u(),w=_),c}return C||h.href.replace(/%27/g,"'")},c.state=function(){return _};var P=[],M=!1,T=null;c.onUrlChange=function(t){return M||(i.history&&Dr(e).on("popstate",s),Dr(e).on("hashchange",s),M=!0),P.push(t),t},c.$$applicationDestroyed=function(){Dr(e).off("hashchange popstate",s)},c.$$checkUrlChange=l,c.baseHref=function(){var e=S.attr("href");return e?e.replace(/^(https?\:)?\/\/[^\/]*/,""):""},c.defer=function(e,t){var n;return y++,n=d(function(){delete g[n],o(e)},t||0),g[n]=!0,n},c.defer.cancel=function(e){return g[e]?(delete g[e],m(e),o(p),!0):!1}}function lt(){this.$get=["$window","$log","$sniffer","$document",function(e,t,n,r){return new ut(e,r,t,n)}]}function ct(){this.$get=function(){function e(e,r){function i(e){e!=f&&(p?p==e&&(p=e.n):p=e,o(e.n,e.p),o(e,f),f=e,f.n=null)}function o(e,t){e!=t&&(e&&(e.p=t),t&&(t.n=e))}if(e in n)throw t("$cacheFactory")("iid","CacheId '{0}' is already taken!",e);var a=0,s=l({},r,{id:e}),u=me(),c=r&&r.capacity||Number.MAX_VALUE,h=me(),f=null,p=null;return n[e]={put:function(e,t){if(!v(t)){if(c<Number.MAX_VALUE){var n=h[e]||(h[e]={key:e});i(n)}return e in u||a++,u[e]=t,a>c&&this.remove(p.key),t}},get:function(e){if(c<Number.MAX_VALUE){var t=h[e];if(!t)return;i(t)}return u[e]},remove:function(e){if(c<Number.MAX_VALUE){var t=h[e];if(!t)return;t==f&&(f=t.p),t==p&&(p=t.n),o(t.n,t.p),delete h[e]}e in u&&(delete u[e],a--)},removeAll:function(){u=me(),a=0,h=me(),f=p=null},destroy:function(){u=null,s=null,h=null,delete n[e]},info:function(){return l({},s,{size:a})}}}var n={};return e.info=function(){var e={};return r(n,function(t,n){e[n]=t.info()}),e},e.get=function(e){return n[e]},e}}function ht(){this.$get=["$cacheFactory",function(e){return e("templates")}]}function ft(){}function pt(t,n){function i(e,t,n){var i=/^\s*([@&<]|=(\*?))(\??)\s*(\w*)\s*$/,o=me();return r(e,function(e,r){if(e in k)return void(o[r]=k[e]);var a=e.match(i);if(!a)throw zi("iscp","Invalid {3} for directive '{0}'. Definition: {... {1}: '{2}' ...}",t,r,e,n?"controller bindings definition":"isolate scope definition");o[r]={mode:a[1][0],collection:"*"===a[2],optional:"?"===a[3],attrName:a[4]||r},a[4]&&(k[e]=o[r])}),o}function a(e,t){var n={isolateScope:null,bindToController:null};if(b(e.scope)&&(e.bindToController===!0?(n.bindToController=i(e.scope,t,!0),n.isolateScope={}):n.isolateScope=i(e.scope,t,!1)),b(e.bindToController)&&(n.bindToController=i(e.bindToController,t,!0)),b(n.bindToController)){var r=e.controller,o=e.controllerAs;if(!r)throw zi("noctrl","Cannot bind to controller without directive '{0}'s controller.",t);if(!yt(r,o))throw zi("noident","Cannot bind to controller without identifier for directive '{0}'.",t)}return n}function s(e){var t=e.charAt(0);if(!t||t!==Or(t))throw zi("baddir","Directive/Component name '{0}' is invalid. The first character must be a lowercase letter",e);if(e!==e.trim())throw zi("baddir","Directive/Component name '{0}' is invalid. The name should not contain leading or trailing whitespaces",e)}var u={},c="Directive",h=/^\s*directive\:\s*([\w\-]+)\s+(.*)$/,g=/(([\w\-]+)(?:\:([^;]+))?;?)/,_=j("ngSrc,ngSrcset,src,srcset"),x=/^(?:(\^\^?)?(\?)?(\^\^?)?)?/,S=/^(on[a-z]+|formaction)$/,k=me();this.directive=function A(e,n){return fe(e,"directive"),w(e)?(s(e),ce(n,"directiveFactory"),u.hasOwnProperty(e)||(u[e]=[],t.factory(e+c,["$injector","$exceptionHandler",function(t,n){var i=[];return r(u[e],function(r,o){try{var a=t.invoke(r);C(a)?a={compile:m(a)}:!a.compile&&a.link&&(a.compile=m(a.link)),a.priority=a.priority||0,a.index=o,a.name=a.name||e,a.require=a.require||a.controller&&a.name,a.restrict=a.restrict||"EA",a.$$moduleName=r.$$moduleName,i.push(a)}catch(s){n(s)}}),i}])),u[e].push(n)):r(e,o(A)),this},this.component=function(e,t){function n(e){function n(t){return C(t)||Gr(t)?function(n,r){return e.invoke(t,this,{$element:n,$attrs:r})}:t}var o=t.template||t.templateUrl?t.template:"",a={controller:i,controllerAs:yt(t.controller)||t.controllerAs||"$ctrl",template:n(o),templateUrl:n(t.templateUrl),transclude:t.transclude,scope:{},bindToController:t.bindings||{},restrict:"E",require:t.require};return r(t,function(e,t){"$"===t.charAt(0)&&(a[t]=e)}),a}var i=t.controller||function(){};return r(t,function(e,t){"$"===t.charAt(0)&&(n[t]=e,C(i)&&(i[t]=e))}),n.$inject=["$injector"],this.directive(e,n)},this.aHrefSanitizationWhitelist=function(e){return y(e)?(n.aHrefSanitizationWhitelist(e),this):n.aHrefSanitizationWhitelist()},this.imgSrcSanitizationWhitelist=function(e){return y(e)?(n.imgSrcSanitizationWhitelist(e),this):n.imgSrcSanitizationWhitelist()};var P=!0;this.debugInfoEnabled=function(e){return y(e)?(P=e,this):P};var T=10;this.onChangesTtl=function(e){return arguments.length?(T=e,this):T},this.$get=["$injector","$interpolate","$exceptionHandler","$templateRequest","$parse","$controller","$rootScope","$sce","$animate","$$sanitizeUri",function(t,n,i,o,s,m,y,k,A,O){function $(){try{if(!--be)throw ge=void 0,zi("infchng","{0} $onChanges() iterations reached. Aborting!\n",T);y.$apply(function(){for(var e=0,t=ge.length;t>e;++e)ge[e]();ge=void 0})}finally{be++}}function N(e,t){if(t){var n,r,i,o=Object.keys(t);for(n=0,r=o.length;r>n;n++)i=o[n],this[i]=t[i]}else this.$attr={};this.$$element=e}function I(e,t,n){ye.innerHTML="<span "+t+">";var r=ye.firstChild.attributes,i=r[0];r.removeNamedItem(i.name),i.value=n,e.attributes.setNamedItem(i)}function D(e,t){try{e.addClass(t)}catch(n){}}function j(t,n,r,i,o){t instanceof Dr||(t=Dr(t));for(var a=/\S+/,s=0,u=t.length;u>s;s++){var l=t[s];l.nodeType===ii&&l.nodeValue.match(a)&&Te(l,t[s]=e.document.createElement("span"))}var c=U(t,n,t,r,i,o);j.$$addScopeClass(t);var h=null;return function(e,n,r){ce(e,"scope"),o&&o.needsNewScope&&(e=e.$parent.$new()),r=r||{};var i=r.parentBoundTranscludeFn,a=r.transcludeControllers,s=r.futureParentElement;i&&i.$$boundTransclude&&(i=i.$$boundTransclude),h||(h=R(s));var u;if(u="html"!==h?Dr(ae(h,Dr("<div>").append(t).html())):n?Si.clone.call(t):t,a)for(var l in a)u.data("$"+l+"Controller",a[l].instance);return j.$$addScopeInfo(u,e),n&&n(u,e),c&&c(e,u,u,i),u}}function R(e){var t=e&&e[0];return t&&"foreignobject"!==F(t)&&Vr.call(t).match(/SVG/)?"svg":"html"}function U(e,t,n,r,i,o){function a(e,n,r,i){var o,a,s,u,l,c,h,f,m;if(p){var g=n.length;for(m=new Array(g),l=0;l<d.length;l+=3)h=d[l],m[h]=n[h]}else m=n;for(l=0,c=d.length;c>l;)s=m[d[l++]],o=d[l++],a=d[l++],o?(o.scope?(u=e.$new(),j.$$addScopeInfo(Dr(s),u)):u=e,f=o.transcludeOnThisElement?q(e,o.transclude,i):!o.templateOnThisElement&&i?i:!i&&t?q(e,t):null,o(a,u,s,r,f)):a&&a(e,s.childNodes,void 0,i)}for(var s,u,l,c,h,f,p,d=[],m=0;m<e.length;m++)s=new N,u=B(e[m],[],s,0===m?r:void 0,i),l=u.length?Y(u,e[m],s,t,n,null,[],[],o):null,l&&l.scope&&j.$$addScopeClass(s.$$element),h=l&&l.terminal||!(c=e[m].childNodes)||!c.length?null:U(c,l?(l.transcludeOnThisElement||!l.templateOnThisElement)&&l.transclude:t),(l||h)&&(d.push(m,l,h),f=!0,p=p||l),o=null;return f?a:null}function q(e,t,n){function r(r,i,o,a,s){return r||(r=e.$new(!1,s),r.$$transcluded=!0),t(r,i,{parentBoundTranscludeFn:n,transcludeControllers:o,futureParentElement:a})}var i=r.$$slots=me();for(var o in t.$$slots)t.$$slots[o]?i[o]=q(e,t.$$slots[o],n):i[o]=null;return r}function B(e,t,n,r,i){var o,a,s=e.nodeType,u=n.$attr;switch(s){case ni:J(t,mt(F(e)),"E",r,i);for(var l,c,f,p,d,m,v=e.attributes,y=0,_=v&&v.length;_>y;y++){var x=!1,S=!1;l=v[y],c=l.name,d=Yr(l.value),p=mt(c),(m=Ce.test(p))&&(c=c.replace(Hi,"").substr(8).replace(/_(.)/g,function(e,t){return t.toUpperCase()}));var C=p.match(ke);C&&ee(C[1])&&(x=c,S=c.substr(0,c.length-5)+"end",c=c.substr(0,c.length-6)),f=mt(c.toLowerCase()),u[f]=c,(m||!n.hasOwnProperty(f))&&(n[f]=d,He(e,f)&&(n[f]=!0)),le(e,t,d,f,m),J(t,f,"A",r,i,x,S)}if(a=e.className,b(a)&&(a=a.animVal),w(a)&&""!==a)for(;o=g.exec(a);)f=mt(o[2]),J(t,f,"C",r,i)&&(n[f]=Yr(o[3])),a=a.substr(o.index+o[0].length);break;case ii:if(11===Ir)for(;e.parentNode&&e.nextSibling&&e.nextSibling.nodeType===ii;)e.nodeValue=e.nodeValue+e.nextSibling.nodeValue,e.parentNode.removeChild(e.nextSibling);oe(t,e.nodeValue);break;case oi:try{o=h.exec(e.nodeValue),o&&(f=mt(o[1]),J(t,f,"M",r,i)&&(n[f]=Yr(o[2])))}catch(k){}}return t.sort(re),t}function H(e,t,n){var r=[],i=0;if(t&&e.hasAttribute&&e.hasAttribute(t)){do{if(!e)throw zi("uterdir","Unterminated attribute, found '{0}' but no matching '{1}' found.",t,n);e.nodeType==ni&&(e.hasAttribute(t)&&i++,e.hasAttribute(n)&&i--),r.push(e),e=e.nextSibling}while(i>0)}else r.push(e);return Dr(r)}function G(e,t,n){return function(r,i,o,a,s){return i=H(i[0],t,n),e(r,i,o,a,s)}}function W(e,t,n,r,i,o){var a;return e?j(t,n,r,i,o):function(){return a||(a=j(t,n,r,i,o),t=n=o=null),a.apply(this,arguments)}}function Y(e,t,n,o,a,s,u,c,h){function f(e,t,n,r){e&&(n&&(e=G(e,n,r)),e.require=d.require,e.directiveName=m,(k===d||d.$$isolateScope)&&(e=fe(e,{isolateScope:!0})),u.push(e)),t&&(n&&(t=G(t,n,r)),t.require=d.require,t.directiveName=m,(k===d||d.$$isolateScope)&&(t=fe(t,{isolateScope:!0})),c.push(t))}function p(e,i,o,a,s){function h(e,t,n,r){var i;if(M(e)||(r=n,n=t,t=e,e=void 0),E&&(i=y),n||(n=E?w.parent():w),!r)return s(e,t,i,n,L);var o=s.$$slots[r];if(o)return o(e,t,i,n,L);if(v(o))throw zi("noslot",'No parent directive that requires a transclusion with slot name "{0}". Element: {1}',r,Z(w))}var f,p,d,m,g,y,_,w,T,A;t===o?(T=n,w=n.$$element):(w=Dr(o),T=new N(w,n)),g=i,k?m=i.$new(!0):x&&(g=i.$parent),s&&(_=h,_.$$boundTransclude=s,_.isSlotFilled=function(e){return!!s.$$slots[e]}),S&&(y=K(w,T,_,S,m,i,k)),k&&(j.$$addScopeInfo(w,m,!0,!(P&&(P===k||P===k.$$originalDirective))),j.$$addScopeClass(w,!0),m.$$isolateBindings=k.$$isolateBindings,A=de(i,T,m,m.$$isolateBindings,k),A.removeWatches&&m.$on("$destroy",A.removeWatches));for(var O in y){var $=S[O],I=y[O],D=$.$$bindings.bindToController;I.identifier&&D?I.bindingInfo=de(g,T,I.instance,D,$):I.bindingInfo={};var F=I();F!==I.instance&&(I.instance=F,w.data("$"+$.name+"Controller",F),I.bindingInfo.removeWatches&&I.bindingInfo.removeWatches(),I.bindingInfo=de(g,T,I.instance,D,$))}for(r(S,function(e,t){var n=e.require;e.bindToController&&!Gr(n)&&b(n)&&l(y[t].instance,X(t,n,w,y))}),r(y,function(e){var t=e.instance;C(t.$onChanges)&&t.$onChanges(e.bindingInfo.initialChanges),C(t.$onInit)&&t.$onInit(),C(t.$onDestroy)&&g.$on("$destroy",function(){t.$onDestroy()})}),f=0,p=u.length;p>f;f++)d=u[f],pe(d,d.isolateScope?m:i,w,T,d.require&&X(d.directiveName,d.require,w,y),_);var L=i;for(k&&(k.template||null===k.templateUrl)&&(L=m),e&&e(L,o.childNodes,void 0,s),f=c.length-1;f>=0;f--)d=c[f],pe(d,d.isolateScope?m:i,w,T,d.require&&X(d.directiveName,d.require,w,y),_);r(y,function(e){var t=e.instance;C(t.$postLink)&&t.$postLink()})}h=h||{};for(var d,m,g,y,_,w=-Number.MAX_VALUE,x=h.newScopeDirective,S=h.controllerDirectives,k=h.newIsolateScopeDirective,P=h.templateDirective,T=h.nonTlbTranscludeDirective,A=!1,O=!1,E=h.hasElementTranscludeDirective,$=n.$$element=Dr(t),I=s,D=o,L=!1,R=!1,U=0,V=e.length;V>U;U++){d=e[U];var q=d.$$start,Y=d.$$end;if(q&&($=H(t,q,Y)),g=void 0,w>d.priority)break;if((_=d.scope)&&(d.templateUrl||(b(_)?(ie("new/isolated scope",k||x,d,$),k=d):ie("new/isolated scope",k,d,$)),x=x||d),m=d.name,!L&&(d.replace&&(d.templateUrl||d.template)||d.transclude&&!d.$$tlb)){for(var J,ee=U+1;J=e[ee++];)if(J.transclude&&!J.$$tlb||J.replace&&(J.templateUrl||J.template)){R=!0;break}L=!0}if(!d.templateUrl&&d.controller&&(_=d.controller,S=S||me(),ie("'"+m+"' controller",S[m],d,$),S[m]=d),_=d.transclude)if(A=!0,d.$$tlb||(ie("transclusion",T,d,$),T=d),"element"==_)E=!0,w=d.priority,g=$,$=n.$$element=Dr(j.$$createComment(m,n[m])),t=$[0],he(a,z(g),t),g[0].$$parentNode=g[0].parentNode,D=W(R,g,o,w,I&&I.name,{nonTlbTranscludeDirective:T});else{var re=me();if(g=Dr(Oe(t)).contents(),b(_)){g=[];var oe=me(),se=me();r(_,function(e,t){var n="?"===e.charAt(0);e=n?e.substring(1):e,oe[e]=t,re[t]=null,se[t]=n}),r($.contents(),function(e){var t=oe[mt(F(e))];t?(se[t]=!0,re[t]=re[t]||[],re[t].push(e)):g.push(e)}),r(se,function(e,t){if(!e)throw zi("reqslot","Required transclusion slot `{0}` was not filled.",t)});for(var ue in re)re[ue]&&(re[ue]=W(R,re[ue],o))}$.empty(),D=W(R,g,o,void 0,void 0,{needsNewScope:d.$$isolateScope||d.$$newScope}),D.$$slots=re}if(d.template)if(O=!0,ie("template",P,d,$),P=d,_=C(d.template)?d.template($,n):d.template,_=Se(_),d.replace){if(I=d,g=xe(_)?[]:vt(ae(d.templateNamespace,Yr(_))),t=g[0],1!=g.length||t.nodeType!==ni)throw zi("tplrt","Template for directive '{0}' must have exactly one root element. {1}",m,"");he(a,$,t);var le={$attr:{}},ce=B(t,[],le),ge=e.splice(U+1,e.length-(U+1));(k||x)&&Q(ce,k,x),e=e.concat(ce).concat(ge),te(n,le),V=e.length}else $.html(_);if(d.templateUrl)O=!0,ie("template",P,d,$),P=d,d.replace&&(I=d),p=ne(e.splice(U,e.length-U),$,n,a,A&&D,u,c,{controllerDirectives:S,newScopeDirective:x!==d&&x,newIsolateScopeDirective:k,templateDirective:P,nonTlbTranscludeDirective:T}),V=e.length;else if(d.compile)try{y=d.compile($,n,D),C(y)?f(null,y,q,Y):y&&f(y.pre,y.post,q,Y)}catch(ve){i(ve,Z($))}d.terminal&&(p.terminal=!0,w=Math.max(w,d.priority))}return p.scope=x&&x.scope===!0,p.transcludeOnThisElement=A,p.templateOnThisElement=O,p.transclude=D,h.hasElementTranscludeDirective=E,p}function X(e,t,n,i){var o;if(w(t)){var a=t.match(x),s=t.substring(a[0].length),u=a[1]||a[3],l="?"===a[2];if("^^"===u?n=n.parent():(o=i&&i[s],o=o&&o.instance),!o){var c="$"+s+"Controller";o=u?n.inheritedData(c):n.data(c)}if(!o&&!l)throw zi("ctreq","Controller '{0}', required by directive '{1}', can't be found!",s,e)}else if(Gr(t)){o=[];for(var h=0,f=t.length;f>h;h++)o[h]=X(e,t[h],n,i)}else b(t)&&(o={},r(t,function(t,r){o[r]=X(e,t,n,i)}));return o||null}function K(e,t,n,r,i,o,a){var s=me();for(var u in r){var l=r[u],c={$scope:l===a||l.$$isolateScope?i:o,$element:e,$attrs:t,$transclude:n},h=l.controller;"@"==h&&(h=t[l.name]);var f=m(h,c,!0,l.controllerAs);s[l.name]=f,e.data("$"+l.name+"Controller",f.instance)}return s}function Q(e,t,n){for(var r=0,i=e.length;i>r;r++)e[r]=f(e[r],{$$isolateScope:t,$$newScope:n})}function J(e,n,r,o,s,l,h){if(n===s)return null;var p=null;if(u.hasOwnProperty(n))for(var d,m=t.get(n+c),g=0,y=m.length;y>g;g++)try{if(d=m[g],(v(o)||o>d.priority)&&-1!=d.restrict.indexOf(r)){if(l&&(d=f(d,{$$start:l,$$end:h})),!d.$$bindings){var _=d.$$bindings=a(d,d.name);b(_.isolateScope)&&(d.$$isolateBindings=_.isolateScope)}e.push(d),p=d}}catch(w){i(w)}return p}function ee(e){if(u.hasOwnProperty(e))for(var n,r=t.get(e+c),i=0,o=r.length;o>i;i++)if(n=r[i],n.multiElement)return!0;return!1}function te(e,t){var n=t.$attr,i=e.$attr,o=e.$$element;r(e,function(r,i){"$"!=i.charAt(0)&&(t[i]&&t[i]!==r&&(r+=("style"===i?";":" ")+t[i]),e.$set(i,r,!0,n[i]))}),r(t,function(t,r){"class"==r?(D(o,t),e["class"]=(e["class"]?e["class"]+" ":"")+t):"style"==r?(o.attr("style",o.attr("style")+";"+t),e.style=(e.style?e.style+";":"")+t):"$"==r.charAt(0)||e.hasOwnProperty(r)||(e[r]=t,i[r]=n[r])})}function ne(e,t,n,i,a,s,u,l){var c,h,p=[],d=t[0],m=e.shift(),g=f(m,{templateUrl:null,transclude:null,replace:null,$$originalDirective:m}),v=C(m.templateUrl)?m.templateUrl(t,n):m.templateUrl,y=m.templateNamespace;return t.empty(),o(v).then(function(o){var f,_,w,x;if(o=Se(o),m.replace){if(w=xe(o)?[]:vt(ae(y,Yr(o))),f=w[0],1!=w.length||f.nodeType!==ni)throw zi("tplrt","Template for directive '{0}' must have exactly one root element. {1}",m.name,v);_={$attr:{}},he(i,t,f);var S=B(f,[],_);b(m.scope)&&Q(S,!0),e=S.concat(e),te(n,_)}else f=d,t.html(o);for(e.unshift(g),c=Y(e,f,n,a,t,m,s,u,l),r(i,function(e,n){e==f&&(i[n]=t[0])}),h=U(t[0].childNodes,a);p.length;){var C=p.shift(),k=p.shift(),P=p.shift(),M=p.shift(),T=t[0];if(!C.$$destroyed){if(k!==d){var A=k.className;l.hasElementTranscludeDirective&&m.replace||(T=Oe(f)),he(P,Dr(k),T),D(Dr(T),A)}x=c.transcludeOnThisElement?q(C,c.transclude,M):M,c(h,C,T,i,x)}}p=null}),function(e,t,n,r,i){var o=i;t.$$destroyed||(p?p.push(t,n,r,o):(c.transcludeOnThisElement&&(o=q(t,c.transclude,i)),c(h,t,n,r,o)))}}function re(e,t){var n=t.priority-e.priority;return 0!==n?n:e.name!==t.name?e.name<t.name?-1:1:e.index-t.index}function ie(e,t,n,r){function i(e){return e?" (module: "+e+")":""}if(t)throw zi("multidir","Multiple directives [{0}{1}, {2}{3}] asking for {4} on: {5}",t.name,i(t.$$moduleName),n.name,i(n.$$moduleName),e,Z(r))}function oe(e,t){var r=n(t,!0);r&&e.push({priority:0,compile:function(e){var t=e.parent(),n=!!t.length;return n&&j.$$addBindingClass(t),function(e,t){var i=t.parent();n||j.$$addBindingClass(i),j.$$addBindingInfo(i,r.expressions),e.$watch(r,function(e){t[0].nodeValue=e})}}})}function ae(t,n){switch(t=Or(t||"html")){case"svg":case"math":var r=e.document.createElement("div");return r.innerHTML="<"+t+">"+n+"</"+t+">",r.childNodes[0].childNodes;default:return n}}function se(e,t){if("srcdoc"==t)return k.HTML;var n=F(e);return"xlinkHref"==t||"form"==n&&"action"==t||"img"!=n&&("src"==t||"ngSrc"==t)?k.RESOURCE_URL:void 0}function le(e,t,r,i,o){var a=se(e,i);o=_[i]||o;var s=n(r,!0,a,o);if(s){if("multiple"===i&&"select"===F(e))throw zi("selmulti","Binding to the 'multiple' attribute is not supported. Element: {0}",Z(e));t.push({priority:100,compile:function(){return{pre:function(e,t,u){var l=u.$$observers||(u.$$observers=me());if(S.test(i))throw zi("nodomevents","Interpolations for HTML DOM event attributes are disallowed.  Please use the ng- versions (such as ng-click instead of onclick) instead.");var c=u[i];c!==r&&(s=c&&n(c,!0,a,o),r=c),s&&(u[i]=s(e),(l[i]||(l[i]=[])).$$inter=!0,(u.$$observers&&u.$$observers[i].$$scope||e).$watch(s,function(e,t){"class"===i&&e!=t?u.$updateClass(e,t):u.$set(i,e)}))}}}})}}function he(t,n,r){var i,o,a=n[0],s=n.length,u=a.parentNode;if(t)for(i=0,o=t.length;o>i;i++)if(t[i]==a){t[i++]=r;for(var l=i,c=l+s-1,h=t.length;h>l;l++,c++)h>c?t[l]=t[c]:delete t[l];t.length-=s-1,t.context===a&&(t.context=r);break}u&&u.replaceChild(r,a);var f=e.document.createDocumentFragment();for(i=0;s>i;i++)f.appendChild(n[i]);for(Dr.hasData(a)&&(Dr.data(r,Dr.data(a)),Dr(a).off("$destroy")),Dr.cleanData(f.querySelectorAll("*")),i=1;s>i;i++)delete n[i];n[0]=r,n.length=1}function fe(e,t){return l(function(){return e.apply(null,arguments)},e,t)}function pe(e,t,n,r,o,a){try{e(t,n,r,o,a)}catch(s){i(s,Z(n))}}function de(e,t,i,o,a){function u(t,n,r){C(i.$onChanges)&&n!==r&&(ge||(e.$$postDigest($),ge=[]),c||(c={},ge.push(l)),c[t]&&(r=c[t].previousValue),c[t]=new dt(r,n))}function l(){i.$onChanges(c),c=void 0}var c,h=[],f={};return r(o,function(r,o){var l,c,d,m,g,v=r.attrName,y=r.optional,b=r.mode;switch(b){case"@":y||Ar.call(t,v)||(i[o]=t[v]=void 0),t.$observe(v,function(e){if(w(e)||E(e)){var t=i[o];u(o,e,t),i[o]=e}}),t.$$observers[v].$$scope=e,l=t[v],w(l)?i[o]=n(l)(e):E(l)&&(i[o]=l),f[o]=new dt(Bi,i[o]);break;case"=":if(!Ar.call(t,v)){if(y)break;t[v]=void 0}if(y&&!t[v])break;c=s(t[v]),m=c.literal?V:function(e,t){return e===t||e!==e&&t!==t},d=c.assign||function(){throw l=i[o]=c(e),zi("nonassign","Expression '{0}' in attribute '{1}' used with directive '{2}' is non-assignable!",t[v],v,a.name)},l=i[o]=c(e);var _=function(t){return m(t,i[o])||(m(t,l)?d(e,t=i[o]):i[o]=t),l=t};_.$stateful=!0,g=r.collection?e.$watchCollection(t[v],_):e.$watch(s(t[v],_),null,c.literal),h.push(g);break;case"<":if(!Ar.call(t,v)){if(y)break;t[v]=void 0}if(y&&!t[v])break;c=s(t[v]),i[o]=c(e),f[o]=new dt(Bi,i[o]),g=e.$watch(c,function(e,t){e===t&&(t=i[o]),u(o,e,t),i[o]=e},c.literal),h.push(g);break;case"&":if(c=t.hasOwnProperty(v)?s(t[v]):p,c===p&&y)break;i[o]=function(t){return c(e,t)}}}),{initialChanges:f,removeWatches:h.length&&function(){for(var e=0,t=h.length;t>e;++e)h[e]()}}}var ge,ve=/^\w/,ye=e.document.createElement("div"),be=T;N.prototype={$normalize:mt,$addClass:function(e){e&&e.length>0&&A.addClass(this.$$element,e)},$removeClass:function(e){e&&e.length>0&&A.removeClass(this.$$element,e)},$updateClass:function(e,t){var n=gt(e,t);n&&n.length&&A.addClass(this.$$element,n);var r=gt(t,e);r&&r.length&&A.removeClass(this.$$element,r)},$set:function(e,t,n,o){var a,s=this.$$element[0],u=He(s,e),l=Ge(e),c=e;if(u?(this.$$element.prop(e,t),o=u):l&&(this[l]=t,c=l),this[e]=t,o?this.$attr[e]=o:(o=this.$attr[e],o||(this.$attr[e]=o=ue(e,"-"))),a=F(this.$$element),"a"===a&&("href"===e||"xlinkHref"===e)||"img"===a&&"src"===e)this[e]=t=O(t,"src"===e);else if("img"===a&&"srcset"===e){for(var h="",f=Yr(t),p=/(\s+\d+x\s*,|\s+\d+w\s*,|\s+,|,\s+)/,d=/\s/.test(f)?p:/(,)/,m=f.split(d),g=Math.floor(m.length/2),y=0;g>y;y++){var b=2*y;h+=O(Yr(m[b]),!0),h+=" "+Yr(m[b+1])}var _=Yr(m[2*y]).split(/\s/);h+=O(Yr(_[0]),!0),2===_.length&&(h+=" "+Yr(_[1])),this[e]=t=h}n!==!1&&(null===t||v(t)?this.$$element.removeAttr(o):ve.test(o)?this.$$element.attr(o,t):I(this.$$element[0],o,t));var w=this.$$observers;w&&r(w[c],function(e){try{e(t)}catch(n){i(n)}})},$observe:function(e,t){var n=this,r=n.$$observers||(n.$$observers=me()),i=r[e]||(r[e]=[]);return i.push(t),y.$evalAsync(function(){i.$$inter||!n.hasOwnProperty(e)||v(n[e])||t(n[e])}),function(){L(i,t)}}};var _e=n.startSymbol(),we=n.endSymbol(),Se="{{"==_e&&"}}"==we?d:function(e){return e.replace(/\{\{/g,_e).replace(/}}/g,we)},Ce=/^ngAttr[A-Z]/,ke=/^(.+)Start$/;return j.$$addBindingInfo=P?function(e,t){var n=e.data("$binding")||[];Gr(t)?n=n.concat(t):n.push(t),e.data("$binding",n)}:p,j.$$addBindingClass=P?function(e){D(e,"ng-binding")}:p,j.$$addScopeInfo=P?function(e,t,n,r){var i=n?r?"$isolateScopeNoTemplate":"$isolateScope":"$scope";e.data(i,t)}:p,j.$$addScopeClass=P?function(e,t){D(e,t?"ng-isolate-scope":"ng-scope")}:p,j.$$createComment=function(t,n){var r="";return P&&(r=" "+(t||"")+": "+(n||"")+" "),e.document.createComment(r)},j}]}function dt(e,t){this.previousValue=e,this.currentValue=t}function mt(e){return we(e.replace(Hi,""))}function gt(e,t){var n="",r=e.split(/\s+/),i=t.split(/\s+/);e:for(var o=0;o<r.length;o++){for(var a=r[o],s=0;s<i.length;s++)if(a==i[s])continue e;n+=(n.length>0?" ":"")+a}return n}function vt(e){e=Dr(e);var t=e.length;if(1>=t)return e;for(;t--;){var n=e[t];n.nodeType===oi&&Rr.call(e,t,1)}return e}function yt(e,t){if(t&&w(t))return t;if(w(e)){var n=Wi.exec(e);if(n)return n[3]}}function bt(){var e={},n=!1;this.has=function(t){return e.hasOwnProperty(t)},this.register=function(t,n){fe(t,"controller"),b(t)?l(e,t):e[t]=n},this.allowGlobals=function(){n=!0},this.$get=["$injector","$window",function(r,i){function o(e,n,r,i){if(!e||!b(e.$scope))throw t("$controller")("noscp","Cannot export controller '{0}' as '{1}'! No $scope object provided via `locals`.",i,n);e.$scope[n]=r}return function(t,a,s,u){var c,h,f,p;if(s=s===!0,u&&w(u)&&(p=u),w(t)){if(h=t.match(Wi),!h)throw Gi("ctrlfmt","Badly formed controller string '{0}'. Must match `__name__ as __id__` or `__name__`.",t);f=h[1],p=p||h[3],t=e.hasOwnProperty(f)?e[f]:pe(a.$scope,f,!0)||(n?pe(i,f,!0):void 0),he(t,f,!0)}if(s){var d=(Gr(t)?t[t.length-1]:t).prototype;c=Object.create(d||null),p&&o(a,p,c,f||t.name);var m;return m=l(function(){var e=r.invoke(t,c,a,f);return e!==c&&(b(e)||C(e))&&(c=e,p&&o(a,p,c,f||t.name)),c},{instance:c,identifier:p})}return c=r.instantiate(t,a,f),p&&o(a,p,c,f||t.name),c}}]}function _t(){this.$get=["$window",function(e){return Dr(e.document)}]}function wt(){this.$get=["$log",function(e){return function(t,n){e.error.apply(e,arguments)}}]}function xt(e){return b(e)?S(e)?e.toISOString():G(e):e}function St(){this.$get=function(){return function(e){if(!e)return"";var t=[];return i(e,function(e,n){null===e||v(e)||(Gr(e)?r(e,function(e){t.push(ne(n)+"="+ne(xt(e)))}):t.push(ne(n)+"="+ne(xt(e))))}),t.join("&")}}}function Ct(){this.$get=function(){return function(e){function t(e,o,a){null===e||v(e)||(Gr(e)?r(e,function(e,n){t(e,o+"["+(b(e)?n:"")+"]")}):b(e)&&!S(e)?i(e,function(e,n){t(e,o+(a?"":"[")+n+(a?"":"]"))}):n.push(ne(o)+"="+ne(xt(e))))}if(!e)return"";var n=[];return t(e,"",!0),n.join("&")}}}function kt(e,t){if(w(e)){var n=e.replace(Ji,"").trim();if(n){var r=t("Content-Type");(r&&0===r.indexOf(Xi)||Pt(n))&&(e=W(n))}}return e}function Pt(e){var t=e.match(Zi);return t&&Qi[t[0]].test(e)}function Mt(e){function t(e,t){e&&(i[e]=i[e]?i[e]+", "+t:t)}var n,i=me();return w(e)?r(e.split("\n"),function(e){n=e.indexOf(":"),t(Or(Yr(e.substr(0,n))),Yr(e.substr(n+1)))}):b(e)&&r(e,function(e,n){t(Or(n),Yr(e))}),i}function Tt(e){var t;return function(n){if(t||(t=Mt(e)),n){var r=t[Or(n)];return void 0===r&&(r=null),r}return t}}function At(e,t,n,i){return C(i)?i(e,t,n):(r(i,function(r){e=r(e,t,n)}),e)}function Ot(e){return e>=200&&300>e}function Et(){var e=this.defaults={transformResponse:[kt],transformRequest:[function(e){return!b(e)||T(e)||O(e)||A(e)?e:G(e)}],headers:{common:{Accept:"application/json, text/plain, */*"},post:U(Ki),put:U(Ki),patch:U(Ki)},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",paramSerializer:"$httpParamSerializer"},n=!1;this.useApplyAsync=function(e){return y(e)?(n=!!e,this):n};var i=!0;this.useLegacyPromiseExtensions=function(e){return y(e)?(i=!!e,this):i};var o=this.interceptors=[];this.$get=["$httpBackend","$$cookieReader","$cacheFactory","$rootScope","$q","$injector",function(a,s,u,c,h,f){function p(n){function o(e){var t=l({},e);return t.data=At(e.data,e.headers,e.status,u.transformResponse),Ot(e.status)?t:h.reject(t)}function a(e,t){var n,i={};return r(e,function(e,r){C(e)?(n=e(t),null!=n&&(i[r]=n)):i[r]=e}),i}function s(t){var n,r,i,o=e.headers,s=l({},t.headers);o=l({},o.common,o[Or(t.method)]);e:for(n in o){r=Or(n);for(i in s)if(Or(i)===r)continue e;s[n]=o[n]}return a(s,U(t))}if(!b(n))throw t("$http")("badreq","Http request configuration must be an object.  Received: {0}",n);if(!w(n.url))throw t("$http")("badreq","Http request configuration url must be a string.  Received: {0}",n.url);var u=l({method:"get",transformRequest:e.transformRequest,transformResponse:e.transformResponse,paramSerializer:e.paramSerializer},n);u.headers=s(n),u.method=Er(u.method),u.paramSerializer=w(u.paramSerializer)?f.get(u.paramSerializer):u.paramSerializer;var c=function(t){var n=t.headers,i=At(t.data,Tt(n),void 0,t.transformRequest);return v(i)&&r(n,function(e,t){"content-type"===Or(t)&&delete n[t]}),v(t.withCredentials)&&!v(e.withCredentials)&&(t.withCredentials=e.withCredentials),g(t,i).then(o,o)},p=[c,void 0],d=h.when(u);for(r(S,function(e){(e.request||e.requestError)&&p.unshift(e.request,e.requestError),(e.response||e.responseError)&&p.push(e.response,e.responseError)});p.length;){var m=p.shift(),y=p.shift();d=d.then(m,y)}return i?(d.success=function(e){return he(e,"fn"),d.then(function(t){e(t.data,t.status,t.headers,u)}),d},d.error=function(e){return he(e,"fn"),d.then(null,function(t){e(t.data,t.status,t.headers,u)}),d}):(d.success=to("success"),d.error=to("error")),d}function d(e){r(arguments,function(e){p[e]=function(t,n){return p(l({},n||{},{method:e,url:t}))}})}function m(e){r(arguments,function(e){p[e]=function(t,n,r){return p(l({},r||{},{method:e,url:t,data:n}))}})}function g(t,i){function o(e){if(e){var t={};return r(e,function(e,r){t[r]=function(t){function r(){e(t)}n?c.$applyAsync(r):c.$$phase?r():c.$apply(r)}}),t}}function u(e,t,r,i){function o(){l(t,e,r,i)}m&&(Ot(e)?m.put(k,[e,t,Mt(r),i]):m.remove(k)),n?c.$applyAsync(o):(o(),c.$$phase||c.$apply())}function l(e,n,r,i){n=n>=-1?n:0,(Ot(n)?w.resolve:w.reject)({data:e,status:n,headers:Tt(r),config:t,statusText:i})}function f(e){l(e.data,e.status,U(e.headers()),e.statusText)}function d(){var e=p.pendingRequests.indexOf(t);-1!==e&&p.pendingRequests.splice(e,1)}var m,g,w=h.defer(),S=w.promise,C=t.headers,k=_(t.url,t.paramSerializer(t.params));if(p.pendingRequests.push(t),S.then(d,d),!t.cache&&!e.cache||t.cache===!1||"GET"!==t.method&&"JSONP"!==t.method||(m=b(t.cache)?t.cache:b(e.cache)?e.cache:x),m&&(g=m.get(k),y(g)?$(g)?g.then(f,f):Gr(g)?l(g[1],g[0],U(g[2]),g[3]):l(g,200,{},"OK"):m.put(k,S)),v(g)){var P=Nn(t.url)?s()[t.xsrfCookieName||e.xsrfCookieName]:void 0;P&&(C[t.xsrfHeaderName||e.xsrfHeaderName]=P),a(t.method,k,i,u,C,t.timeout,t.withCredentials,t.responseType,o(t.eventHandlers),o(t.uploadEventHandlers))}return S;
}function _(e,t){return t.length>0&&(e+=(-1==e.indexOf("?")?"?":"&")+t),e}var x=u("$http");e.paramSerializer=w(e.paramSerializer)?f.get(e.paramSerializer):e.paramSerializer;var S=[];return r(o,function(e){S.unshift(w(e)?f.get(e):f.invoke(e))}),p.pendingRequests=[],d("get","delete","head","jsonp"),m("post","put","patch"),p.defaults=e,p}]}function $t(){this.$get=function(){return function(){return new e.XMLHttpRequest}}}function Nt(){this.$get=["$browser","$window","$document","$xhrFactory",function(e,t,n,r){return It(e,r,e.defer,t.angular.callbacks,n[0])}]}function It(e,t,n,i,o){function a(e,t,n){var r=o.createElement("script"),a=null;return r.type="text/javascript",r.src=e,r.async=!0,a=function(e){fi(r,"load",a),fi(r,"error",a),o.body.removeChild(r),r=null;var s=-1,u="unknown";e&&("load"!==e.type||i[t].called||(e={type:"error"}),u=e.type,s="error"===e.type?404:200),n&&n(s,u)},hi(r,"load",a),hi(r,"error",a),o.body.appendChild(r),a}return function(o,s,u,l,c,h,f,d,m,g){function b(){x&&x(),S&&S.abort()}function _(t,r,i,o,a){y(P)&&n.cancel(P),x=S=null,t(r,i,o,a),e.$$completeOutstandingRequest(p)}if(e.$$incOutstandingRequestCount(),s=s||e.url(),"jsonp"==Or(o)){var w="_"+(i.counter++).toString(36);i[w]=function(e){i[w].data=e,i[w].called=!0};var x=a(s.replace("JSON_CALLBACK","angular.callbacks."+w),w,function(e,t){_(l,e,i[w].data,"",t),i[w]=p})}else{var S=t(o,s);S.open(o,s,!0),r(c,function(e,t){y(e)&&S.setRequestHeader(t,e)}),S.onload=function(){var e=S.statusText||"",t="response"in S?S.response:S.responseText,n=1223===S.status?204:S.status;0===n&&(n=t?200:"file"==$n(s).protocol?404:0),_(l,n,t,S.getAllResponseHeaders(),e)};var C=function(){_(l,-1,null,null,"")};if(S.onerror=C,S.onabort=C,r(m,function(e,t){S.addEventListener(t,e)}),r(g,function(e,t){S.upload.addEventListener(t,e)}),f&&(S.withCredentials=!0),d)try{S.responseType=d}catch(k){if("json"!==d)throw k}S.send(v(u)?null:u)}if(h>0)var P=n(b,h);else $(h)&&h.then(b)}}function Dt(){var e="{{",t="}}";this.startSymbol=function(t){return t?(e=t,this):e},this.endSymbol=function(e){return e?(t=e,this):t},this.$get=["$parse","$exceptionHandler","$sce",function(n,r,i){function o(e){return"\\\\\\"+e}function a(n){return n.replace(p,e).replace(d,t)}function s(e){if(null==e)return"";switch(typeof e){case"string":break;case"number":e=""+e;break;default:e=G(e)}return e}function u(e,t,n,r){var i;return i=e.$watch(function(e){return i(),r(e)},t,n)}function c(o,c,p,d){function g(e){try{return e=$(e),d&&!y(e)?e:s(e)}catch(t){r(no.interr(o,t))}}if(!o.length||-1===o.indexOf(e)){var b;if(!c){var _=a(o);b=m(_),b.exp=o,b.expressions=[],b.$$watchDelegate=u}return b}d=!!d;for(var w,x,S,k=0,P=[],M=[],T=o.length,A=[],O=[];T>k;){if(-1==(w=o.indexOf(e,k))||-1==(x=o.indexOf(t,w+h))){k!==T&&A.push(a(o.substring(k)));break}k!==w&&A.push(a(o.substring(k,w))),S=o.substring(w+h,x),P.push(S),M.push(n(S,g)),k=x+f,O.push(A.length),A.push("")}if(p&&A.length>1&&no.throwNoconcat(o),!c||P.length){var E=function(e){for(var t=0,n=P.length;n>t;t++){if(d&&v(e[t]))return;A[O[t]]=e[t]}return A.join("")},$=function(e){return p?i.getTrusted(p,e):i.valueOf(e)};return l(function(e){var t=0,n=P.length,i=new Array(n);try{for(;n>t;t++)i[t]=M[t](e);return E(i)}catch(a){r(no.interr(o,a))}},{exp:o,expressions:P,$$watchDelegate:function(e,t){var n;return e.$watchGroup(M,function(r,i){var o=E(r);C(t)&&t.call(this,o,r!==i?n:o,e),n=o})}})}}var h=e.length,f=t.length,p=new RegExp(e.replace(/./g,o),"g"),d=new RegExp(t.replace(/./g,o),"g");return c.startSymbol=function(){return e},c.endSymbol=function(){return t},c}]}function jt(){this.$get=["$rootScope","$window","$q","$$q","$browser",function(e,t,n,r,i){function o(o,s,u,l){function c(){h?o.apply(null,f):o(m)}var h=arguments.length>4,f=h?z(arguments,4):[],p=t.setInterval,d=t.clearInterval,m=0,g=y(l)&&!l,v=(g?r:n).defer(),b=v.promise;return u=y(u)?u:0,b.$$intervalId=p(function(){g?i.defer(c):e.$evalAsync(c),v.notify(m++),u>0&&m>=u&&(v.resolve(m),d(b.$$intervalId),delete a[b.$$intervalId]),g||e.$apply()},s),a[b.$$intervalId]=v,b}var a={};return o.cancel=function(e){return e&&e.$$intervalId in a?(a[e.$$intervalId].reject("canceled"),t.clearInterval(e.$$intervalId),delete a[e.$$intervalId],!0):!1},o}]}function Ft(e){for(var t=e.split("/"),n=t.length;n--;)t[n]=te(t[n]);return t.join("/")}function Lt(e,t){var n=$n(e);t.$$protocol=n.protocol,t.$$host=n.hostname,t.$$port=h(n.port)||io[n.protocol]||null}function Rt(e,t){var n="/"!==e.charAt(0);n&&(e="/"+e);var r=$n(e);t.$$path=decodeURIComponent(n&&"/"===r.pathname.charAt(0)?r.pathname.substring(1):r.pathname),t.$$search=J(r.search),t.$$hash=decodeURIComponent(r.hash),t.$$path&&"/"!=t.$$path.charAt(0)&&(t.$$path="/"+t.$$path)}function Ut(e,t){return 0===t.indexOf(e)?t.substr(e.length):void 0}function Vt(e){var t=e.indexOf("#");return-1==t?e:e.substr(0,t)}function qt(e){return e.replace(/(#.+)|#$/,"$1")}function zt(e){return e.substr(0,Vt(e).lastIndexOf("/")+1)}function Bt(e){return e.substring(0,e.indexOf("/",e.indexOf("//")+2))}function Ht(e,t,n){this.$$html5=!0,n=n||"",Lt(e,this),this.$$parse=function(e){var n=Ut(t,e);if(!w(n))throw oo("ipthprfx",'Invalid url "{0}", missing path prefix "{1}".',e,t);Rt(n,this),this.$$path||(this.$$path="/"),this.$$compose()},this.$$compose=function(){var e=ee(this.$$search),n=this.$$hash?"#"+te(this.$$hash):"";this.$$url=Ft(this.$$path)+(e?"?"+e:"")+n,this.$$absUrl=t+this.$$url.substr(1)},this.$$parseLinkUrl=function(r,i){if(i&&"#"===i[0])return this.hash(i.slice(1)),!0;var o,a,s;return y(o=Ut(e,r))?(a=o,s=y(o=Ut(n,o))?t+(Ut("/",o)||o):e+a):y(o=Ut(t,r))?s=t+o:t==r+"/"&&(s=t),s&&this.$$parse(s),!!s}}function Gt(e,t,n){Lt(e,this),this.$$parse=function(r){function i(e,t,n){var r,i=/^\/[A-Z]:(\/.*)/;return 0===t.indexOf(n)&&(t=t.replace(n,"")),i.exec(t)?e:(r=i.exec(e),r?r[1]:e)}var o,a=Ut(e,r)||Ut(t,r);v(a)||"#"!==a.charAt(0)?this.$$html5?o=a:(o="",v(a)&&(e=r,this.replace())):(o=Ut(n,a),v(o)&&(o=a)),Rt(o,this),this.$$path=i(this.$$path,o,e),this.$$compose()},this.$$compose=function(){var t=ee(this.$$search),r=this.$$hash?"#"+te(this.$$hash):"";this.$$url=Ft(this.$$path)+(t?"?"+t:"")+r,this.$$absUrl=e+(this.$$url?n+this.$$url:"")},this.$$parseLinkUrl=function(t,n){return Vt(e)==Vt(t)?(this.$$parse(t),!0):!1}}function Wt(e,t,n){this.$$html5=!0,Gt.apply(this,arguments),this.$$parseLinkUrl=function(r,i){if(i&&"#"===i[0])return this.hash(i.slice(1)),!0;var o,a;return e==Vt(r)?o=r:(a=Ut(t,r))?o=e+n+a:t===r+"/"&&(o=t),o&&this.$$parse(o),!!o},this.$$compose=function(){var t=ee(this.$$search),r=this.$$hash?"#"+te(this.$$hash):"";this.$$url=Ft(this.$$path)+(t?"?"+t:"")+r,this.$$absUrl=e+n+this.$$url}}function Yt(e){return function(){return this[e]}}function Xt(e,t){return function(n){return v(n)?this[e]:(this[e]=t(n),this.$$compose(),this)}}function Kt(){var e="",t={enabled:!1,requireBase:!0,rewriteLinks:!0};this.hashPrefix=function(t){return y(t)?(e=t,this):e},this.html5Mode=function(e){return E(e)?(t.enabled=e,this):b(e)?(E(e.enabled)&&(t.enabled=e.enabled),E(e.requireBase)&&(t.requireBase=e.requireBase),E(e.rewriteLinks)&&(t.rewriteLinks=e.rewriteLinks),this):t},this.$get=["$rootScope","$browser","$sniffer","$rootElement","$window",function(n,r,i,o,a){function s(e,t,n){var i=l.url(),o=l.$$state;try{r.url(e,t,n),l.$$state=r.state()}catch(a){throw l.url(i),l.$$state=o,a}}function u(e,t){n.$broadcast("$locationChangeSuccess",l.absUrl(),e,l.$$state,t)}var l,c,h,f=r.baseHref(),p=r.url();if(t.enabled){if(!f&&t.requireBase)throw oo("nobase","$location in HTML5 mode requires a <base> tag to be present!");h=Bt(p)+(f||"/"),c=i.history?Ht:Wt}else h=Vt(p),c=Gt;var d=zt(h);l=new c(h,d,"#"+e),l.$$parseLinkUrl(p,p),l.$$state=r.state();var m=/^\s*(javascript|mailto):/i;o.on("click",function(e){if(t.rewriteLinks&&!e.ctrlKey&&!e.metaKey&&!e.shiftKey&&2!=e.which&&2!=e.button){for(var i=Dr(e.target);"a"!==F(i[0]);)if(i[0]===o[0]||!(i=i.parent())[0])return;var s=i.prop("href"),u=i.attr("href")||i.attr("xlink:href");b(s)&&"[object SVGAnimatedString]"===s.toString()&&(s=$n(s.animVal).href),m.test(s)||!s||i.attr("target")||e.isDefaultPrevented()||l.$$parseLinkUrl(s,u)&&(e.preventDefault(),l.absUrl()!=r.url()&&(n.$apply(),a.angular["ff-684208-preventDefault"]=!0))}}),qt(l.absUrl())!=qt(p)&&r.url(l.absUrl(),!0);var g=!0;return r.onUrlChange(function(e,t){return v(Ut(d,e))?void(a.location.href=e):(n.$evalAsync(function(){var r,i=l.absUrl(),o=l.$$state;e=qt(e),l.$$parse(e),l.$$state=t,r=n.$broadcast("$locationChangeStart",e,i,t,o).defaultPrevented,l.absUrl()===e&&(r?(l.$$parse(i),l.$$state=o,s(i,!1,o)):(g=!1,u(i,o)))}),void(n.$$phase||n.$digest()))}),n.$watch(function(){var e=qt(r.url()),t=qt(l.absUrl()),o=r.state(),a=l.$$replace,c=e!==t||l.$$html5&&i.history&&o!==l.$$state;(g||c)&&(g=!1,n.$evalAsync(function(){var t=l.absUrl(),r=n.$broadcast("$locationChangeStart",t,e,l.$$state,o).defaultPrevented;l.absUrl()===t&&(r?(l.$$parse(e),l.$$state=o):(c&&s(t,a,o===l.$$state?null:l.$$state),u(e,o)))})),l.$$replace=!1}),l}]}function Zt(){var e=!0,t=this;this.debugEnabled=function(t){return y(t)?(e=t,this):e},this.$get=["$window",function(n){function i(e){return e instanceof Error&&(e.stack?e=e.message&&-1===e.stack.indexOf(e.message)?"Error: "+e.message+"\n"+e.stack:e.stack:e.sourceURL&&(e=e.message+"\n"+e.sourceURL+":"+e.line)),e}function o(e){var t=n.console||{},o=t[e]||t.log||p,a=!1;try{a=!!o.apply}catch(s){}return a?function(){var e=[];return r(arguments,function(t){e.push(i(t))}),o.apply(t,e)}:function(e,t){o(e,null==t?"":t)}}return{log:o("log"),info:o("info"),warn:o("warn"),error:o("error"),debug:function(){var n=o("debug");return function(){e&&n.apply(t,arguments)}}()}}]}function Qt(e,t){if("__defineGetter__"===e||"__defineSetter__"===e||"__lookupGetter__"===e||"__lookupSetter__"===e||"__proto__"===e)throw so("isecfld","Attempting to access a disallowed field in Angular expressions! Expression: {0}",t);return e}function Jt(e){return e+""}function en(e,t){if(e){if(e.constructor===e)throw so("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",t);if(e.window===e)throw so("isecwindow","Referencing the Window in Angular expressions is disallowed! Expression: {0}",t);if(e.children&&(e.nodeName||e.prop&&e.attr&&e.find))throw so("isecdom","Referencing DOM nodes in Angular expressions is disallowed! Expression: {0}",t);if(e===Object)throw so("isecobj","Referencing Object in Angular expressions is disallowed! Expression: {0}",t)}return e}function tn(e,t){if(e){if(e.constructor===e)throw so("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",t);if(e===uo||e===lo||e===co)throw so("isecff","Referencing call, apply or bind in Angular expressions is disallowed! Expression: {0}",t)}}function nn(e,t){if(e&&(e===0..constructor||e===(!1).constructor||e==="".constructor||e==={}.constructor||e===[].constructor||e===Function.constructor))throw so("isecaf","Assigning to a constructor is disallowed! Expression: {0}",t)}function rn(e,t){return"undefined"!=typeof e?e:t}function on(e,t){return"undefined"==typeof e?t:"undefined"==typeof t?e:e+t}function an(e,t){var n=e(t);return!n.$stateful}function sn(e,t){var n,i;switch(e.type){case mo.Program:n=!0,r(e.body,function(e){sn(e.expression,t),n=n&&e.expression.constant}),e.constant=n;break;case mo.Literal:e.constant=!0,e.toWatch=[];break;case mo.UnaryExpression:sn(e.argument,t),e.constant=e.argument.constant,e.toWatch=e.argument.toWatch;break;case mo.BinaryExpression:sn(e.left,t),sn(e.right,t),e.constant=e.left.constant&&e.right.constant,e.toWatch=e.left.toWatch.concat(e.right.toWatch);break;case mo.LogicalExpression:sn(e.left,t),sn(e.right,t),e.constant=e.left.constant&&e.right.constant,e.toWatch=e.constant?[]:[e];break;case mo.ConditionalExpression:sn(e.test,t),sn(e.alternate,t),sn(e.consequent,t),e.constant=e.test.constant&&e.alternate.constant&&e.consequent.constant,e.toWatch=e.constant?[]:[e];break;case mo.Identifier:e.constant=!1,e.toWatch=[e];break;case mo.MemberExpression:sn(e.object,t),e.computed&&sn(e.property,t),e.constant=e.object.constant&&(!e.computed||e.property.constant),e.toWatch=[e];break;case mo.CallExpression:n=e.filter?an(t,e.callee.name):!1,i=[],r(e.arguments,function(e){sn(e,t),n=n&&e.constant,e.constant||i.push.apply(i,e.toWatch)}),e.constant=n,e.toWatch=e.filter&&an(t,e.callee.name)?i:[e];break;case mo.AssignmentExpression:sn(e.left,t),sn(e.right,t),e.constant=e.left.constant&&e.right.constant,e.toWatch=[e];break;case mo.ArrayExpression:n=!0,i=[],r(e.elements,function(e){sn(e,t),n=n&&e.constant,e.constant||i.push.apply(i,e.toWatch)}),e.constant=n,e.toWatch=i;break;case mo.ObjectExpression:n=!0,i=[],r(e.properties,function(e){sn(e.value,t),n=n&&e.value.constant,e.value.constant||i.push.apply(i,e.value.toWatch)}),e.constant=n,e.toWatch=i;break;case mo.ThisExpression:e.constant=!1,e.toWatch=[];break;case mo.LocalsExpression:e.constant=!1,e.toWatch=[]}}function un(e){if(1==e.length){var t=e[0].expression,n=t.toWatch;return 1!==n.length?n:n[0]!==t?n:void 0}}function ln(e){return e.type===mo.Identifier||e.type===mo.MemberExpression}function cn(e){return 1===e.body.length&&ln(e.body[0].expression)?{type:mo.AssignmentExpression,left:e.body[0].expression,right:{type:mo.NGValueParameter},operator:"="}:void 0}function hn(e){return 0===e.body.length||1===e.body.length&&(e.body[0].expression.type===mo.Literal||e.body[0].expression.type===mo.ArrayExpression||e.body[0].expression.type===mo.ObjectExpression)}function fn(e){return e.constant}function pn(e,t){this.astBuilder=e,this.$filter=t}function dn(e,t){this.astBuilder=e,this.$filter=t}function mn(e){return"constructor"==e}function gn(e){return C(e.valueOf)?e.valueOf():vo.call(e)}function vn(){var e,t,n=me(),i=me(),o={"true":!0,"false":!1,"null":null,undefined:void 0};this.addLiteral=function(e,t){o[e]=t},this.setIdentifierFns=function(n,r){return e=n,t=r,this},this.$get=["$filter",function(a){function s(e,t,r){var o,s,l;switch(r=r||_,typeof e){case"string":e=e.trim(),l=e;var g=r?i:n;if(o=g[l],!o){":"===e.charAt(0)&&":"===e.charAt(1)&&(s=!0,e=e.substring(2));var y=r?b:v,w=new po(y),x=new go(w,a,y);o=x.parse(e),o.constant?o.$$watchDelegate=d:s?o.$$watchDelegate=o.literal?f:h:o.inputs&&(o.$$watchDelegate=c),r&&(o=u(o)),g[l]=o}return m(o,t);case"function":return m(e,t);default:return m(p,t)}}function u(e){function t(t,n,r,i){var o=_;_=!0;try{return e(t,n,r,i)}finally{_=o}}if(!e)return e;t.$$watchDelegate=e.$$watchDelegate,t.assign=u(e.assign),t.constant=e.constant,t.literal=e.literal;for(var n=0;e.inputs&&n<e.inputs.length;++n)e.inputs[n]=u(e.inputs[n]);return t.inputs=e.inputs,t}function l(e,t){return null==e||null==t?e===t:"object"==typeof e&&(e=gn(e),"object"==typeof e)?!1:e===t||e!==e&&t!==t}function c(e,t,n,r,i){var o,a=r.inputs;if(1===a.length){var s=l;return a=a[0],e.$watch(function(e){var t=a(e);return l(t,s)||(o=r(e,void 0,void 0,[t]),s=t&&gn(t)),o},t,n,i)}for(var u=[],c=[],h=0,f=a.length;f>h;h++)u[h]=l,c[h]=null;return e.$watch(function(e){for(var t=!1,n=0,i=a.length;i>n;n++){var s=a[n](e);(t||(t=!l(s,u[n])))&&(c[n]=s,u[n]=s&&gn(s))}return t&&(o=r(e,void 0,void 0,c)),o},t,n,i)}function h(e,t,n,r){var i,o;return i=e.$watch(function(e){return r(e)},function(e,n,r){o=e,C(t)&&t.apply(this,arguments),y(e)&&r.$$postDigest(function(){y(o)&&i()})},n)}function f(e,t,n,i){function o(e){var t=!0;return r(e,function(e){y(e)||(t=!1)}),t}var a,s;return a=e.$watch(function(e){return i(e)},function(e,n,r){s=e,C(t)&&t.call(this,e,n,r),o(e)&&r.$$postDigest(function(){o(s)&&a()})},n)}function d(e,t,n,r){var i;return i=e.$watch(function(e){return i(),r(e)},t,n)}function m(e,t){if(!t)return e;var n=e.$$watchDelegate,r=!1,i=n!==f&&n!==h,o=i?function(n,i,o,a){var s=r&&a?a[0]:e(n,i,o,a);return t(s,n,i)}:function(n,r,i,o){var a=e(n,r,i,o),s=t(a,n,r);return y(a)?s:a};return e.$$watchDelegate&&e.$$watchDelegate!==c?o.$$watchDelegate=e.$$watchDelegate:t.$stateful||(o.$$watchDelegate=c,r=!e.inputs,o.inputs=e.inputs?e.inputs:[e]),o}var g=Kr().noUnsafeEval,v={csp:g,expensiveChecks:!1,literals:R(o),isIdentifierStart:C(e)&&e,isIdentifierContinue:C(t)&&t},b={csp:g,expensiveChecks:!0,literals:R(o),isIdentifierStart:C(e)&&e,isIdentifierContinue:C(t)&&t},_=!1;return s.$$runningExpensiveChecks=function(){return _},s}]}function yn(){this.$get=["$rootScope","$exceptionHandler",function(e,t){return _n(function(t){e.$evalAsync(t)},t)}]}function bn(){this.$get=["$browser","$exceptionHandler",function(e,t){return _n(function(t){e.defer(t)},t)}]}function _n(e,n){function i(){this.$$state={status:0}}function o(e,t){return function(n){t.call(e,n)}}function a(e){var t,r,i;i=e.pending,e.processScheduled=!1,e.pending=void 0;for(var o=0,a=i.length;a>o;++o){r=i[o][0],t=i[o][e.status];try{C(t)?r.resolve(t(e.value)):1===e.status?r.resolve(e.value):r.reject(e.value)}catch(s){r.reject(s),n(s)}}}function s(t){!t.processScheduled&&t.pending&&(t.processScheduled=!0,e(function(){a(t)}))}function u(){this.promise=new i}function c(e){var t=new u,n=0,i=Gr(e)?[]:{};return r(e,function(e,r){n++,g(e).then(function(e){i.hasOwnProperty(r)||(i[r]=e,--n||t.resolve(i))},function(e){i.hasOwnProperty(r)||t.reject(e)})}),0===n&&t.resolve(i),t.promise}var h=t("$q",TypeError),f=function(){var e=new u;return e.resolve=o(e,e.resolve),e.reject=o(e,e.reject),e.notify=o(e,e.notify),e};l(i.prototype,{then:function(e,t,n){if(v(e)&&v(t)&&v(n))return this;var r=new u;return this.$$state.pending=this.$$state.pending||[],this.$$state.pending.push([r,e,t,n]),this.$$state.status>0&&s(this.$$state),r.promise},"catch":function(e){return this.then(null,e)},"finally":function(e,t){return this.then(function(t){return m(t,!0,e)},function(t){return m(t,!1,e)},t)}}),l(u.prototype,{resolve:function(e){this.promise.$$state.status||(e===this.promise?this.$$reject(h("qcycle","Expected promise to be resolved with value other than itself '{0}'",e)):this.$$resolve(e))},$$resolve:function(e){function t(e){u||(u=!0,a.$$resolve(e))}function r(e){u||(u=!0,a.$$reject(e))}var i,a=this,u=!1;try{(b(e)||C(e))&&(i=e&&e.then),C(i)?(this.promise.$$state.status=-1,i.call(e,t,r,o(this,this.notify))):(this.promise.$$state.value=e,this.promise.$$state.status=1,s(this.promise.$$state))}catch(l){r(l),n(l)}},reject:function(e){this.promise.$$state.status||this.$$reject(e)},$$reject:function(e){this.promise.$$state.value=e,this.promise.$$state.status=2,s(this.promise.$$state)},notify:function(t){var r=this.promise.$$state.pending;this.promise.$$state.status<=0&&r&&r.length&&e(function(){for(var e,i,o=0,a=r.length;a>o;o++){i=r[o][0],e=r[o][3];try{i.notify(C(e)?e(t):t)}catch(s){n(s)}}})}});var p=function(e){var t=new u;return t.reject(e),t.promise},d=function(e,t){var n=new u;return t?n.resolve(e):n.reject(e),n.promise},m=function(e,t,n){var r=null;try{C(n)&&(r=n())}catch(i){return d(i,!1)}return $(r)?r.then(function(){return d(e,t)},function(e){return d(e,!1)}):d(e,t)},g=function(e,t,n,r){var i=new u;return i.resolve(e),i.promise.then(t,n,r)},y=g,_=function(e){function t(e){r.resolve(e)}function n(e){r.reject(e)}if(!C(e))throw h("norslvr","Expected resolverFn, got '{0}'",e);var r=new u;return e(t,n),r.promise};return _.prototype=i.prototype,_.defer=f,_.reject=p,_.when=g,_.resolve=y,_.all=c,_}function wn(){this.$get=["$window","$timeout",function(e,t){var n=e.requestAnimationFrame||e.webkitRequestAnimationFrame,r=e.cancelAnimationFrame||e.webkitCancelAnimationFrame||e.webkitCancelRequestAnimationFrame,i=!!n,o=i?function(e){var t=n(e);return function(){r(t)}}:function(e){var n=t(e,16.66,!1);return function(){t.cancel(n)}};return o.supported=i,o}]}function xn(){function e(e){function t(){this.$$watchers=this.$$nextSibling=this.$$childHead=this.$$childTail=null,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$id=a(),this.$$ChildScope=null}return t.prototype=e,t}var i=10,o=t("$rootScope"),s=null,u=null;this.digestTtl=function(e){return arguments.length&&(i=e),i},this.$get=["$exceptionHandler","$parse","$browser",function(t,l,c){function h(e){e.currentScope.$$destroyed=!0}function f(e){9===Ir&&(e.$$childHead&&f(e.$$childHead),e.$$nextSibling&&f(e.$$nextSibling)),e.$parent=e.$$nextSibling=e.$$prevSibling=e.$$childHead=e.$$childTail=e.$root=e.$$watchers=null}function d(){this.$id=a(),this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null,this.$root=this,this.$$destroyed=!1,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$$isolateBindings=null}function m(e){if(k.$$phase)throw o("inprog","{0} already in progress",k.$$phase);k.$$phase=e}function g(){k.$$phase=null}function y(e,t){do e.$$watchersCount+=t;while(e=e.$parent)}function _(e,t,n){do e.$$listenerCount[n]-=t,0===e.$$listenerCount[n]&&delete e.$$listenerCount[n];while(e=e.$parent)}function w(){}function x(){for(;T.length;)try{T.shift()()}catch(e){t(e)}u=null}function S(){null===u&&(u=c.defer(function(){k.$apply(x)}))}d.prototype={constructor:d,$new:function(t,n){var r;return n=n||this,t?(r=new d,r.$root=this.$root):(this.$$ChildScope||(this.$$ChildScope=e(this)),r=new this.$$ChildScope),r.$parent=n,r.$$prevSibling=n.$$childTail,n.$$childHead?(n.$$childTail.$$nextSibling=r,n.$$childTail=r):n.$$childHead=n.$$childTail=r,(t||n!=this)&&r.$on("$destroy",h),r},$watch:function(e,t,n,r){var i=l(e);if(i.$$watchDelegate)return i.$$watchDelegate(this,t,n,i,e);var o=this,a=o.$$watchers,u={fn:t,last:w,get:i,exp:r||e,eq:!!n};return s=null,C(t)||(u.fn=p),a||(a=o.$$watchers=[]),a.unshift(u),y(this,1),function(){L(a,u)>=0&&y(o,-1),s=null}},$watchGroup:function(e,t){function n(){u=!1,l?(l=!1,t(o,o,s)):t(o,i,s)}var i=new Array(e.length),o=new Array(e.length),a=[],s=this,u=!1,l=!0;if(!e.length){var c=!0;return s.$evalAsync(function(){c&&t(o,o,s)}),function(){c=!1}}return 1===e.length?this.$watch(e[0],function(e,n,r){o[0]=e,i[0]=n,t(o,e===n?o:i,r)}):(r(e,function(e,t){var r=s.$watch(e,function(e,r){o[t]=e,i[t]=r,u||(u=!0,s.$evalAsync(n))});a.push(r)}),function(){for(;a.length;)a.shift()()})},$watchCollection:function(e,t){function r(e){o=e;var t,r,i,s,u;if(!v(o)){if(b(o))if(n(o)){a!==p&&(a=p,g=a.length=0,h++),t=o.length,g!==t&&(h++,a.length=g=t);for(var l=0;t>l;l++)u=a[l],s=o[l],i=u!==u&&s!==s,i||u===s||(h++,a[l]=s)}else{a!==d&&(a=d={},g=0,h++),t=0;for(r in o)Ar.call(o,r)&&(t++,s=o[r],u=a[r],r in a?(i=u!==u&&s!==s,i||u===s||(h++,a[r]=s)):(g++,a[r]=s,h++));if(g>t){h++;for(r in a)Ar.call(o,r)||(g--,delete a[r])}}else a!==o&&(a=o,h++);return h}}function i(){if(m?(m=!1,t(o,o,u)):t(o,s,u),c)if(b(o))if(n(o)){s=new Array(o.length);for(var e=0;e<o.length;e++)s[e]=o[e]}else{s={};for(var r in o)Ar.call(o,r)&&(s[r]=o[r])}else s=o}r.$stateful=!0;var o,a,s,u=this,c=t.length>1,h=0,f=l(e,r),p=[],d={},m=!0,g=0;return this.$watch(f,i)},$digest:function(){var e,n,r,a,l,h,f,p,d,v,y,b,_=i,S=this,T=[];m("$digest"),c.$$checkUrlChange(),this===k&&null!==u&&(c.defer.cancel(u),x()),s=null;do{for(p=!1,v=S;P.length;){try{b=P.shift(),b.scope.$eval(b.expression,b.locals)}catch(A){t(A)}s=null}e:do{if(h=v.$$watchers)for(f=h.length;f--;)try{if(e=h[f])if(l=e.get,(n=l(v))===(r=e.last)||(e.eq?V(n,r):"number"==typeof n&&"number"==typeof r&&isNaN(n)&&isNaN(r))){if(e===s){p=!1;break e}}else p=!0,s=e,e.last=e.eq?R(n,null):n,a=e.fn,a(n,r===w?n:r,v),5>_&&(y=4-_,T[y]||(T[y]=[]),T[y].push({msg:C(e.exp)?"fn: "+(e.exp.name||e.exp.toString()):e.exp,newVal:n,oldVal:r}))}catch(A){t(A)}if(!(d=v.$$watchersCount&&v.$$childHead||v!==S&&v.$$nextSibling))for(;v!==S&&!(d=v.$$nextSibling);)v=v.$parent}while(v=d);if((p||P.length)&&!_--)throw g(),o("infdig","{0} $digest() iterations reached. Aborting!\nWatchers fired in the last 5 iterations: {1}",i,T)}while(p||P.length);for(g();M.length;)try{M.shift()()}catch(A){t(A)}},$destroy:function(){if(!this.$$destroyed){var e=this.$parent;this.$broadcast("$destroy"),this.$$destroyed=!0,this===k&&c.$$applicationDestroyed(),y(this,-this.$$watchersCount);for(var t in this.$$listenerCount)_(this,this.$$listenerCount[t],t);e&&e.$$childHead==this&&(e.$$childHead=this.$$nextSibling),e&&e.$$childTail==this&&(e.$$childTail=this.$$prevSibling),this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling),this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling),this.$destroy=this.$digest=this.$apply=this.$evalAsync=this.$applyAsync=p,this.$on=this.$watch=this.$watchGroup=function(){return p},this.$$listeners={},this.$$nextSibling=null,f(this)}},$eval:function(e,t){return l(e)(this,t)},$evalAsync:function(e,t){k.$$phase||P.length||c.defer(function(){P.length&&k.$digest()}),P.push({scope:this,expression:l(e),locals:t})},$$postDigest:function(e){M.push(e)},$apply:function(e){try{m("$apply");try{return this.$eval(e)}finally{g()}}catch(n){t(n)}finally{try{k.$digest()}catch(n){throw t(n),n}}},$applyAsync:function(e){function t(){n.$eval(e)}var n=this;e&&T.push(t),e=l(e),S()},$on:function(e,t){var n=this.$$listeners[e];n||(this.$$listeners[e]=n=[]),n.push(t);var r=this;do r.$$listenerCount[e]||(r.$$listenerCount[e]=0),r.$$listenerCount[e]++;while(r=r.$parent);var i=this;return function(){var r=n.indexOf(t);-1!==r&&(n[r]=null,_(i,1,e))}},$emit:function(e,n){var r,i,o,a=[],s=this,u=!1,l={name:e,targetScope:s,stopPropagation:function(){u=!0},preventDefault:function(){l.defaultPrevented=!0},defaultPrevented:!1},c=q([l],arguments,1);do{for(r=s.$$listeners[e]||a,l.currentScope=s,i=0,o=r.length;o>i;i++)if(r[i])try{r[i].apply(null,c)}catch(h){t(h)}else r.splice(i,1),i--,o--;if(u)return l.currentScope=null,l;s=s.$parent}while(s);return l.currentScope=null,l},$broadcast:function(e,n){var r=this,i=r,o=r,a={name:e,targetScope:r,preventDefault:function(){a.defaultPrevented=!0},defaultPrevented:!1};if(!r.$$listenerCount[e])return a;for(var s,u,l,c=q([a],arguments,1);i=o;){for(a.currentScope=i,s=i.$$listeners[e]||[],u=0,l=s.length;l>u;u++)if(s[u])try{s[u].apply(null,c)}catch(h){t(h)}else s.splice(u,1),u--,l--;if(!(o=i.$$listenerCount[e]&&i.$$childHead||i!==r&&i.$$nextSibling))for(;i!==r&&!(o=i.$$nextSibling);)i=i.$parent}return a.currentScope=null,a}};var k=new d,P=k.$$asyncQueue=[],M=k.$$postDigestQueue=[],T=k.$$applyAsyncQueue=[];return k}]}function Sn(){var e=/^\s*(https?|ftp|mailto|tel|file):/,t=/^\s*((https?|ftp|file|blob):|data:image\/)/;this.aHrefSanitizationWhitelist=function(t){return y(t)?(e=t,this):e},this.imgSrcSanitizationWhitelist=function(e){return y(e)?(t=e,this):t},this.$get=function(){return function(n,r){var i,o=r?t:e;return i=$n(n).href,""===i||i.match(o)?n:"unsafe:"+i}}}function Cn(e){if("self"===e)return e;if(w(e)){if(e.indexOf("***")>-1)throw yo("iwcard","Illegal sequence *** in string matcher.  String: {0}",e);return e=Xr(e).replace("\\*\\*",".*").replace("\\*","[^:/.?&;]*"),new RegExp("^"+e+"$")}if(k(e))return new RegExp("^"+e.source+"$");throw yo("imatcher",'Matchers may only be "self", string patterns or RegExp objects')}function kn(e){var t=[];return y(e)&&r(e,function(e){t.push(Cn(e))}),t}function Pn(){this.SCE_CONTEXTS=bo;var e=["self"],t=[];this.resourceUrlWhitelist=function(t){return arguments.length&&(e=kn(t)),e},this.resourceUrlBlacklist=function(e){return arguments.length&&(t=kn(e)),t},this.$get=["$injector",function(n){function r(e,t){return"self"===e?Nn(t):!!e.exec(t.href)}function i(n){var i,o,a=$n(n.toString()),s=!1;for(i=0,o=e.length;o>i;i++)if(r(e[i],a)){s=!0;break}if(s)for(i=0,o=t.length;o>i;i++)if(r(t[i],a)){s=!1;break}return s}function o(e){var t=function(e){this.$$unwrapTrustedValue=function(){return e}};return e&&(t.prototype=new e),t.prototype.valueOf=function(){return this.$$unwrapTrustedValue()},t.prototype.toString=function(){return this.$$unwrapTrustedValue().toString()},t}function a(e,t){var n=h.hasOwnProperty(e)?h[e]:null;if(!n)throw yo("icontext","Attempted to trust a value in invalid context. Context: {0}; Value: {1}",e,t);if(null===t||v(t)||""===t)return t;if("string"!=typeof t)throw yo("itype","Attempted to trust a non-string value in a content requiring a string: Context: {0}",e);return new n(t)}function s(e){return e instanceof c?e.$$unwrapTrustedValue():e}function u(e,t){if(null===t||v(t)||""===t)return t;var n=h.hasOwnProperty(e)?h[e]:null;if(n&&t instanceof n)return t.$$unwrapTrustedValue();if(e===bo.RESOURCE_URL){if(i(t))return t;throw yo("insecurl","Blocked loading resource from url not allowed by $sceDelegate policy.  URL: {0}",t.toString())}if(e===bo.HTML)return l(t);throw yo("unsafe","Attempting to use an unsafe value in a safe context.")}var l=function(e){throw yo("unsafe","Attempting to use an unsafe value in a safe context.")};n.has("$sanitize")&&(l=n.get("$sanitize"));var c=o(),h={};return h[bo.HTML]=o(c),h[bo.CSS]=o(c),h[bo.URL]=o(c),h[bo.JS]=o(c),h[bo.RESOURCE_URL]=o(h[bo.URL]),{trustAs:a,getTrusted:u,valueOf:s}}]}function Mn(){var e=!0;this.enabled=function(t){return arguments.length&&(e=!!t),e},this.$get=["$parse","$sceDelegate",function(t,n){if(e&&8>Ir)throw yo("iequirks","Strict Contextual Escaping does not support Internet Explorer version < 11 in quirks mode.  You can fix this by adding the text <!doctype html> to the top of your HTML document.  See http://docs.angularjs.org/api/ng.$sce for more information.");var i=U(bo);i.isEnabled=function(){return e},i.trustAs=n.trustAs,i.getTrusted=n.getTrusted,i.valueOf=n.valueOf,e||(i.trustAs=i.getTrusted=function(e,t){return t},i.valueOf=d),i.parseAs=function(e,n){var r=t(n);return r.literal&&r.constant?r:t(n,function(t){return i.getTrusted(e,t)})};var o=i.parseAs,a=i.getTrusted,s=i.trustAs;return r(bo,function(e,t){var n=Or(t);i[we("parse_as_"+n)]=function(t){return o(e,t)},i[we("get_trusted_"+n)]=function(t){return a(e,t)},i[we("trust_as_"+n)]=function(t){return s(e,t)}}),i}]}function Tn(){this.$get=["$window","$document",function(e,t){var n,r,i={},o=e.chrome&&e.chrome.app&&e.chrome.app.runtime,a=!o&&e.history&&e.history.pushState,s=h((/android (\d+)/.exec(Or((e.navigator||{}).userAgent))||[])[1]),u=/Boxee/i.test((e.navigator||{}).userAgent),l=t[0]||{},c=/^(Moz|webkit|ms)(?=[A-Z])/,f=l.body&&l.body.style,p=!1,d=!1;if(f){for(var m in f)if(r=c.exec(m)){n=r[0],n=n.substr(0,1).toUpperCase()+n.substr(1);break}n||(n="WebkitOpacity"in f&&"webkit"),p=!!("transition"in f||n+"Transition"in f),d=!!("animation"in f||n+"Animation"in f),!s||p&&d||(p=w(f.webkitTransition),d=w(f.webkitAnimation))}return{history:!(!a||4>s||u),hasEvent:function(e){if("input"===e&&11>=Ir)return!1;if(v(i[e])){var t=l.createElement("div");i[e]="on"+e in t}return i[e]},csp:Kr(),vendorPrefix:n,transitions:p,animations:d,android:s}}]}function An(){var e;this.httpOptions=function(t){return t?(e=t,this):e},this.$get=["$templateCache","$http","$q","$sce",function(t,n,r,i){function o(a,s){function u(e){if(!s)throw _o("tpload","Failed to load template: {0} (HTTP status: {1} {2})",a,e.status,e.statusText);return r.reject(e)}o.totalPendingRequests++,w(a)&&t.get(a)||(a=i.getTrustedResourceUrl(a));var c=n.defaults&&n.defaults.transformResponse;return Gr(c)?c=c.filter(function(e){return e!==kt}):c===kt&&(c=null),n.get(a,l({cache:t,transformResponse:c},e))["finally"](function(){o.totalPendingRequests--}).then(function(e){return t.put(a,e.data),e.data},u)}return o.totalPendingRequests=0,o}]}function On(){this.$get=["$rootScope","$browser","$location",function(e,t,n){var i={};return i.findBindings=function(e,t,n){var i=e.getElementsByClassName("ng-binding"),o=[];return r(i,function(e){var i=Br.element(e).data("$binding");i&&r(i,function(r){if(n){var i=new RegExp("(^|\\s)"+Xr(t)+"(\\s|\\||$)");i.test(r)&&o.push(e)}else-1!=r.indexOf(t)&&o.push(e)})}),o},i.findModels=function(e,t,n){for(var r=["ng-","data-ng-","ng\\:"],i=0;i<r.length;++i){var o=n?"=":"*=",a="["+r[i]+"model"+o+'"'+t+'"]',s=e.querySelectorAll(a);if(s.length)return s}},i.getLocation=function(){return n.url()},i.setLocation=function(t){t!==n.url()&&(n.url(t),e.$digest())},i.whenStable=function(e){t.notifyWhenNoOutstandingRequests(e)},i}]}function En(){this.$get=["$rootScope","$browser","$q","$$q","$exceptionHandler",function(e,t,n,r,i){function o(o,s,u){C(o)||(u=s,s=o,o=p);var l,c=z(arguments,3),h=y(u)&&!u,f=(h?r:n).defer(),d=f.promise;
return l=t.defer(function(){try{f.resolve(o.apply(null,c))}catch(t){f.reject(t),i(t)}finally{delete a[d.$$timeoutId]}h||e.$apply()},s),d.$$timeoutId=l,a[l]=f,d}var a={};return o.cancel=function(e){return e&&e.$$timeoutId in a?(a[e.$$timeoutId].reject("canceled"),delete a[e.$$timeoutId],t.defer.cancel(e.$$timeoutId)):!1},o}]}function $n(e){var t=e;return Ir&&(wo.setAttribute("href",t),t=wo.href),wo.setAttribute("href",t),{href:wo.href,protocol:wo.protocol?wo.protocol.replace(/:$/,""):"",host:wo.host,search:wo.search?wo.search.replace(/^\?/,""):"",hash:wo.hash?wo.hash.replace(/^#/,""):"",hostname:wo.hostname,port:wo.port,pathname:"/"===wo.pathname.charAt(0)?wo.pathname:"/"+wo.pathname}}function Nn(e){var t=w(e)?$n(e):e;return t.protocol===xo.protocol&&t.host===xo.host}function In(){this.$get=m(e)}function Dn(e){function t(e){try{return decodeURIComponent(e)}catch(t){return e}}var n=e[0]||{},r={},i="";return function(){var e,o,a,s,u,l=n.cookie||"";if(l!==i)for(i=l,e=i.split("; "),r={},a=0;a<e.length;a++)o=e[a],s=o.indexOf("="),s>0&&(u=t(o.substring(0,s)),v(r[u])&&(r[u]=t(o.substring(s+1))));return r}}function jn(){this.$get=Dn}function Fn(e){function t(i,o){if(b(i)){var a={};return r(i,function(e,n){a[n]=t(n,e)}),a}return e.factory(i+n,o)}var n="Filter";this.register=t,this.$get=["$injector",function(e){return function(t){return e.get(t+n)}}],t("currency",qn),t("date",rr),t("filter",Ln),t("json",ir),t("limitTo",or),t("lowercase",Ao),t("number",zn),t("orderBy",ar),t("uppercase",Oo)}function Ln(){return function(e,r,i){if(!n(e)){if(null==e)return e;throw t("filter")("notarray","Expected array but received: {0}",e)}var o,a,s=Vn(r);switch(s){case"function":o=r;break;case"boolean":case"null":case"number":case"string":a=!0;case"object":o=Rn(r,i,a);break;default:return e}return Array.prototype.filter.call(e,o)}}function Rn(e,t,n){var r,i=b(e)&&"$"in e;return t===!0?t=V:C(t)||(t=function(e,t){return v(e)?!1:null===e||null===t?e===t:b(t)||b(e)&&!g(e)?!1:(e=Or(""+e),t=Or(""+t),-1!==e.indexOf(t))}),r=function(r){return i&&!b(r)?Un(r,e.$,t,!1):Un(r,e,t,n)}}function Un(e,t,n,r,i){var o=Vn(e),a=Vn(t);if("string"===a&&"!"===t.charAt(0))return!Un(e,t.substring(1),n,r);if(Gr(e))return e.some(function(e){return Un(e,t,n,r)});switch(o){case"object":var s;if(r){for(s in e)if("$"!==s.charAt(0)&&Un(e[s],t,n,!0))return!0;return i?!1:Un(e,t,n,!1)}if("object"===a){for(s in t){var u=t[s];if(!C(u)&&!v(u)){var l="$"===s,c=l?e:e[s];if(!Un(c,u,n,l,l))return!1}}return!0}return n(e,t);case"function":return!1;default:return n(e,t)}}function Vn(e){return null===e?"null":typeof e}function qn(e){var t=e.NUMBER_FORMATS;return function(e,n,r){return v(n)&&(n=t.CURRENCY_SYM),v(r)&&(r=t.PATTERNS[1].maxFrac),null==e?e:Gn(e,t.PATTERNS[1],t.GROUP_SEP,t.DECIMAL_SEP,r).replace(/\u00A4/g,n)}}function zn(e){var t=e.NUMBER_FORMATS;return function(e,n){return null==e?e:Gn(e,t.PATTERNS[0],t.GROUP_SEP,t.DECIMAL_SEP,n)}}function Bn(e){var t,n,r,i,o,a=0;for((n=e.indexOf(Co))>-1&&(e=e.replace(Co,"")),(r=e.search(/e/i))>0?(0>n&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):0>n&&(n=e.length),r=0;e.charAt(r)==ko;r++);if(r==(o=e.length))t=[0],n=1;else{for(o--;e.charAt(o)==ko;)o--;for(n-=r,t=[],i=0;o>=r;r++,i++)t[i]=+e.charAt(r)}return n>So&&(t=t.splice(0,So-1),a=n-1,n=1),{d:t,e:a,i:n}}function Hn(e,t,n,r){var i=e.d,o=i.length-e.i;t=v(t)?Math.min(Math.max(n,o),r):+t;var a=t+e.i,s=i[a];if(a>0){i.splice(Math.max(e.i,a));for(var u=a;u<i.length;u++)i[u]=0}else{o=Math.max(0,o),e.i=1,i.length=Math.max(1,a=t+1),i[0]=0;for(var l=1;a>l;l++)i[l]=0}if(s>=5)if(0>a-1){for(var c=0;c>a;c--)i.unshift(0),e.i++;i.unshift(1),e.i++}else i[a-1]++;for(;o<Math.max(0,t);o++)i.push(0);var h=i.reduceRight(function(e,t,n,r){return t+=e,r[n]=t%10,Math.floor(t/10)},0);h&&(i.unshift(h),e.i++)}function Gn(e,t,n,r,i){if(!w(e)&&!x(e)||isNaN(e))return"";var o,a=!isFinite(e),s=!1,u=Math.abs(e)+"",l="";if(a)l="â";else{o=Bn(u),Hn(o,i,t.minFrac,t.maxFrac);var c=o.d,h=o.i,f=o.e,p=[];for(s=c.reduce(function(e,t){return e&&!t},!0);0>h;)c.unshift(0),h++;h>0?p=c.splice(h):(p=c,c=[0]);var d=[];for(c.length>=t.lgSize&&d.unshift(c.splice(-t.lgSize).join(""));c.length>t.gSize;)d.unshift(c.splice(-t.gSize).join(""));c.length&&d.unshift(c.join("")),l=d.join(n),p.length&&(l+=r+p.join("")),f&&(l+="e+"+f)}return 0>e&&!s?t.negPre+l+t.negSuf:t.posPre+l+t.posSuf}function Wn(e,t,n,r){var i="";for((0>e||r&&0>=e)&&(r?e=-e+1:(e=-e,i="-")),e=""+e;e.length<t;)e=ko+e;return n&&(e=e.substr(e.length-t)),i+e}function Yn(e,t,n,r,i){return n=n||0,function(o){var a=o["get"+e]();return(n>0||a>-n)&&(a+=n),0===a&&-12==n&&(a=12),Wn(a,t,r,i)}}function Xn(e,t,n){return function(r,i){var o=r["get"+e](),a=(n?"STANDALONE":"")+(t?"SHORT":""),s=Er(a+e);return i[s][o]}}function Kn(e,t,n){var r=-1*n,i=r>=0?"+":"";return i+=Wn(Math[r>0?"floor":"ceil"](r/60),2)+Wn(Math.abs(r%60),2)}function Zn(e){var t=new Date(e,0,1).getDay();return new Date(e,0,(4>=t?5:12)-t)}function Qn(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate()+(4-e.getDay()))}function Jn(e){return function(t){var n=Zn(t.getFullYear()),r=Qn(t),i=+r-+n,o=1+Math.round(i/6048e5);return Wn(o,e)}}function er(e,t){return e.getHours()<12?t.AMPMS[0]:t.AMPMS[1]}function tr(e,t){return e.getFullYear()<=0?t.ERAS[0]:t.ERAS[1]}function nr(e,t){return e.getFullYear()<=0?t.ERANAMES[0]:t.ERANAMES[1]}function rr(e){function t(e){var t;if(t=e.match(n)){var r=new Date(0),i=0,o=0,a=t[8]?r.setUTCFullYear:r.setFullYear,s=t[8]?r.setUTCHours:r.setHours;t[9]&&(i=h(t[9]+t[10]),o=h(t[9]+t[11])),a.call(r,h(t[1]),h(t[2])-1,h(t[3]));var u=h(t[4]||0)-i,l=h(t[5]||0)-o,c=h(t[6]||0),f=Math.round(1e3*parseFloat("0."+(t[7]||0)));return s.call(r,u,l,c,f),r}return e}var n=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;return function(n,i,o){var a,s,u="",l=[];if(i=i||"mediumDate",i=e.DATETIME_FORMATS[i]||i,w(n)&&(n=To.test(n)?h(n):t(n)),x(n)&&(n=new Date(n)),!S(n)||!isFinite(n.getTime()))return n;for(;i;)s=Mo.exec(i),s?(l=q(l,s,1),i=l.pop()):(l.push(i),i=null);var c=n.getTimezoneOffset();return o&&(c=Y(o,c),n=K(n,o,!0)),r(l,function(t){a=Po[t],u+=a?a(n,e.DATETIME_FORMATS,c):"''"===t?"'":t.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),u}}function ir(){return function(e,t){return v(t)&&(t=2),G(e,t)}}function or(){return function(e,t,n){return t=Math.abs(Number(t))===1/0?Number(t):h(t),isNaN(t)?e:(x(e)&&(e=e.toString()),Gr(e)||w(e)?(n=!n||isNaN(n)?0:h(n),n=0>n?Math.max(0,e.length+n):n,t>=0?e.slice(n,n+t):0===n?e.slice(t,e.length):e.slice(Math.max(0,n+t),n)):e)}}function ar(e){function r(t,n){return n=n?-1:1,t.map(function(t){var r=1,i=d;if(C(t))i=t;else if(w(t)&&(("+"==t.charAt(0)||"-"==t.charAt(0))&&(r="-"==t.charAt(0)?-1:1,t=t.substring(1)),""!==t&&(i=e(t),i.constant))){var o=i();i=function(e){return e[o]}}return{get:i,descending:r*n}})}function i(e){switch(typeof e){case"number":case"boolean":case"string":return!0;default:return!1}}function o(e,t){return"function"==typeof e.valueOf&&(e=e.valueOf(),i(e))?e:g(e)&&(e=e.toString(),i(e))?e:t}function a(e,t){var n=typeof e;return null===e?(n="string",e="null"):"string"===n?e=e.toLowerCase():"object"===n&&(e=o(e,t)),{value:e,type:n}}function s(e,t){var n=0;return e.type===t.type?e.value!==t.value&&(n=e.value<t.value?-1:1):n=e.type<t.type?-1:1,n}return function(e,i,o){function u(e,t){return{value:e,predicateValues:c.map(function(n){return a(n.get(e),t)})}}function l(e,t){for(var n=0,r=0,i=c.length;i>r&&!(n=s(e.predicateValues[r],t.predicateValues[r])*c[r].descending);++r);return n}if(null==e)return e;if(!n(e))throw t("orderBy")("notarray","Expected array but received: {0}",e);Gr(i)||(i=[i]),0===i.length&&(i=["+"]);var c=r(i,o);c.push({get:function(){return{}},descending:o?-1:1});var h=Array.prototype.map.call(e,u);return h.sort(l),e=h.map(function(e){return e.value})}}function sr(e){return C(e)&&(e={link:e}),e.restrict=e.restrict||"AC",m(e)}function ur(e,t){e.$name=t}function lr(e,t,n,i,o){var a=this,s=[];a.$error={},a.$$success={},a.$pending=void 0,a.$name=o(t.name||t.ngForm||"")(n),a.$dirty=!1,a.$pristine=!0,a.$valid=!0,a.$invalid=!1,a.$submitted=!1,a.$$parentForm=No,a.$rollbackViewValue=function(){r(s,function(e){e.$rollbackViewValue()})},a.$commitViewValue=function(){r(s,function(e){e.$commitViewValue()})},a.$addControl=function(e){fe(e.$name,"input"),s.push(e),e.$name&&(a[e.$name]=e),e.$$parentForm=a},a.$$renameControl=function(e,t){var n=e.$name;a[n]===e&&delete a[n],a[t]=e,e.$name=t},a.$removeControl=function(e){e.$name&&a[e.$name]===e&&delete a[e.$name],r(a.$pending,function(t,n){a.$setValidity(n,null,e)}),r(a.$error,function(t,n){a.$setValidity(n,null,e)}),r(a.$$success,function(t,n){a.$setValidity(n,null,e)}),L(s,e),e.$$parentForm=No},Cr({ctrl:this,$element:e,set:function(e,t,n){var r=e[t];if(r){var i=r.indexOf(n);-1===i&&r.push(n)}else e[t]=[n]},unset:function(e,t,n){var r=e[t];r&&(L(r,n),0===r.length&&delete e[t])},$animate:i}),a.$setDirty=function(){i.removeClass(e,va),i.addClass(e,ya),a.$dirty=!0,a.$pristine=!1,a.$$parentForm.$setDirty()},a.$setPristine=function(){i.setClass(e,va,ya+" "+Io),a.$dirty=!1,a.$pristine=!0,a.$submitted=!1,r(s,function(e){e.$setPristine()})},a.$setUntouched=function(){r(s,function(e){e.$setUntouched()})},a.$setSubmitted=function(){i.addClass(e,Io),a.$submitted=!0,a.$$parentForm.$setSubmitted()}}function cr(e){e.$formatters.push(function(t){return e.$isEmpty(t)?t:t.toString()})}function hr(e,t,n,r,i,o){fr(e,t,n,r,i,o),cr(r)}function fr(e,t,n,r,i,o){var a=Or(t[0].type);if(!i.android){var s=!1;t.on("compositionstart",function(){s=!0}),t.on("compositionend",function(){s=!1,l()})}var u,l=function(e){if(u&&(o.defer.cancel(u),u=null),!s){var i=t.val(),l=e&&e.type;"password"===a||n.ngTrim&&"false"===n.ngTrim||(i=Yr(i)),(r.$viewValue!==i||""===i&&r.$$hasNativeValidators)&&r.$setViewValue(i,l)}};if(i.hasEvent("input"))t.on("input",l);else{var c=function(e,t,n){u||(u=o.defer(function(){u=null,t&&t.value===n||l(e)}))};t.on("keydown",function(e){var t=e.keyCode;91===t||t>15&&19>t||t>=37&&40>=t||c(e,this,this.value)}),i.hasEvent("paste")&&t.on("paste cut",c)}t.on("change",l),Yo[a]&&r.$$hasNativeValidators&&a===n.type&&t.on(Wo,function(e){if(!u){var t=this[Tr],n=t.badInput,r=t.typeMismatch;u=o.defer(function(){u=null,(t.badInput!==n||t.typeMismatch!==r)&&l(e)})}}),r.$render=function(){var e=r.$isEmpty(r.$viewValue)?"":r.$viewValue;t.val()!==e&&t.val(e)}}function pr(e,t){if(S(e))return e;if(w(e)){Bo.lastIndex=0;var n=Bo.exec(e);if(n){var r=+n[1],i=+n[2],o=0,a=0,s=0,u=0,l=Zn(r),c=7*(i-1);return t&&(o=t.getHours(),a=t.getMinutes(),s=t.getSeconds(),u=t.getMilliseconds()),new Date(r,0,l.getDate()+c,o,a,s,u)}}return NaN}function dr(e,t){return function(n,i){var o,a;if(S(n))return n;if(w(n)){if('"'==n.charAt(0)&&'"'==n.charAt(n.length-1)&&(n=n.substring(1,n.length-1)),Lo.test(n))return new Date(n);if(e.lastIndex=0,o=e.exec(n))return o.shift(),a=i?{yyyy:i.getFullYear(),MM:i.getMonth()+1,dd:i.getDate(),HH:i.getHours(),mm:i.getMinutes(),ss:i.getSeconds(),sss:i.getMilliseconds()/1e3}:{yyyy:1970,MM:1,dd:1,HH:0,mm:0,ss:0,sss:0},r(o,function(e,n){n<t.length&&(a[t[n]]=+e)}),new Date(a.yyyy,a.MM-1,a.dd,a.HH,a.mm,a.ss||0,1e3*a.sss||0)}return NaN}}function mr(e,t,n,r){return function(i,o,a,s,u,l,c){function h(e){return e&&!(e.getTime&&e.getTime()!==e.getTime())}function f(e){return y(e)&&!S(e)?n(e)||void 0:e}gr(i,o,a,s),fr(i,o,a,s,u,l);var p,d=s&&s.$options&&s.$options.timezone;if(s.$$parserName=e,s.$parsers.push(function(e){if(s.$isEmpty(e))return null;if(t.test(e)){var r=n(e,p);return d&&(r=K(r,d)),r}}),s.$formatters.push(function(e){if(e&&!S(e))throw Ca("datefmt","Expected `{0}` to be a date",e);return h(e)?(p=e,p&&d&&(p=K(p,d,!0)),c("date")(e,r,d)):(p=null,"")}),y(a.min)||a.ngMin){var m;s.$validators.min=function(e){return!h(e)||v(m)||n(e)>=m},a.$observe("min",function(e){m=f(e),s.$validate()})}if(y(a.max)||a.ngMax){var g;s.$validators.max=function(e){return!h(e)||v(g)||n(e)<=g},a.$observe("max",function(e){g=f(e),s.$validate()})}}}function gr(e,t,n,r){var i=t[0],o=r.$$hasNativeValidators=b(i.validity);o&&r.$parsers.push(function(e){var n=t.prop(Tr)||{};return n.badInput||n.typeMismatch?void 0:e})}function vr(e,t,n,r,i,o){if(gr(e,t,n,r),fr(e,t,n,r,i,o),r.$$parserName="number",r.$parsers.push(function(e){return r.$isEmpty(e)?null:Vo.test(e)?parseFloat(e):void 0}),r.$formatters.push(function(e){if(!r.$isEmpty(e)){if(!x(e))throw Ca("numfmt","Expected `{0}` to be a number",e);e=e.toString()}return e}),y(n.min)||n.ngMin){var a;r.$validators.min=function(e){return r.$isEmpty(e)||v(a)||e>=a},n.$observe("min",function(e){y(e)&&!x(e)&&(e=parseFloat(e,10)),a=x(e)&&!isNaN(e)?e:void 0,r.$validate()})}if(y(n.max)||n.ngMax){var s;r.$validators.max=function(e){return r.$isEmpty(e)||v(s)||s>=e},n.$observe("max",function(e){y(e)&&!x(e)&&(e=parseFloat(e,10)),s=x(e)&&!isNaN(e)?e:void 0,r.$validate()})}}function yr(e,t,n,r,i,o){fr(e,t,n,r,i,o),cr(r),r.$$parserName="url",r.$validators.url=function(e,t){var n=e||t;return r.$isEmpty(n)||Ro.test(n)}}function br(e,t,n,r,i,o){fr(e,t,n,r,i,o),cr(r),r.$$parserName="email",r.$validators.email=function(e,t){var n=e||t;return r.$isEmpty(n)||Uo.test(n)}}function _r(e,t,n,r){v(n.name)&&t.attr("name",a());var i=function(e){t[0].checked&&r.$setViewValue(n.value,e&&e.type)};t.on("click",i),r.$render=function(){var e=n.value;t[0].checked=e==r.$viewValue},n.$observe("value",r.$render)}function wr(e,t,n,r,i){var o;if(y(r)){if(o=e(r),!o.constant)throw Ca("constexpr","Expected constant expression for `{0}`, but saw `{1}`.",n,r);return o(t)}return i}function xr(e,t,n,r,i,o,a,s){var u=wr(s,e,"ngTrueValue",n.ngTrueValue,!0),l=wr(s,e,"ngFalseValue",n.ngFalseValue,!1),c=function(e){r.$setViewValue(t[0].checked,e&&e.type)};t.on("click",c),r.$render=function(){t[0].checked=r.$viewValue},r.$isEmpty=function(e){return e===!1},r.$formatters.push(function(e){return V(e,u)}),r.$parsers.push(function(e){return e?u:l})}function Sr(e,t){return e="ngClass"+e,["$animate",function(n){function i(e,t){var n=[];e:for(var r=0;r<e.length;r++){for(var i=e[r],o=0;o<t.length;o++)if(i==t[o])continue e;n.push(i)}return n}function o(e){var t=[];return Gr(e)?(r(e,function(e){t=t.concat(o(e))}),t):w(e)?e.split(" "):b(e)?(r(e,function(e,n){e&&(t=t.concat(n.split(" ")))}),t):e}return{restrict:"AC",link:function(a,s,u){function l(e){var t=h(e,1);u.$addClass(t)}function c(e){var t=h(e,-1);u.$removeClass(t)}function h(e,t){var n=s.data("$classCounts")||me(),i=[];return r(e,function(e){(t>0||n[e])&&(n[e]=(n[e]||0)+t,n[e]===+(t>0)&&i.push(e))}),s.data("$classCounts",n),i.join(" ")}function f(e,t){var r=i(t,e),o=i(e,t);r=h(r,1),o=h(o,-1),r&&r.length&&n.addClass(s,r),o&&o.length&&n.removeClass(s,o)}function p(e){if(t===!0||a.$index%2===t){var n=o(e||[]);if(d){if(!V(e,d)){var r=o(d);f(r,n)}}else l(n)}d=Gr(e)?e.map(function(e){return U(e)}):U(e)}var d;a.$watch(u[e],p,!0),u.$observe("class",function(t){p(a.$eval(u[e]))}),"ngClass"!==e&&a.$watch("$index",function(n,r){var i=1&n;if(i!==(1&r)){var s=o(a.$eval(u[e]));i===t?l(s):c(s)}})}}}]}function Cr(e){function t(e,t,s){v(t)?n("$pending",e,s):r("$pending",e,s),E(t)?t?(c(a.$error,e,s),l(a.$$success,e,s)):(l(a.$error,e,s),c(a.$$success,e,s)):(c(a.$error,e,s),c(a.$$success,e,s)),a.$pending?(i(wa,!0),a.$valid=a.$invalid=void 0,o("",null)):(i(wa,!1),a.$valid=kr(a.$error),a.$invalid=!a.$valid,o("",a.$valid));var u;u=a.$pending&&a.$pending[e]?void 0:a.$error[e]?!1:a.$$success[e]?!0:null,o(e,u),a.$$parentForm.$setValidity(e,u,a)}function n(e,t,n){a[e]||(a[e]={}),l(a[e],t,n)}function r(e,t,n){a[e]&&c(a[e],t,n),kr(a[e])&&(a[e]=void 0)}function i(e,t){t&&!u[e]?(h.addClass(s,e),u[e]=!0):!t&&u[e]&&(h.removeClass(s,e),u[e]=!1)}function o(e,t){e=e?"-"+ue(e,"-"):"",i(ma+e,t===!0),i(ga+e,t===!1)}var a=e.ctrl,s=e.$element,u={},l=e.set,c=e.unset,h=e.$animate;u[ga]=!(u[ma]=s.hasClass(ma)),a.$setValidity=t}function kr(e){if(e)for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}function Pr(e){e[0].hasAttribute("selected")&&(e[0].selected=!0)}var Mr=/^\/(.+)\/([a-z]*)$/,Tr="validity",Ar=Object.prototype.hasOwnProperty,Or=function(e){return w(e)?e.toLowerCase():e},Er=function(e){return w(e)?e.toUpperCase():e},$r=function(e){return w(e)?e.replace(/[A-Z]/g,function(e){return String.fromCharCode(32|e.charCodeAt(0))}):e},Nr=function(e){return w(e)?e.replace(/[a-z]/g,function(e){return String.fromCharCode(-33&e.charCodeAt(0))}):e};"i"!=="I".toLowerCase()&&(Or=$r,Er=Nr);var Ir,Dr,jr,Fr,Lr=[].slice,Rr=[].splice,Ur=[].push,Vr=Object.prototype.toString,qr=Object.getPrototypeOf,zr=t("ng"),Br=e.angular||(e.angular={}),Hr=0;Ir=e.document.documentMode,p.$inject=[],d.$inject=[];var Gr=Array.isArray,Wr=/^\[object (?:Uint8|Uint8Clamped|Uint16|Uint32|Int8|Int16|Int32|Float32|Float64)Array\]$/,Yr=function(e){return w(e)?e.trim():e},Xr=function(e){return e.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")},Kr=function(){function t(){try{return new Function(""),!1}catch(e){return!0}}if(!y(Kr.rules)){var n=e.document.querySelector("[ng-csp]")||e.document.querySelector("[data-ng-csp]");if(n){var r=n.getAttribute("ng-csp")||n.getAttribute("data-ng-csp");Kr.rules={noUnsafeEval:!r||-1!==r.indexOf("no-unsafe-eval"),noInlineStyle:!r||-1!==r.indexOf("no-inline-style")}}else Kr.rules={noUnsafeEval:t(),noInlineStyle:!1}}return Kr.rules},Zr=function(){if(y(Zr.name_))return Zr.name_;var t,n,r,i,o=Jr.length;for(n=0;o>n;++n)if(r=Jr[n],t=e.document.querySelector("["+r.replace(":","\\:")+"jq]")){i=t.getAttribute(r+"jq");break}return Zr.name_=i},Qr=/:/g,Jr=["ng-","data-ng-","ng:","x-ng-"],ei=/[A-Z]/g,ti=!1,ni=1,ri=2,ii=3,oi=8,ai=9,si=11,ui={full:"1.5.5",major:1,minor:5,dot:5,codeName:"material-conspiration"};Ae.expando="ng339";var li=Ae.cache={},ci=1,hi=function(e,t,n){e.addEventListener(t,n,!1)},fi=function(e,t,n){e.removeEventListener(t,n,!1)};Ae._data=function(e){return this.cache[e[this.expando]]||{}};var pi=/([\:\-\_]+(.))/g,di=/^moz([A-Z])/,mi={mouseleave:"mouseout",mouseenter:"mouseover"},gi=t("jqLite"),vi=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,yi=/<|&#?\w+;/,bi=/<([\w:-]+)/,_i=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,wi={option:[1,'<select multiple="multiple">',"</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};wi.optgroup=wi.option,wi.tbody=wi.tfoot=wi.colgroup=wi.caption=wi.thead,wi.th=wi.td;var xi=e.Node.prototype.contains||function(e){return!!(16&this.compareDocumentPosition(e))},Si=Ae.prototype={ready:function(t){function n(){r||(r=!0,t())}var r=!1;"complete"===e.document.readyState?e.setTimeout(n):(this.on("DOMContentLoaded",n),Ae(e).on("load",n))},toString:function(){var e=[];return r(this,function(t){e.push(""+t)}),"["+e.join(", ")+"]"},eq:function(e){return Dr(e>=0?this[e]:this[this.length+e])},length:0,push:Ur,sort:[].sort,splice:[].splice},Ci={};r("multiple,selected,checked,disabled,readOnly,required,open".split(","),function(e){Ci[Or(e)]=e});var ki={};r("input,select,option,textarea,button,form,details".split(","),function(e){ki[e]=!0});var Pi={ngMinlength:"minlength",ngMaxlength:"maxlength",ngMin:"min",ngMax:"max",ngPattern:"pattern"};r({data:De,removeData:Ne,hasData:Ce,cleanData:ke},function(e,t){Ae[t]=e}),r({data:De,inheritedData:Ve,scope:function(e){return Dr.data(e,"$scope")||Ve(e.parentNode||e,["$isolateScope","$scope"])},isolateScope:function(e){return Dr.data(e,"$isolateScope")||Dr.data(e,"$isolateScopeNoTemplate")},controller:Ue,injector:function(e){return Ve(e,"$injector")},removeAttr:function(e,t){e.removeAttribute(t)},hasClass:je,css:function(e,t,n){return t=we(t),y(n)?void(e.style[t]=n):e.style[t]},attr:function(e,t,n){var r=e.nodeType;if(r!==ii&&r!==ri&&r!==oi){var i=Or(t);if(Ci[i]){if(!y(n))return e[t]||(e.attributes.getNamedItem(t)||p).specified?i:void 0;n?(e[t]=!0,e.setAttribute(t,i)):(e[t]=!1,e.removeAttribute(i))}else if(y(n))e.setAttribute(t,n);else if(e.getAttribute){var o=e.getAttribute(t,2);return null===o?void 0:o}}},prop:function(e,t,n){return y(n)?void(e[t]=n):e[t]},text:function(){function e(e,t){if(v(t)){var n=e.nodeType;return n===ni||n===ii?e.textContent:""}e.textContent=t}return e.$dv="",e}(),val:function(e,t){if(v(t)){if(e.multiple&&"select"===F(e)){var n=[];return r(e.options,function(e){e.selected&&n.push(e.value||e.text)}),0===n.length?null:n}return e.value}e.value=t},html:function(e,t){return v(t)?e.innerHTML:(Ee(e,!0),void(e.innerHTML=t))},empty:qe},function(e,t){Ae.prototype[t]=function(t,n){var r,i,o=this.length;if(e!==qe&&v(2==e.length&&e!==je&&e!==Ue?t:n)){if(b(t)){for(r=0;o>r;r++)if(e===De)e(this[r],t);else for(i in t)e(this[r],i,t[i]);return this}for(var a=e.$dv,s=v(a)?Math.min(o,1):o,u=0;s>u;u++){var l=e(this[u],t,n);a=a?a+l:l}return a}for(r=0;o>r;r++)e(this[r],t,n);return this}}),r({removeData:Ne,on:function(e,t,n,r){if(y(r))throw gi("onargs","jqLite#on() does not support the `selector` or `eventData` parameters");if(Se(e)){var i=Ie(e,!0),o=i.events,a=i.handle;a||(a=i.handle=We(e,o));for(var s=t.indexOf(" ")>=0?t.split(" "):[t],u=s.length,l=function(t,r,i){var s=o[t];s||(s=o[t]=[],s.specialHandlerWrapper=r,"$destroy"===t||i||hi(e,t,a)),s.push(n)};u--;)t=s[u],mi[t]?(l(mi[t],Xe),l(t,void 0,!0)):l(t)}},off:$e,one:function(e,t,n){e=Dr(e),e.on(t,function r(){e.off(t,n),e.off(t,r)}),e.on(t,n)},replaceWith:function(e,t){var n,i=e.parentNode;Ee(e),r(new Ae(t),function(t){n?i.insertBefore(t,n.nextSibling):i.replaceChild(t,e),n=t})},children:function(e){var t=[];return r(e.childNodes,function(e){e.nodeType===ni&&t.push(e)}),t},contents:function(e){return e.contentDocument||e.childNodes||[]},append:function(e,t){var n=e.nodeType;if(n===ni||n===si){t=new Ae(t);for(var r=0,i=t.length;i>r;r++){var o=t[r];e.appendChild(o)}}},prepend:function(e,t){if(e.nodeType===ni){var n=e.firstChild;r(new Ae(t),function(t){e.insertBefore(t,n)})}},wrap:function(e,t){Te(e,Dr(t).eq(0).clone()[0])},remove:ze,detach:function(e){ze(e,!0)},after:function(e,t){var n=e,r=e.parentNode;t=new Ae(t);for(var i=0,o=t.length;o>i;i++){var a=t[i];r.insertBefore(a,n.nextSibling),n=a}},addClass:Le,removeClass:Fe,toggleClass:function(e,t,n){t&&r(t.split(" "),function(t){var r=n;v(r)&&(r=!je(e,t)),(r?Le:Fe)(e,t)})},parent:function(e){var t=e.parentNode;return t&&t.nodeType!==si?t:null},next:function(e){return e.nextElementSibling},find:function(e,t){return e.getElementsByTagName?e.getElementsByTagName(t):[]},clone:Oe,triggerHandler:function(e,t,n){var i,o,a,s=t.type||t,u=Ie(e),c=u&&u.events,h=c&&c[s];h&&(i={preventDefault:function(){this.defaultPrevented=!0},isDefaultPrevented:function(){return this.defaultPrevented===!0},stopImmediatePropagation:function(){this.immediatePropagationStopped=!0},isImmediatePropagationStopped:function(){return this.immediatePropagationStopped===!0},stopPropagation:p,type:s,target:e},t.type&&(i=l(i,t)),o=U(h),a=n?[i].concat(n):[i],r(o,function(t){i.isImmediatePropagationStopped()||t.apply(e,a)}))}},function(e,t){Ae.prototype[t]=function(t,n,r){for(var i,o=0,a=this.length;a>o;o++)v(i)?(i=e(this[o],t,n,r),y(i)&&(i=Dr(i))):Re(i,e(this[o],t,n,r));return y(i)?i:this},Ae.prototype.bind=Ae.prototype.on,Ae.prototype.unbind=Ae.prototype.off}),Qe.prototype={put:function(e,t){this[Ze(e,this.nextUid)]=t},get:function(e){return this[Ze(e,this.nextUid)]},remove:function(e){var t=this[e=Ze(e,this.nextUid)];return delete this[e],t}};var Mi=[function(){this.$get=[function(){return Qe}]}],Ti=/^([^\(]+?)=>/,Ai=/^[^\(]*\(\s*([^\)]*)\)/m,Oi=/,/,Ei=/^\s*(_?)(\S+?)\1\s*$/,$i=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,Ni=t("$injector");nt.$$annotate=tt;var Ii=t("$animate"),Di=1,ji="ng-animate",Fi=function(){this.$get=p},Li=function(){var e=new Qe,t=[];this.$get=["$$AnimateRunner","$rootScope",function(n,i){function o(e,t,n){var i=!1;return t&&(t=w(t)?t.split(" "):Gr(t)?t:[],r(t,function(t){t&&(i=!0,e[t]=n)})),i}function a(){r(t,function(t){var n=e.get(t);if(n){var i=at(t.attr("class")),o="",a="";r(n,function(e,t){var n=!!i[t];e!==n&&(e?o+=(o.length?" ":"")+t:a+=(a.length?" ":"")+t)}),r(t,function(e){o&&Le(e,o),a&&Fe(e,a)}),e.remove(t)}}),t.length=0}function s(n,r,s){var u=e.get(n)||{},l=o(u,r,!0),c=o(u,s,!1);(l||c)&&(e.put(n,u),t.push(n),1===t.length&&i.$$postDigest(a))}return{enabled:p,on:p,off:p,pin:p,push:function(e,t,r,i){i&&i(),r=r||{},r.from&&e.css(r.from),r.to&&e.css(r.to),(r.addClass||r.removeClass)&&s(e,r.addClass,r.removeClass);var o=new n;return o.complete(),o}}}]},Ri=["$provide",function(e){var t=this;this.$$registeredAnimations=Object.create(null),this.register=function(n,r){if(n&&"."!==n.charAt(0))throw Ii("notcsel","Expecting class selector starting with '.' got '{0}'.",n);var i=n+"-animation";t.$$registeredAnimations[n.substr(1)]=i,e.factory(i,r)},this.classNameFilter=function(e){if(1===arguments.length&&(this.$$classNameFilter=e instanceof RegExp?e:null,this.$$classNameFilter)){var t=new RegExp("(\\s+|\\/)"+ji+"(\\s+|\\/)");if(t.test(this.$$classNameFilter.toString()))throw Ii("nongcls",'$animateProvider.classNameFilter(regex) prohibits accepting a regex value which matches/contains the "{0}" CSS class.',ji)}return this.$$classNameFilter},this.$get=["$$animateQueue",function(e){function t(e,t,n){if(n){var r=ot(n);!r||r.parentNode||r.previousElementSibling||(n=null)}n?n.after(e):t.prepend(e)}return{on:e.on,off:e.off,pin:e.pin,enabled:e.enabled,cancel:function(e){e.end&&e.end()},enter:function(n,r,i,o){return r=r&&Dr(r),i=i&&Dr(i),r=r||i.parent(),t(n,r,i),e.push(n,"enter",st(o))},move:function(n,r,i,o){return r=r&&Dr(r),i=i&&Dr(i),r=r||i.parent(),t(n,r,i),e.push(n,"move",st(o))},leave:function(t,n){return e.push(t,"leave",st(n),function(){t.remove()})},addClass:function(t,n,r){return r=st(r),r.addClass=it(r.addclass,n),e.push(t,"addClass",r)},removeClass:function(t,n,r){return r=st(r),r.removeClass=it(r.removeClass,n),e.push(t,"removeClass",r)},setClass:function(t,n,r,i){return i=st(i),i.addClass=it(i.addClass,n),i.removeClass=it(i.removeClass,r),e.push(t,"setClass",i)},animate:function(t,n,r,i,o){return o=st(o),o.from=o.from?l(o.from,n):n,o.to=o.to?l(o.to,r):r,i=i||"ng-inline-animate",o.tempClasses=it(o.tempClasses,i),e.push(t,"animate",o)}}}]}],Ui=function(){this.$get=["$$rAF",function(e){function t(t){n.push(t),n.length>1||e(function(){for(var e=0;e<n.length;e++)n[e]();n=[]})}var n=[];return function(){var e=!1;return t(function(){e=!0}),function(n){e?n():t(n)}}}]},Vi=function(){this.$get=["$q","$sniffer","$$animateAsyncRun","$document","$timeout",function(e,t,n,i,o){function a(e){this.setHost(e);var t=n(),r=function(e){o(e,0,!1)};this._doneCallbacks=[],this._tick=function(e){var n=i[0];n&&n.hidden?r(e):t(e)},this._state=0}var s=0,u=1,l=2;return a.chain=function(e,t){function n(){return r===e.length?void t(!0):void e[r](function(e){return e===!1?void t(!1):(r++,void n())})}var r=0;n()},a.all=function(e,t){function n(n){o=o&&n,++i===e.length&&t(o)}var i=0,o=!0;r(e,function(e){e.done(n)})},a.prototype={setHost:function(e){this.host=e||{}},done:function(e){this._state===l?e():this._doneCallbacks.push(e)},progress:p,getPromise:function(){if(!this.promise){var t=this;this.promise=e(function(e,n){t.done(function(t){t===!1?n():e()})})}return this.promise},then:function(e,t){return this.getPromise().then(e,t)},"catch":function(e){return this.getPromise()["catch"](e)},"finally":function(e){return this.getPromise()["finally"](e)},pause:function(){this.host.pause&&this.host.pause()},resume:function(){this.host.resume&&this.host.resume()},end:function(){this.host.end&&this.host.end(),this._resolve(!0)},cancel:function(){this.host.cancel&&this.host.cancel(),this._resolve(!1)},complete:function(e){var t=this;t._state===s&&(t._state=u,t._tick(function(){t._resolve(e)}))},_resolve:function(e){this._state!==l&&(r(this._doneCallbacks,function(t){t(e)}),this._doneCallbacks.length=0,this._state=l)}},a}]},qi=function(){this.$get=["$$rAF","$q","$$AnimateRunner",function(e,t,n){return function(t,r){function i(){return e(function(){o(),s||u.complete(),s=!0}),u}function o(){a.addClass&&(t.addClass(a.addClass),a.addClass=null),a.removeClass&&(t.removeClass(a.removeClass),a.removeClass=null),a.to&&(t.css(a.to),a.to=null)}var a=r||{};a.$$prepared||(a=R(a)),a.cleanupStyles&&(a.from=a.to=null),a.from&&(t.css(a.from),a.from=null);var s,u=new n;return{start:i,end:i}}}]},zi=t("$compile"),Bi=new ft;pt.$inject=["$provide","$$sanitizeUriProvider"],dt.prototype.isFirstChange=function(){return this.previousValue===Bi};var Hi=/^((?:x|data)[\:\-_])/i,Gi=t("$controller"),Wi=/^(\S+)(\s+as\s+([\w$]+))?$/,Yi=function(){this.$get=["$document",function(e){return function(t){return t?!t.nodeType&&t instanceof Dr&&(t=t[0]):t=e[0].body,t.offsetWidth+1}}]},Xi="application/json",Ki={"Content-Type":Xi+";charset=utf-8"},Zi=/^\[|^\{(?!\{)/,Qi={"[":/]$/,"{":/}$/},Ji=/^\)\]\}',?\n/,eo=t("$http"),to=function(e){return function(){throw eo("legacy","The method `{0}` on the promise returned from `$http` has been disabled.",e)}},no=Br.$interpolateMinErr=t("$interpolate");no.throwNoconcat=function(e){throw no("noconcat","Error while interpolating: {0}\nStrict Contextual Escaping disallows interpolations that concatenate multiple expressions when a trusted value is required.  See http://docs.angularjs.org/api/ng.$sce",e)},no.interr=function(e,t){return no("interr","Can't interpolate: {0}\n{1}",e,t.toString())};var ro=/^([^\?#]*)(\?([^#]*))?(#(.*))?$/,io={http:80,https:443,ftp:21},oo=t("$location"),ao={$$html5:!1,$$replace:!1,absUrl:Yt("$$absUrl"),url:function(e){if(v(e))return this.$$url;var t=ro.exec(e);return(t[1]||""===e)&&this.path(decodeURIComponent(t[1])),(t[2]||t[1]||""===e)&&this.search(t[3]||""),this.hash(t[5]||""),this},protocol:Yt("$$protocol"),host:Yt("$$host"),port:Yt("$$port"),path:Xt("$$path",function(e){return e=null!==e?e.toString():"","/"==e.charAt(0)?e:"/"+e}),search:function(e,t){switch(arguments.length){case 0:return this.$$search;case 1:if(w(e)||x(e))e=e.toString(),this.$$search=J(e);else{if(!b(e))throw oo("isrcharg","The first argument of the `$location#search()` call must be a string or an object.");e=R(e,{}),r(e,function(t,n){null==t&&delete e[n]}),this.$$search=e}break;default:v(t)||null===t?delete this.$$search[e]:this.$$search[e]=t}return this.$$compose(),this},hash:Xt("$$hash",function(e){return null!==e?e.toString():""}),replace:function(){return this.$$replace=!0,this}};r([Wt,Gt,Ht],function(e){e.prototype=Object.create(ao),e.prototype.state=function(t){if(!arguments.length)return this.$$state;if(e!==Ht||!this.$$html5)throw oo("nostate","History API state support is available only in HTML5 mode and only in browsers supporting HTML5 History API");return this.$$state=v(t)?null:t,this}});var so=t("$parse"),uo=Function.prototype.call,lo=Function.prototype.apply,co=Function.prototype.bind,ho=me();r("+ - * / % === !== == != < > <= >= && || ! = |".split(" "),function(e){ho[e]=!0});var fo={n:"\n",f:"\f",r:"\r",t:"	",v:"\x0B","'":"'",'"':'"'},po=function(e){this.options=e};po.prototype={constructor:po,lex:function(e){for(this.text=e,this.index=0,this.tokens=[];this.index<this.text.length;){var t=this.text.charAt(this.index);if('"'===t||"'"===t)this.readString(t);else if(this.isNumber(t)||"."===t&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdentifierStart(this.peekMultichar()))this.readIdent();else if(this.is(t,"(){}[].,;:?"))this.tokens.push({index:this.index,text:t}),this.index++;else if(this.isWhitespace(t))this.index++;else{var n=t+this.peek(),r=n+this.peek(2),i=ho[t],o=ho[n],a=ho[r];if(i||o||a){var s=a?r:o?n:t;this.tokens.push({index:this.index,text:s,operator:!0}),this.index+=s.length}else this.throwError("Unexpected next character ",this.index,this.index+1)}}return this.tokens},is:function(e,t){return-1!==t.indexOf(e)},peek:function(e){var t=e||1;return this.index+t<this.text.length?this.text.charAt(this.index+t):!1},isNumber:function(e){return e>="0"&&"9">=e&&"string"==typeof e},isWhitespace:function(e){return" "===e||"\r"===e||"	"===e||"\n"===e||"\x0B"===e||"Â "===e},isIdentifierStart:function(e){return this.options.isIdentifierStart?this.options.isIdentifierStart(e,this.codePointAt(e)):this.isValidIdentifierStart(e);
},isValidIdentifierStart:function(e){return e>="a"&&"z">=e||e>="A"&&"Z">=e||"_"===e||"$"===e},isIdentifierContinue:function(e){return this.options.isIdentifierContinue?this.options.isIdentifierContinue(e,this.codePointAt(e)):this.isValidIdentifierContinue(e)},isValidIdentifierContinue:function(e,t){return this.isValidIdentifierStart(e,t)||this.isNumber(e)},codePointAt:function(e){return 1===e.length?e.charCodeAt(0):(e.charCodeAt(0)<<10)+e.charCodeAt(1)-56613888},peekMultichar:function(){var e=this.text.charAt(this.index),t=this.peek();if(!t)return e;var n=e.charCodeAt(0),r=t.charCodeAt(0);return n>=55296&&56319>=n&&r>=56320&&57343>=r?e+t:e},isExpOperator:function(e){return"-"===e||"+"===e||this.isNumber(e)},throwError:function(e,t,n){n=n||this.index;var r=y(t)?"s "+t+"-"+this.index+" ["+this.text.substring(t,n)+"]":" "+n;throw so("lexerr","Lexer Error: {0} at column{1} in expression [{2}].",e,r,this.text)},readNumber:function(){for(var e="",t=this.index;this.index<this.text.length;){var n=Or(this.text.charAt(this.index));if("."==n||this.isNumber(n))e+=n;else{var r=this.peek();if("e"==n&&this.isExpOperator(r))e+=n;else if(this.isExpOperator(n)&&r&&this.isNumber(r)&&"e"==e.charAt(e.length-1))e+=n;else{if(!this.isExpOperator(n)||r&&this.isNumber(r)||"e"!=e.charAt(e.length-1))break;this.throwError("Invalid exponent")}}this.index++}this.tokens.push({index:t,text:e,constant:!0,value:Number(e)})},readIdent:function(){var e=this.index;for(this.index+=this.peekMultichar().length;this.index<this.text.length;){var t=this.peekMultichar();if(!this.isIdentifierContinue(t))break;this.index+=t.length}this.tokens.push({index:e,text:this.text.slice(e,this.index),identifier:!0})},readString:function(e){var t=this.index;this.index++;for(var n="",r=e,i=!1;this.index<this.text.length;){var o=this.text.charAt(this.index);if(r+=o,i){if("u"===o){var a=this.text.substring(this.index+1,this.index+5);a.match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+a+"]"),this.index+=4,n+=String.fromCharCode(parseInt(a,16))}else{var s=fo[o];n+=s||o}i=!1}else if("\\"===o)i=!0;else{if(o===e)return this.index++,void this.tokens.push({index:t,text:r,constant:!0,value:n});n+=o}this.index++}this.throwError("Unterminated quote",t)}};var mo=function(e,t){this.lexer=e,this.options=t};mo.Program="Program",mo.ExpressionStatement="ExpressionStatement",mo.AssignmentExpression="AssignmentExpression",mo.ConditionalExpression="ConditionalExpression",mo.LogicalExpression="LogicalExpression",mo.BinaryExpression="BinaryExpression",mo.UnaryExpression="UnaryExpression",mo.CallExpression="CallExpression",mo.MemberExpression="MemberExpression",mo.Identifier="Identifier",mo.Literal="Literal",mo.ArrayExpression="ArrayExpression",mo.Property="Property",mo.ObjectExpression="ObjectExpression",mo.ThisExpression="ThisExpression",mo.LocalsExpression="LocalsExpression",mo.NGValueParameter="NGValueParameter",mo.prototype={ast:function(e){this.text=e,this.tokens=this.lexer.lex(e);var t=this.program();return 0!==this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]),t},program:function(){for(var e=[];;)if(this.tokens.length>0&&!this.peek("}",")",";","]")&&e.push(this.expressionStatement()),!this.expect(";"))return{type:mo.Program,body:e}},expressionStatement:function(){return{type:mo.ExpressionStatement,expression:this.filterChain()}},filterChain:function(){for(var e,t=this.expression();e=this.expect("|");)t=this.filter(t);return t},expression:function(){return this.assignment()},assignment:function(){var e=this.ternary();return this.expect("=")&&(e={type:mo.AssignmentExpression,left:e,right:this.assignment(),operator:"="}),e},ternary:function(){var e,t,n=this.logicalOR();return this.expect("?")&&(e=this.expression(),this.consume(":"))?(t=this.expression(),{type:mo.ConditionalExpression,test:n,alternate:e,consequent:t}):n},logicalOR:function(){for(var e=this.logicalAND();this.expect("||");)e={type:mo.LogicalExpression,operator:"||",left:e,right:this.logicalAND()};return e},logicalAND:function(){for(var e=this.equality();this.expect("&&");)e={type:mo.LogicalExpression,operator:"&&",left:e,right:this.equality()};return e},equality:function(){for(var e,t=this.relational();e=this.expect("==","!=","===","!==");)t={type:mo.BinaryExpression,operator:e.text,left:t,right:this.relational()};return t},relational:function(){for(var e,t=this.additive();e=this.expect("<",">","<=",">=");)t={type:mo.BinaryExpression,operator:e.text,left:t,right:this.additive()};return t},additive:function(){for(var e,t=this.multiplicative();e=this.expect("+","-");)t={type:mo.BinaryExpression,operator:e.text,left:t,right:this.multiplicative()};return t},multiplicative:function(){for(var e,t=this.unary();e=this.expect("*","/","%");)t={type:mo.BinaryExpression,operator:e.text,left:t,right:this.unary()};return t},unary:function(){var e;return(e=this.expect("+","-","!"))?{type:mo.UnaryExpression,operator:e.text,prefix:!0,argument:this.unary()}:this.primary()},primary:function(){var e;this.expect("(")?(e=this.filterChain(),this.consume(")")):this.expect("[")?e=this.arrayDeclaration():this.expect("{")?e=this.object():this.selfReferential.hasOwnProperty(this.peek().text)?e=R(this.selfReferential[this.consume().text]):this.options.literals.hasOwnProperty(this.peek().text)?e={type:mo.Literal,value:this.options.literals[this.consume().text]}:this.peek().identifier?e=this.identifier():this.peek().constant?e=this.constant():this.throwError("not a primary expression",this.peek());for(var t;t=this.expect("(","[",".");)"("===t.text?(e={type:mo.CallExpression,callee:e,arguments:this.parseArguments()},this.consume(")")):"["===t.text?(e={type:mo.MemberExpression,object:e,property:this.expression(),computed:!0},this.consume("]")):"."===t.text?e={type:mo.MemberExpression,object:e,property:this.identifier(),computed:!1}:this.throwError("IMPOSSIBLE");return e},filter:function(e){for(var t=[e],n={type:mo.CallExpression,callee:this.identifier(),arguments:t,filter:!0};this.expect(":");)t.push(this.expression());return n},parseArguments:function(){var e=[];if(")"!==this.peekToken().text)do e.push(this.expression());while(this.expect(","));return e},identifier:function(){var e=this.consume();return e.identifier||this.throwError("is not a valid identifier",e),{type:mo.Identifier,name:e.text}},constant:function(){return{type:mo.Literal,value:this.consume().value}},arrayDeclaration:function(){var e=[];if("]"!==this.peekToken().text)do{if(this.peek("]"))break;e.push(this.expression())}while(this.expect(","));return this.consume("]"),{type:mo.ArrayExpression,elements:e}},object:function(){var e,t=[];if("}"!==this.peekToken().text)do{if(this.peek("}"))break;e={type:mo.Property,kind:"init"},this.peek().constant?e.key=this.constant():this.peek().identifier?e.key=this.identifier():this.throwError("invalid key",this.peek()),this.consume(":"),e.value=this.expression(),t.push(e)}while(this.expect(","));return this.consume("}"),{type:mo.ObjectExpression,properties:t}},throwError:function(e,t){throw so("syntax","Syntax Error: Token '{0}' {1} at column {2} of the expression [{3}] starting at [{4}].",t.text,e,t.index+1,this.text,this.text.substring(t.index))},consume:function(e){if(0===this.tokens.length)throw so("ueoe","Unexpected end of expression: {0}",this.text);var t=this.expect(e);return t||this.throwError("is unexpected, expecting ["+e+"]",this.peek()),t},peekToken:function(){if(0===this.tokens.length)throw so("ueoe","Unexpected end of expression: {0}",this.text);return this.tokens[0]},peek:function(e,t,n,r){return this.peekAhead(0,e,t,n,r)},peekAhead:function(e,t,n,r,i){if(this.tokens.length>e){var o=this.tokens[e],a=o.text;if(a===t||a===n||a===r||a===i||!t&&!n&&!r&&!i)return o}return!1},expect:function(e,t,n,r){var i=this.peek(e,t,n,r);return i?(this.tokens.shift(),i):!1},selfReferential:{"this":{type:mo.ThisExpression},$locals:{type:mo.LocalsExpression}}},pn.prototype={compile:function(e,t){var n=this,i=this.astBuilder.ast(e);this.state={nextId:0,filters:{},expensiveChecks:t,fn:{vars:[],body:[],own:{}},assign:{vars:[],body:[],own:{}},inputs:[]},sn(i,n.$filter);var o,a="";if(this.stage="assign",o=cn(i)){this.state.computing="assign";var s=this.nextId();this.recurse(o,s),this.return_(s),a="fn.assign="+this.generateFunction("assign","s,v,l")}var u=un(i.body);n.stage="inputs",r(u,function(e,t){var r="fn"+t;n.state[r]={vars:[],body:[],own:{}},n.state.computing=r;var i=n.nextId();n.recurse(e,i),n.return_(i),n.state.inputs.push(r),e.watchId=t}),this.state.computing="fn",this.stage="main",this.recurse(i);var l='"'+this.USE+" "+this.STRICT+'";\n'+this.filterPrefix()+"var fn="+this.generateFunction("fn","s,l,a,i")+a+this.watchFns()+"return fn;",c=new Function("$filter","ensureSafeMemberName","ensureSafeObject","ensureSafeFunction","getStringValue","ensureSafeAssignContext","ifDefined","plus","text",l)(this.$filter,Qt,en,tn,Jt,nn,rn,on,e);return this.state=this.stage=void 0,c.literal=hn(i),c.constant=fn(i),c},USE:"use",STRICT:"strict",watchFns:function(){var e=[],t=this.state.inputs,n=this;return r(t,function(t){e.push("var "+t+"="+n.generateFunction(t,"s"))}),t.length&&e.push("fn.inputs=["+t.join(",")+"];"),e.join("")},generateFunction:function(e,t){return"function("+t+"){"+this.varsPrefix(e)+this.body(e)+"};"},filterPrefix:function(){var e=[],t=this;return r(this.state.filters,function(n,r){e.push(n+"=$filter("+t.escape(r)+")")}),e.length?"var "+e.join(",")+";":""},varsPrefix:function(e){return this.state[e].vars.length?"var "+this.state[e].vars.join(",")+";":""},body:function(e){return this.state[e].body.join("")},recurse:function(e,t,n,i,o,a){var s,u,l,c,h=this;if(i=i||p,!a&&y(e.watchId))return t=t||this.nextId(),void this.if_("i",this.lazyAssign(t,this.computedMember("i",e.watchId)),this.lazyRecurse(e,t,n,i,o,!0));switch(e.type){case mo.Program:r(e.body,function(t,n){h.recurse(t.expression,void 0,void 0,function(e){u=e}),n!==e.body.length-1?h.current().body.push(u,";"):h.return_(u)});break;case mo.Literal:c=this.escape(e.value),this.assign(t,c),i(c);break;case mo.UnaryExpression:this.recurse(e.argument,void 0,void 0,function(e){u=e}),c=e.operator+"("+this.ifDefined(u,0)+")",this.assign(t,c),i(c);break;case mo.BinaryExpression:this.recurse(e.left,void 0,void 0,function(e){s=e}),this.recurse(e.right,void 0,void 0,function(e){u=e}),c="+"===e.operator?this.plus(s,u):"-"===e.operator?this.ifDefined(s,0)+e.operator+this.ifDefined(u,0):"("+s+")"+e.operator+"("+u+")",this.assign(t,c),i(c);break;case mo.LogicalExpression:t=t||this.nextId(),h.recurse(e.left,t),h.if_("&&"===e.operator?t:h.not(t),h.lazyRecurse(e.right,t)),i(t);break;case mo.ConditionalExpression:t=t||this.nextId(),h.recurse(e.test,t),h.if_(t,h.lazyRecurse(e.alternate,t),h.lazyRecurse(e.consequent,t)),i(t);break;case mo.Identifier:t=t||this.nextId(),n&&(n.context="inputs"===h.stage?"s":this.assign(this.nextId(),this.getHasOwnProperty("l",e.name)+"?l:s"),n.computed=!1,n.name=e.name),Qt(e.name),h.if_("inputs"===h.stage||h.not(h.getHasOwnProperty("l",e.name)),function(){h.if_("inputs"===h.stage||"s",function(){o&&1!==o&&h.if_(h.not(h.nonComputedMember("s",e.name)),h.lazyAssign(h.nonComputedMember("s",e.name),"{}")),h.assign(t,h.nonComputedMember("s",e.name))})},t&&h.lazyAssign(t,h.nonComputedMember("l",e.name))),(h.state.expensiveChecks||mn(e.name))&&h.addEnsureSafeObject(t),i(t);break;case mo.MemberExpression:s=n&&(n.context=this.nextId())||this.nextId(),t=t||this.nextId(),h.recurse(e.object,s,void 0,function(){h.if_(h.notNull(s),function(){o&&1!==o&&h.addEnsureSafeAssignContext(s),e.computed?(u=h.nextId(),h.recurse(e.property,u),h.getStringValue(u),h.addEnsureSafeMemberName(u),o&&1!==o&&h.if_(h.not(h.computedMember(s,u)),h.lazyAssign(h.computedMember(s,u),"{}")),c=h.ensureSafeObject(h.computedMember(s,u)),h.assign(t,c),n&&(n.computed=!0,n.name=u)):(Qt(e.property.name),o&&1!==o&&h.if_(h.not(h.nonComputedMember(s,e.property.name)),h.lazyAssign(h.nonComputedMember(s,e.property.name),"{}")),c=h.nonComputedMember(s,e.property.name),(h.state.expensiveChecks||mn(e.property.name))&&(c=h.ensureSafeObject(c)),h.assign(t,c),n&&(n.computed=!1,n.name=e.property.name))},function(){h.assign(t,"undefined")}),i(t)},!!o);break;case mo.CallExpression:t=t||this.nextId(),e.filter?(u=h.filter(e.callee.name),l=[],r(e.arguments,function(e){var t=h.nextId();h.recurse(e,t),l.push(t)}),c=u+"("+l.join(",")+")",h.assign(t,c),i(t)):(u=h.nextId(),s={},l=[],h.recurse(e.callee,u,s,function(){h.if_(h.notNull(u),function(){h.addEnsureSafeFunction(u),r(e.arguments,function(e){h.recurse(e,h.nextId(),void 0,function(e){l.push(h.ensureSafeObject(e))})}),s.name?(h.state.expensiveChecks||h.addEnsureSafeObject(s.context),c=h.member(s.context,s.name,s.computed)+"("+l.join(",")+")"):c=u+"("+l.join(",")+")",c=h.ensureSafeObject(c),h.assign(t,c)},function(){h.assign(t,"undefined")}),i(t)}));break;case mo.AssignmentExpression:if(u=this.nextId(),s={},!ln(e.left))throw so("lval","Trying to assign a value to a non l-value");this.recurse(e.left,void 0,s,function(){h.if_(h.notNull(s.context),function(){h.recurse(e.right,u),h.addEnsureSafeObject(h.member(s.context,s.name,s.computed)),h.addEnsureSafeAssignContext(s.context),c=h.member(s.context,s.name,s.computed)+e.operator+u,h.assign(t,c),i(t||c)})},1);break;case mo.ArrayExpression:l=[],r(e.elements,function(e){h.recurse(e,h.nextId(),void 0,function(e){l.push(e)})}),c="["+l.join(",")+"]",this.assign(t,c),i(c);break;case mo.ObjectExpression:l=[],r(e.properties,function(e){h.recurse(e.value,h.nextId(),void 0,function(t){l.push(h.escape(e.key.type===mo.Identifier?e.key.name:""+e.key.value)+":"+t)})}),c="{"+l.join(",")+"}",this.assign(t,c),i(c);break;case mo.ThisExpression:this.assign(t,"s"),i("s");break;case mo.LocalsExpression:this.assign(t,"l"),i("l");break;case mo.NGValueParameter:this.assign(t,"v"),i("v")}},getHasOwnProperty:function(e,t){var n=e+"."+t,r=this.current().own;return r.hasOwnProperty(n)||(r[n]=this.nextId(!1,e+"&&("+this.escape(t)+" in "+e+")")),r[n]},assign:function(e,t){return e?(this.current().body.push(e,"=",t,";"),e):void 0},filter:function(e){return this.state.filters.hasOwnProperty(e)||(this.state.filters[e]=this.nextId(!0)),this.state.filters[e]},ifDefined:function(e,t){return"ifDefined("+e+","+this.escape(t)+")"},plus:function(e,t){return"plus("+e+","+t+")"},return_:function(e){this.current().body.push("return ",e,";")},if_:function(e,t,n){if(e===!0)t();else{var r=this.current().body;r.push("if(",e,"){"),t(),r.push("}"),n&&(r.push("else{"),n(),r.push("}"))}},not:function(e){return"!("+e+")"},notNull:function(e){return e+"!=null"},nonComputedMember:function(e,t){var n=/[$_a-zA-Z][$_a-zA-Z0-9]*/,r=/[^$_a-zA-Z0-9]/g;return n.test(t)?e+"."+t:e+'["'+t.replace(r,this.stringEscapeFn)+'"]'},computedMember:function(e,t){return e+"["+t+"]"},member:function(e,t,n){return n?this.computedMember(e,t):this.nonComputedMember(e,t)},addEnsureSafeObject:function(e){this.current().body.push(this.ensureSafeObject(e),";")},addEnsureSafeMemberName:function(e){this.current().body.push(this.ensureSafeMemberName(e),";")},addEnsureSafeFunction:function(e){this.current().body.push(this.ensureSafeFunction(e),";")},addEnsureSafeAssignContext:function(e){this.current().body.push(this.ensureSafeAssignContext(e),";")},ensureSafeObject:function(e){return"ensureSafeObject("+e+",text)"},ensureSafeMemberName:function(e){return"ensureSafeMemberName("+e+",text)"},ensureSafeFunction:function(e){return"ensureSafeFunction("+e+",text)"},getStringValue:function(e){this.assign(e,"getStringValue("+e+")")},ensureSafeAssignContext:function(e){return"ensureSafeAssignContext("+e+",text)"},lazyRecurse:function(e,t,n,r,i,o){var a=this;return function(){a.recurse(e,t,n,r,i,o)}},lazyAssign:function(e,t){var n=this;return function(){n.assign(e,t)}},stringEscapeRegex:/[^ a-zA-Z0-9]/g,stringEscapeFn:function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)},escape:function(e){if(w(e))return"'"+e.replace(this.stringEscapeRegex,this.stringEscapeFn)+"'";if(x(e))return e.toString();if(e===!0)return"true";if(e===!1)return"false";if(null===e)return"null";if("undefined"==typeof e)return"undefined";throw so("esc","IMPOSSIBLE")},nextId:function(e,t){var n="v"+this.state.nextId++;return e||this.current().vars.push(n+(t?"="+t:"")),n},current:function(){return this.state[this.state.computing]}},dn.prototype={compile:function(e,t){var n=this,i=this.astBuilder.ast(e);this.expression=e,this.expensiveChecks=t,sn(i,n.$filter);var o,a;(o=cn(i))&&(a=this.recurse(o));var s,u=un(i.body);u&&(s=[],r(u,function(e,t){var r=n.recurse(e);e.input=r,s.push(r),e.watchId=t}));var l=[];r(i.body,function(e){l.push(n.recurse(e.expression))});var c=0===i.body.length?p:1===i.body.length?l[0]:function(e,t){var n;return r(l,function(r){n=r(e,t)}),n};return a&&(c.assign=function(e,t,n){return a(e,n,t)}),s&&(c.inputs=s),c.literal=hn(i),c.constant=fn(i),c},recurse:function(e,t,n){var i,o,a,s=this;if(e.input)return this.inputs(e.input,e.watchId);switch(e.type){case mo.Literal:return this.value(e.value,t);case mo.UnaryExpression:return o=this.recurse(e.argument),this["unary"+e.operator](o,t);case mo.BinaryExpression:return i=this.recurse(e.left),o=this.recurse(e.right),this["binary"+e.operator](i,o,t);case mo.LogicalExpression:return i=this.recurse(e.left),o=this.recurse(e.right),this["binary"+e.operator](i,o,t);case mo.ConditionalExpression:return this["ternary?:"](this.recurse(e.test),this.recurse(e.alternate),this.recurse(e.consequent),t);case mo.Identifier:return Qt(e.name,s.expression),s.identifier(e.name,s.expensiveChecks||mn(e.name),t,n,s.expression);case mo.MemberExpression:return i=this.recurse(e.object,!1,!!n),e.computed||(Qt(e.property.name,s.expression),o=e.property.name),e.computed&&(o=this.recurse(e.property)),e.computed?this.computedMember(i,o,t,n,s.expression):this.nonComputedMember(i,o,s.expensiveChecks,t,n,s.expression);case mo.CallExpression:return a=[],r(e.arguments,function(e){a.push(s.recurse(e))}),e.filter&&(o=this.$filter(e.callee.name)),e.filter||(o=this.recurse(e.callee,!0)),e.filter?function(e,n,r,i){for(var s=[],u=0;u<a.length;++u)s.push(a[u](e,n,r,i));var l=o.apply(void 0,s,i);return t?{context:void 0,name:void 0,value:l}:l}:function(e,n,r,i){var u,l=o(e,n,r,i);if(null!=l.value){en(l.context,s.expression),tn(l.value,s.expression);for(var c=[],h=0;h<a.length;++h)c.push(en(a[h](e,n,r,i),s.expression));u=en(l.value.apply(l.context,c),s.expression)}return t?{value:u}:u};case mo.AssignmentExpression:return i=this.recurse(e.left,!0,1),o=this.recurse(e.right),function(e,n,r,a){var u=i(e,n,r,a),l=o(e,n,r,a);return en(u.value,s.expression),nn(u.context),u.context[u.name]=l,t?{value:l}:l};case mo.ArrayExpression:return a=[],r(e.elements,function(e){a.push(s.recurse(e))}),function(e,n,r,i){for(var o=[],s=0;s<a.length;++s)o.push(a[s](e,n,r,i));return t?{value:o}:o};case mo.ObjectExpression:return a=[],r(e.properties,function(e){a.push({key:e.key.type===mo.Identifier?e.key.name:""+e.key.value,value:s.recurse(e.value)})}),function(e,n,r,i){for(var o={},s=0;s<a.length;++s)o[a[s].key]=a[s].value(e,n,r,i);return t?{value:o}:o};case mo.ThisExpression:return function(e){return t?{value:e}:e};case mo.LocalsExpression:return function(e,n){return t?{value:n}:n};case mo.NGValueParameter:return function(e,n,r){return t?{value:r}:r}}},"unary+":function(e,t){return function(n,r,i,o){var a=e(n,r,i,o);return a=y(a)?+a:0,t?{value:a}:a}},"unary-":function(e,t){return function(n,r,i,o){var a=e(n,r,i,o);return a=y(a)?-a:0,t?{value:a}:a}},"unary!":function(e,t){return function(n,r,i,o){var a=!e(n,r,i,o);return t?{value:a}:a}},"binary+":function(e,t,n){return function(r,i,o,a){var s=e(r,i,o,a),u=t(r,i,o,a),l=on(s,u);return n?{value:l}:l}},"binary-":function(e,t,n){return function(r,i,o,a){var s=e(r,i,o,a),u=t(r,i,o,a),l=(y(s)?s:0)-(y(u)?u:0);return n?{value:l}:l}},"binary*":function(e,t,n){return function(r,i,o,a){var s=e(r,i,o,a)*t(r,i,o,a);return n?{value:s}:s}},"binary/":function(e,t,n){return function(r,i,o,a){var s=e(r,i,o,a)/t(r,i,o,a);return n?{value:s}:s}},"binary%":function(e,t,n){return function(r,i,o,a){var s=e(r,i,o,a)%t(r,i,o,a);return n?{value:s}:s}},"binary===":function(e,t,n){return function(r,i,o,a){var s=e(r,i,o,a)===t(r,i,o,a);return n?{value:s}:s}},"binary!==":function(e,t,n){return function(r,i,o,a){var s=e(r,i,o,a)!==t(r,i,o,a);return n?{value:s}:s}},"binary==":function(e,t,n){return function(r,i,o,a){var s=e(r,i,o,a)==t(r,i,o,a);return n?{value:s}:s}},"binary!=":function(e,t,n){return function(r,i,o,a){var s=e(r,i,o,a)!=t(r,i,o,a);return n?{value:s}:s}},"binary<":function(e,t,n){return function(r,i,o,a){var s=e(r,i,o,a)<t(r,i,o,a);return n?{value:s}:s}},"binary>":function(e,t,n){return function(r,i,o,a){var s=e(r,i,o,a)>t(r,i,o,a);return n?{value:s}:s}},"binary<=":function(e,t,n){return function(r,i,o,a){var s=e(r,i,o,a)<=t(r,i,o,a);return n?{value:s}:s}},"binary>=":function(e,t,n){return function(r,i,o,a){var s=e(r,i,o,a)>=t(r,i,o,a);return n?{value:s}:s}},"binary&&":function(e,t,n){return function(r,i,o,a){var s=e(r,i,o,a)&&t(r,i,o,a);return n?{value:s}:s}},"binary||":function(e,t,n){return function(r,i,o,a){var s=e(r,i,o,a)||t(r,i,o,a);return n?{value:s}:s}},"ternary?:":function(e,t,n,r){return function(i,o,a,s){var u=e(i,o,a,s)?t(i,o,a,s):n(i,o,a,s);return r?{value:u}:u}},value:function(e,t){return function(){return t?{context:void 0,name:void 0,value:e}:e}},identifier:function(e,t,n,r,i){return function(o,a,s,u){var l=a&&e in a?a:o;r&&1!==r&&l&&!l[e]&&(l[e]={});var c=l?l[e]:void 0;return t&&en(c,i),n?{context:l,name:e,value:c}:c}},computedMember:function(e,t,n,r,i){return function(o,a,s,u){var l,c,h=e(o,a,s,u);return null!=h&&(l=t(o,a,s,u),l=Jt(l),Qt(l,i),r&&1!==r&&(nn(h),h&&!h[l]&&(h[l]={})),c=h[l],en(c,i)),n?{context:h,name:l,value:c}:c}},nonComputedMember:function(e,t,n,r,i,o){return function(a,s,u,l){var c=e(a,s,u,l);i&&1!==i&&(nn(c),c&&!c[t]&&(c[t]={}));var h=null!=c?c[t]:void 0;return(n||mn(t))&&en(h,o),r?{context:c,name:t,value:h}:h}},inputs:function(e,t){return function(n,r,i,o){return o?o[t]:e(n,r,i)}}};var go=function(e,t,n){this.lexer=e,this.$filter=t,this.options=n,this.ast=new mo(e,n),this.astCompiler=n.csp?new dn(this.ast,t):new pn(this.ast,t)};go.prototype={constructor:go,parse:function(e){return this.astCompiler.compile(e,this.options.expensiveChecks)}};var vo=Object.prototype.valueOf,yo=t("$sce"),bo={HTML:"html",CSS:"css",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"},_o=t("$compile"),wo=e.document.createElement("a"),xo=$n(e.location.href);Dn.$inject=["$document"],Fn.$inject=["$provide"];var So=22,Co=".",ko="0";qn.$inject=["$locale"],zn.$inject=["$locale"];var Po={yyyy:Yn("FullYear",4,0,!1,!0),yy:Yn("FullYear",2,0,!0,!0),y:Yn("FullYear",1,0,!1,!0),MMMM:Xn("Month"),MMM:Xn("Month",!0),MM:Yn("Month",2,1),M:Yn("Month",1,1),LLLL:Xn("Month",!1,!0),dd:Yn("Date",2),d:Yn("Date",1),HH:Yn("Hours",2),H:Yn("Hours",1),hh:Yn("Hours",2,-12),h:Yn("Hours",1,-12),mm:Yn("Minutes",2),m:Yn("Minutes",1),ss:Yn("Seconds",2),s:Yn("Seconds",1),sss:Yn("Milliseconds",3),EEEE:Xn("Day"),EEE:Xn("Day",!0),a:er,Z:Kn,ww:Jn(2),w:Jn(1),G:tr,GG:tr,GGG:tr,GGGG:nr},Mo=/((?:[^yMLdHhmsaZEwG']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|L+|d+|H+|h+|m+|s+|a|Z|G+|w+))(.*)/,To=/^\-?\d+$/;rr.$inject=["$locale"];var Ao=m(Or),Oo=m(Er);ar.$inject=["$parse"];var Eo=m({restrict:"E",compile:function(e,t){return t.href||t.xlinkHref?void 0:function(e,t){if("a"===t[0].nodeName.toLowerCase()){var n="[object SVGAnimatedString]"===Vr.call(t.prop("href"))?"xlink:href":"href";t.on("click",function(e){t.attr(n)||e.preventDefault()})}}}}),$o={};r(Ci,function(e,t){function n(e,n,i){e.$watch(i[r],function(e){i.$set(t,!!e)})}if("multiple"!=e){var r=mt("ng-"+t),i=n;"checked"===e&&(i=function(e,t,i){i.ngModel!==i[r]&&n(e,t,i)}),$o[r]=function(){return{restrict:"A",priority:100,link:i}}}}),r(Pi,function(e,t){$o[t]=function(){return{priority:100,link:function(e,n,r){if("ngPattern"===t&&"/"==r.ngPattern.charAt(0)){var i=r.ngPattern.match(Mr);if(i)return void r.$set("ngPattern",new RegExp(i[1],i[2]))}e.$watch(r[t],function(e){r.$set(t,e)})}}}}),r(["src","srcset","href"],function(e){var t=mt("ng-"+e);$o[t]=function(){return{priority:99,link:function(n,r,i){var o=e,a=e;"href"===e&&"[object SVGAnimatedString]"===Vr.call(r.prop("href"))&&(a="xlinkHref",i.$attr[a]="xlink:href",o=null),i.$observe(t,function(t){return t?(i.$set(a,t),void(Ir&&o&&r.prop(o,i[a]))):void("href"===e&&i.$set(a,null))})}}}});var No={$addControl:p,$$renameControl:ur,$removeControl:p,$setValidity:p,$setDirty:p,$setPristine:p,$setSubmitted:p},Io="ng-submitted";lr.$inject=["$element","$attrs","$scope","$animate","$interpolate"];var Do=function(e){return["$timeout","$parse",function(t,n){function r(e){return""===e?n('this[""]').assign:n(e).assign||p}var i={name:"form",restrict:e?"EAC":"E",require:["form","^^?form"],controller:lr,compile:function(n,i){n.addClass(va).addClass(ma);var o=i.name?"name":e&&i.ngForm?"ngForm":!1;return{pre:function(e,n,i,a){var s=a[0];if(!("action"in i)){var u=function(t){e.$apply(function(){s.$commitViewValue(),s.$setSubmitted()}),t.preventDefault()};hi(n[0],"submit",u),n.on("$destroy",function(){t(function(){fi(n[0],"submit",u)},0,!1)})}var c=a[1]||s.$$parentForm;c.$addControl(s);var h=o?r(s.$name):p;o&&(h(e,s),i.$observe(o,function(t){s.$name!==t&&(h(e,void 0),s.$$parentForm.$$renameControl(s,t),(h=r(s.$name))(e,s))})),n.on("$destroy",function(){s.$$parentForm.$removeControl(s),h(e,void 0),l(s,No)})}}}};return i}]},jo=Do(),Fo=Do(!0),Lo=/^\d{4,}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+(?:[+-][0-2]\d:[0-5]\d|Z)$/,Ro=/^[a-z][a-z\d.+-]*:\/*(?:[^:@]+(?::[^@]+)?@)?(?:[^\s:\/?#]+|\[[a-f\d:]+\])(?::\d+)?(?:\/[^?#]*)?(?:\?[^#]*)?(?:#.*)?$/i,Uo=/^[a-z0-9!#$%&'*+\/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*$/i,Vo=/^\s*(\-|\+)?(\d+|(\d*(\.\d*)))([eE][+-]?\d+)?\s*$/,qo=/^(\d{4,})-(\d{2})-(\d{2})$/,zo=/^(\d{4,})-(\d\d)-(\d\d)T(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,Bo=/^(\d{4,})-W(\d\d)$/,Ho=/^(\d{4,})-(\d\d)$/,Go=/^(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,Wo="keydown wheel mousedown",Yo=me();r("date,datetime-local,month,time,week".split(","),function(e){Yo[e]=!0});var Xo={text:hr,date:mr("date",qo,dr(qo,["yyyy","MM","dd"]),"yyyy-MM-dd"),"datetime-local":mr("datetimelocal",zo,dr(zo,["yyyy","MM","dd","HH","mm","ss","sss"]),"yyyy-MM-ddTHH:mm:ss.sss"),time:mr("time",Go,dr(Go,["HH","mm","ss","sss"]),"HH:mm:ss.sss"),week:mr("week",Bo,pr,"yyyy-Www"),month:mr("month",Ho,dr(Ho,["yyyy","MM"]),"yyyy-MM"),number:vr,url:yr,email:br,radio:_r,checkbox:xr,hidden:p,button:p,submit:p,reset:p,file:p},Ko=["$browser","$sniffer","$filter","$parse",function(e,t,n,r){return{restrict:"E",require:["?ngModel"],link:{pre:function(i,o,a,s){s[0]&&(Xo[Or(a.type)]||Xo.text)(i,o,a,s[0],t,e,n,r)}}}}],Zo=/^(true|false|\d+)$/,Qo=function(){return{restrict:"A",priority:100,compile:function(e,t){return Zo.test(t.ngValue)?function(e,t,n){n.$set("value",e.$eval(n.ngValue))}:function(e,t,n){e.$watch(n.ngValue,function(e){n.$set("value",e)})}}}},Jo=["$compile",function(e){return{restrict:"AC",compile:function(t){return e.$$addBindingClass(t),function(t,n,r){e.$$addBindingInfo(n,r.ngBind),n=n[0],t.$watch(r.ngBind,function(e){n.textContent=v(e)?"":e})}}}}],ea=["$interpolate","$compile",function(e,t){return{compile:function(n){return t.$$addBindingClass(n),function(n,r,i){var o=e(r.attr(i.$attr.ngBindTemplate));t.$$addBindingInfo(r,o.expressions),r=r[0],i.$observe("ngBindTemplate",function(e){r.textContent=v(e)?"":e})}}}}],ta=["$sce","$parse","$compile",function(e,t,n){return{restrict:"A",compile:function(r,i){var o=t(i.ngBindHtml),a=t(i.ngBindHtml,function(e){return(e||"").toString()});return n.$$addBindingClass(r),function(t,r,i){n.$$addBindingInfo(r,i.ngBindHtml),t.$watch(a,function(){r.html(e.getTrustedHtml(o(t))||"")})}}}}],na=m({restrict:"A",require:"ngModel",link:function(e,t,n,r){r.$viewChangeListeners.push(function(){e.$eval(n.ngChange)})}}),ra=Sr("",!0),ia=Sr("Odd",0),oa=Sr("Even",1),aa=sr({compile:function(e,t){t.$set("ngCloak",void 0),e.removeClass("ng-cloak")}}),sa=[function(){return{restrict:"A",scope:!0,controller:"@",priority:500}}],ua={},la={blur:!0,focus:!0};r("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),function(e){var t=mt("ng-"+e);ua[t]=["$parse","$rootScope",function(n,r){return{restrict:"A",compile:function(i,o){var a=n(o[t],null,!0);return function(t,n){n.on(e,function(n){var i=function(){a(t,{$event:n})};la[e]&&r.$$phase?t.$evalAsync(i):t.$apply(i)})}}}}]});var ca=["$animate","$compile",function(e,t){return{multiElement:!0,transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function(n,r,i,o,a){var s,u,l;n.$watch(i.ngIf,function(n){n?u||a(function(n,o){u=o,n[n.length++]=t.$$createComment("end ngIf",i.ngIf),s={clone:n},e.enter(n,r.parent(),r)}):(l&&(l.remove(),l=null),u&&(u.$destroy(),u=null),s&&(l=de(s.clone),e.leave(l).then(function(){l=null}),s=null))})}}}],ha=["$templateRequest","$anchorScroll","$animate",function(e,t,n){return{restrict:"ECA",priority:400,terminal:!0,transclude:"element",controller:Br.noop,compile:function(r,i){var o=i.ngInclude||i.src,a=i.onload||"",s=i.autoscroll;return function(r,i,u,l,c){var h,f,p,d=0,m=function(){f&&(f.remove(),f=null),h&&(h.$destroy(),h=null),p&&(n.leave(p).then(function(){f=null}),f=p,p=null)};r.$watch(o,function(o){var u=function(){!y(s)||s&&!r.$eval(s)||t()},f=++d;o?(e(o,!0).then(function(e){if(!r.$$destroyed&&f===d){var t=r.$new();l.template=e;var s=c(t,function(e){m(),n.enter(e,null,i).then(u)});h=t,p=s,h.$emit("$includeContentLoaded",o),r.$eval(a)}},function(){r.$$destroyed||f===d&&(m(),r.$emit("$includeContentError",o))}),r.$emit("$includeContentRequested",o)):(m(),l.template=null)})}}}}],fa=["$compile",function(t){return{restrict:"ECA",priority:-400,require:"ngInclude",link:function(n,r,i,o){return Vr.call(r[0]).match(/SVG/)?(r.empty(),void t(Pe(o.template,e.document).childNodes)(n,function(e){r.append(e)},{futureParentElement:r})):(r.html(o.template),void t(r.contents())(n))}}}],pa=sr({priority:450,compile:function(){return{pre:function(e,t,n){e.$eval(n.ngInit)}}}}),da=function(){return{restrict:"A",priority:100,require:"ngModel",link:function(e,t,n,i){var o=t.attr(n.$attr.ngList)||", ",a="false"!==n.ngTrim,s=a?Yr(o):o,u=function(e){if(!v(e)){var t=[];return e&&r(e.split(s),function(e){e&&t.push(a?Yr(e):e)}),t}};i.$parsers.push(u),i.$formatters.push(function(e){return Gr(e)?e.join(o):void 0}),i.$isEmpty=function(e){return!e||!e.length}}}},ma="ng-valid",ga="ng-invalid",va="ng-pristine",ya="ng-dirty",ba="ng-untouched",_a="ng-touched",wa="ng-pending",xa="ng-empty",Sa="ng-not-empty",Ca=t("ngModel"),ka=["$scope","$exceptionHandler","$attrs","$element","$parse","$animate","$timeout","$rootScope","$q","$interpolate",function(e,t,n,i,o,a,s,u,l,c){this.$viewValue=Number.NaN,this.$modelValue=Number.NaN,this.$$rawModelValue=void 0,this.$validators={},this.$asyncValidators={},this.$parsers=[],this.$formatters=[],this.$viewChangeListeners=[],this.$untouched=!0,this.$touched=!1,this.$pristine=!0,this.$dirty=!1,this.$valid=!0,this.$invalid=!1,this.$error={},this.$$success={},this.$pending=void 0,this.$name=c(n.name||"",!1)(e),this.$$parentForm=No;var h,f=o(n.ngModel),d=f.assign,m=f,g=d,b=null,_=this;this.$$setOptions=function(e){if(_.$options=e,e&&e.getterSetter){var t=o(n.ngModel+"()"),r=o(n.ngModel+"($$$p)");m=function(e){var n=f(e);return C(n)&&(n=t(e)),n},g=function(e,t){C(f(e))?r(e,{$$$p:t}):d(e,t)}}else if(!f.assign)throw Ca("nonassign","Expression '{0}' is non-assignable. Element: {1}",n.ngModel,Z(i))},this.$render=p,this.$isEmpty=function(e){return v(e)||""===e||null===e||e!==e},this.$$updateEmptyClasses=function(e){_.$isEmpty(e)?(a.removeClass(i,Sa),a.addClass(i,xa)):(a.removeClass(i,xa),a.addClass(i,Sa))};var w=0;Cr({ctrl:this,$element:i,set:function(e,t){e[t]=!0},unset:function(e,t){delete e[t]},$animate:a}),this.$setPristine=function(){_.$dirty=!1,_.$pristine=!0,a.removeClass(i,ya),
a.addClass(i,va)},this.$setDirty=function(){_.$dirty=!0,_.$pristine=!1,a.removeClass(i,va),a.addClass(i,ya),_.$$parentForm.$setDirty()},this.$setUntouched=function(){_.$touched=!1,_.$untouched=!0,a.setClass(i,ba,_a)},this.$setTouched=function(){_.$touched=!0,_.$untouched=!1,a.setClass(i,_a,ba)},this.$rollbackViewValue=function(){s.cancel(b),_.$viewValue=_.$$lastCommittedViewValue,_.$render()},this.$validate=function(){if(!x(_.$modelValue)||!isNaN(_.$modelValue)){var e=_.$$lastCommittedViewValue,t=_.$$rawModelValue,n=_.$valid,r=_.$modelValue,i=_.$options&&_.$options.allowInvalid;_.$$runValidators(t,e,function(e){i||n===e||(_.$modelValue=e?t:void 0,_.$modelValue!==r&&_.$$writeModelToScope())})}},this.$$runValidators=function(e,t,n){function i(){var e=_.$$parserName||"parse";return v(h)?(s(e,null),!0):(h||(r(_.$validators,function(e,t){s(t,null)}),r(_.$asyncValidators,function(e,t){s(t,null)})),s(e,h),h)}function o(){var n=!0;return r(_.$validators,function(r,i){var o=r(e,t);n=n&&o,s(i,o)}),n?!0:(r(_.$asyncValidators,function(e,t){s(t,null)}),!1)}function a(){var n=[],i=!0;r(_.$asyncValidators,function(r,o){var a=r(e,t);if(!$(a))throw Ca("nopromise","Expected asynchronous validator to return a promise but got '{0}' instead.",a);s(o,void 0),n.push(a.then(function(){s(o,!0)},function(){i=!1,s(o,!1)}))}),n.length?l.all(n).then(function(){u(i)},p):u(!0)}function s(e,t){c===w&&_.$setValidity(e,t)}function u(e){c===w&&n(e)}w++;var c=w;return i()&&o()?void a():void u(!1)},this.$commitViewValue=function(){var e=_.$viewValue;s.cancel(b),(_.$$lastCommittedViewValue!==e||""===e&&_.$$hasNativeValidators)&&(_.$$updateEmptyClasses(e),_.$$lastCommittedViewValue=e,_.$pristine&&this.$setDirty(),this.$$parseAndValidate())},this.$$parseAndValidate=function(){function t(){_.$modelValue!==o&&_.$$writeModelToScope()}var n=_.$$lastCommittedViewValue,r=n;if(h=v(r)?void 0:!0)for(var i=0;i<_.$parsers.length;i++)if(r=_.$parsers[i](r),v(r)){h=!1;break}x(_.$modelValue)&&isNaN(_.$modelValue)&&(_.$modelValue=m(e));var o=_.$modelValue,a=_.$options&&_.$options.allowInvalid;_.$$rawModelValue=r,a&&(_.$modelValue=r,t()),_.$$runValidators(r,_.$$lastCommittedViewValue,function(e){a||(_.$modelValue=e?r:void 0,t())})},this.$$writeModelToScope=function(){g(e,_.$modelValue),r(_.$viewChangeListeners,function(e){try{e()}catch(n){t(n)}})},this.$setViewValue=function(e,t){_.$viewValue=e,(!_.$options||_.$options.updateOnDefault)&&_.$$debounceViewValueCommit(t)},this.$$debounceViewValueCommit=function(t){var n,r=0,i=_.$options;i&&y(i.debounce)&&(n=i.debounce,x(n)?r=n:x(n[t])?r=n[t]:x(n["default"])&&(r=n["default"])),s.cancel(b),r?b=s(function(){_.$commitViewValue()},r):u.$$phase?_.$commitViewValue():e.$apply(function(){_.$commitViewValue()})},e.$watch(function(){var t=m(e);if(t!==_.$modelValue&&(_.$modelValue===_.$modelValue||t===t)){_.$modelValue=_.$$rawModelValue=t,h=void 0;for(var n=_.$formatters,r=n.length,i=t;r--;)i=n[r](i);_.$viewValue!==i&&(_.$$updateEmptyClasses(i),_.$viewValue=_.$$lastCommittedViewValue=i,_.$render(),_.$$runValidators(t,i,p))}return t})}],Pa=["$rootScope",function(e){return{restrict:"A",require:["ngModel","^?form","^?ngModelOptions"],controller:ka,priority:1,compile:function(t){return t.addClass(va).addClass(ba).addClass(ma),{pre:function(e,t,n,r){var i=r[0],o=r[1]||i.$$parentForm;i.$$setOptions(r[2]&&r[2].$options),o.$addControl(i),n.$observe("name",function(e){i.$name!==e&&i.$$parentForm.$$renameControl(i,e)}),e.$on("$destroy",function(){i.$$parentForm.$removeControl(i)})},post:function(t,n,r,i){var o=i[0];o.$options&&o.$options.updateOn&&n.on(o.$options.updateOn,function(e){o.$$debounceViewValueCommit(e&&e.type)}),n.on("blur",function(){o.$touched||(e.$$phase?t.$evalAsync(o.$setTouched):t.$apply(o.$setTouched))})}}}}}],Ma=/(\s+|^)default(\s+|$)/,Ta=function(){return{restrict:"A",controller:["$scope","$attrs",function(e,t){var n=this;this.$options=R(e.$eval(t.ngModelOptions)),y(this.$options.updateOn)?(this.$options.updateOnDefault=!1,this.$options.updateOn=Yr(this.$options.updateOn.replace(Ma,function(){return n.$options.updateOnDefault=!0," "}))):this.$options.updateOnDefault=!0}]}},Aa=sr({terminal:!0,priority:1e3}),Oa=t("ngOptions"),Ea=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?(?:\s+disable\s+when\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,$a=["$compile","$document","$parse",function(t,i,o){function a(e,t,r){function i(e,t,n,r,i){this.selectValue=e,this.viewValue=t,this.label=n,this.group=r,this.disabled=i}function a(e){var t;if(!l&&n(e))t=e;else{t=[];for(var r in e)e.hasOwnProperty(r)&&"$"!==r.charAt(0)&&t.push(r)}return t}var s=e.match(Ea);if(!s)throw Oa("iexp","Expected expression in form of '_select_ (as _label_)? for (_key_,)?_value_ in _collection_' but got '{0}'. Element: {1}",e,Z(t));var u=s[5]||s[7],l=s[6],c=/ as /.test(s[0])&&s[1],h=s[9],f=o(s[2]?s[1]:u),p=c&&o(c),d=p||f,m=h&&o(h),g=h?function(e,t){return m(r,t)}:function(e){return Ze(e)},v=function(e,t){return g(e,S(e,t))},y=o(s[2]||s[1]),b=o(s[3]||""),_=o(s[4]||""),w=o(s[8]),x={},S=l?function(e,t){return x[l]=t,x[u]=e,x}:function(e){return x[u]=e,x};return{trackBy:h,getTrackByValue:v,getWatchables:o(w,function(e){var t=[];e=e||[];for(var n=a(e),i=n.length,o=0;i>o;o++){var u=e===n?o:n[o],l=e[u],c=S(l,u),h=g(l,c);if(t.push(h),s[2]||s[1]){var f=y(r,c);t.push(f)}if(s[4]){var p=_(r,c);t.push(p)}}return t}),getOptions:function(){for(var e=[],t={},n=w(r)||[],o=a(n),s=o.length,u=0;s>u;u++){var l=n===o?u:o[u],c=n[l],f=S(c,l),p=d(r,f),m=g(p,f),x=y(r,f),C=b(r,f),k=_(r,f),P=new i(m,p,x,C,k);e.push(P),t[m]=P}return{items:e,selectValueMap:t,getOptionFromViewValue:function(e){return t[v(e)]},getViewValueFromOption:function(e){return h?Br.copy(e.viewValue):e.viewValue}}}}}function s(e,n,o,s){function c(e,t){var n=u.cloneNode(!1);t.appendChild(n),h(e,n)}function h(e,t){e.element=t,t.disabled=e.disabled,e.label!==t.label&&(t.label=e.label,t.textContent=e.label),e.value!==t.value&&(t.value=e.selectValue)}function f(){var e=S&&d.readValue();if(S)for(var t=S.items.length-1;t>=0;t--){var r=S.items[t];ze(r.group?r.element.parentNode:r.element)}S=C.getOptions();var i={};if(w&&n.prepend(p),S.items.forEach(function(e){var t;y(e.group)?(t=i[e.group],t||(t=l.cloneNode(!1),k.appendChild(t),t.label=e.group,i[e.group]=t),c(e,t)):c(e,k)}),n[0].appendChild(k),m.$render(),!m.$isEmpty(e)){var o=d.readValue(),a=C.trackBy||g;(a?V(e,o):e===o)||(m.$setViewValue(o),m.$render())}}for(var p,d=s[0],m=s[1],g=o.multiple,v=0,b=n.children(),_=b.length;_>v;v++)if(""===b[v].value){p=b.eq(v);break}var w=!!p,x=Dr(u.cloneNode(!1));x.val("?");var S,C=a(o.ngOptions,n,e),k=i[0].createDocumentFragment(),P=function(){w||n.prepend(p),n.val(""),p.prop("selected",!0),p.attr("selected",!0)},M=function(){w||p.remove()},T=function(){n.prepend(x),n.val("?"),x.prop("selected",!0),x.attr("selected",!0)},A=function(){x.remove()};g?(m.$isEmpty=function(e){return!e||0===e.length},d.writeValue=function(e){S.items.forEach(function(e){e.element.selected=!1}),e&&e.forEach(function(e){var t=S.getOptionFromViewValue(e);t&&(t.element.selected=!0)})},d.readValue=function(){var e=n.val()||[],t=[];return r(e,function(e){var n=S.selectValueMap[e];n&&!n.disabled&&t.push(S.getViewValueFromOption(n))}),t},C.trackBy&&e.$watchCollection(function(){return Gr(m.$viewValue)?m.$viewValue.map(function(e){return C.getTrackByValue(e)}):void 0},function(){m.$render()})):(d.writeValue=function(e){var t=S.getOptionFromViewValue(e);t?(n[0].value!==t.selectValue&&(A(),M(),n[0].value=t.selectValue,t.element.selected=!0),t.element.setAttribute("selected","selected")):null===e||w?(A(),P()):(M(),T())},d.readValue=function(){var e=S.selectValueMap[n.val()];return e&&!e.disabled?(M(),A(),S.getViewValueFromOption(e)):null},C.trackBy&&e.$watch(function(){return C.getTrackByValue(m.$viewValue)},function(){m.$render()})),w?(p.remove(),t(p)(e),p.removeClass("ng-scope")):p=Dr(u.cloneNode(!1)),n.empty(),f(),e.$watchCollection(C.getWatchables,f)}var u=e.document.createElement("option"),l=e.document.createElement("optgroup");return{restrict:"A",terminal:!0,require:["select","ngModel"],link:{pre:function(e,t,n,r){r[0].registerOption=p},post:s}}}],Na=["$locale","$interpolate","$log",function(e,t,n){var i=/{}/g,o=/^when(Minus)?(.+)$/;return{link:function(a,s,u){function l(e){s.text(e||"")}var c,h=u.count,f=u.$attr.when&&s.attr(u.$attr.when),d=u.offset||0,m=a.$eval(f)||{},g={},y=t.startSymbol(),b=t.endSymbol(),_=y+h+"-"+d+b,w=Br.noop;r(u,function(e,t){var n=o.exec(t);if(n){var r=(n[1]?"-":"")+Or(n[2]);m[r]=s.attr(u.$attr[t])}}),r(m,function(e,n){g[n]=t(e.replace(i,_))}),a.$watch(h,function(t){var r=parseFloat(t),i=isNaN(r);if(i||r in m||(r=e.pluralCat(r-d)),r!==c&&!(i&&x(c)&&isNaN(c))){w();var o=g[r];v(o)?(null!=t&&n.debug("ngPluralize: no rule defined for '"+r+"' in "+f),w=p,l()):w=a.$watch(o,l),c=r}})}}}],Ia=["$parse","$animate","$compile",function(e,i,o){var a="$$NG_REMOVED",s=t("ngRepeat"),u=function(e,t,n,r,i,o,a){e[n]=r,i&&(e[i]=o),e.$index=t,e.$first=0===t,e.$last=t===a-1,e.$middle=!(e.$first||e.$last),e.$odd=!(e.$even=0===(1&t))},l=function(e){return e.clone[0]},c=function(e){return e.clone[e.clone.length-1]};return{restrict:"A",multiElement:!0,transclude:"element",priority:1e3,terminal:!0,$$tlb:!0,compile:function(t,h){var f=h.ngRepeat,p=o.$$createComment("end ngRepeat",f),d=f.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);if(!d)throw s("iexp","Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '{0}'.",f);var m=d[1],g=d[2],v=d[3],y=d[4];if(d=m.match(/^(?:(\s*[\$\w]+)|\(\s*([\$\w]+)\s*,\s*([\$\w]+)\s*\))$/),!d)throw s("iidexp","'_item_' in '_item_ in _collection_' should be an identifier or '(_key_, _value_)' expression, but got '{0}'.",m);var b=d[3]||d[1],_=d[2];if(v&&(!/^[$a-zA-Z_][$a-zA-Z0-9_]*$/.test(v)||/^(null|undefined|this|\$index|\$first|\$middle|\$last|\$even|\$odd|\$parent|\$root|\$id)$/.test(v)))throw s("badident","alias '{0}' is invalid --- must be a valid JS identifier which is not a reserved name.",v);var w,x,S,C,k={$id:Ze};return y?w=e(y):(S=function(e,t){return Ze(t)},C=function(e){return e}),function(e,t,o,h,d){w&&(x=function(t,n,r){return _&&(k[_]=t),k[b]=n,k.$index=r,w(e,k)});var m=me();e.$watchCollection(g,function(o){var h,g,y,w,k,P,M,T,A,O,E,$,N=t[0],I=me();if(v&&(e[v]=o),n(o))A=o,T=x||S;else{T=x||C,A=[];for(var D in o)Ar.call(o,D)&&"$"!==D.charAt(0)&&A.push(D)}for(w=A.length,E=new Array(w),h=0;w>h;h++)if(k=o===A?h:A[h],P=o[k],M=T(k,P,h),m[M])O=m[M],delete m[M],I[M]=O,E[h]=O;else{if(I[M])throw r(E,function(e){e&&e.scope&&(m[e.id]=e)}),s("dupes","Duplicates in a repeater are not allowed. Use 'track by' expression to specify unique keys. Repeater: {0}, Duplicate key: {1}, Duplicate value: {2}",f,M,P);E[h]={id:M,scope:void 0,clone:void 0},I[M]=!0}for(var j in m){if(O=m[j],$=de(O.clone),i.leave($),$[0].parentNode)for(h=0,g=$.length;g>h;h++)$[h][a]=!0;O.scope.$destroy()}for(h=0;w>h;h++)if(k=o===A?h:A[h],P=o[k],O=E[h],O.scope){y=N;do y=y.nextSibling;while(y&&y[a]);l(O)!=y&&i.move(de(O.clone),null,N),N=c(O),u(O.scope,h,b,P,_,k,w)}else d(function(e,t){O.scope=t;var n=p.cloneNode(!1);e[e.length++]=n,i.enter(e,null,N),N=n,O.clone=e,I[O.id]=O,u(O.scope,h,b,P,_,k,w)});m=I})}}}}],Da="ng-hide",ja="ng-hide-animate",Fa=["$animate",function(e){return{restrict:"A",multiElement:!0,link:function(t,n,r){t.$watch(r.ngShow,function(t){e[t?"removeClass":"addClass"](n,Da,{tempClasses:ja})})}}}],La=["$animate",function(e){return{restrict:"A",multiElement:!0,link:function(t,n,r){t.$watch(r.ngHide,function(t){e[t?"addClass":"removeClass"](n,Da,{tempClasses:ja})})}}}],Ra=sr(function(e,t,n){e.$watch(n.ngStyle,function(e,n){n&&e!==n&&r(n,function(e,n){t.css(n,"")}),e&&t.css(e)},!0)}),Ua=["$animate","$compile",function(e,t){return{require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(n,i,o,a){var s=o.ngSwitch||o.on,u=[],l=[],c=[],h=[],f=function(e,t){return function(){e.splice(t,1)}};n.$watch(s,function(n){var i,o;for(i=0,o=c.length;o>i;++i)e.cancel(c[i]);for(c.length=0,i=0,o=h.length;o>i;++i){var s=de(l[i].clone);h[i].$destroy();var p=c[i]=e.leave(s);p.then(f(c,i))}l.length=0,h.length=0,(u=a.cases["!"+n]||a.cases["?"])&&r(u,function(n){n.transclude(function(r,i){h.push(i);var o=n.element;r[r.length++]=t.$$createComment("end ngSwitchWhen");var a={clone:r};l.push(a),e.enter(r,o.parent(),o)})})})}}}],Va=sr({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(e,t,n,r,i){r.cases["!"+n.ngSwitchWhen]=r.cases["!"+n.ngSwitchWhen]||[],r.cases["!"+n.ngSwitchWhen].push({transclude:i,element:t})}}),qa=sr({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(e,t,n,r,i){r.cases["?"]=r.cases["?"]||[],r.cases["?"].push({transclude:i,element:t})}}),za=t("ngTransclude"),Ba=sr({restrict:"EAC",link:function(e,t,n,r,i){function o(e){e.length&&(t.empty(),t.append(e))}if(n.ngTransclude===n.$attr.ngTransclude&&(n.ngTransclude=""),!i)throw za("orphan","Illegal use of ngTransclude directive in the template! No parent directive that requires a transclusion found. Element: {0}",Z(t));var a=n.ngTransclude||n.ngTranscludeSlot;i(o,null,a)}}),Ha=["$templateCache",function(e){return{restrict:"E",terminal:!0,compile:function(t,n){if("text/ng-template"==n.type){var r=n.id,i=t[0].text;e.put(r,i)}}}}],Ga={$setViewValue:p,$render:p},Wa=["$element","$scope",function(t,n){var r=this,i=new Qe;r.ngModelCtrl=Ga,r.unknownOption=Dr(e.document.createElement("option")),r.renderUnknownOption=function(e){var n="? "+Ze(e)+" ?";r.unknownOption.val(n),t.prepend(r.unknownOption),t.val(n)},n.$on("$destroy",function(){r.renderUnknownOption=p}),r.removeUnknownOption=function(){r.unknownOption.parent()&&r.unknownOption.remove()},r.readValue=function(){return r.removeUnknownOption(),t.val()},r.writeValue=function(e){r.hasOption(e)?(r.removeUnknownOption(),t.val(e),""===e&&r.emptyOption.prop("selected",!0)):null==e&&r.emptyOption?(r.removeUnknownOption(),t.val("")):r.renderUnknownOption(e)},r.addOption=function(e,t){if(t[0].nodeType!==oi){fe(e,'"option value"'),""===e&&(r.emptyOption=t);var n=i.get(e)||0;i.put(e,n+1),r.ngModelCtrl.$render(),Pr(t)}},r.removeOption=function(e){var t=i.get(e);t&&(1===t?(i.remove(e),""===e&&(r.emptyOption=void 0)):i.put(e,t-1))},r.hasOption=function(e){return!!i.get(e)},r.registerOption=function(e,t,n,i,o){if(i){var a;n.$observe("value",function(e){y(a)&&r.removeOption(a),a=e,r.addOption(e,t)})}else o?e.$watch(o,function(e,i){n.$set("value",e),i!==e&&r.removeOption(i),r.addOption(e,t)}):r.addOption(n.value,t);t.on("$destroy",function(){r.removeOption(n.value),r.ngModelCtrl.$render()})}}],Ya=function(){function e(e,t,n,i){var o=i[1];if(o){var a=i[0];if(a.ngModelCtrl=o,t.on("change",function(){e.$apply(function(){o.$setViewValue(a.readValue())})}),n.multiple){a.readValue=function(){var e=[];return r(t.find("option"),function(t){t.selected&&e.push(t.value)}),e},a.writeValue=function(e){var n=new Qe(e);r(t.find("option"),function(e){e.selected=y(n.get(e.value))})};var s,u=NaN;e.$watch(function(){u!==o.$viewValue||V(s,o.$viewValue)||(s=U(o.$viewValue),o.$render()),u=o.$viewValue}),o.$isEmpty=function(e){return!e||0===e.length}}}}function t(e,t,n,r){var i=r[1];if(i){var o=r[0];i.$render=function(){o.writeValue(i.$viewValue)}}}return{restrict:"E",require:["select","?ngModel"],controller:Wa,priority:1,link:{pre:e,post:t}}},Xa=["$interpolate",function(e){return{restrict:"E",priority:100,compile:function(t,n){if(y(n.value))var r=e(n.value,!0);else{var i=e(t.text(),!0);i||n.$set("value",t.text())}return function(e,t,n){var o="$selectController",a=t.parent(),s=a.data(o)||a.parent().data(o);s&&s.registerOption(e,t,n,r,i)}}}}],Ka=m({restrict:"E",terminal:!1}),Za=function(){return{restrict:"A",require:"?ngModel",link:function(e,t,n,r){r&&(n.required=!0,r.$validators.required=function(e,t){return!n.required||!r.$isEmpty(t)},n.$observe("required",function(){r.$validate()}))}}},Qa=function(){return{restrict:"A",require:"?ngModel",link:function(e,n,r,i){if(i){var o,a=r.ngPattern||r.pattern;r.$observe("pattern",function(e){if(w(e)&&e.length>0&&(e=new RegExp("^"+e+"$")),e&&!e.test)throw t("ngPattern")("noregexp","Expected {0} to be a RegExp but was {1}. Element: {2}",a,e,Z(n));o=e||void 0,i.$validate()}),i.$validators.pattern=function(e,t){return i.$isEmpty(t)||v(o)||o.test(t)}}}}},Ja=function(){return{restrict:"A",require:"?ngModel",link:function(e,t,n,r){if(r){var i=-1;n.$observe("maxlength",function(e){var t=h(e);i=isNaN(t)?-1:t,r.$validate()}),r.$validators.maxlength=function(e,t){return 0>i||r.$isEmpty(t)||t.length<=i}}}}},es=function(){return{restrict:"A",require:"?ngModel",link:function(e,t,n,r){if(r){var i=0;n.$observe("minlength",function(e){i=h(e)||0,r.$validate()}),r.$validators.minlength=function(e,t){return r.$isEmpty(t)||t.length>=i}}}}};return e.angular.bootstrap?void(e.console&&console.log("WARNING: Tried to load angular more than once.")):(le(),be(Br),Br.module("ngLocale",[],["$provide",function(e){function t(e){e+="";var t=e.indexOf(".");return-1==t?0:e.length-t-1}function n(e,n){var r=n;void 0===r&&(r=Math.min(t(e),3));var i=Math.pow(10,r),o=(e*i|0)%i;return{v:r,f:o}}var r={ZERO:"zero",ONE:"one",TWO:"two",FEW:"few",MANY:"many",OTHER:"other"};e.value("$locale",{DATETIME_FORMATS:{AMPMS:["AM","PM"],DAY:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],ERANAMES:["Before Christ","Anno Domini"],ERAS:["BC","AD"],FIRSTDAYOFWEEK:6,MONTH:["January","February","March","April","May","June","July","August","September","October","November","December"],SHORTDAY:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],SHORTMONTH:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],STANDALONEMONTH:["January","February","March","April","May","June","July","August","September","October","November","December"],WEEKENDRANGE:[5,6],fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",medium:"MMM d, y h:mm:ss a",mediumDate:"MMM d, y",mediumTime:"h:mm:ss a","short":"M/d/yy h:mm a",shortDate:"M/d/yy",shortTime:"h:mm a"},NUMBER_FORMATS:{CURRENCY_SYM:"$",DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:"-Â¤",negSuf:"",posPre:"Â¤",posSuf:""}]},id:"en-us",localeID:"en_US",pluralCat:function(e,t){var i=0|e,o=n(e,t);return 1==i&&0==o.v?r.ONE:r.OTHER}})}]),void Dr(e.document).ready(function(){ie(e.document,oe)}))}(window),!window.angular.$$csp().noInlineStyle&&window.angular.element(document.head).prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-hide-animate){display:none !important;}ng\\:form{display:block;}.ng-animate-shim{visibility:hidden;}.ng-anchor{position:absolute;}</style>'),define("angular",["jquery"],function(e){return function(){var t;return t||e.angular}}(this)),define("metapolator/ui/metapolator/ui-tools/selection/SelectionOperator",[],function(){"use strict";function e(e,t,n,r,i,o){this.parent=e,this.base=t,this.range=n,this.low={current:r,fallback:r},this.high={current:i,fallback:i},this.id=o}e.prototype;return e}),define("metapolator/ui/metapolator/ui-tools/selection/SelectionParameter",["./SelectionOperator"],function(e){"use strict";function t(e,t,n){this.parent=e,this.base=t,this.baseOperators=n,this.operators=[],this.effectiveValue=null}var n=t.prototype;return n.updateOperators=function(t){this.operators=[];for(var n=0,r=this.baseOperators.length;r>n;n++){for(var i,o=this.baseOperators[n],a=!1,s=0,u=0,l=null,c=null,h=this._getElementParameters(),f=0,p=h.length;p>f;f++)for(var d=h[f],m=this._getElementOperators(d,o),g=0,v=m.length;v>g;g++){var y=m[g];y.id?0===f&&this.operators.push(new e(this,o,!1,y.value,y.value,y.id)):(a=!0,u++,(y.value<l||null===l)&&(l=y.value),(y.value>c||null===c)&&(c=y.value))}s>u&&u>0&&(o.standardValue<l&&(l=o.standardValue),o.standardValue>c&&(c=o.standardValue)),i=c===l?!1:!0,a&&this.operators.push(new e(this,o,i,l,c,null))}this.updateEffectiveValue()},n.updateEffectiveValue=function(){if(this.base.effectiveLevel===this.parent.level){for(var e,t=null,n=null,r=this._getElementParameters(),i=0,o=r.length;o>i;i++){var a=r[i];(a.effectiveValue<t||null===t)&&(t=a.effectiveValue),(a.effectiveValue>n||null===n)&&(n=a.effectiveValue)}e=n===t?!1:!0,this.effectiveValue={low:t,high:n,range:e}}},n._getElementParameters=function(){for(var e=[],t=this.parent.elements.length-1;t>=0;t--)for(var n=this.parent.elements[t],r=n.parameters.length-1;r>=0;r--){var i=n.parameters[r];i.base.name===this.base.name&&e.push(i)}return e},n._getElementOperators=function(e,t){for(var n=[],r=0,i=e.operators.length;i>r;r++){var o=e.operators[r];o.base.name===t.name&&n.push(o)}return n},t}),define("metapolator/ui/metapolator/ui-tools/selection/Selection",["./SelectionParameter"],function(e){"use strict";function t(e,t,n){this.level=e,this.parameters=[],this.elements=[],this.baseParameters=t,this.baseOperators=n,this.stackedParameters=[]}var n=t.prototype;return n.updateParameters=function(){this.parameters=[];for(var t=this.baseParameters.length-1;t>=0;t--){var n=this.baseParameters[t];if(this._hasThisParameter(n)){var r=new e(this,n,this.baseOperators);this.parameters.push(r),r.updateOperators()}}},n._hasThisParameter=function(e){for(var t=this.elements.length-1;t>=0;t--)for(var n=this.elements[t],r=n.parameters.length-1;r>=0;r--)if(n.parameters[r].base.name===e.name)return!0;return!1},n.getParameterByName=function(e){for(var t=this.parameters.length-1;t>=0;t--){var n=this.parameters[t];if(n.base.name===e)return n}return null},n.addStackedParameter=function(e){-1===this.stackedParameters.indexOf(e)&&this.stackedParameters.push(e)},n.destackParameters=function(e){for(var t=this.stackedParameters.length-1;t>=0;t--)this.stackedParameters[t].destackOperators();this.stackedParameters=[]},t}),define("metapolator/ui/metapolator/ui-tools/selectionTools",["./selection/Selection"],function(e){"use strict";var t,n,r,i,o,a,s,u=[],l={level:null,type:null,left:null,top:null,parameter:null,operator:null},c=["master","glyph","penstroke","point"],h=[{name:"Width",cpsKey:"WidthF",unit:"em",step:.005,decimals:4,effectiveLevel:"glyph",getInitial:function(e){return e.getComputedStyle().get("width")}},{name:"Weight",cpsKey:"WeightF",unit:"em",step:.1,decimals:2,effectiveLevel:"point",getInitial:function(e){return e.right?e.right.getComputedStyle().get("onLength"):0}}],f=[{order:0,name:"multiply",sign:"Ã",standardValue:1,type:"stack",usesUnit:!1,effectiveLocal:!0},{order:1,name:"divide",sign:"â",standardValue:1,type:"stack",usesUnit:!1,effectiveLocal:!0},{order:2,name:"add",sign:"+",standardValue:0,type:"stack",usesUnit:!0,effectiveLocal:!1},{order:3,name:"subtract",sign:"â",standardValue:0,type:"stack",usesUnit:!0,effectiveLocal:!1},{order:4,name:"is",sign:"=",standardValue:null,type:"unique",usesUnit:!0,effectiveLocal:!1},{order:5,name:"min",sign:"min",standardValue:0,type:"unique",usesUnit:!0,effectiveLocal:!1},{order:6,name:"max",sign:"max",standardValue:0,type:"unique",usesUnit:!0,effectiveLocal:!1}],p={master:new e("master",h,f),glyph:new e("glyph",h,f),penstroke:new e("penstroke",h,f),point:new e("point",h,f)};return t=function(e){var n,r=o(e),s=a(e),l=[];n=s!==!1?i(s):u;for(var c=0,h=n.length;h>c;c++)for(var f=n[c],d=0,m=f.children.length;m>d;d++){var g=f.children[d];g.edit&&l.push(g)}p[e].elements=l,p[e].destackParameters(),p[e].updateParameters(),r!==!1&&t(r,p[e].elements)},i=function(e){return p[e].elements},o=function(e){var t=c.indexOf(e);return-1===t||t+1===c.length?!1:c[t+1]},a=function(e){var t=c.indexOf(e);return-1===t||0>t-1?!1:c[t-1]},r=function(e){return p[e].elements},n=function(e){u=e},s=function(){l.level=null,l.type=null,l.left=null,l.top=null,l.parameter=null,l.operator=null},{selection:p,injectSequences:n,updateSelection:t,getSelectionElements:r,allLevels:c,baseParameters:h,baseOperators:f,panel:l,closePanel:s}}),define("metapolator/ui/metapolator/app-controller",["jquery","metapolator/ui/metapolator/ui-tools/selectionTools"],function(e,t){"use strict";function n(n,r){this.$scope=n,this.$scope.model=n.model=r,n.getLandscapeLeft=function(){for(var e=2*n.model.viewState,t=0,r=0;e>r;r++)t+=n.panels[r].share;return"calc("+t/-16+" * 100%)"},n.releaseLocalMenu=function(r){e(r.target).parents(".lm-head").length||e(r.target).hasClass("lm-head")||(n.model.localMenu=null),e(r.target).parents(".panel-zone").length||e(r.target).hasClass("panel-zone")||t.closePanel()},n.reAdjustPanels=function(){for(var t=e(window).outerWidth(),r=n.panels.length-1;r>=0;r--){var i=n.panels[r];if(i.restricted){var o,a=i.share/16*t;if(a<i.min?o=a-i.min:a>i.max&&(o=a-i.max),o){i.share=(a-o)/t*16;for(var s=0,u=i.giveTo.length;u>s;s++){var l=i.giveTo[s],c=n.panels[l];c.share=(c.share/16*t+o)/t*16}}}}n.totalPanelParts=n.getTotalParts()},n.getTotalParts=function(){for(var e=0,t=0,r=n.panels.length;r>t;t++){var i=n.panels[t];e+=i.share}return e},n.panels=[{share:3,restricted:!0,giveTo:[1],min:180,max:270},{share:10,restricted:!1},{share:3,restricted:!0,giveTo:[1,3],min:180,max:270},{share:10,restricted:!1},{share:3,restricted:!0,giveTo:[3,6],min:180,max:270},{share:1,restricted:!0,giveTo:[6],min:90,max:90},{share:12,restricted:!1}],n.totalPanelParts=42,n.dividerTrigger=0,n.dividers=[{add:0,subtract:1,dead:2,mirror:null,position:[0],view:0,side:"left",contain:"left",limitMin:180,limitMax:270},{add:2,subtract:1,dead:0,mirror:3,position:[0,1],view:0,side:"right",contain:"right",limitMin:180,limitMax:270},{add:2,subtract:3,dead:4,mirror:1,position:[2],view:1,side:"left",contain:"left",limitMin:180,limitMax:270},{add:4,subtract:3,dead:2,mirror:6,position:[2,3],view:1,side:"right",contain:"right",limitMin:180,limitMax:270},{add:6,subtract:4,dead:5,mirror:3,position:[4,5],view:2,side:"right",contain:"left",limitMin:260,limitMax:350}],n.reAdjustPanels()}n.$inject=["$scope","metapolatorModel"];var r=n.prototype;return r.redraw=function(){this.$scope.$apply()},n}),define("require/text",["module"],function(e){"use strict";function t(e,t){return void 0===e||""===e?t:e}function n(e,n,r,i){if(n===i)return!0;if(e===r){if("http"===e)return t(n,"80")===t(i,"80");if("https"===e)return t(n,"443")===t(i,"443")}return!1}var r,i,o,a,s,u=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],l=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,c=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,h="undefined"!=typeof location&&location.href,f=h&&location.protocol&&location.protocol.replace(/\:/,""),p=h&&location.hostname,d=h&&(location.port||void 0),m={},g=e.config&&e.config()||{};return r={version:"2.0.15",strip:function(e){if(e){e=e.replace(l,"");var t=e.match(c);t&&(e=t[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:g.createXhr||function(){var e,t,n;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)for(t=0;3>t;t+=1){n=u[t];try{e=new ActiveXObject(n)}catch(r){}if(e){u=[n];break}}return e},parseName:function(e){var t,n,r,i=!1,o=e.lastIndexOf("."),a=0===e.indexOf("./")||0===e.indexOf("../");return-1!==o&&(!a||o>1)?(t=e.substring(0,o),n=e.substring(o+1)):t=e,r=n||t,o=r.indexOf("!"),-1!==o&&(i="strip"===r.substring(o+1),r=r.substring(0,o),n?n=r:t=r),{moduleName:t,ext:n,strip:i}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,t,i,o){var a,s,u,l=r.xdRegExp.exec(e);return l?(a=l[2],s=l[3],s=s.split(":"),u=s[1],s=s[0],(!a||a===t)&&(!s||s.toLowerCase()===i.toLowerCase())&&(!u&&!s||n(a,u,t,o))):!0},finishLoad:function(e,t,n,i){n=t?r.strip(n):n,g.isBuild&&(m[e]=n),i(n)},load:function(e,t,n,i){if(i&&i.isBuild&&!i.inlineText)return void n();g.isBuild=i&&i.isBuild;var o=r.parseName(e),a=o.moduleName+(o.ext?"."+o.ext:""),s=t.toUrl(a),u=g.useXhr||r.useXhr;return 0===s.indexOf("empty:")?void n():void(!h||u(s,f,p,d)?r.get(s,function(t){r.finishLoad(e,o.strip,t,n)},function(e){n.error&&n.error(e)}):t([a],function(e){r.finishLoad(o.moduleName+"."+o.ext,o.strip,e,n)}))},write:function(e,t,n,i){if(m.hasOwnProperty(t)){var o=r.jsEscape(m[t]);n.asModule(e+"!"+t,"define(function () { return '"+o+"';});\n")}},writeFile:function(e,t,n,i,o){var a=r.parseName(t),s=a.ext?"."+a.ext:"",u=a.moduleName+s,l=n.toUrl(a.moduleName+s)+".js";r.load(u,n,function(t){var n=function(e){return i(l,e)};n.asModule=function(e,t){return i.asModule(e,l,t)},r.write(e,u,n,o)},o)}},"node"===g.env||!g.env&&"undefined"!=typeof process&&process.versions&&process.versions.node&&!process.versions["node-webkit"]&&!process.versions["atom-shell"]?(i=require.nodeRequire("fs"),r.get=function(e,t,n){try{var r=i.readFileSync(e,"utf8");"\ufeff"===r[0]&&(r=r.substring(1)),t(r)}catch(o){n&&n(o)}}):"xhr"===g.env||!g.env&&r.createXhr()?r.get=function(e,t,n,i){var o,a=r.createXhr();if(a.open("GET",e,!0),i)for(o in i)i.hasOwnProperty(o)&&a.setRequestHeader(o.toLowerCase(),i[o]);g.onXhr&&g.onXhr(a,e),a.onreadystatechange=function(r){var i,o;4===a.readyState&&(i=a.status||0,i>399&&600>i?(o=new Error(e+" HTTP status: "+i),o.xhr=a,n&&n(o)):t(a.responseText),g.onXhrComplete&&g.onXhrComplete(a,e))},a.send(null)}:"rhino"===g.env||!g.env&&"undefined"!=typeof Packages&&"undefined"!=typeof java?r.get=function(e,t){var n,r,i="utf-8",o=new java.io.File(e),a=java.lang.System.getProperty("line.separator"),s=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(o),i)),u="";try{for(n=new java.lang.StringBuffer,r=s.readLine(),r&&r.length()&&65279===r.charAt(0)&&(r=r.substring(1)),null!==r&&n.append(r);null!==(r=s.readLine());)n.append(a),n.append(r);u=String(n.toString())}finally{s.close()}t(u)}:("xpconnect"===g.env||!g.env&&"undefined"!=typeof Components&&Components.classes&&Components.interfaces)&&(o=Components.classes,a=Components.interfaces,Components.utils["import"]("resource://gre/modules/FileUtils.jsm"),s="@mozilla.org/windows-registry-key;1"in o,r.get=function(e,t){var n,r,i,u={};s&&(e=e.replace(/\//g,"\\")),i=new FileUtils.File(e);try{n=o["@mozilla.org/network/file-input-stream;1"].createInstance(a.nsIFileInputStream),n.init(i,1,0,!1),r=o["@mozilla.org/intl/converter-input-stream;1"].createInstance(a.nsIConverterInputStream),r.init(n,"utf-8",n.available(),a.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),r.readString(n.available(),u),r.close(),n.close(),t(u.value)}catch(l){throw new Error((i&&i.path||"")+": "+l)}}),r}),define("require/text!metapolator/ui/metapolator/app.tpl",[],function(){return'<mtk-menubar mtk-model="model" ng-mouseup="releaseLocalMenu($event)"></mtk-menubar>\n\n<mtk-pagewrap ng-mouseup="releaseLocalMenu($event)">\n    <mtk-landscape class="transition" ng-style="{\'width\': \'calc(\' + (totalPanelParts / 16) + \'* 100%)\', \'left\': getLandscapeLeft()}">\n        <mtk-panel ng-style="{\'width\': \'calc(\' + (panels[0].share / totalPanelParts) + \'* 100%)\'}">\n            <div class="semi-panel">\n                <mtk-parameter-panel class="panel"></mtk-parameter-panel>\n            </div>\n            <mtk-horizontal-divider></mtk-horizontal-divider>\n            <div class="semi-panel without-border">\n                <div class="under-construction">\n                    <div class="bottom-text">\n                        Coming Soon:<br>More Parameters<br><br>\n                        Want more parameters, including point parameters for fine-tuning? Support the project and buy a T shirt (<a title="Support the project and buy a T shirt (USA)" href="http://teespring.com/metapolator-beta-0-3-0" target="_blank" class="newtab">USA</a>, <a title="Support the project and buy a T shirt (Worldwide)" href="http://metapolator.spreadshirt.com" target="_blank" class="newtab">Worldwide</a>)\n                    </div>\n                </div>\n            </div>\n        </mtk-panel>\n        \n        <mtk-panel ng-style="{\'width\': \'calc(\' + (panels[1].share / totalPanelParts) + \'* 100%)\'}">\n            <mtk-specimen-panel class="panel" mtk-model="model.masterSequences" mtk-type="\'master\'" mtk-rubberband="true" mtk-glyphrange="true"></mtk-specimen-panel>\n        </mtk-panel>\n        \n        <mtk-panel ng-style="{\'width\': \'calc(\' + (panels[2].share / totalPanelParts) + \'* 100%)\'}">\n            <div class="semi-panel">\n                <mtk-master-panel class="panel without-border" mtk-model="model"></mtk-master-panel>\n            </div>\n            <mtk-horizontal-divider></mtk-horizontal-divider>\n            <div class="semi-panel without-border">\n                <div class="under-construction">\n                    <div class="bottom-text">\n                        Coming Soon:<br>Adjustment Masters<br><br>\n                        <!-- Pinterest -->\n                        <a href="//www.pinterest.com/pin/create/button/" data-pin-do="buttonBookmark" ><img src="//assets.pinterest.com/images/pidgets/pinit_fg_en_rect_gray_20.png" /></a>\n                        <!-- Facebook -->\n                        <div class="fb-share-button" data-href="https://metapolator.com/purple-pill/" data-layout="button_count"></div>\n                        <!-- Twitter -->\n                        <a class="twitter-share-button"\n                           href="https://twitter.com/share"\n                           data-url="https://metapolator.com/purple-pill/"\n                           data-via="metapolator">\n                            Tweet\n                        </a>\n                        <!-- G+ -->\n                        <div class="g-plusone" data-size="medium"></div>\n                        <div style="display:inline">\n                            <!-- Github Star -->\n                            <iframe src="https://ghbtns.com/github-btn.html?user=metapolator&repo=metapolator&type=star&count=true" frameborder="0" scrolling="0" width="90px" height="20px"></iframe>\n                            <!-- Github Watch -->\n                            <iframe src="https://ghbtns.com/github-btn.html?user=metapolator&repo=metapolator&type=watch&count=true&v=2" frameborder="0" scrolling="0" width="90px" height="20px"></iframe>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </mtk-panel>\n        \n        <mtk-panel ng-style="{\'width\': \'calc(\' + (panels[3].share / totalPanelParts) + \'* 100%)\'}">\n            <div class="semi-panel">\n                <mtk-design-space-panel class="panel without-border" mtk-model="model"></mtk-design-space-panel>\n            </div>\n            <mtk-horizontal-divider></mtk-horizontal-divider>\n            <div class="semi-panel">\n                <mtk-specimen-panel class="panel" mtk-model="model.instanceSequences" mtk-type="\'instance\'" mtk-rubberband="false" mtk-glyphrange="false"></mtk-specimen-panel>\n            </div>\n        </mtk-panel>\n        \n        <mtk-panel ng-style="{\'width\': \'calc(\' + (panels[4].share / totalPanelParts) + \'* 100%)\'}">\n            <mtk-instance-panel class="panel without-border" mtk-model="model"></mtk-instance-panel>\n        </mtk-panel>\n        \n        <mtk-panel class="without-body" ng-style="{\'width\': \'calc(\' + (panels[5].share / totalPanelParts) + \'* 100%)\'}">\n            <mtk-font-export-panel class="panel without-border" mtk-model="model.instanceSequences"></mtk-font-export-panel>\n        </mtk-panel>\n        \n        <mtk-panel ng-style="{\'width\': \'calc(\' + (panels[6].share / totalPanelParts) + \'* 100%)\'}">\n            <mtk-metadata-panel class="panel without-border" mtk-model="">\n            </mtk-metadata-panel>\n        </mtk-panel>\n    </mtk-landscape>\n</mtk-pagewrap>\n\n<mtk-vertical-divider mtk-total-parts="totalParts" mtk-dividers="dividers" mtk-panels="panels" ng-repeat="divider in dividers" divider="{{$index}}" ng-if="divider.view === model.viewState"></mtk-vertical-divider>';
}),define("metapolator/ui/metapolator/app-directive",["require/text!./app.tpl"],function(e){"use strict";function t(){return{restrict:"E",controller:"AppController",replace:!1,template:e}}return t.$inject=[],t}),define("metapolator/ui/metapolator/parameter-panel/parameter-panel-controller",["metapolator/ui/metapolator/ui-tools/selectionTools"],function(e){"use strict";function t(t){this.$scope=t,t.selection=e}t.$inject=["$scope"];t.prototype;return t}),define("require/text!metapolator/ui/metapolator/parameter-panel/parameter-panel.tpl",[],function(){return'<div id="parameters-selection">\n    <mtk-selection ng-repeat="level in selection.allLevels" mtk-model="selection.selection[level]" ng-if="selection.selection[level].elements.length > 0"></mtk-selection>\n</div>'}),define("metapolator/ui/metapolator/parameter-panel/parameter-panel-directive",["require/text!./parameter-panel.tpl"],function(e){"use strict";function t(t){return{restrict:"E",controller:"ParameterPanelController",replace:!1,template:e,scope:{model:"=mtkModel"}}}return t.$inject=[],t}),define("metapolator/ui/metapolator/parameter-panel/selection/selection-controller",["jquery","metapolator/ui/metapolator/ui-tools/selectionTools"],function(e,t){"use strict";function n(n,r){function i(e,r){for(var i=n.model.elements,a=i.length-1;a>=0;a--){var s=i[a];s.addParameterOperator(e,r,o)}o++,t.closePanel(),n.model.updateParameters()}var o=1;n.panelParameter=null,n.panelOperator=null,n.selection=t,n.addParameterToPanel=function(e){n.panelParameter=e,n.panelParameter&&n.panelOperator&&i(n.panelParameter,n.panelOperator)},n.addOperatorToPanel=function(e){n.panelOperator=e,n.panelParameter&&n.panelOperator&&i(n.panelParameter,n.panelOperator)},n.togglePanel=function(r){n.panelOperator=null,n.panelParameter=null,t.panel.level===n.model.level&&"parameterOperator"===t.panel.type?t.closePanel():(t.panel.top=e(r.target).offset().top+20,t.panel.left=e(r.target).offset().left+20,t.panel.level=n.model.level,t.panel.type="parameterOperator")}}n.$inject=["$scope","project"];n.prototype;return n}),define("require/text!metapolator/ui/metapolator/parameter-panel/selection/selection.tpl",[],function(){return'<div class="parameter-selection-head" ng-if="model.level === \'master\' || model.level === \'glyph\'">\n    <div class="parameter-selection-title">{{model.level}}</div>\n    <div class="parameter-selection-add-button panel-zone" ng-click="togglePanel($event)">+</div>\n</div>\n<div class="parameter-selection-body">\n    <mtk-selection-parameter ng-repeat="parameter in model.parameters" mtk-model="parameter"></mtk-selection-parameter>\n</div>\n\n<div class="parameters-control-panel panel-zone" \n     ng-if="selection.panel.level === model.level && selection.panel.type === \'parameterOperator\'" \n     ng-style="{\'top\': selection.panel.top, \'left\': selection.panel.left}">\n    <div class="control-panel-parameters">\n        <div ng-repeat="parameter in model.baseParameters" ng-class="{\'selected\': parameter.name === panelParameter.name}" class="control-panel-parameter control-panel-button push-button" ng-click="addParameterToPanel(parameter)">{{parameter.name}}</div>\n    </div>\n    <div class="control-panel-operators">\n        <div ng-repeat="operator in model.baseOperators" ng-class="{\'selected\': operator.name === panelOperator.name}" class="control-panel-operator control-panel-button push-button" ng-click="addOperatorToPanel(operator)">{{operator.sign}}</div>\n    </div>\n    <div class="control-panel-cancel control-panel-button push-button" ng-click="data.view.parameterOperatorPanel = 0">\n        Cancel\n    </div>\n</div>\n\n<!--\n<div ng-repeat="element in model.elements">{{element.name}}</div>\n-->'}),define("metapolator/ui/metapolator/parameter-panel/selection/selection-directive",["require/text!./selection.tpl"],function(e){"use strict";function t(t){return{restrict:"E",controller:"SelectionController",replace:!1,template:e,scope:{model:"=mtkModel"}}}return t.$inject=[],t}),define("Atem-Errors/errors",[],function(){"use strict";function e(e){var n=new t.Unhandled(e+"\n"+e.stack);n.originalError=e,setTimeout(function(){throw n},0)}var t=Object.create(null),n=function(e,t,n,r){void 0===r&&(r=Error),void 0===n&&(n=function(e,r){void 0!==e&&(this.name=t+"Error",this.message=e||"(no error message)"),r||"function"!=typeof Error.captureStackTrace?this.stack=r||(new Error).stack||"(no stack available)":Error.captureStackTrace(this,n)}),n.prototype=Object.create(r.prototype),n.prototype.constructor=n,e[t]=n};return t.makeError=n,n(t,"Error"),n(t,"Unhandled"),n(t,"Type",void 0,TypeError),n(t,"Assertion",void 0,t.Error),n(t,"Value",void 0,t.Error),n(t,"Key",void 0,t.Error),n(t,"NotImplemented",void 0,t.Error),n(t,"Deprecated",void 0,t.Error),n(t,"AbstractInterface",void 0,t.Error),n(t,"Event",void 0,t.Error),n(t,"Emitter",void 0,t.Event),n(t,"Receiver",void 0,t.Event),t.assert=function(e,n){if(!e)throw new t.Assertion(n)},t.warn=function(e){"undefined"!=typeof console&&console.warn&&console.warn("WARNING: "+e)},t.unhandledPromise=e,Object.freeze(t),t}),define("Atem-CPS/errors",["Atem-Errors/errors"],function(e){var t=Object.create(e),n=e.makeError.bind(null,t);return n("CPS",void 0,t.Error),n("CPSKey",void 0,t.Error),n("OMA",void 0,t.CPS),n("OMAId",void 0,t.CPS),n("CPSRecursion",void 0,t.CPS),n("CPSRecursionKey",void 0,t.CPSKey),n("CPSFormula",void 0,t.CPS),n("Project",void 0,t.CPS),n("PointPen",void 0,t.CPS),n("CPSParser",void 0,t.CPS),t}),define("Atem-MOM/errors",["Atem-CPS/errors"],function(e){var t=Object.create(e),n=e.makeError.bind(null,t);return n("MOM",void 0,t.OMA),n("Import",void 0,t.MOM),n("ImportPenstroke",void 0,t.Import),n("ImportContour",void 0,t.Import),n("CommandLine",void 0,t.Import),t}),define("metapolator/errors",["Atem-MOM/errors"],function(e){"use strict";return e}),define("Atem-Property-Language/errors",["Atem-Errors/errors"],function(e){var t=Object.create(e),n=e.makeError.bind(null,t);return n("PropertyLanguage",void 0,t.Error),n("PropertyLanguageParser",void 0,t.PropertyLanguage),t}),define("Atem-Property-Language/parsing/_Token",["Atem-Property-Language/errors"],function(e){"use strict";function t(e,t,n){this._literal=e,this._setConsumption(t,n)}var n=e.PropertyLanguage,r=t.prototype;return r.constructor=t,r.toString=function(){return["<",this.constructor.name,": ",this.literal,">"].join("")},Object.defineProperty(r,"_ejects",{value:1,writable:!1}),r._setConsumption=function(e,t){if("number"!=typeof e)throw new n('preConsumes must be a number, but is "'+e+'" typeof: '+typeof e);if(this._preConsumes=e,"number"!=typeof t)throw new n('postConsumes must be a number, but is "'+t+'" typeof: '+typeof t);this._postConsumes=t},r.fixedConsumptionFactory=function(e,t){var n=Object.create(this);return n._setConsumption(e,t),n},Object.defineProperty(r,"literal",{get:function(){return this._literal}}),Object.defineProperty(r,"preConsumes",{get:function(){return this._preConsumes}}),Object.defineProperty(r,"postConsumes",{get:function(){return this._postConsumes}}),Object.defineProperty(r,"consumes",{get:function(){if(this.preConsumes===1/0||this.postConsumes===1/0)throw new n("This item "+this+' pre- or post-consumes "Infinity" items from the stack, it is impossible to calculate the exact amountof items in this method. See this.fixedConsumptionFactory and its usage in the parser, where an exact amount of consumption can be calculated.');return this.preConsumes+this.postConsumes}}),Object.defineProperty(r,"ejects",{get:function(){return this._ejects}}),t}),define("Atem-Property-Language/parsing/_ValueToken",["Atem-Property-Language/errors","./_Token"],function(e,t){"use strict";function n(e){t.call(this,e,0,0)}var r=n.prototype=Object.create(t.prototype);return r.constructor=n,r.getValue=function(){throw new e.NotImplemented("The getValue interface needs  implementation in child classes of _ValueToken.")},n}),define("Atem-Property-Language/parsing/NameToken",["Atem-Property-Language/errors","./_ValueToken"],function(e,t){"use strict";function n(e){t.call(this,e,0,0)}var r=n.prototype=Object.create(t.prototype);return r.constructor=n,r.getValue=function(){return this.literal},n}),define("Atem-Property-Language/parsing/OperatorToken",["Atem-Property-Language/errors","./_Token","./NameToken"],function(e,t,n){"use strict";function r(e){return"number"==typeof e&&e===e&&e===(0|e)}function i(e){return"number"==typeof e&&isFinite(e)&&e!==(0|e)}function o(e,t){if(arguments.length<2)throw new TypeError("isInstance() expects 2 arguments, got "+arguments.length);var n,o,a=t instanceof Array?t:[t];for(o=0;o<a.length;o++)if(n=typeof a[o],"function"===n&&e instanceof a[o]||"int"===a[o]&&r(e)||"float"===a[o]&&i(e)||"NaN"===a[o]&&e!==e||"null"===a[o]&&null===e||"Infinity"===a[o]&&e===Number.POSITIVE_INFINITY||"-Infinity"===a[o]&&e===Number.NEGATIVE_INFINITY||"string"===n&&typeof e===a[o]&&e===e)return!0;return!1}function a(e,r,i,o,a,s){if(t.call(this,e,o,a),this._splitting=!!r,"number"!=typeof i)throw new m('Precedence must be a number, but is "'+i+'" typeof: '+typeof i);this._precedence=i,this._methods=[],this._setMethods(s),this.PropertyLanguageError=m,this.NameToken=n,isFinite(this.preConsumes)&&isFinite(this.postConsumes)&&(this.execute=this.compile())}function s(e,t,n){var r,i=[],o=t||"",a=n||"";for(r=0;e>r;r++)i.push(o+r+a);return i}function u(e,t,n){var r,i,o,a,u=0,l=s(n,"args[","]");for(r=0,i=t.length;i>r&&(o="*getAPI*"===t[r][0],u+=1,o);r++);if(2>u)return l;for(a=s(n,"aN"),r=0,i=n;i>r;r++)e.push("var ",a[r]," = ",l[r],";\n");return a}function l(e,t,n){var r,i,o=s(t,"aV");for(r=0;t>r;r++)i=n[r],e.push("var ",o[r]," = ",i," instanceof NameToken ","? getAPI.get(",i,".getValue()) ",": ",i,";\n");return o}function c(e,t,n,r){var i,o,a=[],s=typeof n;if("function"===s)i=r.cache,o=i.get(n),o||(o="c"+r.i++,r.init.push("var ",o," = ",t,";\n"),i.set(n,o)),a.push(e," instanceof ",o);else{if("string"!==s)throw new g("Unkown type for a value-type: "+s);switch(n){case"int":a.push("typeof ",e,' === "number" && ',e," === (",e,"|0)");break;case"float":a.push("typeof ",e,' === "number" && ',"isFinite(",e,") && ",e," !== (",e,"|0)");break;case"number":a.push("typeof ",e,' === "number" && ',e," === ",e);break;case"NaN":a.push(e," !== ",e);break;case"null":a.push(e," === null");break;case"Infinity":a.push(e," === Number.POSITIVE_INFINITY");break;case"-Infinity":a.push(e," === Number.NEGATIVE_INFINITY");break;default:a.push("typeof ",e," === ",v(n))}}return a.join("")}function h(e,t,n,r,i,o){var a,s,u,l,h=i instanceof Array?i.length:1;for(a=0;h>a;a++)a&&e.push(" || "),i instanceof Array?(s=o+"["+a+"]",u=i[a]):(s=o,u=i),l=c(r,s,u,n),f(e,t,l)}function f(e,t,n){var r=t[n];return r?(r.varName||(r.varName="tt"+t.__length,t.__length++,t.__init.push("var "+r.varName+";\n"),e[r.bi]=r.varName+" = ("+n+")"),void e.push("(",r.varName," || (",r.varName," === false ? false"," : ",r.varName," = (",n,")))")):(t[n]={bi:e.length,varName:null},void e.push(n))}function p(e,t){this.original=e,this._getAPI=t,this._unboxedNameTokens=null}function d(e){return e instanceof n?this._getAPI.get(e.getValue()):e}var m=e.PropertyLanguage,g=e.Value,v=JSON.stringify,y=a.prototype=Object.create(t.prototype);return y.constructor=a,Object.defineProperty(y,"precedence",{get:function(){return this._precedence}}),Object.defineProperty(y,"splitting",{get:function(){return this._splitting}}),y._setMethods=function(e){"function"==typeof e?this._setMethod(e):e instanceof Array&&e.map(this._setMethod,this)},y._setMethod=function(e){var t;if("function"==typeof e)return void this._methods.push(e);if(!(e instanceof Array))throw new g("An operator definition should be either a function or an array, see OperatorToken");if(t=this.consumes+("*getAPI*"===e[0]||"*unboxed+getAPI*"===e[0]?2:1),e.length!==t)throw new g(this.literal+": An operator definition array must define the types for all items it consumes plus the method to that is the operator code in the end.This operator should have "+t+" items in a definition, but "+e.length+" was found: "+e);if("function"!=typeof e[e.length-1])throw new g('The last item of an operator definition must be a type of "function" but this is a "'+typeof e[e.length-1]+'"');if(this._methods.length&&"*getAPI*"===e[0]&&"*getAPI*"!==this._methods[this._methods.length-1][0])throw new g('The previous operator uses "unboxed" NameTokens but this one unboxes itself. (*getAPI* is the  first argument) This is illegal. Operators that unbox themselves  must be defined before operators that expect unboxed values.\nThis is because automatic unboxing could cause unpredictable behavior (like a hit where no hit should be) and also errors for not found names. Also, automatic unboxing for a value that doesn\'t need it is bad for performance.');this._methods.push(e)},y.compile=function(){var e,t,n,r,i,o,a,s,c,f,p,d,m,y,b=['"use strict";\n'],_=!1,w=!1,x={__length:0,__init:[]},S={i:0,cache:new Map,init:[]};for(b.push("//",this.literal,"\n","var NameToken = this.NameToken\n","  , methods = this._methods\n","  ;\n"),s=u(b,this._methods,this.consumes),c=s.join(", "),p=b.length,b.push(""),e=0,r=this._methods.length;r>e;e++){if(o=this._methods[e],a="m"+e,b.push("var ",a," = methods[",e,"];\n"),m="*getAPI*"===o[0],y=m||"*unboxed+getAPI*"===o[0],w&&m)throw new g("Found a *getAPI* after names where already unboxed!");if(w||m||(w=!0,s=l(b,this.consumes,s),c=s.join(", ")),"function"==typeof o){_=!0,b.push("return ",a,"(",c,");");break}for(d=b.length,b.push(""),b.push("if(true"),t=0,n=y?1:0,i=this.consumes;i>t;n++,t++)f=o[n],"*anything*"!==f&&(b.push(" && ("),h(b,x,S,s[t],f,a+"["+n+"]"),b.push(")"));b.push(")\n    ","return ",a,"[",o.length-1,"](",y?"getAPI, ":"",c,");\n"),b[d]=S.init.join(""),S.init=[]}return x.__init.length&&(b[p]=x.__init.join("")),_||b.push("throw new this.PropertyLanguageError(",v("Can't find an implementation for the operator "+v(this.literal)+" that matches the given combination of argument types:\n"),"\n    "," + args.map(function(item){\n    ",'return "\\"" + item + "\\" (typeof: " + (typeof item) + ")";}',').join(", ")',"\n    );"),new Function("getAPI","args",b.join(""))},y._findMethod=function(e,t){for(var n,r,i,a,s=0,u=this._methods.length;u>s;s++){if("*getAPI*"!==this._methods[s][0]?(n=0,a=t.unboxedNameTokens):(n=1,a=t.original),"function"==typeof this._methods[s])return s;for(r=0;r<a.length&&(i=this._methods[s][n],"*anything*"===i||o(a[r],i));n++,r++);if(r===a.length)return s}return-1},y.execute=function(e,t){var n,r,i,o,a,s=new p(t,e);if(n=this._findMethod(e,s),-1===n)throw new m("Can't find an implementation for the operator \""+this.literal+'" that matches the given combination of argument types: '+s.original.map(function(e){return'type "'+typeof e+'" string "'+e+'"'}).join(", "));return a=this._methods[n],"function"==typeof a?(o=a,r=s.unboxedNameTokens):(o=a.slice(-1).pop(),"*getAPI*"===a[0]?(r=[e],Array.prototype.push.apply(r,s.original)):"*unboxed+getAPI*"===a[0]?(r=[e],Array.prototype.push.apply(r,s.unboxedNameTokens)):r=s.unboxedNameTokens),i=o.apply(this,r)},Object.defineProperty(p.prototype,"unboxedNameTokens",{get:function(){return this._unboxedNameTokens||(this._unboxedNameTokens=this.original.map(d,this)),this._unboxedNameTokens}}),a}),define("Atem-Property-Language/parsing/BracketToken",["Atem-Property-Language/errors","./_ValueToken"],function(e,t){"use strict";function n(e){t.call(this,e,0,0);var n={"(":")",")":"(","[":"]","]":"["};Object.defineProperty(this,"opening",{value:-1!=="([".indexOf(this.literal),enumerable:!0}),Object.defineProperty(this,"closing",{value:!this.opening,enumerable:!0}),Object.defineProperty(this,"counterpart",{value:n[this.literal],enumerable:!0})}var r=n.prototype=Object.create(t.prototype);return r.constructor=n,r.matches=function(e){return e===this.counterpart},n}),define("Atem-Property-Language/parsing/StringToken",["Atem-Property-Language/errors","./_ValueToken"],function(e,t){"use strict";function n(e){t.call(this,e,0,0)}var r=n.prototype=Object.create(t.prototype);return r.constructor=n,r.getValue=function(){return this.literal},n}),define("gonzales/gonzales.cssp.node",["require","exports","module"],function(e,t,n){var r=function(){var e={StringSQ:"StringSQ",StringDQ:"StringDQ",CommentML:"CommentML",CommentSL:"CommentSL",Newline:"Newline",Space:"Space",Tab:"Tab",ExclamationMark:"ExclamationMark",QuotationMark:"QuotationMark",NumberSign:"NumberSign",DollarSign:"DollarSign",PercentSign:"PercentSign",Ampersand:"Ampersand",Apostrophe:"Apostrophe",LeftParenthesis:"LeftParenthesis",RightParenthesis:"RightParenthesis",Asterisk:"Asterisk",PlusSign:"PlusSign",Comma:"Comma",HyphenMinus:"HyphenMinus",FullStop:"FullStop",Solidus:"Solidus",Colon:"Colon",Semicolon:"Semicolon",LessThanSign:"LessThanSign",EqualsSign:"EqualsSign",GreaterThanSign:"GreaterThanSign",QuestionMark:"QuestionMark",CommercialAt:"CommercialAt",LeftSquareBracket:"LeftSquareBracket",ReverseSolidus:"ReverseSolidus",RightSquareBracket:"RightSquareBracket",CircumflexAccent:"CircumflexAccent",LowLine:"LowLine",LeftCurlyBracket:"LeftCurlyBracket",VerticalLine:"VerticalLine",RightCurlyBracket:"RightCurlyBracket",Tilde:"Tilde",Identifier:"Identifier",DecimalNumber:"DecimalNumber"},t=function(){function t(e){return"0123456789".indexOf(e)>=0}function n(e){if(!e)return[];m=[],g=0,v=1;var n,y;for(d=0;d<e.length;d++)n=e.charAt(d),y=e.charAt(d+1),"/"===n&&"*"===y?o(e):f||"/"!==n||"/"!==y?'"'===n||"'"===n?s(e,n):" "===n?i(e):n in h?(r(h[n],n),("\n"===n||"\r"===n)&&v++,")"===n&&(f=!1),"{"===n&&p++,"}"===n&&p--):t(n)?u(e):l(e):p>0?l(e):a(e);return c(),m}function r(e,t){m.push({tn:g++,ln:v,type:e,value:t})}function i(t){for(var n=d;d<t.length&&" "===t.charAt(d);d++);r(e.Space,t.substring(n,d)),d--}function o(t){var n=d;for(d+=2;d<t.length;d++)if("*"===t.charAt(d)&&"/"===t.charAt(d+1)){d++;break}r(e.CommentML,t.substring(n,d+1))}function a(t){var n=d;for(d+=2;d<t.length;d++)if("\n"===t.charAt(d)||"\r"===t.charAt(d)){d++;break}r(e.CommentSL,t.substring(n,d)),d--}function s(t,n){var i=d;for(d+=1;d<t.length;d++)if("\\"===t.charAt(d))d++;else if(t.charAt(d)===n)break;r('"'===n?e.StringDQ:e.StringSQ,t.substring(i,d+1))}function u(n){for(var i=d;d<n.length&&t(n.charAt(d));d++);r(e.DecimalNumber,n.substring(i,d)),d--}function l(t){for(var n=d;"/"===t.charAt(d);)d++;for(;d<t.length;d++)if("\\"===t.charAt(d))d++;else if(t.charAt(d)in h)break;var i=t.substring(n,d);f=f||"url"===i,r(e.Identifier,i),d--}function c(){for(var t,n=[],r=[],i=[],o=0;o<m.length;o++)switch(t=m[o],t.type){case e.LeftParenthesis:n.push(o);break;case e.RightParenthesis:n.length&&(t.left=n.pop(),m[t.left].right=o);break;case e.LeftSquareBracket:r.push(o);break;case e.RightSquareBracket:r.length&&(t.left=r.pop(),m[t.left].right=o);break;case e.LeftCurlyBracket:i.push(o);break;case e.RightCurlyBracket:i.length&&(t.left=i.pop(),m[t.left].right=o)}}var h,f=!1,p=0;h={" ":e.Space,"\n":e.Newline,"\r":e.Newline,"	":e.Tab,"!":e.ExclamationMark,'"':e.QuotationMark,"#":e.NumberSign,$:e.DollarSign,"%":e.PercentSign,"&":e.Ampersand,"'":e.Apostrophe,"(":e.LeftParenthesis,")":e.RightParenthesis,"*":e.Asterisk,"+":e.PlusSign,",":e.Comma,"-":e.HyphenMinus,".":e.FullStop,"/":e.Solidus,":":e.Colon,";":e.Semicolon,"<":e.LessThanSign,"=":e.EqualsSign,">":e.GreaterThanSign,"?":e.QuestionMark,"@":e.CommercialAt,"[":e.LeftSquareBracket,"]":e.RightSquareBracket,"^":e.CircumflexAccent,_:e.LowLine,"{":e.LeftCurlyBracket,"|":e.VerticalLine,"}":e.RightCurlyBracket,"~":e.Tilde};var d,m=[],g=0,v=1;return function(e){return n(e)}}(),n=function(){function t(e){e&&e.ln>Rt&&(Rt=e.ln)}function n(){throw new Error("Please check the validity of the CSS block starting from the line #"+Ut)}function r(e,t,n){return Dt=e,Vt=n,jt=0,It(),t?Lt[t]():Lt.stylesheet()}function i(e){return U(e)||at(e)||Ne(e)||ee(e)||Ae(e)||yt(e)||ue(e)||ce(e)||de(e)||dt(e)}function o(){return U(jt)?V():at(jt)?st():Ne(jt)?Ie():ee(jt)?te():Ae(jt)?Oe():yt(jt)?bt():ue(jt)?le():ce(jt)?he():de(jt)?ge():dt(jt)?mt():void 0}function a(n){var r;return Dt[n++].type!==e.CommercialAt?t(Dt[n-1]):(r=de(n))?r+1:t(Dt[n])}function s(){var e=jt;return jt++,Vt?[{ln:Dt[e].ln},Ft.AtkeywordType,ge()]:[Ft.AtkeywordType,ge()]}function u(n){return Dt[n].type!==e.LeftSquareBracket?t(Dt[n]):Dt[n].right?Dt[n].right-n+1:t(Dt[n])}function l(n){var r=n;n++;var i=Ke(n);return i&&(n+=i),(i=de(n))?(n+=i,(i=Ke(n))&&(n+=i),(i=d(n))?(n+=i,(i=Ke(n))&&(n+=i),(i=de(n))||(i=at(n))?(n+=i,(i=Ke(n))&&(n+=i),Dt[n].type===e.RightSquareBracket?n-r:t(Dt[n])):t(Dt[n])):t(Dt[n])):t(Dt[n])}function c(){var e=jt;jt++;var t=(Vt?[{ln:Dt[e].ln},Ft.AttribType]:[Ft.AttribType]).concat(Ze()).concat([ge()]).concat(Ze()).concat([m()]).concat(Ze()).concat([at(jt)?st():ge()]).concat(Ze());return jt++,t}function h(n){var r=n;n++;var i=Ke(n);return i&&(n+=i),(i=de(n))&&(n+=i),(i=Ke(n))&&(n+=i),Dt[n].type===e.RightSquareBracket?n-r:t(Dt[n])}function f(){var e=jt;jt++;var t=(Vt?[{ln:Dt[e].ln},Ft.AttribType]:[Ft.AttribType]).concat(Ze()).concat([ge()]).concat(Ze());return jt++,t}function p(){return l(jt)?c():h(jt)?f():void 0}function d(n){if(Dt[n].type===e.EqualsSign)return 1;if(Dt[n].type===e.VerticalLine&&(!Dt[n+1]||Dt[n+1].type!==e.EqualsSign))return 1;if(!Dt[n+1]||Dt[n+1].type!==e.EqualsSign)return t(Dt[n]);switch(Dt[n].type){case e.Tilde:case e.CircumflexAccent:case e.DollarSign:case e.Asterisk:case e.VerticalLine:return 2}return t(Dt[n])}function m(){var t=jt,n=Dt[jt++].value;return Dt[jt]&&Dt[jt].type===e.EqualsSign&&(n+=Dt[jt++].value),Vt?[{ln:Dt[t].ln},Ft.AttrselectorType,n]:[Ft.AttrselectorType,n]}function g(e){var n,r=e;if(void 0!==Dt[r].atrule_l)return Dt[r].atrule_l;if(n=_(e))Dt[e].atrule_type=1;else if(n=y(e))Dt[e].atrule_type=2;else{if(!(n=P(e)))return t(Dt[r]);Dt[e].atrule_type=3}return Dt[r].atrule_l=n,n}function v(){switch(Dt[jt].atrule_type){case 1:return w();case 2:return b();case 3:return M()}}function y(e){var n,r=e;return(n=a(e))?(e+=n,(n=ft(e))&&(e+=n),(n=T(e))?(e+=n,e-r):t(Dt[e])):t(Dt[e])}function b(){return(Vt?[{ln:Dt[jt].ln},Ft.AtrulebType,s()]:[Ft.AtrulebType,s()]).concat(pt()).concat([A()])}function _(n){var r,i=n;return(r=a(n))?(n+=r,(r=x(n))&&(n+=r),n<Dt.length&&Dt[n].type===e.LeftCurlyBracket?(n++,(r=C(n))&&(n+=r),n<Dt.length&&Dt[n].type===e.RightCurlyBracket?(n++,n-i):t(Dt[n])):t(Dt[n])):t(Dt[n])}function w(){var e=Vt?[{ln:Dt[jt].ln},Ft.AtrulerType,s(),S()]:[Ft.AtrulerType,s(),S()];return jt++,e.push(k()),jt++,e}function x(e){return ft(e)}function S(){return(Vt?[{ln:Dt[jt].ln},Ft.AtrulerqType]:[Ft.AtrulerqType]).concat(pt())}function C(e){var t,n=e;for((t=Ke(e))&&(e+=t);(t=Ge(e))||(t=g(e))||(t=Ke(e));)e+=t;return Dt[e].atrulers_end=1,(t=Ke(e))&&(e+=t),e-n}function k(){for(var e=(Vt?[{ln:Dt[jt].ln},Ft.AtrulersType]:[Ft.AtrulersType]).concat(Ze());!Dt[jt].atrulers_end;)Ke(jt)?e=e.concat(Ze()):Ge(jt)?e.push(We()):e.push(v());return e.concat(Ze())}function P(n){var r,i=n;return(r=a(n))?(n+=r,(r=ft(n))&&(n+=r),n>=Dt.length?n-i:Dt[n].type!==e.Semicolon?t(Dt[n]):(n++,n-i)):t(Dt[n])}function M(){var e=(Vt?[{ln:Dt[jt].ln},Ft.AtrulesType,s()]:[Ft.AtrulesType,s()]).concat(pt());return jt++,e}function T(n){return n<Dt.length&&Dt[n].type===e.LeftCurlyBracket?Dt[n].right-n+1:t(Dt[n])}function A(){var e=Vt?[{ln:Dt[jt].ln},Ft.BlockType]:[Ft.BlockType],t=Dt[jt].right;for(jt++;t>jt;)O(jt)?e=e.concat(E()):n();return jt=t+1,e}function O(e){var n;if(n=$(e))Dt[e].bd_type=1;else if(n=I(e))Dt[e].bd_type=2;else if(n=j(e))Dt[e].bd_type=3;else{if(!(n=L(e)))return t(Dt[e]);Dt[e].bd_type=4}return n}function E(){switch(Dt[jt].bd_type){case 1:return N();case 2:return D();case 3:return F();case 4:return R()}}function $(e){var n,r=e;if((n=Ke(e))&&(e+=n),n=ne(e))Dt[e].bd_filter=1,e+=n;else{if(!(n=Y(e)))return t(Dt[e]);Dt[e].bd_decl=1,e+=n}return e<Dt.length&&(n=K(e))?(e+=n,(n=Ke(e))&&(e+=n),e-r):t(Dt[e])}function N(){return Ze().concat([Dt[jt].bd_filter?re():X()]).concat([Z()]).concat(Ze())}function I(e){var n,r=e;if((n=Ke(e))&&(e+=n),n=ne(e))Dt[e].bd_filter=1,e+=n;else{if(!(n=Y(e)))return t(Dt[e]);Dt[e].bd_decl=1,e+=n}return(n=Ke(e))&&(e+=n),e-r}function D(){return Ze().concat([Dt[jt].bd_filter?re():X()]).concat(Ze())}function j(e){var n,r=e;return(n=Ke(e))&&(e+=n),(n=K(e))?(e+=n,(n=Ke(e))&&(e+=n),e-r):t(Dt[e])}function F(){return Ze().concat([Z()]).concat(Ze())}function L(e){return Ke(e)}function R(){return Ze()}function U(n){return n>=Dt.length||Dt[n].type!==e.LeftParenthesis&&Dt[n].type!==e.LeftSquareBracket?t(Dt[n]):Dt[n].right-n+1}function V(){var e=jt,t=jt,n=Dt[jt].right;jt++;var r=pt();return jt++,Vt?[{ln:Dt[e].ln},Ft.BracesType,Dt[t].value,Dt[n].value].concat(r):[Ft.BracesType,Dt[t].value,Dt[n].value].concat(r)}function q(n){var r;return Dt[n].clazz_l?Dt[n].clazz_l:Dt[n].type===e.FullStop&&(r=de(n+1))?(Dt[n].clazz_l=r+1,r+1):t(Dt[n])}function z(){var e=jt;return jt++,Vt?[{ln:Dt[e].ln},Ft.ClazzType,ge()]:[Ft.ClazzType,ge()]}function B(n){return Dt[n].type===e.PlusSign||Dt[n].type===e.GreaterThanSign||Dt[n].type===e.Tilde?1:t(Dt[n])}function H(){return Vt?[{ln:Dt[jt].ln},Ft.CombinatorType,Dt[jt++].value]:[Ft.CombinatorType,Dt[jt++].value]}function G(n){return Dt[n].type===e.CommentML?1:t(Dt[n])}function W(){var e=jt,t=Dt[jt].value.substring(2),n=t.length;return"*"===t.charAt(n-2)&&"/"===t.charAt(n-1)&&(t=t.substring(0,n-2)),jt++,Vt?[{ln:Dt[e].ln},Ft.CommentType,t]:[Ft.CommentType,t]}function Y(n){var r,i=n;return(r=Le(n))?(n+=r,n<Dt.length&&Dt[n].type===e.Colon?(n++,(r=wt(n))?(n+=r,n-i):t(Dt[n])):t(Dt[n])):t(Dt[n])}function X(){var e=Vt?[{ln:Dt[jt].ln},Ft.DeclarationType,Re()]:[Ft.DeclarationType,Re()];return jt++,e.push(St()),e}function K(n){return n<Dt.length&&Dt[n].type===e.Semicolon?1:t(Dt[n])}function Z(){var e=jt;return jt++,Vt?[{ln:Dt[e].ln},Ft.DecldelimType]:[Ft.DecldelimType]}function Q(n){return n<Dt.length&&Dt[n].type===e.Comma?1:t(n>=Dt.length?Dt[Dt.length-1]:Dt[n])}function J(){var e=jt;return jt++,Vt?[{ln:Dt[e].ln},Ft.DelimType]:[Ft.DelimType]}function ee(e){var n,r=Ae(e);return!r||r&&e+r>=Dt.length?t(Dt[e]):(n=At(e+r))?r+n:t(Dt[e])}function te(){var e=jt,t=Oe(),n=Vt?[{ln:Dt[jt].ln},Ft.IdentType,Ot()]:[Ft.IdentType,Ot()];return Vt?[{ln:Dt[e].ln},Ft.DimensionType,t,n]:[Ft.DimensionType,t,n]}function ne(n){var r,i=n;return(r=ie(n))?(n+=r,Dt[n].type!==e.Colon?t(Dt[n]):(n++,(r=ae(n))?(n+=r,n-i):t(Dt[n]))):t(Dt[n])}function re(){var e=Vt?[{ln:Dt[jt].ln},Ft.FilterType,oe()]:[Ft.FilterType,oe()];return jt++,e.push(se()),e}function ie(e){var n,r,i=e;if(e<Dt.length){if("filter"===Dt[e].value)n=1;else if(r=Nt(e,2),"-filter"===r||"_filter"===r||"*filter"===r)n=2;else{if(r=Nt(e,4),"-ms-filter"!==r)return t(Dt[e]);n=4}return Dt[i].filterp_l=n,e+=n,Ke(e)&&(e+=n),e-i}return t(Dt[e])}function oe(){var e=jt,t=Nt(jt,Dt[jt].filterp_l),n=Vt?[{ln:Dt[e].ln},Ft.IdentType,t]:[Ft.IdentType,t];return jt+=Dt[jt].filterp_l,(Vt?[{ln:Dt[e].ln},Ft.PropertyType,n]:[Ft.PropertyType,n]).concat(Ze())}function ae(e){var n,r=e;if(!(n=De(e)))return t(Dt[e]);for(e+=n;n=De(e);)e+=n;return Dt[r].last_progid=e,e<Dt.length&&(n=Ke(e))&&(e+=n),e<Dt.length&&(n=ve(e))&&(e+=n),e-r}function se(){for(var e=Vt?[{ln:Dt[jt].ln},Ft.FiltervType]:[Ft.FiltervType],t=Dt[jt].last_progid;t>jt;)e.push(je());return e=e.concat(Ke(jt)?Ze():[]),jt<Dt.length&&ve(jt)&&e.push(ye()),e}function ue(n){var r=n;return Dt[n]&&"expression"===Dt[n++].value?Dt[n]&&Dt[n].type===e.LeftParenthesis?Dt[n].right-r+1:t(Dt[n]):t(Dt[n-1])}function le(){var e=jt;jt++;var t=$t(jt+1,Dt[jt].right-1);return jt=Dt[jt].right+1,Vt?[{ln:Dt[e].ln},Ft.FunctionExpressionType,t]:[Ft.FunctionExpressionType,t]}function ce(n){var r=n,i=de(n);return i?(n+=i,n>=Dt.length||Dt[n].type!==e.LeftParenthesis?t(Dt[n-1]):Dt[n].right-r+1):t(Dt[n])}function he(){var e=jt,t=ge();jt++;var n="not"!==t[Vt?2:1]?fe():pe();return Vt?[{ln:Dt[e].ln},Ft.FunktionType,t,n]:[Ft.FunktionType,t,n]}function fe(){for(var t,r=jt,i=[];Dt[jt].type!==e.RightParenthesis;)ct(jt)?(t=ht(),Vt&&"string"==typeof t[1]||"string"==typeof t[0]?i.push(t):i=i.concat(t)):q(jt)?i.push(z()):n();return jt++,(Vt?[{ln:Dt[r].ln},Ft.FunctionBodyType]:[Ft.FunctionBodyType]).concat(i)}function pe(){for(var t=jt,r=[];Dt[jt].type!==e.RightParenthesis;)nt(jt)?r.push(it()):n();return jt++,(Vt?[{ln:Dt[t].ln},Ft.FunctionBodyType]:[Ft.FunctionBodyType]).concat(r)}function de(n){if(n>=Dt.length)return t(Dt[n]);var r=n,i=!1;if(Dt[n].type===e.LowLine)return me(n);if(Dt[n].type!==e.HyphenMinus&&Dt[n].type!==e.Identifier&&Dt[n].type!==e.DollarSign&&Dt[n].type!==e.Asterisk)return t(Dt[n]);for(n++,i=Dt[n-1].type===e.Identifier;n<Dt.length;n++)if(Dt[n].type!==e.HyphenMinus&&Dt[n].type!==e.LowLine){if(!(Dt[n].type===e.Identifier||Dt[n].type===e.DecimalNumber&&i))break;i=!0}return i||Dt[r].type===e.Asterisk?(Dt[r].ident_last=n-1,n-r):t(Dt[n])}function me(t){var n=t;for(t++;t<Dt.length&&(Dt[t].type===e.HyphenMinus||Dt[t].type===e.DecimalNumber||Dt[t].type===e.LowLine||Dt[t].type===e.Identifier);t++);return Dt[n].ident_last=t-1,t-n}function ge(){var e=jt,t=$t(jt,Dt[jt].ident_last);return jt=Dt[jt].ident_last+1,Vt?[{ln:Dt[e].ln},Ft.IdentType,t]:[Ft.IdentType,t]}function ve(n){var r,i=n;return Dt[n++].type!==e.ExclamationMark?t(Dt[n-1]):((r=Ke(n))&&(n+=r),"important"!==Dt[n].value?t(Dt[n]):n-i+1)}function ye(){var e=jt;jt++;var t=Ze();return jt++,(Vt?[{ln:Dt[e].ln},Ft.ImportantType]:[Ft.ImportantType]).concat(t)}function be(n){return Dt[n].type===e.VerticalLine?1:t(Dt[n])}function _e(){var e=jt;return jt++,Vt?[{ln:Dt[e].ln},Ft.NamespaceType]:[Ft.NamespaceType]}function we(e){return xe(e)||Ce(e)}function xe(n){for(var r=n;n<Dt.length&&(Dt[n].type===e.DecimalNumber||"n"===Dt[n].value);n++);return n!==r?(Dt[r].nth_last=n-1,n-r):t(Dt[n])}function Se(){var e=jt;if(Dt[jt].nth_last){var t=Vt?[{ln:Dt[e].ln},Ft.NthType,$t(jt,Dt[jt].nth_last)]:[Ft.NthType,$t(jt,Dt[jt].nth_last)];return jt=Dt[jt].nth_last+1,t}return Vt?[{ln:Dt[e].ln},Ft.NthType,Dt[jt++].value]:[Ft.NthType,Dt[jt++].value]}function Ce(e){return"even"===Dt[e].value||"odd"===Dt[e].value?1:t(Dt[e])}function ke(n){var r=n,i=0;if(Dt[n++].type!==e.Colon)return t(Dt[n-1]);if(i++,"nth"!==Dt[n++].value||"-"!==Dt[n++].value)return t(Dt[n-1]);if(i+=2,"child"===Dt[n].value)i+=1;else if("last-child"===Dt[n].value+Dt[n+1].value+Dt[n+2].value)i+=3;else if("of-type"===Dt[n].value+Dt[n+1].value+Dt[n+2].value)i+=3;else{if("last-of-type"!==Dt[n].value+Dt[n+1].value+Dt[n+2].value+Dt[n+3].value+Dt[n+4].value)return t(Dt[n]);i+=5}return Dt[r+1].nthf_last=r+i-1,i}function Pe(){jt++;var e=$t(jt,Dt[jt].nthf_last);return jt=Dt[jt].nthf_last+1,e}function Me(n){var r,i=n;if(!(r=ke(n)))return t(Dt[n]);if(n+=r,Dt[n].type!==e.LeftParenthesis||!Dt[n].right)return t(Dt[n]);r++;for(var o=Dt[n++].right;o>n;)if(r=Ke(n))n+=r;else if(r=dt(n))n+=r;else{if(!(r=we(n)))return t(Dt[n]);n+=r}return o-i+1}function Te(){var t=Vt?[{ln:Dt[jt].ln},Ft.IdentType,Pe()]:[Ft.IdentType,Pe()],n=Vt?[{ln:Dt[jt].ln},Ft.NthselectorType,t]:[Ft.NthselectorType,t];for(jt++;Dt[jt].type!==e.RightParenthesis;)Ke(jt)?n=n.concat(Ze()):dt(jt)?n.push(mt()):we(jt)&&n.push(Se());return jt++,n}function Ae(n){return n<Dt.length&&Dt[n].number_l?Dt[n].number_l:n<Dt.length&&Dt[n].type===e.DecimalNumber&&(!Dt[n+1]||Dt[n+1]&&Dt[n+1].type!==e.FullStop)?(Dt[n].number_l=1,Dt[n].number_l):n<Dt.length&&Dt[n].type===e.DecimalNumber&&Dt[n+1]&&Dt[n+1].type===e.FullStop&&(!Dt[n+2]||Dt[n+2].type!==e.DecimalNumber)?(Dt[n].number_l=2,Dt[n].number_l):n<Dt.length&&Dt[n].type===e.FullStop&&Dt[n+1].type===e.DecimalNumber?(Dt[n].number_l=2,Dt[n].number_l):n<Dt.length&&Dt[n].type===e.DecimalNumber&&Dt[n+1]&&Dt[n+1].type===e.FullStop&&Dt[n+2]&&Dt[n+2].type===e.DecimalNumber?(Dt[n].number_l=3,Dt[n].number_l):t(Dt[n])}function Oe(){for(var e="",t=jt,n=Dt[jt].number_l,r=0;n>r;r++)e+=Dt[jt+r].value;return jt+=n,Vt?[{ln:Dt[t].ln},Ft.NumberType,e]:[Ft.NumberType,e]}function Ee(n){return n<Dt.length&&(Dt[n].type===e.Solidus||Dt[n].type===e.Comma||Dt[n].type===e.Colon||Dt[n].type===e.EqualsSign)?1:t(Dt[n])}function $e(){return Vt?[{ln:Dt[jt].ln},Ft.OperatorType,Dt[jt++].value]:[Ft.OperatorType,Dt[jt++].value]}function Ne(n){var r=Ae(n);return!r||r&&n+r>=Dt.length?t(Dt[n]):Dt[n+r].type===e.PercentSign?r+1:t(Dt[n]);
}function Ie(){var e=jt,t=Oe();return jt++,Vt?[{ln:Dt[e].ln},Ft.PercentageType,t]:[Ft.PercentageType,t]}function De(n){var r,i,o=n;return(r=Ke(n))&&(n+=r),"progid:DXImageTransform.Microsoft."!==(i=Nt(n,6))?t(Dt[n-1]):(_start=n,n+=6,(r=de(n))?(n+=r,(r=Ke(n))&&(n+=r),Dt[n].type!==e.LeftParenthesis?t(Dt[n]):(Dt[o].progid_end=Dt[n].right,n=Dt[n].right+1,(r=Ke(n))&&(n+=r),n-o)):t(Dt[n]))}function je(){var e=jt,t=Dt[jt].progid_end;return(Vt?[{ln:Dt[e].ln},Ft.ProgidType]:[Ft.ProgidType]).concat(Ze()).concat([Fe(t)]).concat(Ze())}function Fe(e){var t=jt,n=$t(jt,e);return jt=e+1,Vt?[{ln:Dt[t].ln},Ft.RawType,n]:[Ft.RawType,n]}function Le(e){var n,r=e;return(n=de(e))?(e+=n,(n=Ke(e))&&(e+=n),e-r):t(Dt[e])}function Re(){var e=jt;return(Vt?[{ln:Dt[e].ln},Ft.PropertyType,ge()]:[Ft.PropertyType,ge()]).concat(Ze())}function Ue(e){return qe(e)||Be(e)}function Ve(){return qe(jt)?ze():Be(jt)?He():void 0}function qe(n){var r;return Dt[n++].type!==e.Colon?t(Dt[n-1]):Dt[n++].type!==e.Colon?t(Dt[n-1]):(r=de(n))?r+2:t(Dt[n])}function ze(){var e=jt;return jt+=2,Vt?[{ln:Dt[e].ln},Ft.PseudoeType,ge()]:[Ft.PseudoeType,ge()]}function Be(n){var r;return Dt[n++].type!==e.Colon?t(Dt[n-1]):(r=ce(n))||(r=de(n))?r+1:t(Dt[n])}function He(){var e=jt;return jt++,Vt?[{ln:Dt[e].ln},Ft.PseudocType,ce(jt)?he():ge()]:[Ft.PseudocType,ce(jt)?he():ge()]}function Ge(e){var n,r=e;if(void 0!==Dt[r].ruleset_l)return Dt[r].ruleset_l;for(;n=Qe(e);)e+=n;return(n=T(e))?(e+=n,Dt[r].ruleset_l=e-r,e-r):t(Dt[e])}function We(){for(var e=Vt?[{ln:Dt[jt].ln},Ft.RulesetType]:[Ft.RulesetType];!T(jt);)e.push(Je());return e.push(A()),e}function Ye(e){return Dt[e].ws?Dt[e].ws_last-e+1:t(Dt[e])}function Xe(){var e=jt,t=$t(jt,Dt[jt].ws_last);return jt=Dt[jt].ws_last+1,Vt?[{ln:Dt[e].ln},Ft.SType,t]:[Ft.SType,t]}function Ke(e){for(var n,r=0;e<Dt.length&&((n=Ye(e))||(n=G(e)));)e+=n,r+=n;return r?r:t(e>=Dt.length?Dt[Dt.length-1]:Dt[e])}function Ze(){for(var e=[];jt<Dt.length;)if(Ye(jt))e.push(Xe());else{if(!G(jt))break;e.push(W())}return e}function Qe(e){var t,n=e;if(e<Dt.length){for(;t=nt(e)||Q(e);)e+=t;return Dt[n].selector_end=e-1,e-n}}function Je(){for(var e=Vt?[{ln:Dt[jt].ln},Ft.SelectorType]:[Ft.SelectorType],t=Dt[jt].selector_end;t>=jt;)e.push(Q(jt)?J():it());return e}function et(n){if(Dt[n].type!==e.NumberSign)return t(Dt[n]);var r=Mt(n+1);return r?r+1:t(Dt[n])}function tt(){var e=jt;return jt++,Vt?[{ln:Dt[e].ln},Ft.ShashType,Tt()]:[Ft.ShashType,Tt()]}function nt(e){for(var n,r=e;e<Dt.length&&(n=rt(e));)e+=n;return e-r?e-r:t(e>=Dt.length?Dt[Dt.length-1]:Dt[e])}function rt(e){return Me(e)||B(e)||u(e)||Ue(e)||q(e)||et(e)||i(e)||Ke(e)||be(e)}function it(){for(var e,t=Vt?[{ln:Dt[jt].ln},Ft.SimpleselectorType]:[Ft.SimpleselectorType];jt<Dt.length&&rt(jt);)e=ot(),Vt&&"string"==typeof e[1]||"string"==typeof e[0]?t.push(e):t=t.concat(e);return t}function ot(){return Me(jt)?Te():B(jt)?H():u(jt)?p():Ue(jt)?Ve():q(jt)?z():et(jt)?tt():i(jt)?o():Ke(jt)?Ze():be(jt)?_e():void 0}function at(n){return n<Dt.length&&(Dt[n].type===e.StringSQ||Dt[n].type===e.StringDQ)?1:t(Dt[n])}function st(){var e=jt;return Vt?[{ln:Dt[e].ln},Ft.StringType,Dt[jt++].value]:[Ft.StringType,Dt[jt++].value]}function ut(e){for(var t,r=e;e<Dt.length;)(t=Ke(e))?e+=t:(Ut=Dt[e].ln,(t=g(e))?e+=t:(t=Ge(e))?e+=t:(t=gt(e))?e+=t:n());return e-r}function lt(e){for(var t=Vt?[{ln:Dt[jt].ln},Ft.StylesheetType]:[Ft.StylesheetType];jt<Dt.length;)Ke(jt)?t=t.concat(Ze()):(Ut=Dt[jt].ln,Ge(jt)?t.push(We()):g(jt)?t.push(v()):gt(jt)?t.push(vt()):n());return t}function ct(e){return kt(e)||i(e)||Ke(e)||Ee(e)}function ht(){return kt(jt)?Pt():i(jt)?o():Ke(jt)?Ze():Ee(jt)?$e():void 0}function ft(e){for(var t,n=e;t=ct(e);)e+=t;return e-n}function pt(){for(var e,t=[];e=ht();)Vt&&"string"==typeof e[1]||"string"==typeof e[0]?t.push(e):t=t.concat(e);return t}function dt(n){return n<Dt.length&&(Dt[n].type===e.HyphenMinus||Dt[n].type===e.PlusSign)?1:t(Dt[n])}function mt(){var e=jt;return Vt?[{ln:Dt[e].ln},Ft.UnaryType,Dt[jt++].value]:[Ft.UnaryType,Dt[jt++].value]}function gt(n){return n<Dt.length&&Dt[n].type===e.CommentSL?1:t(Dt[n])}function vt(){var e=jt;return Vt?[{ln:Dt[e].ln},Ft.UnknownType,Dt[jt++].value]:[Ft.UnknownType,Dt[jt++].value]}function yt(n){var r=n;return n<Dt.length&&"url"!==Dt[n++].value?t(Dt[n-1]):Dt[n]&&Dt[n].type===e.LeftParenthesis?Dt[n].right-r+1:t(Dt[n])}function bt(){var t=jt,n={};if(jt+=2,n[e.Space]=1,n[e.Tab]=1,n[e.Newline]=1,n[e.LeftParenthesis]=1,n[e.RightParenthesis]=1,_t(jt)){var r=(Vt?[{ln:Dt[t].ln},Ft.UriType]:[Ft.UriType]).concat(Ze()).concat([st()]).concat(Ze());return jt++,r}var r=(Vt?[{ln:Dt[t].ln},Ft.UriType]:[Ft.UriType]).concat(Ze()),i=Et(n,jt),o=Vt?[{ln:Dt[jt].ln},Ft.RawType,$t(jt,jt+i)]:[Ft.RawType,$t(jt,jt+i)];return r.push(o),jt+=i+1,r=r.concat(Ze()),jt++,r}function _t(n){var r=n,i=Ke(n);return i&&(n+=i),Dt[n].type!==e.StringDQ&&Dt[n].type!==e.StringSQ?t(Dt[n]):(n++,(i=Ke(n))&&(n+=i),n-r)}function wt(e){for(var n,r=e;e<Dt.length&&(n=xt(e));)e+=n;return e-r?e-r:t(Dt[e])}function xt(e){return Ke(e)||kt(e)||i(e)||T(e)||a(e)||Ee(e)||ve(e)}function St(){for(var e,t=Vt?[{ln:Dt[jt].ln},Ft.ValueType]:[Ft.ValueType];jt<Dt.length&&xt(jt);)e=Ct(),Vt&&"string"==typeof e[1]||"string"==typeof e[0]?t.push(e):t=t.concat(e);return t}function Ct(){return Ke(jt)?Ze():kt(jt)?Pt():i(jt)?o():T(jt)?A():a(jt)?s():Ee(jt)?$e():ve(jt)?ye():void 0}function kt(n){if(n>=Dt.length||Dt[n].type!==e.NumberSign)return t(Dt[n]);var r=At(n+1);return r?r+1:t(Dt[n])}function Pt(){var e=jt;return jt++,Vt?[{ln:Dt[e].ln},Ft.VhashType,Ot()]:[Ft.VhashType,Ot()]}function Mt(n){var r=n;if(Dt[n].type!==e.HyphenMinus&&Dt[n].type!==e.LowLine&&Dt[n].type!==e.Identifier&&Dt[n].type!==e.DecimalNumber)return t(Dt[n]);for(n++;n<Dt.length&&(Dt[n].type===e.HyphenMinus||Dt[n].type===e.LowLine||Dt[n].type===e.Identifier||Dt[n].type===e.DecimalNumber);n++);return Dt[r].nm_name_last=n-1,n-r}function Tt(){var e=$t(jt,Dt[jt].nm_name_last);return jt=Dt[jt].nm_name_last+1,e}function At(n){return Dt[n].type===e.Identifier?1:Dt[n].type!==e.DecimalNumber?t(Dt[n]):(n++,Dt[n]&&Dt[n].type===e.Identifier?2:1)}function Ot(){var t=Dt[jt].value;return Dt[jt++].type===e.DecimalNumber&&jt<Dt.length&&Dt[jt].type===e.Identifier&&(t+=Dt[jt++].value),t}function Et(e,t){for(var n=t;t<Dt.length&&!e[Dt[t++].type];);return t-n-2}function $t(e,t){for(var n="",r=e;t+1>r;r++)n+=Dt[r].value;return n}function Nt(e,t){if(!(e+t-1>=Dt.length)){for(var n="",r=0;t>r;r++)n+=Dt[e+r].value;return n}}function It(){for(var t,n=-1,r=-1,i=0;i<Dt.length;i++)switch(t=Dt[i],t.type){case e.Space:case e.Tab:case e.Newline:t.ws=!0,t.sc=!0,-1===n&&(n=i),-1===r&&(r=i);break;case e.CommentML:-1!==n&&(Dt[n].ws_last=i-1,n=-1),t.sc=!0;break;default:-1!==n&&(Dt[n].ws_last=i-1,n=-1),-1!==r&&(Dt[r].sc_last=i-1,r=-1)}-1!==n&&(Dt[n].ws_last=i-1),-1!==r&&(Dt[r].sc_last=i-1)}var Dt,jt,Ft,Lt,Rt=0,Ut=0,Vt=!1;return Ft={IdentType:"ident",AtkeywordType:"atkeyword",StringType:"string",ShashType:"shash",VhashType:"vhash",NumberType:"number",PercentageType:"percentage",DimensionType:"dimension",CdoType:"cdo",CdcType:"cdc",DecldelimType:"decldelim",SType:"s",AttrselectorType:"attrselector",AttribType:"attrib",NthType:"nth",NthselectorType:"nthselector",NamespaceType:"namespace",ClazzType:"clazz",PseudoeType:"pseudoe",PseudocType:"pseudoc",DelimType:"delim",StylesheetType:"stylesheet",AtrulebType:"atruleb",AtrulesType:"atrules",AtrulerqType:"atrulerq",AtrulersType:"atrulers",AtrulerType:"atruler",BlockType:"block",RulesetType:"ruleset",CombinatorType:"combinator",SimpleselectorType:"simpleselector",SelectorType:"selector",DeclarationType:"declaration",PropertyType:"property",ImportantType:"important",UnaryType:"unary",OperatorType:"operator",BracesType:"braces",ValueType:"value",ProgidType:"progid",FiltervType:"filterv",FilterType:"filter",CommentType:"comment",UriType:"uri",RawType:"raw",FunctionBodyType:"functionBody",FunktionType:"funktion",FunctionExpressionType:"functionExpression",UnknownType:"unknown"},Lt={ident:function(){return de(jt)?ge():void 0},atkeyword:function(){return a(jt)?s():void 0},string:function(){return at(jt)?st():void 0},shash:function(){return et(jt)?tt():void 0},vhash:function(){return kt(jt)?Pt():void 0},number:function(){return Ae(jt)?Oe():void 0},percentage:function(){return Ne(jt)?Ie():void 0},dimension:function(){return ee(jt)?te():void 0},decldelim:function(){return K(jt)?Z():void 0},s:function(){return Ye(jt)?Xe():void 0},attrselector:function(){return d(jt)?m():void 0},attrib:function(){return u(jt)?p():void 0},nth:function(){return we(jt)?Se():void 0},nthselector:function(){return Me(jt)?Te():void 0},namespace:function(){return be(jt)?_e():void 0},clazz:function(){return q(jt)?z():void 0},pseudoe:function(){return qe(jt)?ze():void 0},pseudoc:function(){return Be(jt)?He():void 0},delim:function(){return Q(jt)?J():void 0},stylesheet:function(){return ut(jt)?lt():void 0},atruleb:function(){return y(jt)?b():void 0},atrules:function(){return P(jt)?M():void 0},atrulerq:function(){return x(jt)?S():void 0},atrulers:function(){return C(jt)?k():void 0},atruler:function(){return _(jt)?w():void 0},block:function(){return T(jt)?A():void 0},ruleset:function(){return Ge(jt)?We():void 0},combinator:function(){return B(jt)?H():void 0},simpleselector:function(){return nt(jt)?it():void 0},selector:function(){return Qe(jt)?Je():void 0},declaration:function(){return Y(jt)?X():void 0},property:function(){return Le(jt)?Re():void 0},important:function(){return ve(jt)?ye():void 0},unary:function(){return dt(jt)?mt():void 0},operator:function(){return Ee(jt)?$e():void 0},braces:function(){return U(jt)?V():void 0},value:function(){return wt(jt)?St():void 0},progid:function(){return De(jt)?je():void 0},filterv:function(){return ae(jt)?se():void 0},filter:function(){return ne(jt)?re():void 0},comment:function(){return G(jt)?W():void 0},uri:function(){return yt(jt)?bt():void 0},raw:function(){return checkRaw(jt)?getRaw():void 0},funktion:function(){return ce(jt)?he():void 0},functionExpression:function(){return ue(jt)?le():void 0},unknown:function(){return gt(jt)?vt():void 0}},function(e,t,n){return r(e,t,n)}}();return function(e,r,i){return n(t(e),r,i)}}();t.srcToCSSP=r}),define("gonzales/cssp.translator.node",["require","exports","module"],function(e,t,n){function r(e,t){function n(e){var n=e[t?1:0];return n in s?s[n]:n in o?i(e):n in a?r(e):u[n](e)}function r(e,r){var i="";for(r=void 0===r?t?2:1:r;r<e.length;r++)i+=n(e[r]);return i}function i(e){return e[t?2:1]}var o={unary:1,nth:1,combinator:1,ident:1,number:1,s:1,string:1,attrselector:1,operator:1,raw:1,unknown:1},a={simpleselector:1,dimension:1,selector:1,property:1,value:1,filterv:1,progid:1,ruleset:1,atruleb:1,atrulerq:1,atrulers:1,stylesheet:1},s={cdo:"cdo",cdc:"cdc",decldelim:";",namespace:"|",delim:","},u={percentage:function(e){return n(e[t?2:1])+"%"},comment:function(e){return"/*"+e[t?2:1]+"*/"},clazz:function(e){return"."+n(e[t?2:1])},atkeyword:function(e){return"@"+n(e[t?2:1])},shash:function(e){return"#"+e[t?2:1]},vhash:function(e){return"#"+e[t?2:1]},attrib:function(e){return"["+r(e)+"]"},important:function(e){return"!"+r(e)+"important"},nthselector:function(e){return":"+i(e[t?2:1])+"("+r(e,t?3:2)+")"},funktion:function(e){return i(e[t?2:1])+"("+r(e[t?3:2])+")"},declaration:function(e){return n(e[t?2:1])+":"+n(e[t?3:2])},filter:function(e){return n(e[t?2:1])+":"+n(e[t?3:2])},block:function(e){return"{"+r(e)+"}"},braces:function(e){return e[t?2:1]+r(e,t?4:3)+e[t?3:2]},atrules:function(e){return r(e)+";"},atruler:function(e){return n(e[t?2:1])+n(e[t?3:2])+"{"+n(e[t?4:3])+"}"},pseudoe:function(e){return"::"+n(e[t?2:1])},pseudoc:function(e){return":"+n(e[t?2:1])},uri:function(e){return"url("+r(e)+")"},functionExpression:function(e){return"expression("+e[t?2:1]+")"}};return n(e)}t.csspToSrc=r}),define("gonzales/gonzales",["require","exports","module","./gonzales.cssp.node","./cssp.translator.node"],function(e,t,n){function r(e){return"                                                  ".substr(0,2*e)}t.srcToCSSP=e("./gonzales.cssp.node").srcToCSSP,t.csspToSrc=e("./cssp.translator.node").csspToSrc,t.csspToTree=function(e,n){var i=r(n),n=n?n:0,o=(n?"\n"+i:"")+"[";return e.forEach(function(e){void 0===e.ln&&(o+=(Array.isArray(e)?t.csspToTree(e,n+1):"'"+e.toString()+"'")+", ")}),o.substr(0,o.length-2)+"]"}}),define("Atem-CPS/CPS/parsing/Source",[],function(){"use strict";function e(e){this._name=e}var t=e.prototype;return t.toString=function(){return["<Source:",this._name,">"].join(" ")},Object.defineProperty(t,"name",{get:function(){return this._name}}),e}),define("Atem-CPS/emitterMixin",["Atem-CPS/errors"],function(e){"use strict";function t(e,t){var n=t||{},r=n&&n.stateProperty||"_channel",i=n&&n.onAPI||"on",o=n&&n.offAPI||"off",a=n&&n.triggerAPI||"_trigger";if(e.hasOwnProperty(i))throw new p('The property name "'+i+'" is already used by this host object ('+e.constructor.name+").");if(e[i]=u(r),e.hasOwnProperty(o))throw new p('The property name "'+o+'" is already used by this host object ('+e.constructor.name+").");if(e[o]=c(r),e.hasOwnProperty(a))throw new p('The property name "'+a+'" is already used by this host object ('+e.constructor.name+").");e[a]=f(r)}function n(e,t){var n=t||{},r=n.stateProperty||"_channel";if(e.hasOwnProperty(r))throw new p('The property name "'+r+'" is already used by this object ('+e.constructor.name+": "+e+").");Object.defineProperty(e,r,{value:Object.create(null),writable:!1,enumerable:!0})}function r(e,t){var n=e[t];return n||(n=e[t]=Object.create(null),Object.defineProperty(n,"idCounter",{value:0,writable:!0,enumerable:!1,configurable:!1}),Object.defineProperty(n,"length",{value:0,writable:!0,enumerable:!1,configurable:!1})),n}function i(e,t,n){var i=r(e,t),o=i.idCounter++;return i.length+=1,i[o]=n,o}function o(e,t,n){var r=e[t];if(!r||!r[n])throw console.trace(),new p('Unsubscription without subscription from channel: "'+t+'" with subscriberID: "'+n+'".');delete r[n],r.length-=1,0===r.length&&delete e[t]}function a(e,t,n){var r,i,o,a,s,u,l=e[t];if(l)for(r=Object.keys(l),o=0,a=r.length;a>o;o++)if(i=r[o],i in l)if(s=l[i][0],u=l[i][1],"function"==typeof s||s instanceof Function)s(u,t,n);else{if(!(s instanceof Array))throw new p("Unkown callback type: "+s);s[0][s[1]](u,t,n)}}function s(e,t,n,r){var o,a,s,u=[n,r];if(t instanceof Array){for(s=[],o=0,a=t.length;a>o;o++)s.push([t[o],i(e,t[o],u)]);return s}return[t,i(e,t,u)]}function u(e){return function(t,n,r){var i=this[e];if(void 0===i)throw new p('state "'+e+'" is undefined.');return s(i,t,n,r)}}function l(e,t){var n,r;if(t[0]instanceof Array)for(n=0,r=t.length;r>n;n++)o(e,t[n][0],t[n][1]);else o(e,t[0],t[1])}function c(e){return function(t){var n=this[e];if(void 0===n)throw new p('state "'+e+'" is undefined.');return l(n,t)}}function h(e,t,n,r){var i,o,s=e[t];if(void 0===s)throw new p('state "'+t+'" is undefined.');if(n instanceof Array)for(i=0,o=n.length;o>i;i++)a(s,n[i],r);else a(s,n,r)}function f(e){return function(t,n){return h(this,e,t,n)}}var p=e.Emitter;return t.init=n,t}),define("Atem-CPS/CPS/elements/_Node",["Atem-CPS/errors","Atem-CPS/emitterMixin"],function(e,t){"use strict";function n(){return a++}function r(e,r){this._source=e,this._lineNo=r,this.__firstTimeInitFlag||(t.init(this),Object.defineProperty(this,"__firstTimeInitFlag",{value:!0}),Object.defineProperty(this,"nodeID",{value:n()}))}function i(e){var t=e[0],n=e[1];Object.defineProperty(this,t,{get:function(){return this[n]}})}var o=e.AbstractInterface,a=0,s=r.prototype;return s.constructor=r,t(s),s.toString=function(){throw new o("This interface is abstract andneeds an implementation (CPS/elements/_Node.toString)")},s.destroy=function(e){this._trigger("destroy",e)},[["source","_source"],["lineNo","_lineNo"]].forEach(i,s),r}),define("Atem-CPS/CPS/elements/SelectorList",["./_Node"],function(e){"use strict";function t(t,n,r){var i,o,a,s,u=0,l=!1;for(e.call(this,n,r),this._selectors=t.slice(),i=0,o=t.length;o>i;i++){if(a=t[i],a.invalid){l=!0,s=a.message;break}a.selects&&(u+=1)}l||u||(l=!0,s="SelectorList has no valid selector"),Object.defineProperties(this,{selects:{value:!l,enumerable:!0},invalid:{value:!!l,enumerable:!0},length:{value:t.length,enumerable:!0},message:{value:s,enumerable:!0}}),Object.freeze(this),Object.freeze(this._selectors)}var n=t.prototype=Object.create(e.prototype);n.constructor=t,Object.defineProperty(n,"value",{get:function(){return this._selectors.slice()}});return n.toString=function(){return this._selectors.join(",\n")},t}),define("Atem-CPS/CPS/elements/Rule",["Atem-CPS/errors","./_Node"],function(e,t){"use strict";function n(e,n,r,i){t.call(this,r,i),this._selectorList=e,Object.defineProperty(this,"properties",{value:n,enumerable:!0}),this.properties.on("update",[this,"_trigger"],"update")}var r=e.Value,i=n.prototype=Object.create(t.prototype);return i.constructor=n,i.toString=function(){return[this._selectorList," ",this.properties].join("")},Object.defineProperty(i,"invalid",{get:function(){return this._selectorList.invalid}}),i.getSelectorList=function(e){var t,n,r=this._selectorList;if(void 0!==e)for(t=0,n=e.length;n>t;t++)null!==e[t]&&(r=e[t].multiply(r));return r},i.setSelectorList=function(e){if(e.invalid)throw new r("Trying to set an invalid selectorList: "+e);this._selectorList=e,this._trigger(["selector-change","update"])},n}),define("Atem-CPS/CPS/elements/Comment",["./_Node"],function(e){"use strict";function t(t,n,r){e.call(this,n,r),Object.defineProperties(this,{value:{value:t,enumerable:!0},invalid:{value:!this.isValid(t),enumerable:!0},hash:{value:t,enumerable:!0}})}function n(e){return e.replace(/\*\//g,"*â/")}function r(e){return e.replace(/\*\u200B\//g,"*/")}var i=t.prototype=Object.create(e.prototype);return i.constructor=t,i.toString=function(){return["/*",this.value,"*/"].join("")},i.isValid=function(e){return-1===e.indexOf("*/")},Object.defineProperty(i,"unescaped",{get:function(){return r(this.value)},enumerable:!0}),t.escape=n,t.unescape=r,t}),define("Atem-CPS/CPS/elements/PropertyCollection",["Atem-CPS/errors","./_Node","./SelectorList","./Rule","./Comment"],function(e,t,n,r,i){"use strict";function o(e,n,r){t.call(this,n,r),this._items=[],this._subscriptions=new Map,this._name=null,this._rules=null,this._rulesCacheSubscriptions=[],this._allowNamespace||(this.name=void 0),this.splice(0,0,e)}function a(e){return e instanceof r&&!e.invalid||e instanceof o&&!e.invalid||e instanceof i}var s=e.CPS,u=e.Value,l=o.prototype=Object.create(t.prototype);return l.constructor=o,l.reset=function(){var e=this._splice(0,this._items.length);Object.keys(this).forEach(function(e){Object.getOwnPropertyDescriptor(this,e).configurable&&delete this[e]},this),e[1]&&this._trigger("delete"),this.constructor.apply(this,arguments),e[1]&&!this._items.length&&this._trigger("structural-change")},l.toString=function(){return this._items.join("\n\n")},Object.defineProperty(l,"invalid",{value:!1}),Object.defineProperty(l,"items",{get:function(){return this._items.slice()}}),Object.defineProperty(l,"length",{get:function(){return this._items.length}}),Object.defineProperty(l,"name",{enumerable:!0,get:function(){return this._name?this._name:null},set:function(e){if(null!==this._name)throw new s("Name is already set: "+this._name);if(void 0===e)return void(this._name=void 0);if("string"!=typeof e)throw new s("Name has the wrong type, expected string but got: "+(e.constructor?e.constructor.name:e+" typeof: "+typeof e));this._name=e}}),Object.defineProperty(l,"rules",{get:function(){return this._rules||(this._rules=this._getRules()),this._rules}}),l._subscribeItem=function(e){var t,n;if(e instanceof r)n="selector-change";else{if(!(e instanceof o))return;n="structural-change"}t=[this,"_itemChangeHandler"],this._subscribe(e,["update",n],t)},l._subscribe=function(e,t,n,r){var i=e.on(t,n,r);this._subscriptions.set(e,i)},l._unsubscribe=function(e){var t=this._subscriptions.get(e);t&&(e.off(t),this._subscriptions["delete"](e))},l._itemChangeHandler=function(e,t,n){"update"===t?this._trigger("update"):this._trigger("structural-change")},l._getCanonicalStartIndex=function(e,t){return e>=t?t:0>e?Math.max(0,t-e):e},l._splice=function(e,t,n){var r,i,o,s,l,c=n instanceof Array?n:void 0===n?[]:[n],h=this._getCanonicalStartIndex(e,this._items.length);for(o=0,s=c.length;s>o;o++){if(l=c[o],!a(l))throw new u("Trying to insert an invalid item: "+l);this._subscribeItem(l)}for(i=[e,t],Array.prototype.push.apply(i,c),r=Array.prototype.splice.apply(this._items,i),o=0,s=r.length;s>o;o++)this._unsubscribe(r[o]),r[o].destroy();return[h,r.length,c.length,r]},l.splice=function(e,t,n){var r=this._splice(e,t,n),i=r[1],o=r[2],a=[];return i&&a.push("delete"),o&&a.push("add"),a.length&&(a.push("structural-change","update"),this._trigger(a)),r},l.getItem=function(e){return this._items[e]},o}),define("Atem-CPS/CPS/parsing/engine",["Atem-CPS/errors","./Source","Atem-CPS/CPS/elements/PropertyCollection"],function(e,t,n){"use strict";function r(e){switch(e){case" ":return 0;case"\n":case" \n":case"\n ":case" \n ":return 1;default:return(e.match(s)||[]).length}}function i(e,t,n,r){var i=r[0];t||(t={depth:-1,makeInstance:!0,type:"__init__"});var o={type:i in e?i:"__GenericAST__",depth:t.depth+1,lineNo:n,rawData:r,makeInstance:t.makeInstance&&"__GenericAST__"!==t.type};return o}function o(e,o,s,u,l){void 0===u&&(u="(unknown source)");var c,h,f,p,d,m,g,v,y=new t(u),b=[],_=1,w=e;for(m=i(w,!1,_,s),b.push([s.slice(),m]);c=b.pop();)if(h=c[0][0],p=c[0].splice(1,1),f=c[1],p.length)if(b.push(c),p=p[0],p instanceof Array){for(g=void 0,v=0;v<o.length;v++)if(o[v][0](p)){g=w,w=o[v][1];break}d=i(w,f,_,p),b.push([p.slice(),d,g]),d.makeInstance&&(f.children||(f.children=[]),f.children.push(d))}else f.data=p,h in{comment:null,s:null}&&(_+=r(p));else f.makeInstance&&(f.instance=w[f.type](f,y,l)),c[2]&&(w=c[2]);if(!(m.instance instanceof n))throw new a("Parser was expected to create an instance of PropertyCollection but it delivered a "+m.instance.constructor.name);return m.instance}var a=e.CPS,s=/\n/g;return o}),define("Atem-CPS/CPS/elements/GenericCPSNode",["./_Node","gonzales/gonzales"],function(e,t){"use strict";function n(t,n,r){e.call(this,n,r),this._ast=t}var r=n.prototype=Object.create(e.prototype);return r.constructor=n,r.toString=function(){return t.csspToSrc(this._ast)},Object.defineProperty(r,"type",{get:function(){return this._ast[0]}}),n}),define("Atem-CPS/CPS/parsing/baseFactories",["Atem-CPS/errors","Atem-CPS/CPS/elements/PropertyCollection","Atem-CPS/CPS/elements/Comment","Atem-CPS/CPS/elements/GenericCPSNode"],function(e,t,n,r){"use strict";e.CPS;return{stylesheet:function(e,n){var r,i=[],o=0;if(e.children)for(;o<e.children.length;o++)("__GenericAST__"!==e.children[o].type||"s"!==e.children[o].instance.type)&&(r=e.children[o].instance,r instanceof t&&!r.name?Array.prototype.push.apply(i,r.items):i.push(r));return new t(i,n,e.lineNo)},comment:function(e,t){return new n(e.data,t,e.lineNo)},__GenericAST__:function(e,t){return new r(e.rawData,t,e.lineNo)}}}),define("Atem-CPS/CPS/elements/Combinator",["./_Node"],function(e){"use strict";function t(t,n,r){e.call(this,n,r),Object.defineProperties(this,{type:{value:this._types[t]||"unknown",enumerable:!0},value:{value:t,enumerable:!0}})}var n=t.prototype=Object.create(e.prototype);return n.constructor=t,n.toString=function(){return" "===this.value?" ":" "+this.value+" "},n._types={">":"child"," ":"descendant","+":"next-sibling","~":"following-sibling"},t}),define("Atem-CPS/CPS/elements/ComplexSelector",["Atem-CPS/errors","./_Node","./Combinator"],function(e,t,n){"use strict";function r(e,r,i){t.call(this,r,i),this._value=e,this._specificity=null,this._normalizedName=null;var o,a,s,u,l=!1;if(this._value.length)if(this._value[this._value.length-1]instanceof n)l=!0,u="The last item of a selector must not be a combinator, found: "+this._value[this._value.length-1].value;else for(o=0,a=this._value.length;a>o&&(s=e[o],s instanceof n?0===o?(l=!0,u="The first item in a selector must not be a combinator"):s.type in this._combinators?this._value[this._value.length-1]instanceof n&&(l=!0,u=["Two subsequent combinators in a","selector are not valid. Found:",this._value[this._value.length-1].value,"followed by:"+s.value].join(" ")):(l=!0,u='The combinator type "'+s.type+'" is alien to us'):s.invalid&&(l=!0,u=s.message),!l);o++);else l=!0,u="A selector must not be empty";Object.defineProperties(this,{selects:{value:!l,enumerable:!0},invalid:{value:l,enumerable:!0},message:{value:u,enumerable:!0}})}e.CPS;r.add=function(e,t){var i=e.value;return i.push(new n(" ",e.source,e.lineNo)),Array.prototype.push.apply(i,t._value),new r(i,e.source,e.lineNo)};var i=r.prototype=Object.create(t.prototype);return i.constructor=r,i.toString=function(){return this._value.join("")},Object.defineProperty(i,"normalizedName",{get:function(){return this._normalizedName||(this._normalizedName=this._value.map(function(e){return e.normalizedName||e.toString()}).join(""))}}),i._combinators={child:!0,descendant:!0},Object.defineProperty(i,"value",{get:function(){return this._value&&this._value.slice()}}),Object.defineProperty(i,"specificity",{get:function(){var e,t,r,i,o=0;if(e=t=r=0,!this._specificity){for(;o<this._value.length;o++)this._value[o]instanceof n||(i=this._value[o].specificity,e+=i[0],t+=i[1],r+=i[2]);this._specificity=[e,t,r]}return this._specificity}}),i.add=function(e){return this.constructor.add(this,e)},r}),define("Atem-CPS/CPS/elements/SimpleSelector",["Atem-CPS/errors","./_Node"],function(e,t){"use strict";function n(e,n,r,i,o){t.call(this,i,o),this._specificity=null;var a,s=!1;n&&-1!==n.indexOf("\\")&&(n=n.replace("\\","")),e in this._supportedTypes?void 0===n?(s=!0,a="Name of SimpleSelector is unkown!"):"pseudo-class"===e&&"i"===n&&(void 0===r||r!==r||"number"!=typeof r)&&(s=!0,a='No valid value for pseudoclass "i": ('+typeof r+") "+r):(s=!0,a="Type of SimpleSelector is unsupported:"+e),Object.defineProperties(this,{selects:{value:!s,enumerable:!0},invalid:{value:s,enumerable:!0},message:{value:a,enumerable:!0},type:{value:e,enumerable:!0},name:{value:n,enumerable:!0},value:{value:r,enumerable:!0}})}var r=n.prototype=Object.create(t.prototype);return r.constructor=n,r.escape=function(e){var t,n,r,i="\\#.: (){}>+",o=e;for(t=0,n=i.length;n>t;t++)r=i[t],o=o.replace(r,"\\"+r);return o},r.toString=function(e){var t=e?this.name:this.escape(this.name);switch(this.type){case"universal":case"type":return t;case"class":return"."+t;case"id":return"#"+t;case"pseudo-element":return"::"+t;case"pseudo-class":return":"+t+(void 0!==this.value?"("+this.value+")":"")}},r._supportedTypes={universal:null,type:null,"class":null,id:null,"pseudo-class":null,"pseudo-element":null},Object.defineProperty(r,"specificity",{get:function(){var e=this._specificity;if(!e){var t,n,r;switch(t=n=r=0,this.type){case"id":t=1;break;case"class":case"attribute":case"pseudo-class":n=1;break;case"type":case"pseudo-element":r=1}this._specificity=e=[t,n,r]}return e}}),n}),define("Atem-CPS/CPS/elements/CompoundSelector",["Atem-CPS/errors","./_Node","./GenericCPSNode","./SimpleSelector"],function(e,t,n,r){"use strict";function i(e,n,i){if(t.call(this,n,i),this._specificity=void 0,0===e.length)throw new s("CompoundSelector has no SimpleSelector items");this._value=e.slice(),this._value[0].type in{universal:null,type:null}||(this._value.unshift(new r("universal","*",void 0,n,i)),this._value[0].___implicit=!0);var a,u,l,c,h=!1;for(a=0,u=this._value.length;u>a;a++){if(l=this._value[a],l.invalid){h=!0,c="Invalid selector: "+l;break}if(0!==a&&l.type in{universal:null,type:null}){h=!0,c=["Type Selector and Universal selector","can only be the first in a CompoundSelector",'but found "'+l+'" at position:',a+1].join(" ");break}}Object.defineProperties(this,{selects:{value:!h,enumerable:!0},invalid:{value:h,enumerable:!0},message:{value:c,enumerable:!0},type:{value:this._value[0].name,enumerable:!0}}),this._normalizedValue=void 0,this._normalizedName=void 0,this.compiled=!1,this.matches=o}function o(e,t){if(t)return this.compile(t),this.matches(e);throw new s("Not yet compiled, use the `compile` method or supply an instance of SelectorEngine to this method as a second argument")}function a(e,t){var n={type:0,universal:0,id:1,"pseudo-class":2,"class":3},r=n[t.type]-n[e.type];return r||e.name<t.name?-1:e.name>t.name?1:0}var s=e.CPS,u=i.prototype=Object.create(t.prototype);return u.constructor=i,u.toString=function(){return(this._value[0]&&this._value[0].___implicit?this._value.slice(1):this._value).join("")},u.compile=function(e){this.matches=e.compileCompoundSelector(this),this.compiled=!0},Object.defineProperty(u,"value",{get:function(){return this._value&&this._value.slice()}}),Object.defineProperty(u,"normalizedValue",{get:function(){return this._normalizedValue||(this._normalizedValue=this.value.sort(a)),this._normalizedValue.slice()}}),Object.defineProperty(u,"normalizedName",{get:function(){return this._normalizedName||(this._normalizedName=this.normalizedValue.join(""))}}),Object.defineProperty(u,"specificity",{get:function(){var e,t,n,r,i=0;for(e=t=n=0;i<this._value.length;i++)r=this._value[i].specificity,e+=r[0],t+=r[1],n+=r[2];return[e,t,n]}}),i}),define("Atem-CPS/CPS/parsing/selectorFactories",["Atem-CPS/errors","./baseFactories","Atem-CPS/CPS/elements/Rule","Atem-CPS/CPS/elements/SelectorList","Atem-CPS/CPS/elements/ComplexSelector","Atem-CPS/CPS/elements/CompoundSelector","Atem-CPS/CPS/elements/SimpleSelector","Atem-CPS/CPS/elements/Combinator","Atem-CPS/CPS/elements/GenericCPSNode","Atem-CPS/CPS/elements/Comment"],function(e,t,n,r,i,o,a,s,u,l){"use strict";function c(e,t,n,r){for(var i,a=0,s=[];a<e.length;a++){if(!(e[a]instanceof u))throw new m(["Unknown type for a simple selector:",item.constructor.name,"typeof:",typeof item].join(" "));s.push(d(e[a]))}return i=new o(s,t,n),r&&i.compile(r),i}function h(e,t){switch(e){case"ident":return"*"===t?"universal":"type";case"clazz":return"class";case"shash":return"id";case"pseudoc":return"pseudo-class";case"pseudoe":return"pseudo-element"}}function f(e){var t=t;if("string"==typeof e._ast[1]?t=e._ast[1]:e._ast[1]instanceof Array&&("ident"===e._ast[1][0]?t=e._ast[1][1]:"funktion"===e._ast[1][0]&&e._ast[1][1]instanceof Array&&"ident"===e._ast[1][1][0]&&(t=e._ast[1][1][1])),"string"!=typeof t&&void 0!==t)throw new m("Can't find a name for SimpleSelector ("+e+")");return t}function p(e){var t,n,r;if("funktion"===e._ast[1][0]&&"functionBody"===e._ast[1][2][0])return t=e._ast[1][2].slice(1).filter(function(e){return!(e[0]in{s:null,comment:null})}),r="+",2===t.length&&"unary"===t[0][0]&&(r=t[0][1],t.shift()),1===t.length&&"number"===t[0][0]&&(n=parseInt(r+t[0][1],10)),n===n?n:void 0}function d(e){var t,n=f(e),r=h(e.type,n);return"pseudo-class"===r&&"i"===n&&(t=p(e)),new a(r,n,t)}var m=e.CPSParser,g=Object.create(t);return function(e){var t;for(t in e)g[t]=e[t]}({ruleset:function(e,t){var r,i;if("selector"!==e.children[0].type)throw new m('The first child of "ruleset" is expected to be a "selector", but got "'+e.children[0].type+'" " in a ruleset from: '+t+"line: "+e.lineNo+".",(new Error).stack);if("block"!==e.children[1].type)throw new m('The second child of "ruleset" is expected to be a "block", but got "'+e.children[1].type+'" " in a ruleset from: '+t+"line: "+e.lineNo+".",(new Error).stack);return r=e.children[0].instance,i=e.children[1].instance,new n(r,i,t,e.lineNo)},block:function(e,n){var r=t.__GenericAST__(e,n);return r.selects=!0,r},selector:function(e,t){var n;return n=e.children.filter(function(e){return"simpleselector"===e.type}).map(function(e){return e.instance}),new r(n,t,e.lineNo)},simpleselector:function(e,t,n){for(var r,o,a=e.children.map(function(e){return e.instance}),h=[],f=0,p=null;f<a.length;f++)r=a[f],o=r instanceof u&&"s"===r.type,o&&0===h.length||r instanceof l||(r instanceof s?(p=null,h.push(r)):o?p=null:(null===p&&(!h.length||h[h.length-1]instanceof s||h.push(new s(" ",t,e.lineNo)),p=[],h.push(p)),p.push(r)));for(f=0;f<h.length;f++)h[f]instanceof s||(h[f]=c(h[f],h[f][0]._source,h[f][0]._lineNo,n&&n.selectorEngine));
return new i(h,t,e.lineNo)},combinator:function(e,t){return new s(e.data,t,e.lineNo)}}),g}),define("Atem-CPS/CPS/parsing/parseSelectorList",["Atem-CPS/errors","gonzales/gonzales","./engine","./selectorFactories","Atem-CPS/CPS/elements/Rule","Atem-CPS/CPS/elements/Comment"],function(e,t,n,r,i,o){"use strict";function a(e,n,r){var i;try{i=t.srcToCSSP(e+"{}")}catch(o){throw new u('Error parsing "'+e+'" as a selector. Message: '+o.message)}return s(i,n,r)}function s(e,t,a){var s,l,c=0;for(s=n(r,[],e,t||"selector parser",{selectorEngine:a}),s=s.items;c<s.length;c++)if(!(s[c]instanceof o)){if(!(s[c]instanceof i))throw new u("The argument string described a "+s[c].constructor.name+" but it should be aSelectorList.");if(void 0!==l)throw new u("The argument string described more than a selectorlist is contained: "+s[c]);if(s[c].paramters)throw new u("Found properties where there should be only a SelectorList: "+s[c].paramters);l=s[c].getSelectorList()}if(!l)throw new u("No selector found.");if(!l.selects)throw new u("SelectorList will not select anything: "+l.message);return l}var u=(e.CPS,e.CPSParser);return{fromString:a,fromAST:s}}),define("Atem-Property-Language/parsing/SelectorToken",["Atem-Property-Language/errors","./_ValueToken","Atem-CPS/CPS/parsing/parseSelectorList"],function(e,t,n){"use strict";function r(e,r){t.call(this,e,0,0);try{this._value=n.fromString(this.literal,void 0,r)}catch(a){if(!(a instanceof o))throw a;throw new i("(PropertyLanguageParserError) "+a.message,a.stack)}}var i=e.PropertyLanguage,o=e.PropertyLanguageParser,a=r.prototype=Object.create(t.prototype);return a.constructor=r,a.getValue=function(){return this._value},r}),define("Atem-Property-Language/parsing/NumberToken",["Atem-Property-Language/errors","./_ValueToken"],function(e,t){"use strict";function n(e){t.call(this,e,0,0),this._value=parseFloat(this.literal)}var r=n.prototype=Object.create(t.prototype);return r.constructor=n,r.getValue=function(){return this._value},n}),define("Atem-Property-Language/parsing/Parser",["Atem-Property-Language/errors","./_ValueToken","./OperatorToken","./BracketToken","./StringToken","./SelectorToken","./NumberToken","./NameToken"],function(e,t,n,r,i,o,a,s){"use strict";function u(){this._operators=this._createOperatorsDict(Array.prototype.slice.call(arguments)),this._operatorsByPrecedence=this._createPrecedenceLookup(this._operators),this._operatorsByLength=this._createLengthLookup(this._operators),this._bracketOperators={},this._negateOperator=void 0,this._StackConstructor=void 0}function l(e){for(var t,n=[];t=e.shift();)t instanceof Array?Array.prototype.unshift.apply(e,t):n.push(t);return n}function c(e,t,n){for(var r,i,o=0;o<e.length;o++){r=null;for(r in e[o])break;if(null!==r&&(i=t.substr(n,r.length),e[o].hasOwnProperty(i)))return e[o][i]}return!1}var h=e.PropertyLanguage,f=e.Key,p=u.prototype,d=/^(\-?((\d*\.\d+)|(\d+(\.)?))([eE][+\-]?\d+)?)/,m=/^[0-9A-Za-z_]+/;return p._createOperatorsDict=function(e){for(var t=0,n={};t<e.length;t++){if(e[t].literal in n)throw new h('An operator with the literal "'+e[t].literal+'" is defined at least twice, but it must be unique!');if(null!==d.exec(e[t].literal))throw new h('The operator with the literal "'+e[t].literal+'" starts like a number literal. This is forbidden.');n[e[t].literal]=e[t]}return n},p._createPrecedenceLookup=function(e){var t,n={},r=[];for(t in e)void 0===n[e[t].precedence]&&(n[e[t].precedence]={},r.push(e[t].precedence)),n[e[t].precedence][t]=e[t];return r.sort(function(e,t){return e-t}),r.reverse(),r.map(function(e){return n[e]})},p._createLengthLookup=function(e){var t,n,r=function(e){return this[e]},i={splitting:{},notSplitting:{}},o={};for(t in e)n=e[t].splitting?i.splitting:i.notSplitting,void 0===n[t.length]&&(n[t.length]={}),n[t.length][t]=e[t];for(t in i)o[t]=Object.keys(i[t]).sort().reverse().map(r,i[t]);return o},p.setStackConstructor=function(e){this._StackConstructor=e},p.setBracketOperator=function(e,t){if(!(t in this._operators))throw new f("No operator found for literal: "+t);this._bracketOperators[e]=t},p.getBracketOperator=function(e){if(e in this._bracketOperators)return this._operators[this._bracketOperators[e]];throw new f("No bracket operator found for literal: "+e)},p.setNegateOperator=function(e,t){if(!(t in this._operators))throw new f("No operator found for literal: "+t);this._negateOperator=[e,t]},p._testNotSplittingOperators=function(e,t){return c(this._operatorsByLength.notSplitting,e,t)},p._testSplittingOperators=function(e,t){return c(this._operatorsByLength.splitting,e,t)},p.tokenize=function(e,t){for(var n,u,l,c,f=0,p=[];f<e.length;)if(-1===" \n\r	".indexOf(e[f]))if(-1==="()[]".indexOf(e[f]))if('"'!==e[f])if("S"!==e[f]||'"'!==e[f+1])if(e=e.substring(f),f=0,null===(u=d.exec(e)))if(c=this._testSplittingOperators(e,f))p.push(c),f+=c.literal.length,l=!1;else{if(l===!0)throw new h("A splitting token was expected after: "+p[p.length-1]+" but it was not found in: "+e.substr(f));if(l=!0,e=e.substr(f),f=0,null===(u=m.exec(e))){if(!(c=this._testNotSplittingOperators(e,f)))throw new h("Can't find the next token in the string: "+e);p.push(c),f+=c.literal.length}else"Infinity"===u[0]?p.push(new a(u[0])):this._operators[u[0]]&&!this._operators[u[0]].splitting?p.push(this._operators[u[0]]):p.push(new s(u[0])),f+=u[0].length}else p.push(new a(u[0])),f=u[0].length,l=!1;else{if(n=e.indexOf('"',f+2),-1===n)throw new h('A closing double quote is  missing for an opening selector literal S" ...in: '+e.substr(f));p.push(new o(e.substring(f+2,n),t)),f=n+1,l=!1}else{if(n=e.indexOf('"',f+1),-1===n)throw new h('A closing double quote is  missing for an opening string literal: "');p.push(new i(e.substring(f+1,n))),f=n+1,l=!1}else p.push(new r(e[f])),f++,l=!1;else f++,l=!1;return p},p._resolveBrackets=function(e){for(var t,n=0,i=[],o=[];n<e.length;n++)if(e[n]instanceof r)if(e[n].opening)0===i.length&&(t=n+1),i.push(e[n]);else{if(0===i.length||!i[i.length-1].matches(e[n].literal))throw new h('A closing bracket appeared "'+e[n].literal+'" but a matching opening  bracket is missing before.');if(1===i.length){try{o.push(this.getBracketOperator(i[0].literal))}catch(a){if(!(a instanceof f))throw a}o.push(this.infixToPostfix(e.slice(t,n)))}i.pop()}else 0===i.length&&o.push(e[n]);if(i.length)throw new h(i.length+" "+(1===i.length?"bracket is":"brackets are")+" missing for the opened: "+i.map(function(e){return e.literal}).join(", "));return o},p.infixToPostfix=function(e){var r,i,o,a,s,u,c,f,p,d=this._operatorsByPrecedence,m=0;if(this._negateOperator)for(i=0;i<e.length;i++)e[i]instanceof n&&e[i].literal===this._negateOperator[0]&&(0===i||e[i-1]instanceof n)&&(e[i]=this._operators[this._negateOperator[1]]);for(r=this._resolveBrackets(e);m<d.length;m++)for(i=0;i<r.length;i++)if(r[i]instanceof n&&r[i].literal in d[m]){if(u=r[i].preConsumes===1/0?i:r[i].preConsumes,a=i-u,0>a)throw new h('Stack underflow at a "'+r[i]+'" operator, which pre-consumes more items than there are on the stack');if(s=i+1,c=r[i].postConsumes===1/0?r.length-s:r[i].postConsumes,f=s+c,f>r.length)throw new h('Stack underflow at a "'+r[i]+'" operator, which post-consumes more items than there are on the stack');for(p=r.slice(a,i).concat(r.slice(s,f)),o=0;o<p.length;o++)if(!(p[o]instanceof t||p[o]instanceof Array))throw new h('Malformed stack at a "'+r[i].literal+'" operator, which consumes '+(p[o]instanceof n?'another operator: "'+p[o].literal+'"':'something that is not a ValueToken: "'+p[o]+'" typeof: '+typeof p[o]+" "+p[o].constructor.name));r[i].preConsumes===1/0||r[i].postConsumes===1/0?p.push(r[i].fixedConsumptionFactory(u,c)):p.push(r[i]),r.splice(a,p.length,p),i=a}return l(r)},p.parse=function(e,t){if(!this._StackConstructor)throw new h("StackConstructor is missing. Run engine.setStackConstructor before running engine.parse.");var n=this.tokenize(e,t);if(n=this.infixToPostfix(n),!n.length)throw new h("The input string did not produce any instructions.");return new this._StackConstructor(n)},u}),define("Atem-Property-Language/parsing/Stack",["Atem-Property-Language/errors","./_ValueToken","./NumberToken","./StringToken","./SelectorToken"],function(e,t,n,r,i){"use strict";function o(e){this._check(e);var t;this._signature=t=this._makeSignature(e),this._stack=this._unwrap(e),this.execute=s[t]||(s[t]=this._compile(e))}var a=e.PropertyLanguage,s=Object.create(null),u=o.prototype;return u.toString=function(){return this._stack.join("|")},u._finalizeMethod=null,Object.defineProperty(u,"items",{get:function(){return this._stack.slice()}}),u._unwrap=function(e){var t,o,a,s=[];for(t=0,o=e.length;o>t;t++)a=e[t],s.push(a instanceof n||a instanceof r||a instanceof i?a.getValue():a);return s},u._makeSignature=function(e){var n,r,i=[],o=0;for(n=0,r=e.length;r>n;n++)e[n]instanceof t?o++:(o&&(i.push("c",o),o=0),i.push("e",e[n].consumes));return o&&i.push("c",o),this._finalizeMethod&&i.push("f"),i.join("")},u._makeDebugMessageStackDetails=function(e){for(var n=e.slice(),r=[],i=0;i<n.length;i++)n[i]instanceof t?r.push(n[i]):r.push("[result of "+n[i].literal+"("+r.splice(-n[i].consumes)+")]");return r.join(" | ")},u._check=function(e){for(var t=0,n=0;t<e.length;t++){if(n-=e[t].consumes,0>n)throw new a("Stack underflow at ("+t+") a "+e[t]+" in "+e.join("|")+". This means an operator consumes more items than there are on the stack.\nExecution hints:\n"+this._makeDebugMessageStackDetails(e));n+=e[t].ejects}if(n>1)throw new a("Stack too crowded. A stack must eventually resolve to 1 item, the result. This stack has still "+n+" items.\nStack in postfix notation:\n"+e.join(" |\n")+"\nExecution hints:\n"+this._makeDebugMessageStackDetails(e))},u._compile=function(e){var n,r,i,o=[],a=0,s="commands[0]",u=['"use strict";',"var commands = this._stack;"];for(n=0,r=this._stack.length;r>n;n++)e[n]instanceof t?o.push("commands["+n+"]"):(i=[],Array.prototype.push.apply(i,o.splice(-e[n].consumes)),s="r"+a++,u.push("var "+s+" = commands["+n+"].execute(getAPI, ["+i.join(",")+"]);"),o.push(s));return this._finalizeMethod?u.push("return this._finalizeMethod("+s+", getAPI);"):u.push("return "+s+";"),new Function("getAPI",u.slice(1).join("\n"))},u.execute=function(e){for(var n,r,i,o=this._stack.slice(),s=[],u=0;u<o.length;u++)o[u]instanceof t?s.push(o[u]):(n=[e],Array.prototype.push.apply(n,s.splice(-o[u].consumes)),i=o[u].execute.apply(o[u],n),s.push(i));if(0===s.length)throw new a("No result: stack is empty after execution. "+this._stack.join("|"));if(s.length>1)throw new a("Too many results, stack contains more than one item after execution: "+this._stack.join("|"));return r=s.pop(),this._finalizeMethod?this._finalizeMethod(r,e):r},o}),define("Atem-Property-Language/flavours/simpleMathEngine",["Atem-Property-Language/errors","Atem-Property-Language/parsing/Parser","Atem-Property-Language/parsing/OperatorToken","Atem-Property-Language/parsing/Stack","Atem-Property-Language/parsing/NumberToken"],function(e,t,n,r,i){"use strict";function o(e){r.call(this,e)}var a,s=e.PropertyLanguage;a=new t(new n("negate",!1,60,0,1,[["number",function(e){return-e}]]),new n("+",!0,10,1,1,[["number","number",function(e,t){return e+t}]]),new n("-",!0,10,1,1,[["number","number",function(e,t){return e-t}]]),new n("*",!0,20,1,1,[["number","number",function(e,t){return e*t}]]),new n("/",!0,20,1,1,[["number","number",function(e,t){return e/t}]]),new n("^",!0,30,1,1,[["number","number",function(e,t){return Math.pow(e,t)}]]),new n("min",!0,40,0,2,[["number","number",function(e,t){return Math.min(e,t)}]]),new n("max",!0,40,0,2,[["number","number",function(e,t){return Math.max(e,t)}]]));var u=o.prototype=Object.create(r.prototype);return u.constructor=o,u._check=function(e){var t,o,a=[];for(t=0,o=e.length;o>t;t++)e[t]instanceof i||e[t]instanceof n||a.push(e[t]);if(a.length)throw new s("The math expression contains invalid tokens: "+a.join(", "));return r.prototype._check.call(this,e)},u._finalizeMethod=function(e,t){if("number"!=typeof e)throw new s("The math expression did not yield in a number. Got instead: "+e);return e},a.setNegateOperator("-","negate"),a.setStackConstructor(o),a}),define("metapolator/ui/metapolator/parameter-panel/selection/selection-parameter/selection-parameter-controller",["metapolator/ui/metapolator/ui-tools/selectionTools","metapolator/errors","Atem-Property-Language/flavours/simpleMathEngine"],function(e,t,n){"use strict";function r(t,r,a){function s(e,n,r){for(var i=t.model.parent.elements.length-1;i>=0;i--){var o=t.model.parent.elements[i];r.range&&(e=l(o,n,r));var a=o.checkIfHasParameter(n.base,t.model.parent.level),s=a.checkIfHasOperator(r);s.setValue(e),a.changedOperator(s),u(n.base.effectiveLevel,n)}}function u(t,n){var r=e.selection[t].getParameterByName(n.base.name);r&&r.updateEffectiveValue()}function l(e,t,n){var r,i,o,a,s=n.low.fallback,u=n.high.fallback,l=n.low.current,c=n.high.current,h=e.getParameterByName(t.base.name);if(h){var f=h.findOperator(n.base,n.id);o=f?f.value:n.base.standardValue}else o=n.base.standardValue;return s===l&&u===c?a=o:(r=u-s,0!==r?(i=(o-s)/r,a=p((c-l)*i+l,t.base.decimals)):a=l),a}function c(e){var t,r;try{t=n.parse(e.replace(/,/g,".")).execute()}catch(o){if(!(o instanceof i))throw o;r=o.message}return r?[r,null]:isFinite(t)?[null,t]:["Math result is not finite.",null]}function h(e,t,n){var r=t.base.step;return n.shiftKey&&(r=10*r),(n.ctrlKey||n.altKey)&&(r=.1*r),38===n.keyCode&&(e+=r),40===n.keyCode&&(e-=r),e}function f(e){return!isNaN(parseFloat(e))&&isFinite(e)}function p(e,t){return Number(Math.round(e+"e"+t)+"e-"+t)}function d(n,r){e.panel.level=t.model.parent.level,e.panel.type="parameter",e.panel.left=$(r.target).offset().left+20,e.panel.top=$(r.target).offset().top+20,e.panel.parameter=n}function m(n,r,i){e.panel.level=t.model.parent.level,e.panel.type="operator",e.panel.left=$(i.target).offset().left+20,e.panel.top=$(i.target).offset().top+20,e.panel.parameter=t.model,e.panel.operator=r}t.selection=e,t.changeValue=function(e,t,n,r){var i=t[n].current;if(r.target.classList.remove("error"),t.range&&t.high.current<t.low.current)throw r.target.classList.add("error"),new o("Overlapping of range values.");if("string"==typeof i&&("blur"===r.type||13===r.which)){if(i=c(i),i[0])throw r.target.classList.add("error"),new o(i[0]);i=i[1]}f(i)&&isFinite(i)&&(i=h(i,e,r),i=p(i,e.base.decimals),i!==t[n].fallback&&(t[n].current=i,s(i,e,t),t[n].fallback=i))},t.toggleParameterPanel=function(n,r){e.panel.level===t.model.parent.level&&"parameter"===e.panel.type?e.closePanel():d(n,r)},t.toggleOperatorPanel=function(n,r,i){e.panel.level===t.model.parent.level&&"operator"===e.panel.type?e.closePanel():m(n,r,i)},t.changeParameter=function(e){for(var n=t.model.parent.elements.length-1;n>=0;n--){var r=t.model.parent.elements[n];r.changeParameter(t.model,e)}t.model.parent.updateParameters()},t.removeParameter=function(){for(var n=t.model.parent.elements.length-1;n>=0;n--){var r=t.model.parent.elements[n];r.removeParameter(e.panel.parameter.base)}t.model.parent.updateParameters()},t.changeOperator=function(n){for(var r=t.model.parent.elements.length-1;r>=0;r--){var i=t.model.parent.elements[r],o=i.checkIfHasParameter(e.panel.parameter.base);o.changeOperator(e.panel.operator,n)}t.model.parent.updateParameters()},t.removeOperator=function(){for(var n=t.model.parent.elements.length-1;n>=0;n--){var r=t.model.parent.elements[n],i=r.getParameterByName(e.panel.parameter.base.name);i.removeOperator(e.panel.operator,r)}t.model.parent.updateParameters()}}var i=t.CPS,o=t.UIInput;r.$inject=["$scope","metapolatorModel","project"];r.prototype;return r}),define("require/text!metapolator/ui/metapolator/parameter-panel/selection/selection-parameter/selection-parameter.tpl",[],function(){return'<div class="operator-row" ng-repeat="operator in model.operators track by $index">\n    <div ng-if="operator.name !== \'effectiveValue\'">\n        <div ng-click="toggleParameterPanel(model, $event)"\n             class="parameter-key panel-zone"\n             ng-class="{\'selected-parameter\': selection.panel === model.parent.level + \'-parameter\' && model.base.name === panel.selectedParameter.base.name}">\n                <span ng-if="$index == 0">{{model.base.name}}</span>\n        </div>\n        <div class="parameter-operator panel-zone" ng-class="{\'selected-parameter\': selection.panel === model.parent.level + \'-operator\'}" ng-click="toggleOperatorPanel(model, operator, $event)">{{operator.base.sign}}</div>\n        <div class="operator-value">\n            <span ng-if="!operator.range">\n                <input ng-model="operator.low.current"\n                       ng-blur="changeValue(model, operator, \'low\', $event)"\n                       ng-keyup="changeValue(model, operator, \'low\', $event)"\n                       mtk-mousewheel="changeValue(model, operator, \'low\', $event)"\n                       mtk-enter="changeValue(model, operator, \'low\', $event)">\n            </span>\n            <span ng-if="operator.range"> \n                <input class="range-input range-left"\n                       ng-model="operator.low.current"\n                       ng-blur="changeValue(model, operator, \'low\', $event)"\n                       ng-keyup="changeValue(model, operator, \'low\', $event)"\n                       mtk-mousewheel="changeValue(model, operator, \'low\', $event)"\n                       mtk-enter="changeValue(model, operator, \'low\', $event)"> to\n                <input class="range-input"\n                       ng-model="operator.high.current"\n                       ng-blur="changeValue(model, operator,\'high\', $event)"\n                       ng-keyup="changeValue(model, operator, \'high\', $event)"\n                       mtk-mousewheel="changeValue(model, operator, \'high\', $event)"\n                       mtk-enter="changeValue(model, operator, \'high\', $event)">\n            </span>\n        </div>\n    </div>\n</div> \n<div ng-if="model.effectiveValue" class="operator-row">\n    <div class="parameter-key">{{model.base.name}}</div>\n    <div class="parameter-operator effective-icon">&#10171;</div>\n    <div class="operator-value operator-value-effective">\n        <span ng-if="!model.effectiveValue.range">{{model.effectiveValue.low}}</span>\n        <span ng-if="model.effectiveValue.range">{{model.effectiveValue.low}} to {{model.effectiveValue.high}}</span>\n    </div>\n</div>\n\n<div class="single-panel control-panel"\n     ng-if="selection.panel.level === model.parent.level && selection.panel.type === \'parameter\' && model.base.name === selection.panel.parameter.base.name"\n     ng-style="{\'left\': selection.panel.left + \'px\', \'top\': selection.panel.top + \'px\'}">\n    <div ng-repeat="parameter in selection.baseParameters"\n         ng-class="{\'selected\': parameter.name === selection.panel.parameter.base.name}"\n         class="control-panel-parameter control-panel-button push-button"\n         ng-mousedown="changeParameter(parameter)">{{parameter.name}}</div>\n    <div class="control-panel-cancel control-panel-button push-button" ng-mousedown="removeParameter()">\n        Remove\n    </div>\n</div>\n\n<div class="single-panel control-panel"\n     ng-if="selection.panel.level === model.parent.level && selection.panel.type === \'operator\'"\n     ng-style="{\'left\': selection.panel.left + \'px\', \'top\': selection.panel.top + \'px\'}">\n    <div ng-repeat="operator in selection.baseOperators"\n         ng-class="{\'selected\': operator.name === selection.panel.operator.base.name}"\n         class="control-panel-parameter control-panel-button push-button"\n         ng-mousedown="changeOperator(operator)">{{operator.sign}}</div>\n    <div class="control-panel-cancel control-panel-button push-button" ng-mousedown="removeOperator()">\n        Remove\n    </div>\n</div>'}),define("metapolator/ui/metapolator/parameter-panel/selection/selection-parameter/selection-parameter-directive",["require/text!./selection-parameter.tpl"],function(e){"use strict";function t(t){return{restrict:"E",controller:"SelectionParameterController",replace:!1,template:e,scope:{model:"=mtkModel"}}}return t.$inject=[],t}),define("metapolator/ui/metapolator/directive/mousewheel/mousewheel-directive",[],function(){"use strict";function e(){return function(e,t,n,r){t.bind("DOMMouseScroll mousewheel",function(t){e.$apply(function(){t.originalEvent.detail>0||t.originalEvent.wheelDelta>0?t.keyCode=40:t.keyCode=38,e.$eval(n.mtkMousewheel,{$event:t})})})}}return e.$inject=[],e}),define("metapolator/ui/metapolator/directive/mousewheel/mousewheel",["angular","./mousewheel-directive"],function(e,t){"use strict";return e.module("mtk.mousewheel",[]).directive("mtkMousewheel",t)}),define("metapolator/ui/metapolator/directive/enter/enter-directive",[],function(){"use strict";function e(){return function(e,t,n){t.bind("keydown keypress",function(t){38===t.which&&t.preventDefault(),13===t.which&&(e.$apply(function(){e.$eval(n.ngEnter,{$event:t})}),t.preventDefault())})}}return e.$inject=[],e}),define("metapolator/ui/metapolator/directive/enter/enter",["angular","./enter-directive"],function(e,t){"use strict";return e.module("mtk.enter",[]).directive("mtkEnter",t)}),define("metapolator/ui/metapolator/parameter-panel/selection/selection-parameter/selection-parameter",["angular","./selection-parameter-controller","./selection-parameter-directive","../../../directive/mousewheel/mousewheel","../../../directive/enter/enter"],function(e,t,n,r,i){"use strict";return e.module("mtk.selectionParameter",[r.name,i.name]).controller("SelectionParameterController",t).directive("mtkSelectionParameter",n)}),define("metapolator/ui/metapolator/parameter-panel/selection/selection",["angular","./selection-controller","./selection-directive","./selection-parameter/selection-parameter"],function(e,t,n,r){"use strict";return e.module("mtk.selection",[r.name]).controller("SelectionController",t).directive("mtkSelection",n)}),define("metapolator/ui/metapolator/parameter-panel/parameter-panel",["angular","./parameter-panel-controller","./parameter-panel-directive","./selection/selection"],function(e,t,n,r){"use strict";return e.module("mtk.parameterPanel",[r.name]).controller("ParameterPanelController",t).directive("mtkParameterPanel",n)}),define("metapolator/ui/metapolator/specimen-panel/specimen-panel-controller",[],function(){"use strict";function e(e){this.$scope=e,e.model={sequences:e.sequences,sizes:{fontSize:128,lineHeight:null,lineHeightSetting:1},mixer:{specimenSample:null,fontBy:"Specimen",filter:"",strict:0},selectedMasters:[],glyphsIn:[],rubberband:e.rubberband,glyphrange:e.glyphrange,type:e.type}}e.$inject=["$scope"];e.prototype;return e}),define("require/text!metapolator/ui/metapolator/specimen-panel/specimen-panel.tpl",[],function(){return'<mtk-specimen-tools mtk-model="model"></mtk-specimen-tools>\n<mtk-specimen-field mtk-model="model"></mtk-specimen-field>'}),define("metapolator/ui/metapolator/specimen-panel/specimen-panel-directive",["require/text!./specimen-panel.tpl"],function(e){"use strict";function t(t){return{restrict:"E",controller:"SpecimenPanelController",replace:!1,template:e,scope:{sequences:"=mtkModel",type:"=mtkType",rubberband:"=mtkRubberband",glyphrange:"=mtkGlyphrange"}}}return t.$inject=[],t}),define("metapolator/ui/metapolator/specimen-panel/specimen-tools/specimen-tools-controller",[],function(){"use strict";function e(e){this.$scope=e}e.$inject=["$scope"];e.prototype;return e}),define("require/text!metapolator/ui/metapolator/specimen-panel/specimen-tools/specimen-tools.tpl",[],function(){return'<div class="specimen-tool-set">\n    <mtk-specimen-samples class="specimen-tool" mtk-model="model.mixer" mtk-glyphRange="model.glyphRange"></mtk-specimen-samples>\n</div>\n\n<div class="specimen-tool-set">\n    <mtk-size-input class="specimen-tool" mtk-model="model.sizes" mtk-type="model.type"></mtk-size-input>\n    <mtk-size-rope class="specimen-tool" mtk-model="model.sizes" mtk-type="model.type"></mtk-size-rope>\n    <mtk-line-height class="specimen-tool" mtk-model="model.sizes"></mtk-line-height>\n</div>\n\n<div class="specimen-tool-set">\n    <mtk-mixer class="specimen-tool" mtk-model="model.mixer"></mtk-mixer>\n</div>\n\n<div class="specimen-tool-set specimen-tool-set-right">\n    <mtk-font-by class="specimen-tool" mtk-model="model.mixer"></mtk-font-by>\n</div>\n'}),define("metapolator/ui/metapolator/specimen-panel/specimen-tools/specimen-tools-directive",["require/text!./specimen-tools.tpl"],function(e){"use strict";function t(t){return{restrict:"E",controller:"SpecimenToolsController",replace:!1,template:e,scope:{model:"=mtkModel",type:"=type"}}}return t.$inject=[],t}),define("metapolator/ui/metapolator/local-menu/local-menu-controller",[],function(){"use strict";function e(e,t){this.$scope=e,this.$scope.display=t,this.toggleMenu=function(t){e.display.localMenu===t?e.display.localMenu=null:e.display.localMenu=t},this.closeMenu=function(){e.display.localMenu=null}}e.$inject=["$scope","metapolatorModel"];e.prototype;return e}),define("metapolator/ui/metapolator/local-menu/local-menu-directive",[],function(){"use strict";function e(){return{restrict:"E",controller:"LocalMenuController",controllerAs:"localMenuCtrl",scope:!0,replace:!1}}return e.$inject=[],e}),define("metapolator/ui/metapolator/local-menu/local-menu",["angular","./local-menu-controller","./local-menu-directive"],function(e,t,n){"use strict";return e.module("mtk.localMenu",[]).controller("LocalMenuController",t).directive("mtkLocalMenu",n)}),define("metapolator/ui/metapolator/specimen-panel/specimen-tools/specimen-samples/specimen-samples-controller",[],function(){"use strict";function e(e){function t(){var t=[{name:"Glyph Range"}];e.samples.push(t)}this.$scope=e,e.samples=[[{name:"[Enter your own text]",text:"Metapolator"}],[{name:"Metagram",text:'Incredibly, he makes a major life-change! For example: "Iâll require that the system have two sizes."'},{name:"3 Pangrams",text:"Quick wafting zephyrs vex bold Jim. The quick brown fox jumps over the lazy dog. Bright vixens jump dozy fowl quack."},{name:"Capitalised Pan",text:"Aladine Biopsia Cumbia Diego Espejo Flecha Gaveta Hockey Index Jaque Kurdos Ludwing Motivo Nylon Ortiz Profit Quiff Roving Sioux Tizzy Unwary Vertex Wrathy Xammar Yachts Zaque"},{name:"Ruder",text:"vertrag crainte screw, bibel malhabile modo. verwalter croyant science, biegen peuple punibile. verzicht fratricide sketchy, blind qualifier quindi. vorrede frivolitÃ© story, damals quelle dinamica. yankee instruction take, china quelque analiso. zwetschge lyre treaty, schaden salomon macchina. zypresse navette tricycle, schein sellier secondo. fraktur nocturne typograph, lager sommier singolo. kraft pervertir vanity, legion unique possibile. raffeln presto victory, mime unanime unico. reaktion prÃ©voyant vivacity, mohn usuel legge. rekord prioritÃ© wayward, nagel abonner unione. revolte proscrire efficiency, puder agir punizione. tritt raviver without, quÃ¤len aiglon dunque. trotzkopf tactilitÃ© through, huldigen allÃ©gir quando. tyrann arrÃªt known, geduld alliance uomini."}],[{name:"Aa12%@â¦",text:"AaBbCcDdEeFfGgHhIiJjKkLlMmNnOoPpQqRrSsTtUuVvWwXxYyZz*n1234567890*n( { [ . , Â¡ ! Â¿ ? * ' â â \" â â ] } ) $ â¬ Â£ % @ & Â¶ Â§ Â¢ â  â¡"},{name:"Number Grid",text:"12345678901*n23456789012*n34567890123*n45678901234*n56789012345*n67890123456*n78901234567*n89012345678*n90123456789*n01234567890"}],[{name:"Paragraph",text:"Grumpy wizards make toxic brew for the evil Queen and Jack. One morning when Gregor Samsa woke from troubled dreams, he found himself transformed in his bed into a horrible vermin.*pHe lay on his armourlike back and if he lifted his head a little, he could see his brown belly slightly domed and divided by arches into stiff sections.*pThe bedding was hardly able to cover it and seemed ready to slide off any moment. His many legs pitifully thin compared with the size of the rest of him, waved about helplessly as he looked."}]],e.selectSpecimen=function(t){e.model.specimenSample=t},e.model.specimenSample=e.samples[0][0],e.glyphRange&&t()}e.$inject=["$scope"];e.prototype;return e}),define("require/text!metapolator/ui/metapolator/specimen-panel/specimen-tools/specimen-samples/specimen-samples.tpl",[],function(){return'<mtk-local-menu class="localmenu lm-align-left">\n    <div class="lm-head" ng-mousedown="localMenuCtrl.toggleMenu(\'specimenSamples\')">\n        <input ng-model="model.specimenSample.text" placeholder="Type text here..." ng-trim="false" ng-keyup="localMenuCtrl.closeMenu();">\n    </div>\n    <div class="lm-body" ng-if="display.localMenu == \'specimenSamples\'">\n        <div ng-repeat-start="specimenGroup in samples">\n            <div class="lm-button" ng-repeat="specimen in specimenGroup" ng-mouseup="selectSpecimen(specimen)">\n                <div class="lm-checkmark"><span ng-if="specimen == model.specimenSample">H</span></div>{{specimen.name}}\n            </div>\n        </div>\n        <div ng-repeat-end class="lm-divider" ng-if="!$last"></div>\n    </div>\n</mtk-local-menu>'}),define("metapolator/ui/metapolator/specimen-panel/specimen-tools/specimen-samples/specimen-samples-directive",["require/text!./specimen-samples.tpl"],function(e){"use strict";function t(){return{restrict:"E",controller:"SpecimenSamplesController",replace:!1,template:e,scope:{model:"=mtkModel",glyphRange:"=mtkGlyphRange"}}}return t.$inject=[],t}),define("metapolator/ui/metapolator/specimen-panel/specimen-tools/specimen-samples/specimen-samples",["angular","../../../local-menu/local-menu","./specimen-samples-controller","./specimen-samples-directive"],function(e,t,n,r){"use strict";return e.module("mtk.specimenSamples",[t.name]).controller("SpecimenSamplesController",n).directive("mtkSpecimenSamples",r)}),define("metapolator/ui/metapolator/specimen-panel/specimen-tools/size-rope/size-rope-controller",[],function(){"use strict";function e(e){function t(){var t,n=e.model.lineHeightSetting,r=e.model.fontSize;-1!==n&&(1===n?t=(1/(.1*r+.58)+.8673).toFixed(1):0===n?t=(1/(.1525*r+.85)+.7785).toFixed(1):2===n&&(t=(1/(.087*r+.195)+1.062).toFixed(1)),e.model.lineHeight=t)}this.$scope=e,e.limitFontSize=function(n){var r=Math.round(n);10>r&&(r=10),e.model.fontSize=r,t(),e.$apply()},e.handleSVGbox=function(){for(var t=document.getElementsByClassName("specimen-ul-"+e.type)[0],n=t.children,r=0,i=n.length;i>r;r++)n[r].firstElementChild.style.width="auto"}}e.$inject=["$scope"];e.prototype;return e}),!function(){function e(e){return e&&(e.ownerDocument||e.document||e).documentElement}function t(e){return e&&(e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView)}function n(e,t){return t>e?-1:e>t?1:e>=t?0:NaN}function r(e){return null===e?NaN:+e}function i(e){return!isNaN(e)}function o(e){return{left:function(t,n,r,i){for(arguments.length<3&&(r=0),arguments.length<4&&(i=t.length);i>r;){var o=r+i>>>1;e(t[o],n)<0?r=o+1:i=o}return r},right:function(t,n,r,i){for(arguments.length<3&&(r=0),arguments.length<4&&(i=t.length);i>r;){var o=r+i>>>1;e(t[o],n)>0?i=o:r=o+1}return r}}}function a(e){return e.length}function s(e){for(var t=1;e*t%1;)t*=10;return t}function u(e,t){for(var n in t)Object.defineProperty(e.prototype,n,{value:t[n],enumerable:!1})}function l(){this._=Object.create(null)}function c(e){return(e+="")===wa||e[0]===xa?xa+e:e}function h(e){return(e+="")[0]===xa?e.slice(1):e}function f(e){return c(e)in this._}function p(e){return(e=c(e))in this._&&delete this._[e]}function d(){var e=[];for(var t in this._)e.push(h(t));return e}function m(){var e=0;for(var t in this._)++e;return e}function g(){for(var e in this._)return!1;return!0}function v(){this._=Object.create(null)}function y(e){return e}function b(e,t,n){return function(){var r=n.apply(t,arguments);return r===t?e:r}}function _(e,t){if(t in e)return t;t=t.charAt(0).toUpperCase()+t.slice(1);for(var n=0,r=Sa.length;r>n;++n){var i=Sa[n]+t;if(i in e)return i}}function w(){}function x(){}function S(e){function t(){for(var t,r=n,i=-1,o=r.length;++i<o;)(t=r[i].on)&&t.apply(this,arguments);
return e}var n=[],r=new l;return t.on=function(t,i){var o,a=r.get(t);return arguments.length<2?a&&a.on:(a&&(a.on=null,n=n.slice(0,o=n.indexOf(a)).concat(n.slice(o+1)),r.remove(t)),i&&n.push(r.set(t,{on:i})),e)},t}function C(){ua.event.preventDefault()}function k(){for(var e,t=ua.event;e=t.sourceEvent;)t=e;return t}function P(e){for(var t=new x,n=0,r=arguments.length;++n<r;)t[arguments[n]]=S(t);return t.of=function(n,r){return function(i){try{var o=i.sourceEvent=ua.event;i.target=e,ua.event=i,t[i.type].apply(n,r)}finally{ua.event=o}}},t}function M(e){return ka(e,Aa),e}function T(e){return"function"==typeof e?e:function(){return Pa(e,this)}}function A(e){return"function"==typeof e?e:function(){return Ma(e,this)}}function O(e,t){function n(){this.removeAttribute(e)}function r(){this.removeAttributeNS(e.space,e.local)}function i(){this.setAttribute(e,t)}function o(){this.setAttributeNS(e.space,e.local,t)}function a(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}function s(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}return e=ua.ns.qualify(e),null==t?e.local?r:n:"function"==typeof t?e.local?s:a:e.local?o:i}function E(e){return e.trim().replace(/\s+/g," ")}function $(e){return new RegExp("(?:^|\\s+)"+ua.requote(e)+"(?:\\s+|$)","g")}function N(e){return(e+"").trim().split(/^|\s+/)}function I(e,t){function n(){for(var n=-1;++n<i;)e[n](this,t)}function r(){for(var n=-1,r=t.apply(this,arguments);++n<i;)e[n](this,r)}e=N(e).map(D);var i=e.length;return"function"==typeof t?r:n}function D(e){var t=$(e);return function(n,r){if(i=n.classList)return r?i.add(e):i.remove(e);var i=n.getAttribute("class")||"";r?(t.lastIndex=0,t.test(i)||n.setAttribute("class",E(i+" "+e))):n.setAttribute("class",E(i.replace(t," ")))}}function j(e,t,n){function r(){this.style.removeProperty(e)}function i(){this.style.setProperty(e,t,n)}function o(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(e):this.style.setProperty(e,r,n)}return null==t?r:"function"==typeof t?o:i}function F(e,t){function n(){delete this[e]}function r(){this[e]=t}function i(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}return null==t?n:"function"==typeof t?i:r}function L(e){function t(){var t=this.ownerDocument,n=this.namespaceURI;return n===Oa&&t.documentElement.namespaceURI===Oa?t.createElement(e):t.createElementNS(n,e)}function n(){return this.ownerDocument.createElementNS(e.space,e.local)}return"function"==typeof e?e:(e=ua.ns.qualify(e)).local?n:t}function R(){var e=this.parentNode;e&&e.removeChild(this)}function U(e){return{__data__:e}}function V(e){return function(){return Ta(this,e)}}function q(e){return arguments.length||(e=n),function(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}}function z(e,t){for(var n=0,r=e.length;r>n;n++)for(var i,o=e[n],a=0,s=o.length;s>a;a++)(i=o[a])&&t(i,a,n);return e}function B(e){return ka(e,$a),e}function H(e){var t,n;return function(r,i,o){var a,s=e[o].update,u=s.length;for(o!=n&&(n=o,t=0),i>=t&&(t=i+1);!(a=s[t])&&++t<u;);return a}}function G(e,t,n){function r(){var t=this[a];t&&(this.removeEventListener(e,t,t.$),delete this[a])}function i(){var i=u(t,ca(arguments));r.call(this),this.addEventListener(e,this[a]=i,i.$=n),i._=t}function o(){var t,n=new RegExp("^__on([^.]+)"+ua.requote(e)+"$");for(var r in this)if(t=r.match(n)){var i=this[r];this.removeEventListener(t[1],i,i.$),delete this[r]}}var a="__on"+e,s=e.indexOf("."),u=W;s>0&&(e=e.slice(0,s));var l=Na.get(e);return l&&(e=l,u=Y),s?t?i:r:t?w:o}function W(e,t){return function(n){var r=ua.event;ua.event=n,t[0]=this.__data__;try{e.apply(this,t)}finally{ua.event=r}}}function Y(e,t){var n=W(e,t);return function(e){var t=this,r=e.relatedTarget;r&&(r===t||8&r.compareDocumentPosition(t))||n.call(t,e)}}function X(n){var r=".dragsuppress-"+ ++Da,i="click"+r,o=ua.select(t(n)).on("touchmove"+r,C).on("dragstart"+r,C).on("selectstart"+r,C);if(null==Ia&&(Ia="onselectstart"in n?!1:_(n.style,"userSelect")),Ia){var a=e(n).style,s=a[Ia];a[Ia]="none"}return function(e){if(o.on(r,null),Ia&&(a[Ia]=s),e){var t=function(){o.on(i,null)};o.on(i,function(){C(),t()},!0),setTimeout(t,0)}}}function K(e,n){n.changedTouches&&(n=n.changedTouches[0]);var r=e.ownerSVGElement||e;if(r.createSVGPoint){var i=r.createSVGPoint();if(0>ja){var o=t(e);if(o.scrollX||o.scrollY){r=ua.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var a=r[0][0].getScreenCTM();ja=!(a.f||a.e),r.remove()}}return ja?(i.x=n.pageX,i.y=n.pageY):(i.x=n.clientX,i.y=n.clientY),i=i.matrixTransform(e.getScreenCTM().inverse()),[i.x,i.y]}var s=e.getBoundingClientRect();return[n.clientX-s.left-e.clientLeft,n.clientY-s.top-e.clientTop]}function Z(){return ua.event.changedTouches[0].identifier}function Q(e){return e>0?1:0>e?-1:0}function J(e,t,n){return(t[0]-e[0])*(n[1]-e[1])-(t[1]-e[1])*(n[0]-e[0])}function ee(e){return e>1?0:-1>e?Ra:Math.acos(e)}function te(e){return e>1?qa:-1>e?-qa:Math.asin(e)}function ne(e){return((e=Math.exp(e))-1/e)/2}function re(e){return((e=Math.exp(e))+1/e)/2}function ie(e){return((e=Math.exp(2*e))-1)/(e+1)}function oe(e){return(e=Math.sin(e/2))*e}function ae(){}function se(e,t,n){return this instanceof se?(this.h=+e,this.s=+t,void(this.l=+n)):arguments.length<2?e instanceof se?new se(e.h,e.s,e.l):we(""+e,xe,se):new se(e,t,n)}function ue(e,t,n){function r(e){return e>360?e-=360:0>e&&(e+=360),60>e?o+(a-o)*e/60:180>e?a:240>e?o+(a-o)*(240-e)/60:o}function i(e){return Math.round(255*r(e))}var o,a;return e=isNaN(e)?0:(e%=360)<0?e+360:e,t=isNaN(t)?0:0>t?0:t>1?1:t,n=0>n?0:n>1?1:n,a=.5>=n?n*(1+t):n+t-n*t,o=2*n-a,new ve(i(e+120),i(e),i(e-120))}function le(e,t,n){return this instanceof le?(this.h=+e,this.c=+t,void(this.l=+n)):arguments.length<2?e instanceof le?new le(e.h,e.c,e.l):e instanceof he?pe(e.l,e.a,e.b):pe((e=Se((e=ua.rgb(e)).r,e.g,e.b)).l,e.a,e.b):new le(e,t,n)}function ce(e,t,n){return isNaN(e)&&(e=0),isNaN(t)&&(t=0),new he(n,Math.cos(e*=za)*t,Math.sin(e)*t)}function he(e,t,n){return this instanceof he?(this.l=+e,this.a=+t,void(this.b=+n)):arguments.length<2?e instanceof he?new he(e.l,e.a,e.b):e instanceof le?ce(e.h,e.c,e.l):Se((e=ve(e)).r,e.g,e.b):new he(e,t,n)}function fe(e,t,n){var r=(e+16)/116,i=r+t/500,o=r-n/200;return i=de(i)*es,r=de(r)*ts,o=de(o)*ns,new ve(ge(3.2404542*i-1.5371385*r-.4985314*o),ge(-.969266*i+1.8760108*r+.041556*o),ge(.0556434*i-.2040259*r+1.0572252*o))}function pe(e,t,n){return e>0?new le(Math.atan2(n,t)*Ba,Math.sqrt(t*t+n*n),e):new le(NaN,NaN,e)}function de(e){return e>.206893034?e*e*e:(e-4/29)/7.787037}function me(e){return e>.008856?Math.pow(e,1/3):7.787037*e+4/29}function ge(e){return Math.round(255*(.00304>=e?12.92*e:1.055*Math.pow(e,1/2.4)-.055))}function ve(e,t,n){return this instanceof ve?(this.r=~~e,this.g=~~t,void(this.b=~~n)):arguments.length<2?e instanceof ve?new ve(e.r,e.g,e.b):we(""+e,ve,ue):new ve(e,t,n)}function ye(e){return new ve(e>>16,e>>8&255,255&e)}function be(e){return ye(e)+""}function _e(e){return 16>e?"0"+Math.max(0,e).toString(16):Math.min(255,e).toString(16)}function we(e,t,n){var r,i,o,a=0,s=0,u=0;if(r=/([a-z]+)\((.*)\)/.exec(e=e.toLowerCase()))switch(i=r[2].split(","),r[1]){case"hsl":return n(parseFloat(i[0]),parseFloat(i[1])/100,parseFloat(i[2])/100);case"rgb":return t(ke(i[0]),ke(i[1]),ke(i[2]))}return(o=os.get(e))?t(o.r,o.g,o.b):(null==e||"#"!==e.charAt(0)||isNaN(o=parseInt(e.slice(1),16))||(4===e.length?(a=(3840&o)>>4,a=a>>4|a,s=240&o,s=s>>4|s,u=15&o,u=u<<4|u):7===e.length&&(a=(16711680&o)>>16,s=(65280&o)>>8,u=255&o)),t(a,s,u))}function xe(e,t,n){var r,i,o=Math.min(e/=255,t/=255,n/=255),a=Math.max(e,t,n),s=a-o,u=(a+o)/2;return s?(i=.5>u?s/(a+o):s/(2-a-o),r=e==a?(t-n)/s+(n>t?6:0):t==a?(n-e)/s+2:(e-t)/s+4,r*=60):(r=NaN,i=u>0&&1>u?0:r),new se(r,i,u)}function Se(e,t,n){e=Ce(e),t=Ce(t),n=Ce(n);var r=me((.4124564*e+.3575761*t+.1804375*n)/es),i=me((.2126729*e+.7151522*t+.072175*n)/ts),o=me((.0193339*e+.119192*t+.9503041*n)/ns);return he(116*i-16,500*(r-i),200*(i-o))}function Ce(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function ke(e){var t=parseFloat(e);return"%"===e.charAt(e.length-1)?Math.round(2.55*t):t}function Pe(e){return"function"==typeof e?e:function(){return e}}function Me(e){return function(t,n,r){return 2===arguments.length&&"function"==typeof n&&(r=n,n=null),Te(t,n,e,r)}}function Te(e,t,n,r){function i(){var e,t=u.status;if(!t&&Oe(u)||t>=200&&300>t||304===t){try{e=n.call(o,u)}catch(r){return void a.error.call(o,r)}a.load.call(o,e)}else a.error.call(o,u)}var o={},a=ua.dispatch("beforesend","progress","load","error"),s={},u=new XMLHttpRequest,l=null;return!this.XDomainRequest||"withCredentials"in u||!/^(http(s)?:)?\/\//.test(e)||(u=new XDomainRequest),"onload"in u?u.onload=u.onerror=i:u.onreadystatechange=function(){u.readyState>3&&i()},u.onprogress=function(e){var t=ua.event;ua.event=e;try{a.progress.call(o,u)}finally{ua.event=t}},o.header=function(e,t){return e=(e+"").toLowerCase(),arguments.length<2?s[e]:(null==t?delete s[e]:s[e]=t+"",o)},o.mimeType=function(e){return arguments.length?(t=null==e?null:e+"",o):t},o.responseType=function(e){return arguments.length?(l=e,o):l},o.response=function(e){return n=e,o},["get","post"].forEach(function(e){o[e]=function(){return o.send.apply(o,[e].concat(ca(arguments)))}}),o.send=function(n,r,i){if(2===arguments.length&&"function"==typeof r&&(i=r,r=null),u.open(n,e,!0),null==t||"accept"in s||(s.accept=t+",*/*"),u.setRequestHeader)for(var c in s)u.setRequestHeader(c,s[c]);return null!=t&&u.overrideMimeType&&u.overrideMimeType(t),null!=l&&(u.responseType=l),null!=i&&o.on("error",i).on("load",function(e){i(null,e)}),a.beforesend.call(o,u),u.send(null==r?null:r),o},o.abort=function(){return u.abort(),o},ua.rebind(o,a,"on"),null==r?o:o.get(Ae(r))}function Ae(e){return 1===e.length?function(t,n){e(null==t?n:null)}:e}function Oe(e){var t=e.responseType;return t&&"text"!==t?e.response:e.responseText}function Ee(e,t,n){var r=arguments.length;2>r&&(t=0),3>r&&(n=Date.now());var i=n+t,o={c:e,t:i,n:null};return ss?ss.n=o:as=o,ss=o,us||(ls=clearTimeout(ls),us=1,cs($e)),o}function $e(){var e=Ne(),t=Ie()-e;t>24?(isFinite(t)&&(clearTimeout(ls),ls=setTimeout($e,t)),us=0):(us=1,cs($e))}function Ne(){for(var e=Date.now(),t=as;t;)e>=t.t&&t.c(e-t.t)&&(t.c=null),t=t.n;return e}function Ie(){for(var e,t=as,n=1/0;t;)t.c?(t.t<n&&(n=t.t),t=(e=t).n):t=e?e.n=t.n:as=t.n;return ss=e,n}function De(e,t){return t-(e?Math.ceil(Math.log(e)/Math.LN10):1)}function je(e,t){var n=Math.pow(10,3*_a(8-t));return{scale:t>8?function(e){return e/n}:function(e){return e*n},symbol:e}}function Fe(e){var t=e.decimal,n=e.thousands,r=e.grouping,i=e.currency,o=r&&n?function(e,t){for(var i=e.length,o=[],a=0,s=r[0],u=0;i>0&&s>0&&(u+s+1>t&&(s=Math.max(1,t-u)),o.push(e.substring(i-=s,i+s)),!((u+=s+1)>t));)s=r[a=(a+1)%r.length];return o.reverse().join(n)}:y;return function(e){var n=fs.exec(e),r=n[1]||" ",a=n[2]||">",s=n[3]||"-",u=n[4]||"",l=n[5],c=+n[6],h=n[7],f=n[8],p=n[9],d=1,m="",g="",v=!1,y=!0;switch(f&&(f=+f.substring(1)),(l||"0"===r&&"="===a)&&(l=r="0",a="="),p){case"n":h=!0,p="g";break;case"%":d=100,g="%",p="f";break;case"p":d=100,g="%",p="r";break;case"b":case"o":case"x":case"X":"#"===u&&(m="0"+p.toLowerCase());case"c":y=!1;case"d":v=!0,f=0;break;case"s":d=-1,p="r"}"$"===u&&(m=i[0],g=i[1]),"r"!=p||f||(p="g"),null!=f&&("g"==p?f=Math.max(1,Math.min(21,f)):"e"!=p&&"f"!=p||(f=Math.max(0,Math.min(20,f)))),p=ps.get(p)||Le;var b=l&&h;return function(e){var n=g;if(v&&e%1)return"";var i=0>e||0===e&&0>1/e?(e=-e,"-"):"-"===s?"":s;if(0>d){var u=ua.formatPrefix(e,f);e=u.scale(e),n=u.symbol+g}else e*=d;e=p(e,f);var _,w,x=e.lastIndexOf(".");if(0>x){var S=y?e.lastIndexOf("e"):-1;0>S?(_=e,w=""):(_=e.substring(0,S),w=e.substring(S))}else _=e.substring(0,x),w=t+e.substring(x+1);!l&&h&&(_=o(_,1/0));var C=m.length+_.length+w.length+(b?0:i.length),k=c>C?new Array(C=c-C+1).join(r):"";return b&&(_=o(k+_,k.length?c-w.length:1/0)),i+=m,e=_+w,("<"===a?i+e+k:">"===a?k+i+e:"^"===a?k.substring(0,C>>=1)+i+e+k.substring(C):i+(b?e:k+e))+n}}}function Le(e){return e+""}function Re(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function Ue(e,t,n){function r(t){var n=e(t),r=o(n,1);return r-t>t-n?n:r}function i(n){return t(n=e(new ms(n-1)),1),n}function o(e,n){return t(e=new ms(+e),n),e}function a(e,r,o){var a=i(e),s=[];if(o>1)for(;r>a;)n(a)%o||s.push(new Date(+a)),t(a,1);else for(;r>a;)s.push(new Date(+a)),t(a,1);return s}function s(e,t,n){try{ms=Re;var r=new Re;return r._=e,a(r,t,n)}finally{ms=Date}}e.floor=e,e.round=r,e.ceil=i,e.offset=o,e.range=a;var u=e.utc=Ve(e);return u.floor=u,u.round=Ve(r),u.ceil=Ve(i),u.offset=Ve(o),u.range=s,e}function Ve(e){return function(t,n){try{ms=Re;var r=new Re;return r._=t,e(r,n)._}finally{ms=Date}}}function qe(e){function t(e){function t(t){for(var n,i,o,a=[],s=-1,u=0;++s<r;)37===e.charCodeAt(s)&&(a.push(e.slice(u,s)),null!=(i=vs[n=e.charAt(++s)])&&(n=e.charAt(++s)),(o=T[n])&&(n=o(t,null==i?"e"===n?" ":"0":i)),a.push(n),u=s+1);return a.push(e.slice(u,s)),a.join("")}var r=e.length;return t.parse=function(t){var r={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null},i=n(r,e,t,0);if(i!=t.length)return null;"p"in r&&(r.H=r.H%12+12*r.p);var o=null!=r.Z&&ms!==Re,a=new(o?Re:ms);return"j"in r?a.setFullYear(r.y,0,r.j):"W"in r||"U"in r?("w"in r||(r.w="W"in r?1:0),a.setFullYear(r.y,0,1),a.setFullYear(r.y,0,"W"in r?(r.w+6)%7+7*r.W-(a.getDay()+5)%7:r.w+7*r.U-(a.getDay()+6)%7)):a.setFullYear(r.y,r.m,r.d),a.setHours(r.H+(r.Z/100|0),r.M+r.Z%100,r.S,r.L),o?a._:a},t.toString=function(){return e},t}function n(e,t,n,r){for(var i,o,a,s=0,u=t.length,l=n.length;u>s;){if(r>=l)return-1;if(i=t.charCodeAt(s++),37===i){if(a=t.charAt(s++),o=A[a in vs?t.charAt(s++):a],!o||(r=o(e,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}function r(e,t,n){x.lastIndex=0;var r=x.exec(t.slice(n));return r?(e.w=S.get(r[0].toLowerCase()),n+r[0].length):-1}function i(e,t,n){_.lastIndex=0;var r=_.exec(t.slice(n));return r?(e.w=w.get(r[0].toLowerCase()),n+r[0].length):-1}function o(e,t,n){P.lastIndex=0;var r=P.exec(t.slice(n));return r?(e.m=M.get(r[0].toLowerCase()),n+r[0].length):-1}function a(e,t,n){C.lastIndex=0;var r=C.exec(t.slice(n));return r?(e.m=k.get(r[0].toLowerCase()),n+r[0].length):-1}function s(e,t,r){return n(e,T.c.toString(),t,r)}function u(e,t,r){return n(e,T.x.toString(),t,r)}function l(e,t,r){return n(e,T.X.toString(),t,r)}function c(e,t,n){var r=b.get(t.slice(n,n+=2).toLowerCase());return null==r?-1:(e.p=r,n)}var h=e.dateTime,f=e.date,p=e.time,d=e.periods,m=e.days,g=e.shortDays,v=e.months,y=e.shortMonths;t.utc=function(e){function n(e){try{ms=Re;var t=new ms;return t._=e,r(t)}finally{ms=Date}}var r=t(e);return n.parse=function(e){try{ms=Re;var t=r.parse(e);return t&&t._}finally{ms=Date}},n.toString=r.toString,n},t.multi=t.utc.multi=ut;var b=ua.map(),_=Be(m),w=He(m),x=Be(g),S=He(g),C=Be(v),k=He(v),P=Be(y),M=He(y);d.forEach(function(e,t){b.set(e.toLowerCase(),t)});var T={a:function(e){return g[e.getDay()]},A:function(e){return m[e.getDay()]},b:function(e){return y[e.getMonth()]},B:function(e){return v[e.getMonth()]},c:t(h),d:function(e,t){return ze(e.getDate(),t,2)},e:function(e,t){return ze(e.getDate(),t,2)},H:function(e,t){return ze(e.getHours(),t,2)},I:function(e,t){return ze(e.getHours()%12||12,t,2)},j:function(e,t){return ze(1+ds.dayOfYear(e),t,3)},L:function(e,t){return ze(e.getMilliseconds(),t,3)},m:function(e,t){return ze(e.getMonth()+1,t,2)},M:function(e,t){return ze(e.getMinutes(),t,2)},p:function(e){return d[+(e.getHours()>=12)]},S:function(e,t){return ze(e.getSeconds(),t,2)},U:function(e,t){return ze(ds.sundayOfYear(e),t,2)},w:function(e){return e.getDay()},W:function(e,t){return ze(ds.mondayOfYear(e),t,2)},x:t(f),X:t(p),y:function(e,t){return ze(e.getFullYear()%100,t,2)},Y:function(e,t){return ze(e.getFullYear()%1e4,t,4)},Z:at,"%":function(){return"%"}},A={a:r,A:i,b:o,B:a,c:s,d:et,e:et,H:nt,I:nt,j:tt,L:ot,m:Je,M:rt,p:c,S:it,U:We,w:Ge,W:Ye,x:u,X:l,y:Ke,Y:Xe,Z:Ze,"%":st};return t}function ze(e,t,n){var r=0>e?"-":"",i=(r?-e:e)+"",o=i.length;return r+(n>o?new Array(n-o+1).join(t)+i:i)}function Be(e){return new RegExp("^(?:"+e.map(ua.requote).join("|")+")","i")}function He(e){for(var t=new l,n=-1,r=e.length;++n<r;)t.set(e[n].toLowerCase(),n);return t}function Ge(e,t,n){ys.lastIndex=0;var r=ys.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function We(e,t,n){ys.lastIndex=0;var r=ys.exec(t.slice(n));return r?(e.U=+r[0],n+r[0].length):-1}function Ye(e,t,n){ys.lastIndex=0;var r=ys.exec(t.slice(n));return r?(e.W=+r[0],n+r[0].length):-1}function Xe(e,t,n){ys.lastIndex=0;var r=ys.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function Ke(e,t,n){ys.lastIndex=0;var r=ys.exec(t.slice(n,n+2));return r?(e.y=Qe(+r[0]),n+r[0].length):-1}function Ze(e,t,n){return/^[+-]\d{4}$/.test(t=t.slice(n,n+5))?(e.Z=-t,n+5):-1}function Qe(e){return e+(e>68?1900:2e3)}function Je(e,t,n){ys.lastIndex=0;var r=ys.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function et(e,t,n){ys.lastIndex=0;var r=ys.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function tt(e,t,n){ys.lastIndex=0;var r=ys.exec(t.slice(n,n+3));return r?(e.j=+r[0],n+r[0].length):-1}function nt(e,t,n){ys.lastIndex=0;var r=ys.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function rt(e,t,n){ys.lastIndex=0;var r=ys.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function it(e,t,n){ys.lastIndex=0;var r=ys.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function ot(e,t,n){ys.lastIndex=0;var r=ys.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function at(e){var t=e.getTimezoneOffset(),n=t>0?"-":"+",r=_a(t)/60|0,i=_a(t)%60;return n+ze(r,"0",2)+ze(i,"0",2)}function st(e,t,n){bs.lastIndex=0;var r=bs.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function ut(e){for(var t=e.length,n=-1;++n<t;)e[n][0]=this(e[n][0]);return function(t){for(var n=0,r=e[n];!r[1](t);)r=e[++n];return r[0](t)}}function lt(){}function ct(e,t,n){var r=n.s=e+t,i=r-e,o=r-i;n.t=e-o+(t-i)}function ht(e,t){e&&Ss.hasOwnProperty(e.type)&&Ss[e.type](e,t)}function ft(e,t,n){var r,i=-1,o=e.length-n;for(t.lineStart();++i<o;)r=e[i],t.point(r[0],r[1],r[2]);t.lineEnd()}function pt(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)ft(e[n],t,1);t.polygonEnd()}function dt(){function e(e,t){e*=za,t=t*za/2+Ra/4;var n=e-r,a=n>=0?1:-1,s=a*n,u=Math.cos(t),l=Math.sin(t),c=o*l,h=i*u+c*Math.cos(s),f=c*a*Math.sin(s);ks.add(Math.atan2(f,h)),r=e,i=u,o=l}var t,n,r,i,o;Ps.point=function(a,s){Ps.point=e,r=(t=a)*za,i=Math.cos(s=(n=s)*za/2+Ra/4),o=Math.sin(s)},Ps.lineEnd=function(){e(t,n)}}function mt(e){var t=e[0],n=e[1],r=Math.cos(n);return[r*Math.cos(t),r*Math.sin(t),Math.sin(n)]}function gt(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function vt(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function yt(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function bt(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function _t(e){var t=Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}function wt(e){return[Math.atan2(e[1],e[0]),te(e[2])]}function xt(e,t){return _a(e[0]-t[0])<Fa&&_a(e[1]-t[1])<Fa}function St(e,t){e*=za;var n=Math.cos(t*=za);Ct(n*Math.cos(e),n*Math.sin(e),Math.sin(t))}function Ct(e,t,n){++Ms,As+=(e-As)/Ms,Os+=(t-Os)/Ms,Es+=(n-Es)/Ms}function kt(){function e(e,i){e*=za;var o=Math.cos(i*=za),a=o*Math.cos(e),s=o*Math.sin(e),u=Math.sin(i),l=Math.atan2(Math.sqrt((l=n*u-r*s)*l+(l=r*a-t*u)*l+(l=t*s-n*a)*l),t*a+n*s+r*u);Ts+=l,$s+=l*(t+(t=a)),Ns+=l*(n+(n=s)),Is+=l*(r+(r=u)),Ct(t,n,r)}var t,n,r;Ls.point=function(i,o){i*=za;var a=Math.cos(o*=za);t=a*Math.cos(i),n=a*Math.sin(i),r=Math.sin(o),Ls.point=e,Ct(t,n,r)}}function Pt(){Ls.point=St}function Mt(){function e(e,t){e*=za;var n=Math.cos(t*=za),a=n*Math.cos(e),s=n*Math.sin(e),u=Math.sin(t),l=i*u-o*s,c=o*a-r*u,h=r*s-i*a,f=Math.sqrt(l*l+c*c+h*h),p=r*a+i*s+o*u,d=f&&-ee(p)/f,m=Math.atan2(f,p);Ds+=d*l,js+=d*c,Fs+=d*h,Ts+=m,$s+=m*(r+(r=a)),Ns+=m*(i+(i=s)),Is+=m*(o+(o=u)),Ct(r,i,o)}var t,n,r,i,o;Ls.point=function(a,s){t=a,n=s,Ls.point=e,a*=za;var u=Math.cos(s*=za);r=u*Math.cos(a),i=u*Math.sin(a),o=Math.sin(s),Ct(r,i,o)},Ls.lineEnd=function(){e(t,n),Ls.lineEnd=Pt,Ls.point=St}}function Tt(e,t){function n(n,r){return n=e(n,r),t(n[0],n[1])}return e.invert&&t.invert&&(n.invert=function(n,r){return n=t.invert(n,r),n&&e.invert(n[0],n[1])}),n}function At(){return!0}function Ot(e,t,n,r,i){var o=[],a=[];if(e.forEach(function(e){if(!((t=e.length-1)<=0)){var t,n=e[0],r=e[t];if(xt(n,r)){i.lineStart();for(var s=0;t>s;++s)i.point((n=e[s])[0],n[1]);return void i.lineEnd()}var u=new $t(n,e,null,!0),l=new $t(n,null,u,!1);u.o=l,o.push(u),a.push(l),u=new $t(r,e,null,!1),l=new $t(r,null,u,!0),u.o=l,o.push(u),a.push(l)}}),a.sort(t),Et(o),Et(a),o.length){for(var s=0,u=n,l=a.length;l>s;++s)a[s].e=u=!u;for(var c,h,f=o[0];;){for(var p=f,d=!0;p.v;)if((p=p.n)===f)return;c=p.z,i.lineStart();do{if(p.v=p.o.v=!0,p.e){if(d)for(var s=0,l=c.length;l>s;++s)i.point((h=c[s])[0],h[1]);else r(p.x,p.n.x,1,i);p=p.n}else{if(d){c=p.p.z;for(var s=c.length-1;s>=0;--s)i.point((h=c[s])[0],h[1])}else r(p.x,p.p.x,-1,i);p=p.p}p=p.o,c=p.z,d=!d}while(!p.v);i.lineEnd()}}}function Et(e){if(t=e.length){for(var t,n,r=0,i=e[0];++r<t;)i.n=n=e[r],n.p=i,i=n;i.n=n=e[0],n.p=i}}function $t(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function Nt(e,t,n,r){return function(i,o){function a(t,n){var r=i(t,n);e(t=r[0],n=r[1])&&o.point(t,n)}function s(e,t){var n=i(e,t);g.point(n[0],n[1])}function u(){y.point=s,g.lineStart()}function l(){y.point=a,g.lineEnd()}function c(e,t){m.push([e,t]);var n=i(e,t);_.point(n[0],n[1])}function h(){_.lineStart(),m=[]}function f(){c(m[0][0],m[0][1]),_.lineEnd();var e,t=_.clean(),n=b.buffer(),r=n.length;if(m.pop(),d.push(m),m=null,r)if(1&t){e=n[0];var i,r=e.length-1,a=-1;if(r>0){for(w||(o.polygonStart(),w=!0),o.lineStart();++a<r;)o.point((i=e[a])[0],i[1]);o.lineEnd()}}else r>1&&2&t&&n.push(n.pop().concat(n.shift())),p.push(n.filter(It))}var p,d,m,g=t(o),v=i.invert(r[0],r[1]),y={point:a,lineStart:u,lineEnd:l,polygonStart:function(){y.point=c,y.lineStart=h,y.lineEnd=f,p=[],d=[]},polygonEnd:function(){y.point=a,y.lineStart=u,y.lineEnd=l,p=ua.merge(p);var e=Ut(v,d);p.length?(w||(o.polygonStart(),w=!0),Ot(p,jt,e,n,o)):e&&(w||(o.polygonStart(),w=!0),o.lineStart(),n(null,null,1,o),o.lineEnd()),w&&(o.polygonEnd(),w=!1),p=d=null},sphere:function(){o.polygonStart(),o.lineStart(),n(null,null,1,o),o.lineEnd(),o.polygonEnd()}},b=Dt(),_=t(b),w=!1;return y}}function It(e){return e.length>1}function Dt(){var e,t=[];return{lineStart:function(){t.push(e=[])},point:function(t,n){e.push([t,n])},lineEnd:w,buffer:function(){var n=t;return t=[],e=null,n},rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))}}}function jt(e,t){return((e=e.x)[0]<0?e[1]-qa-Fa:qa-e[1])-((t=t.x)[0]<0?t[1]-qa-Fa:qa-t[1])}function Ft(e){var t,n=NaN,r=NaN,i=NaN;return{lineStart:function(){e.lineStart(),t=1},point:function(o,a){var s=o>0?Ra:-Ra,u=_a(o-n);_a(u-Ra)<Fa?(e.point(n,r=(r+a)/2>0?qa:-qa),e.point(i,r),e.lineEnd(),e.lineStart(),e.point(s,r),e.point(o,r),t=0):i!==s&&u>=Ra&&(_a(n-i)<Fa&&(n-=i*Fa),_a(o-s)<Fa&&(o-=s*Fa),r=Lt(n,r,o,a),e.point(i,r),e.lineEnd(),e.lineStart(),e.point(s,r),t=0),e.point(n=o,r=a),i=s},lineEnd:function(){e.lineEnd(),n=r=NaN},clean:function(){return 2-t}}}function Lt(e,t,n,r){var i,o,a=Math.sin(e-n);return _a(a)>Fa?Math.atan((Math.sin(t)*(o=Math.cos(r))*Math.sin(n)-Math.sin(r)*(i=Math.cos(t))*Math.sin(e))/(i*o*a)):(t+r)/2}function Rt(e,t,n,r){var i;if(null==e)i=n*qa,r.point(-Ra,i),r.point(0,i),r.point(Ra,i),r.point(Ra,0),r.point(Ra,-i),r.point(0,-i),r.point(-Ra,-i),r.point(-Ra,0),r.point(-Ra,i);else if(_a(e[0]-t[0])>Fa){var o=e[0]<t[0]?Ra:-Ra;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(t[0],t[1])}function Ut(e,t){var n=e[0],r=e[1],i=[Math.sin(n),-Math.cos(n),0],o=0,a=0;ks.reset();for(var s=0,u=t.length;u>s;++s){var l=t[s],c=l.length;if(c)for(var h=l[0],f=h[0],p=h[1]/2+Ra/4,d=Math.sin(p),m=Math.cos(p),g=1;;){g===c&&(g=0),e=l[g];var v=e[0],y=e[1]/2+Ra/4,b=Math.sin(y),_=Math.cos(y),w=v-f,x=w>=0?1:-1,S=x*w,C=S>Ra,k=d*b;if(ks.add(Math.atan2(k*x*Math.sin(S),m*_+k*Math.cos(S))),o+=C?w+x*Ua:w,C^f>=n^v>=n){var P=vt(mt(h),mt(e));_t(P);var M=vt(i,P);_t(M);var T=(C^w>=0?-1:1)*te(M[2]);(r>T||r===T&&(P[0]||P[1]))&&(a+=C^w>=0?1:-1)}if(!g++)break;f=v,d=b,m=_,h=e}}return(-Fa>o||Fa>o&&-Fa>ks)^1&a}function Vt(e){function t(e,t){return Math.cos(e)*Math.cos(t)>o}function n(e){var n,o,u,l,c;return{lineStart:function(){l=u=!1,c=1},point:function(h,f){var p,d=[h,f],m=t(h,f),g=a?m?0:i(h,f):m?i(h+(0>h?Ra:-Ra),f):0;if(!n&&(l=u=m)&&e.lineStart(),m!==u&&(p=r(n,d),(xt(n,p)||xt(d,p))&&(d[0]+=Fa,d[1]+=Fa,m=t(d[0],d[1]))),m!==u)c=0,m?(e.lineStart(),p=r(d,n),e.point(p[0],p[1])):(p=r(n,d),e.point(p[0],p[1]),e.lineEnd()),n=p;else if(s&&n&&a^m){var v;g&o||!(v=r(d,n,!0))||(c=0,a?(e.lineStart(),e.point(v[0][0],v[0][1]),e.point(v[1][0],v[1][1]),e.lineEnd()):(e.point(v[1][0],v[1][1]),e.lineEnd(),e.lineStart(),e.point(v[0][0],v[0][1])))}!m||n&&xt(n,d)||e.point(d[0],d[1]),n=d,u=m,o=g},lineEnd:function(){u&&e.lineEnd(),n=null},clean:function(){return c|(l&&u)<<1}}}function r(e,t,n){var r=mt(e),i=mt(t),a=[1,0,0],s=vt(r,i),u=gt(s,s),l=s[0],c=u-l*l;if(!c)return!n&&e;var h=o*u/c,f=-o*l/c,p=vt(a,s),d=bt(a,h),m=bt(s,f);yt(d,m);var g=p,v=gt(d,g),y=gt(g,g),b=v*v-y*(gt(d,d)-1);if(!(0>b)){var _=Math.sqrt(b),w=bt(g,(-v-_)/y);if(yt(w,d),w=wt(w),!n)return w;var x,S=e[0],C=t[0],k=e[1],P=t[1];S>C&&(x=S,S=C,C=x);var M=C-S,T=_a(M-Ra)<Fa,A=T||Fa>M;if(!T&&k>P&&(x=k,k=P,P=x),A?T?k+P>0^w[1]<(_a(w[0]-S)<Fa?k:P):k<=w[1]&&w[1]<=P:M>Ra^(S<=w[0]&&w[0]<=C)){var O=bt(g,(-v+_)/y);return yt(O,d),[w,wt(O)]}}}function i(t,n){var r=a?e:Ra-e,i=0;return-r>t?i|=1:t>r&&(i|=2),-r>n?i|=4:n>r&&(i|=8),i}var o=Math.cos(e),a=o>0,s=_a(o)>Fa,u=mn(e,6*za);return Nt(t,n,u,a?[0,-e]:[-Ra,e-Ra])}function qt(e,t,n,r){return function(i){var o,a=i.a,s=i.b,u=a.x,l=a.y,c=s.x,h=s.y,f=0,p=1,d=c-u,m=h-l;if(o=e-u,d||!(o>0)){if(o/=d,0>d){if(f>o)return;p>o&&(p=o)}else if(d>0){if(o>p)return;o>f&&(f=o)}if(o=n-u,d||!(0>o)){if(o/=d,0>d){if(o>p)return;o>f&&(f=o)}else if(d>0){if(f>o)return;p>o&&(p=o)}if(o=t-l,m||!(o>0)){if(o/=m,0>m){if(f>o)return;p>o&&(p=o)}else if(m>0){if(o>p)return;o>f&&(f=o)}if(o=r-l,m||!(0>o)){if(o/=m,0>m){if(o>p)return;o>f&&(f=o)}else if(m>0){if(f>o)return;p>o&&(p=o)}return f>0&&(i.a={x:u+f*d,y:l+f*m}),1>p&&(i.b={x:u+p*d,y:l+p*m}),i}}}}}}function zt(e,t,n,r){function i(r,i){return _a(r[0]-e)<Fa?i>0?0:3:_a(r[0]-n)<Fa?i>0?2:1:_a(r[1]-t)<Fa?i>0?1:0:i>0?3:2}function o(e,t){return a(e.x,t.x)}function a(e,t){var n=i(e,1),r=i(t,1);return n!==r?n-r:0===n?t[1]-e[1]:1===n?e[0]-t[0]:2===n?e[1]-t[1]:t[0]-e[0]}return function(s){function u(e){for(var t=0,n=g.length,r=e[1],i=0;n>i;++i)for(var o,a=1,s=g[i],u=s.length,l=s[0];u>a;++a)o=s[a],l[1]<=r?o[1]>r&&J(l,o,e)>0&&++t:o[1]<=r&&J(l,o,e)<0&&--t,l=o;return 0!==t}function l(o,s,u,l){var c=0,h=0;if(null==o||(c=i(o,u))!==(h=i(s,u))||a(o,s)<0^u>0){do l.point(0===c||3===c?e:n,c>1?r:t);while((c=(c+u+4)%4)!==h)}else l.point(s[0],s[1])}function c(i,o){return i>=e&&n>=i&&o>=t&&r>=o}function h(e,t){c(e,t)&&s.point(e,t)}function f(){A.point=d,g&&g.push(v=[]),C=!0,S=!1,w=x=NaN}function p(){m&&(d(y,b),_&&S&&M.rejoin(),m.push(M.buffer())),A.point=h,S&&s.lineEnd()}function d(e,t){e=Math.max(-Us,Math.min(Us,e)),t=Math.max(-Us,Math.min(Us,t));var n=c(e,t);if(g&&v.push([e,t]),C)y=e,b=t,_=n,C=!1,n&&(s.lineStart(),s.point(e,t));else if(n&&S)s.point(e,t);else{var r={a:{x:w,y:x},b:{x:e,y:t}};T(r)?(S||(s.lineStart(),s.point(r.a.x,r.a.y)),s.point(r.b.x,r.b.y),n||s.lineEnd(),k=!1):n&&(s.lineStart(),s.point(e,t),k=!1)}w=e,x=t,S=n}var m,g,v,y,b,_,w,x,S,C,k,P=s,M=Dt(),T=qt(e,t,n,r),A={point:h,lineStart:f,lineEnd:p,polygonStart:function(){s=M,m=[],g=[],k=!0},polygonEnd:function(){s=P,m=ua.merge(m);var t=u([e,r]),n=k&&t,i=m.length;(n||i)&&(s.polygonStart(),n&&(s.lineStart(),l(null,null,1,s),s.lineEnd()),i&&Ot(m,o,t,l,s),s.polygonEnd()),m=g=v=null}};return A}}function Bt(e){var t=0,n=Ra/3,r=sn(e),i=r(t,n);return i.parallels=function(e){return arguments.length?r(t=e[0]*Ra/180,n=e[1]*Ra/180):[t/Ra*180,n/Ra*180]},i}function Ht(e,t){function n(e,t){var n=Math.sqrt(o-2*i*Math.sin(t))/i;return[n*Math.sin(e*=i),a-n*Math.cos(e)]}var r=Math.sin(e),i=(r+Math.sin(t))/2,o=1+r*(2*i-r),a=Math.sqrt(o)/i;return n.invert=function(e,t){var n=a-t;return[Math.atan2(e,n)/i,te((o-(e*e+n*n)*i*i)/(2*i))]},n}function Gt(){function e(e,t){qs+=i*e-r*t,r=e,i=t}var t,n,r,i;Ws.point=function(o,a){Ws.point=e,t=r=o,n=i=a},Ws.lineEnd=function(){e(t,n)}}function Wt(e,t){zs>e&&(zs=e),e>Hs&&(Hs=e),Bs>t&&(Bs=t),t>Gs&&(Gs=t)}function Yt(){function e(e,t){a.push("M",e,",",t,o)}function t(e,t){a.push("M",e,",",t),s.point=n}function n(e,t){a.push("L",e,",",t)}function r(){s.point=e}function i(){a.push("Z")}var o=Xt(4.5),a=[],s={point:e,lineStart:function(){s.point=t},lineEnd:r,polygonStart:function(){s.lineEnd=i},polygonEnd:function(){s.lineEnd=r,s.point=e},pointRadius:function(e){return o=Xt(e),s},result:function(){if(a.length){var e=a.join("");return a=[],e}}};return s}function Xt(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+-2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}function Kt(e,t){As+=e,Os+=t,++Es}function Zt(){function e(e,r){var i=e-t,o=r-n,a=Math.sqrt(i*i+o*o);$s+=a*(t+e)/2,Ns+=a*(n+r)/2,Is+=a,Kt(t=e,n=r)}var t,n;Xs.point=function(r,i){Xs.point=e,Kt(t=r,n=i)}}function Qt(){Xs.point=Kt}function Jt(){function e(e,t){var n=e-r,o=t-i,a=Math.sqrt(n*n+o*o);$s+=a*(r+e)/2,Ns+=a*(i+t)/2,Is+=a,a=i*e-r*t,Ds+=a*(r+e),js+=a*(i+t),Fs+=3*a,Kt(r=e,i=t)}var t,n,r,i;Xs.point=function(o,a){Xs.point=e,Kt(t=r=o,n=i=a)},Xs.lineEnd=function(){e(t,n)}}function en(e){function t(t,n){e.moveTo(t+a,n),e.arc(t,n,a,0,Ua)}function n(t,n){e.moveTo(t,n),s.point=r}function r(t,n){e.lineTo(t,n)}function i(){s.point=t}function o(){e.closePath()}var a=4.5,s={point:t,lineStart:function(){s.point=n},lineEnd:i,polygonStart:function(){s.lineEnd=o},polygonEnd:function(){s.lineEnd=i,s.point=t},pointRadius:function(e){return a=e,s},result:w};return s}function tn(e){function t(e){return(s?r:n)(e)}function n(t){return on(t,function(n,r){n=e(n,r),t.point(n[0],n[1])})}function r(t){function n(n,r){n=e(n,r),t.point(n[0],n[1])}function r(){b=NaN,C.point=o,t.lineStart()}function o(n,r){var o=mt([n,r]),a=e(n,r);i(b,_,y,w,x,S,b=a[0],_=a[1],y=n,w=o[0],x=o[1],S=o[2],s,t),t.point(b,_)}function a(){C.point=n,t.lineEnd()}function u(){r(),C.point=l,C.lineEnd=c}function l(e,t){o(h=e,f=t),p=b,d=_,m=w,g=x,v=S,C.point=o}function c(){i(b,_,y,w,x,S,p,d,h,m,g,v,s,t),C.lineEnd=a,a()}var h,f,p,d,m,g,v,y,b,_,w,x,S,C={point:n,lineStart:r,lineEnd:a,polygonStart:function(){t.polygonStart(),C.lineStart=u},polygonEnd:function(){t.polygonEnd(),C.lineStart=r}};return C}function i(t,n,r,s,u,l,c,h,f,p,d,m,g,v){var y=c-t,b=h-n,_=y*y+b*b;if(_>4*o&&g--){var w=s+p,x=u+d,S=l+m,C=Math.sqrt(w*w+x*x+S*S),k=Math.asin(S/=C),P=_a(_a(S)-1)<Fa||_a(r-f)<Fa?(r+f)/2:Math.atan2(x,w),M=e(P,k),T=M[0],A=M[1],O=T-t,E=A-n,$=b*O-y*E;($*$/_>o||_a((y*O+b*E)/_-.5)>.3||a>s*p+u*d+l*m)&&(i(t,n,r,s,u,l,T,A,P,w/=C,x/=C,S,g,v),v.point(T,A),i(T,A,P,w,x,S,c,h,f,p,d,m,g,v))}}var o=.5,a=Math.cos(30*za),s=16;return t.precision=function(e){return arguments.length?(s=(o=e*e)>0&&16,t):Math.sqrt(o)},t}function nn(e){var t=tn(function(t,n){return e([t*Ba,n*Ba])});return function(e){return un(t(e))}}function rn(e){this.stream=e}function on(e,t){return{point:t,sphere:function(){e.sphere()},lineStart:function(){e.lineStart()},lineEnd:function(){e.lineEnd()},polygonStart:function(){e.polygonStart()},polygonEnd:function(){e.polygonEnd()}}}function an(e){return sn(function(){return e})()}function sn(e){function t(e){return e=s(e[0]*za,e[1]*za),[e[0]*f+u,l-e[1]*f]}function n(e){return e=s.invert((e[0]-u)/f,(l-e[1])/f),e&&[e[0]*Ba,e[1]*Ba]}function r(){s=Tt(a=hn(v,b,_),o);var e=o(m,g);return u=p-e[0]*f,l=d+e[1]*f,i()}function i(){return c&&(c.valid=!1,c=null),t}var o,a,s,u,l,c,h=tn(function(e,t){return e=o(e,t),[e[0]*f+u,l-e[1]*f]}),f=150,p=480,d=250,m=0,g=0,v=0,b=0,_=0,w=Rs,x=y,S=null,C=null;
return t.stream=function(e){return c&&(c.valid=!1),c=un(w(a,h(x(e)))),c.valid=!0,c},t.clipAngle=function(e){return arguments.length?(w=null==e?(S=e,Rs):Vt((S=+e)*za),i()):S},t.clipExtent=function(e){return arguments.length?(C=e,x=e?zt(e[0][0],e[0][1],e[1][0],e[1][1]):y,i()):C},t.scale=function(e){return arguments.length?(f=+e,r()):f},t.translate=function(e){return arguments.length?(p=+e[0],d=+e[1],r()):[p,d]},t.center=function(e){return arguments.length?(m=e[0]%360*za,g=e[1]%360*za,r()):[m*Ba,g*Ba]},t.rotate=function(e){return arguments.length?(v=e[0]%360*za,b=e[1]%360*za,_=e.length>2?e[2]%360*za:0,r()):[v*Ba,b*Ba,_*Ba]},ua.rebind(t,h,"precision"),function(){return o=e.apply(this,arguments),t.invert=o.invert&&n,r()}}function un(e){return on(e,function(t,n){e.point(t*za,n*za)})}function ln(e,t){return[e,t]}function cn(e,t){return[e>Ra?e-Ua:-Ra>e?e+Ua:e,t]}function hn(e,t,n){return e?t||n?Tt(pn(e),dn(t,n)):pn(e):t||n?dn(t,n):cn}function fn(e){return function(t,n){return t+=e,[t>Ra?t-Ua:-Ra>t?t+Ua:t,n]}}function pn(e){var t=fn(e);return t.invert=fn(-e),t}function dn(e,t){function n(e,t){var n=Math.cos(t),s=Math.cos(e)*n,u=Math.sin(e)*n,l=Math.sin(t),c=l*r+s*i;return[Math.atan2(u*o-c*a,s*r-l*i),te(c*o+u*a)]}var r=Math.cos(e),i=Math.sin(e),o=Math.cos(t),a=Math.sin(t);return n.invert=function(e,t){var n=Math.cos(t),s=Math.cos(e)*n,u=Math.sin(e)*n,l=Math.sin(t),c=l*o-u*a;return[Math.atan2(u*o+l*a,s*r+c*i),te(c*r-s*i)]},n}function mn(e,t){var n=Math.cos(e),r=Math.sin(e);return function(i,o,a,s){var u=a*t;null!=i?(i=gn(n,i),o=gn(n,o),(a>0?o>i:i>o)&&(i+=a*Ua)):(i=e+a*Ua,o=e-.5*u);for(var l,c=i;a>0?c>o:o>c;c-=u)s.point((l=wt([n,-r*Math.cos(c),-r*Math.sin(c)]))[0],l[1])}}function gn(e,t){var n=mt(t);n[0]-=e,_t(n);var r=ee(-n[1]);return((-n[2]<0?-r:r)+2*Math.PI-Fa)%(2*Math.PI)}function vn(e,t,n){var r=ua.range(e,t-Fa,n).concat(t);return function(e){return r.map(function(t){return[e,t]})}}function yn(e,t,n){var r=ua.range(e,t-Fa,n).concat(t);return function(e){return r.map(function(t){return[t,e]})}}function bn(e){return e.source}function _n(e){return e.target}function wn(e,t,n,r){var i=Math.cos(t),o=Math.sin(t),a=Math.cos(r),s=Math.sin(r),u=i*Math.cos(e),l=i*Math.sin(e),c=a*Math.cos(n),h=a*Math.sin(n),f=2*Math.asin(Math.sqrt(oe(r-t)+i*a*oe(n-e))),p=1/Math.sin(f),d=f?function(e){var t=Math.sin(e*=f)*p,n=Math.sin(f-e)*p,r=n*u+t*c,i=n*l+t*h,a=n*o+t*s;return[Math.atan2(i,r)*Ba,Math.atan2(a,Math.sqrt(r*r+i*i))*Ba]}:function(){return[e*Ba,t*Ba]};return d.distance=f,d}function xn(){function e(e,i){var o=Math.sin(i*=za),a=Math.cos(i),s=_a((e*=za)-t),u=Math.cos(s);Ks+=Math.atan2(Math.sqrt((s=a*Math.sin(s))*s+(s=r*o-n*a*u)*s),n*o+r*a*u),t=e,n=o,r=a}var t,n,r;Zs.point=function(i,o){t=i*za,n=Math.sin(o*=za),r=Math.cos(o),Zs.point=e},Zs.lineEnd=function(){Zs.point=Zs.lineEnd=w}}function Sn(e,t){function n(t,n){var r=Math.cos(t),i=Math.cos(n),o=e(r*i);return[o*i*Math.sin(t),o*Math.sin(n)]}return n.invert=function(e,n){var r=Math.sqrt(e*e+n*n),i=t(r),o=Math.sin(i),a=Math.cos(i);return[Math.atan2(e*o,r*a),Math.asin(r&&n*o/r)]},n}function Cn(e,t){function n(e,t){a>0?-qa+Fa>t&&(t=-qa+Fa):t>qa-Fa&&(t=qa-Fa);var n=a/Math.pow(i(t),o);return[n*Math.sin(o*e),a-n*Math.cos(o*e)]}var r=Math.cos(e),i=function(e){return Math.tan(Ra/4+e/2)},o=e===t?Math.sin(e):Math.log(r/Math.cos(t))/Math.log(i(t)/i(e)),a=r*Math.pow(i(e),o)/o;return o?(n.invert=function(e,t){var n=a-t,r=Q(o)*Math.sqrt(e*e+n*n);return[Math.atan2(e,n)/o,2*Math.atan(Math.pow(a/r,1/o))-qa]},n):Pn}function kn(e,t){function n(e,t){var n=o-t;return[n*Math.sin(i*e),o-n*Math.cos(i*e)]}var r=Math.cos(e),i=e===t?Math.sin(e):(r-Math.cos(t))/(t-e),o=r/i+e;return _a(i)<Fa?ln:(n.invert=function(e,t){var n=o-t;return[Math.atan2(e,n)/i,o-Q(i)*Math.sqrt(e*e+n*n)]},n)}function Pn(e,t){return[e,Math.log(Math.tan(Ra/4+t/2))]}function Mn(e){var t,n=an(e),r=n.scale,i=n.translate,o=n.clipExtent;return n.scale=function(){var e=r.apply(n,arguments);return e===n?t?n.clipExtent(null):n:e},n.translate=function(){var e=i.apply(n,arguments);return e===n?t?n.clipExtent(null):n:e},n.clipExtent=function(e){var a=o.apply(n,arguments);if(a===n){if(t=null==e){var s=Ra*r(),u=i();o([[u[0]-s,u[1]-s],[u[0]+s,u[1]+s]])}}else t&&(a=null);return a},n.clipExtent(null)}function Tn(e,t){return[Math.log(Math.tan(Ra/4+t/2)),-e]}function An(e){return e[0]}function On(e){return e[1]}function En(e){for(var t=e.length,n=[0,1],r=2,i=2;t>i;i++){for(;r>1&&J(e[n[r-2]],e[n[r-1]],e[i])<=0;)--r;n[r++]=i}return n.slice(0,r)}function $n(e,t){return e[0]-t[0]||e[1]-t[1]}function Nn(e,t,n){return(n[0]-t[0])*(e[1]-t[1])<(n[1]-t[1])*(e[0]-t[0])}function In(e,t,n,r){var i=e[0],o=n[0],a=t[0]-i,s=r[0]-o,u=e[1],l=n[1],c=t[1]-u,h=r[1]-l,f=(s*(u-l)-h*(i-o))/(h*a-s*c);return[i+f*a,u+f*c]}function Dn(e){var t=e[0],n=e[e.length-1];return!(t[0]-n[0]||t[1]-n[1])}function jn(){rr(this),this.edge=this.site=this.circle=null}function Fn(e){var t=lu.pop()||new jn;return t.site=e,t}function Ln(e){Yn(e),au.remove(e),lu.push(e),rr(e)}function Rn(e){var t=e.circle,n=t.x,r=t.cy,i={x:n,y:r},o=e.P,a=e.N,s=[e];Ln(e);for(var u=o;u.circle&&_a(n-u.circle.x)<Fa&&_a(r-u.circle.cy)<Fa;)o=u.P,s.unshift(u),Ln(u),u=o;s.unshift(u),Yn(u);for(var l=a;l.circle&&_a(n-l.circle.x)<Fa&&_a(r-l.circle.cy)<Fa;)a=l.N,s.push(l),Ln(l),l=a;s.push(l),Yn(l);var c,h=s.length;for(c=1;h>c;++c)l=s[c],u=s[c-1],er(l.edge,u.site,l.site,i);u=s[0],l=s[h-1],l.edge=Qn(u.site,l.site,null,i),Wn(u),Wn(l)}function Un(e){for(var t,n,r,i,o=e.x,a=e.y,s=au._;s;)if(r=Vn(s,a)-o,r>Fa)s=s.L;else{if(i=o-qn(s,a),!(i>Fa)){r>-Fa?(t=s.P,n=s):i>-Fa?(t=s,n=s.N):t=n=s;break}if(!s.R){t=s;break}s=s.R}var u=Fn(e);if(au.insert(t,u),t||n){if(t===n)return Yn(t),n=Fn(t.site),au.insert(u,n),u.edge=n.edge=Qn(t.site,u.site),Wn(t),void Wn(n);if(!n)return void(u.edge=Qn(t.site,u.site));Yn(t),Yn(n);var l=t.site,c=l.x,h=l.y,f=e.x-c,p=e.y-h,d=n.site,m=d.x-c,g=d.y-h,v=2*(f*g-p*m),y=f*f+p*p,b=m*m+g*g,_={x:(g*y-p*b)/v+c,y:(f*b-m*y)/v+h};er(n.edge,l,d,_),u.edge=Qn(l,e,null,_),n.edge=Qn(e,d,null,_),Wn(t),Wn(n)}}function Vn(e,t){var n=e.site,r=n.x,i=n.y,o=i-t;if(!o)return r;var a=e.P;if(!a)return-(1/0);n=a.site;var s=n.x,u=n.y,l=u-t;if(!l)return s;var c=s-r,h=1/o-1/l,f=c/l;return h?(-f+Math.sqrt(f*f-2*h*(c*c/(-2*l)-u+l/2+i-o/2)))/h+r:(r+s)/2}function qn(e,t){var n=e.N;if(n)return Vn(n,t);var r=e.site;return r.y===t?r.x:1/0}function zn(e){this.site=e,this.edges=[]}function Bn(e){for(var t,n,r,i,o,a,s,u,l,c,h=e[0][0],f=e[1][0],p=e[0][1],d=e[1][1],m=ou,g=m.length;g--;)if(o=m[g],o&&o.prepare())for(s=o.edges,u=s.length,a=0;u>a;)c=s[a].end(),r=c.x,i=c.y,l=s[++a%u].start(),t=l.x,n=l.y,(_a(r-t)>Fa||_a(i-n)>Fa)&&(s.splice(a,0,new tr(Jn(o.site,c,_a(r-h)<Fa&&d-i>Fa?{x:h,y:_a(t-h)<Fa?n:d}:_a(i-d)<Fa&&f-r>Fa?{x:_a(n-d)<Fa?t:f,y:d}:_a(r-f)<Fa&&i-p>Fa?{x:f,y:_a(t-f)<Fa?n:p}:_a(i-p)<Fa&&r-h>Fa?{x:_a(n-p)<Fa?t:h,y:p}:null),o.site,null)),++u)}function Hn(e,t){return t.angle-e.angle}function Gn(){rr(this),this.x=this.y=this.arc=this.site=this.cy=null}function Wn(e){var t=e.P,n=e.N;if(t&&n){var r=t.site,i=e.site,o=n.site;if(r!==o){var a=i.x,s=i.y,u=r.x-a,l=r.y-s,c=o.x-a,h=o.y-s,f=2*(u*h-l*c);if(!(f>=-La)){var p=u*u+l*l,d=c*c+h*h,m=(h*p-l*d)/f,g=(u*d-c*p)/f,h=g+s,v=cu.pop()||new Gn;v.arc=e,v.site=i,v.x=m+a,v.y=h+Math.sqrt(m*m+g*g),v.cy=h,e.circle=v;for(var y=null,b=uu._;b;)if(v.y<b.y||v.y===b.y&&v.x<=b.x){if(!b.L){y=b.P;break}b=b.L}else{if(!b.R){y=b;break}b=b.R}uu.insert(y,v),y||(su=v)}}}}function Yn(e){var t=e.circle;t&&(t.P||(su=t.N),uu.remove(t),cu.push(t),rr(t),e.circle=null)}function Xn(e){for(var t,n=iu,r=qt(e[0][0],e[0][1],e[1][0],e[1][1]),i=n.length;i--;)t=n[i],(!Kn(t,e)||!r(t)||_a(t.a.x-t.b.x)<Fa&&_a(t.a.y-t.b.y)<Fa)&&(t.a=t.b=null,n.splice(i,1))}function Kn(e,t){var n=e.b;if(n)return!0;var r,i,o=e.a,a=t[0][0],s=t[1][0],u=t[0][1],l=t[1][1],c=e.l,h=e.r,f=c.x,p=c.y,d=h.x,m=h.y,g=(f+d)/2,v=(p+m)/2;if(m===p){if(a>g||g>=s)return;if(f>d){if(o){if(o.y>=l)return}else o={x:g,y:u};n={x:g,y:l}}else{if(o){if(o.y<u)return}else o={x:g,y:l};n={x:g,y:u}}}else if(r=(f-d)/(m-p),i=v-r*g,-1>r||r>1)if(f>d){if(o){if(o.y>=l)return}else o={x:(u-i)/r,y:u};n={x:(l-i)/r,y:l}}else{if(o){if(o.y<u)return}else o={x:(l-i)/r,y:l};n={x:(u-i)/r,y:u}}else if(m>p){if(o){if(o.x>=s)return}else o={x:a,y:r*a+i};n={x:s,y:r*s+i}}else{if(o){if(o.x<a)return}else o={x:s,y:r*s+i};n={x:a,y:r*a+i}}return e.a=o,e.b=n,!0}function Zn(e,t){this.l=e,this.r=t,this.a=this.b=null}function Qn(e,t,n,r){var i=new Zn(e,t);return iu.push(i),n&&er(i,e,t,n),r&&er(i,t,e,r),ou[e.i].edges.push(new tr(i,e,t)),ou[t.i].edges.push(new tr(i,t,e)),i}function Jn(e,t,n){var r=new Zn(e,null);return r.a=t,r.b=n,iu.push(r),r}function er(e,t,n,r){e.a||e.b?e.l===n?e.b=r:e.a=r:(e.a=r,e.l=t,e.r=n)}function tr(e,t,n){var r=e.a,i=e.b;this.edge=e,this.site=t,this.angle=n?Math.atan2(n.y-t.y,n.x-t.x):e.l===t?Math.atan2(i.x-r.x,r.y-i.y):Math.atan2(r.x-i.x,i.y-r.y)}function nr(){this._=null}function rr(e){e.U=e.C=e.L=e.R=e.P=e.N=null}function ir(e,t){var n=t,r=t.R,i=n.U;i?i.L===n?i.L=r:i.R=r:e._=r,r.U=i,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function or(e,t){var n=t,r=t.L,i=n.U;i?i.L===n?i.L=r:i.R=r:e._=r,r.U=i,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function ar(e){for(;e.L;)e=e.L;return e}function sr(e,t){var n,r,i,o=e.sort(ur).pop();for(iu=[],ou=new Array(e.length),au=new nr,uu=new nr;;)if(i=su,o&&(!i||o.y<i.y||o.y===i.y&&o.x<i.x))o.x===n&&o.y===r||(ou[o.i]=new zn(o),Un(o),n=o.x,r=o.y),o=e.pop();else{if(!i)break;Rn(i.arc)}t&&(Xn(t),Bn(t));var a={cells:ou,edges:iu};return au=uu=iu=ou=null,a}function ur(e,t){return t.y-e.y||t.x-e.x}function lr(e,t,n){return(e.x-n.x)*(t.y-e.y)-(e.x-t.x)*(n.y-e.y)}function cr(e){return e.x}function hr(e){return e.y}function fr(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function pr(e,t,n,r,i,o){if(!e(t,n,r,i,o)){var a=.5*(n+i),s=.5*(r+o),u=t.nodes;u[0]&&pr(e,u[0],n,r,a,s),u[1]&&pr(e,u[1],a,r,i,s),u[2]&&pr(e,u[2],n,s,a,o),u[3]&&pr(e,u[3],a,s,i,o)}}function dr(e,t,n,r,i,o,a){var s,u=1/0;return function l(e,c,h,f,p){if(!(c>o||h>a||r>f||i>p)){if(d=e.point){var d,m=t-e.x,g=n-e.y,v=m*m+g*g;if(u>v){var y=Math.sqrt(u=v);r=t-y,i=n-y,o=t+y,a=n+y,s=d}}for(var b=e.nodes,_=.5*(c+f),w=.5*(h+p),x=t>=_,S=n>=w,C=S<<1|x,k=C+4;k>C;++C)if(e=b[3&C])switch(3&C){case 0:l(e,c,h,_,w);break;case 1:l(e,_,h,f,w);break;case 2:l(e,c,w,_,p);break;case 3:l(e,_,w,f,p)}}}(e,r,i,o,a),s}function mr(e,t){e=ua.rgb(e),t=ua.rgb(t);var n=e.r,r=e.g,i=e.b,o=t.r-n,a=t.g-r,s=t.b-i;return function(e){return"#"+_e(Math.round(n+o*e))+_e(Math.round(r+a*e))+_e(Math.round(i+s*e))}}function gr(e,t){var n,r={},i={};for(n in e)n in t?r[n]=br(e[n],t[n]):i[n]=e[n];for(n in t)n in e||(i[n]=t[n]);return function(e){for(n in r)i[n]=r[n](e);return i}}function vr(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function yr(e,t){var n,r,i,o=fu.lastIndex=pu.lastIndex=0,a=-1,s=[],u=[];for(e+="",t+="";(n=fu.exec(e))&&(r=pu.exec(t));)(i=r.index)>o&&(i=t.slice(o,i),s[a]?s[a]+=i:s[++a]=i),(n=n[0])===(r=r[0])?s[a]?s[a]+=r:s[++a]=r:(s[++a]=null,u.push({i:a,x:vr(n,r)})),o=pu.lastIndex;return o<t.length&&(i=t.slice(o),s[a]?s[a]+=i:s[++a]=i),s.length<2?u[0]?(t=u[0].x,function(e){return t(e)+""}):function(){return t}:(t=u.length,function(e){for(var n,r=0;t>r;++r)s[(n=u[r]).i]=n.x(e);return s.join("")})}function br(e,t){for(var n,r=ua.interpolators.length;--r>=0&&!(n=ua.interpolators[r](e,t)););return n}function _r(e,t){var n,r=[],i=[],o=e.length,a=t.length,s=Math.min(e.length,t.length);for(n=0;s>n;++n)r.push(br(e[n],t[n]));for(;o>n;++n)i[n]=e[n];for(;a>n;++n)i[n]=t[n];return function(e){for(n=0;s>n;++n)i[n]=r[n](e);return i}}function wr(e){return function(t){return 0>=t?0:t>=1?1:e(t)}}function xr(e){return function(t){return 1-e(1-t)}}function Sr(e){return function(t){return.5*(.5>t?e(2*t):2-e(2-2*t))}}function Cr(e){return e*e}function kr(e){return e*e*e}function Pr(e){if(0>=e)return 0;if(e>=1)return 1;var t=e*e,n=t*e;return 4*(.5>e?n:3*(e-t)+n-.75)}function Mr(e){return function(t){return Math.pow(t,e)}}function Tr(e){return 1-Math.cos(e*qa)}function Ar(e){return Math.pow(2,10*(e-1))}function Or(e){return 1-Math.sqrt(1-e*e)}function Er(e,t){var n;return arguments.length<2&&(t=.45),arguments.length?n=t/Ua*Math.asin(1/e):(e=1,n=t/4),function(r){return 1+e*Math.pow(2,-10*r)*Math.sin((r-n)*Ua/t)}}function $r(e){return e||(e=1.70158),function(t){return t*t*((e+1)*t-e)}}function Nr(e){return 1/2.75>e?7.5625*e*e:2/2.75>e?7.5625*(e-=1.5/2.75)*e+.75:2.5/2.75>e?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}function Ir(e,t){e=ua.hcl(e),t=ua.hcl(t);var n=e.h,r=e.c,i=e.l,o=t.h-n,a=t.c-r,s=t.l-i;return isNaN(a)&&(a=0,r=isNaN(r)?t.c:r),isNaN(o)?(o=0,n=isNaN(n)?t.h:n):o>180?o-=360:-180>o&&(o+=360),function(e){return ce(n+o*e,r+a*e,i+s*e)+""}}function Dr(e,t){e=ua.hsl(e),t=ua.hsl(t);var n=e.h,r=e.s,i=e.l,o=t.h-n,a=t.s-r,s=t.l-i;return isNaN(a)&&(a=0,r=isNaN(r)?t.s:r),isNaN(o)?(o=0,n=isNaN(n)?t.h:n):o>180?o-=360:-180>o&&(o+=360),function(e){return ue(n+o*e,r+a*e,i+s*e)+""}}function jr(e,t){e=ua.lab(e),t=ua.lab(t);var n=e.l,r=e.a,i=e.b,o=t.l-n,a=t.a-r,s=t.b-i;return function(e){return fe(n+o*e,r+a*e,i+s*e)+""}}function Fr(e,t){return t-=e,function(n){return Math.round(e+t*n)}}function Lr(e){var t=[e.a,e.b],n=[e.c,e.d],r=Ur(t),i=Rr(t,n),o=Ur(Vr(n,t,-i))||0;t[0]*n[1]<n[0]*t[1]&&(t[0]*=-1,t[1]*=-1,r*=-1,i*=-1),this.rotate=(r?Math.atan2(t[1],t[0]):Math.atan2(-n[0],n[1]))*Ba,this.translate=[e.e,e.f],this.scale=[r,o],this.skew=o?Math.atan2(i,o)*Ba:0}function Rr(e,t){return e[0]*t[0]+e[1]*t[1]}function Ur(e){var t=Math.sqrt(Rr(e,e));return t&&(e[0]/=t,e[1]/=t),t}function Vr(e,t,n){return e[0]+=n*t[0],e[1]+=n*t[1],e}function qr(e){return e.length?e.pop()+",":""}function zr(e,t,n,r){if(e[0]!==t[0]||e[1]!==t[1]){var i=n.push("translate(",null,",",null,")");r.push({i:i-4,x:vr(e[0],t[0])},{i:i-2,x:vr(e[1],t[1])})}else(t[0]||t[1])&&n.push("translate("+t+")")}function Br(e,t,n,r){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),r.push({i:n.push(qr(n)+"rotate(",null,")")-2,x:vr(e,t)})):t&&n.push(qr(n)+"rotate("+t+")")}function Hr(e,t,n,r){e!==t?r.push({i:n.push(qr(n)+"skewX(",null,")")-2,x:vr(e,t)}):t&&n.push(qr(n)+"skewX("+t+")")}function Gr(e,t,n,r){if(e[0]!==t[0]||e[1]!==t[1]){var i=n.push(qr(n)+"scale(",null,",",null,")");r.push({i:i-4,x:vr(e[0],t[0])},{i:i-2,x:vr(e[1],t[1])})}else 1===t[0]&&1===t[1]||n.push(qr(n)+"scale("+t+")")}function Wr(e,t){var n=[],r=[];return e=ua.transform(e),t=ua.transform(t),zr(e.translate,t.translate,n,r),Br(e.rotate,t.rotate,n,r),Hr(e.skew,t.skew,n,r),Gr(e.scale,t.scale,n,r),e=t=null,function(e){for(var t,i=-1,o=r.length;++i<o;)n[(t=r[i]).i]=t.x(e);return n.join("")}}function Yr(e,t){return t=(t-=e=+e)||1/t,function(n){return(n-e)/t}}function Xr(e,t){return t=(t-=e=+e)||1/t,function(n){return Math.max(0,Math.min(1,(n-e)/t))}}function Kr(e){for(var t=e.source,n=e.target,r=Qr(t,n),i=[t];t!==r;)t=t.parent,i.push(t);for(var o=i.length;n!==r;)i.splice(o,0,n),n=n.parent;return i}function Zr(e){for(var t=[],n=e.parent;null!=n;)t.push(e),e=n,n=n.parent;return t.push(e),t}function Qr(e,t){if(e===t)return e;for(var n=Zr(e),r=Zr(t),i=n.pop(),o=r.pop(),a=null;i===o;)a=i,i=n.pop(),o=r.pop();return a}function Jr(e){e.fixed|=2}function ei(e){e.fixed&=-7}function ti(e){e.fixed|=4,e.px=e.x,e.py=e.y}function ni(e){e.fixed&=-5}function ri(e,t,n){var r=0,i=0;if(e.charge=0,!e.leaf)for(var o,a=e.nodes,s=a.length,u=-1;++u<s;)o=a[u],null!=o&&(ri(o,t,n),e.charge+=o.charge,r+=o.charge*o.cx,i+=o.charge*o.cy);if(e.point){e.leaf||(e.point.x+=Math.random()-.5,e.point.y+=Math.random()-.5);var l=t*n[e.point.index];e.charge+=e.pointCharge=l,r+=l*e.point.x,i+=l*e.point.y}e.cx=r/e.charge,e.cy=i/e.charge}function ii(e,t){return ua.rebind(e,t,"sort","children","value"),e.nodes=e,e.links=ci,e}function oi(e,t){for(var n=[e];null!=(e=n.pop());)if(t(e),(i=e.children)&&(r=i.length))for(var r,i;--r>=0;)n.push(i[r])}function ai(e,t){for(var n=[e],r=[];null!=(e=n.pop());)if(r.push(e),(o=e.children)&&(i=o.length))for(var i,o,a=-1;++a<i;)n.push(o[a]);for(;null!=(e=r.pop());)t(e)}function si(e){return e.children}function ui(e){return e.value}function li(e,t){return t.value-e.value}function ci(e){return ua.merge(e.map(function(e){return(e.children||[]).map(function(t){return{source:e,target:t}})}))}function hi(e){return e.x}function fi(e){return e.y}function pi(e,t,n){e.y0=t,e.y=n}function di(e){return ua.range(e.length)}function mi(e){for(var t=-1,n=e[0].length,r=[];++t<n;)r[t]=0;return r}function gi(e){for(var t,n=1,r=0,i=e[0][1],o=e.length;o>n;++n)(t=e[n][1])>i&&(r=n,i=t);return r}function vi(e){return e.reduce(yi,0)}function yi(e,t){return e+t[1]}function bi(e,t){return _i(e,Math.ceil(Math.log(t.length)/Math.LN2+1))}function _i(e,t){for(var n=-1,r=+e[0],i=(e[1]-r)/t,o=[];++n<=t;)o[n]=i*n+r;return o}function wi(e){return[ua.min(e),ua.max(e)]}function xi(e,t){return e.value-t.value}function Si(e,t){var n=e._pack_next;e._pack_next=t,t._pack_prev=e,t._pack_next=n,n._pack_prev=t}function Ci(e,t){e._pack_next=t,t._pack_prev=e}function ki(e,t){var n=t.x-e.x,r=t.y-e.y,i=e.r+t.r;return.999*i*i>n*n+r*r}function Pi(e){function t(e){c=Math.min(e.x-e.r,c),h=Math.max(e.x+e.r,h),f=Math.min(e.y-e.r,f),p=Math.max(e.y+e.r,p)}if((n=e.children)&&(l=n.length)){var n,r,i,o,a,s,u,l,c=1/0,h=-(1/0),f=1/0,p=-(1/0);if(n.forEach(Mi),r=n[0],r.x=-r.r,r.y=0,t(r),l>1&&(i=n[1],i.x=i.r,i.y=0,t(i),l>2))for(o=n[2],Oi(r,i,o),t(o),Si(r,o),r._pack_prev=o,Si(o,i),i=r._pack_next,a=3;l>a;a++){Oi(r,i,o=n[a]);var d=0,m=1,g=1;for(s=i._pack_next;s!==i;s=s._pack_next,m++)if(ki(s,o)){d=1;break}if(1==d)for(u=r._pack_prev;u!==s._pack_prev&&!ki(u,o);u=u._pack_prev,g++);d?(g>m||m==g&&i.r<r.r?Ci(r,i=s):Ci(r=u,i),a--):(Si(r,o),i=o,t(o))}var v=(c+h)/2,y=(f+p)/2,b=0;for(a=0;l>a;a++)o=n[a],o.x-=v,o.y-=y,b=Math.max(b,o.r+Math.sqrt(o.x*o.x+o.y*o.y));e.r=b,n.forEach(Ti)}}function Mi(e){e._pack_next=e._pack_prev=e}function Ti(e){delete e._pack_next,delete e._pack_prev}function Ai(e,t,n,r){var i=e.children;if(e.x=t+=r*e.x,e.y=n+=r*e.y,e.r*=r,i)for(var o=-1,a=i.length;++o<a;)Ai(i[o],t,n,r)}function Oi(e,t,n){var r=e.r+n.r,i=t.x-e.x,o=t.y-e.y;if(r&&(i||o)){var a=t.r+n.r,s=i*i+o*o;a*=a,r*=r;var u=.5+(r-a)/(2*s),l=Math.sqrt(Math.max(0,2*a*(r+s)-(r-=s)*r-a*a))/(2*s);n.x=e.x+u*i+l*o,n.y=e.y+u*o-l*i}else n.x=e.x+r,n.y=e.y}function Ei(e,t){return e.parent==t.parent?1:2}function $i(e){var t=e.children;return t.length?t[0]:e.t}function Ni(e){var t,n=e.children;return(t=n.length)?n[t-1]:e.t}function Ii(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function Di(e){for(var t,n=0,r=0,i=e.children,o=i.length;--o>=0;)t=i[o],t.z+=n,t.m+=n,n+=t.s+(r+=t.c)}function ji(e,t,n){return e.a.parent===t.parent?e.a:n}function Fi(e){return 1+ua.max(e,function(e){return e.y})}function Li(e){return e.reduce(function(e,t){return e+t.x},0)/e.length}function Ri(e){var t=e.children;return t&&t.length?Ri(t[0]):e}function Ui(e){var t,n=e.children;return n&&(t=n.length)?Ui(n[t-1]):e}function Vi(e){return{x:e.x,y:e.y,dx:e.dx,dy:e.dy}}function qi(e,t){var n=e.x+t[3],r=e.y+t[0],i=e.dx-t[1]-t[3],o=e.dy-t[0]-t[2];return 0>i&&(n+=i/2,i=0),0>o&&(r+=o/2,o=0),{x:n,y:r,dx:i,dy:o}}function zi(e){var t=e[0],n=e[e.length-1];return n>t?[t,n]:[n,t]}function Bi(e){return e.rangeExtent?e.rangeExtent():zi(e.range())}function Hi(e,t,n,r){var i=n(e[0],e[1]),o=r(t[0],t[1]);return function(e){return o(i(e))}}function Gi(e,t){var n,r=0,i=e.length-1,o=e[r],a=e[i];return o>a&&(n=r,r=i,i=n,n=o,o=a,a=n),e[r]=t.floor(o),e[i]=t.ceil(a),e}function Wi(e){return e?{floor:function(t){return Math.floor(t/e)*e},ceil:function(t){return Math.ceil(t/e)*e}}:Cu}function Yi(e,t,n,r){var i=[],o=[],a=0,s=Math.min(e.length,t.length)-1;for(e[s]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++a<=s;)i.push(n(e[a-1],e[a])),o.push(r(t[a-1],t[a]));return function(t){var n=ua.bisect(e,t,1,s)-1;return o[n](i[n](t))}}function Xi(e,t,n,r){function i(){var i=Math.min(e.length,t.length)>2?Yi:Hi,u=r?Xr:Yr;return a=i(e,t,u,n),s=i(t,e,u,br),o}function o(e){return a(e)}var a,s;return o.invert=function(e){return s(e)},o.domain=function(t){return arguments.length?(e=t.map(Number),i()):e},o.range=function(e){return arguments.length?(t=e,i()):t},o.rangeRound=function(e){return o.range(e).interpolate(Fr)},o.clamp=function(e){return arguments.length?(r=e,i()):r},o.interpolate=function(e){return arguments.length?(n=e,i()):n},o.ticks=function(t){return Ji(e,t)},o.tickFormat=function(t,n){return eo(e,t,n)},o.nice=function(t){return Zi(e,t),i()},o.copy=function(){return Xi(e,t,n,r)},i()}function Ki(e,t){return ua.rebind(e,t,"range","rangeRound","interpolate","clamp")}function Zi(e,t){return Gi(e,Wi(Qi(e,t)[2])),Gi(e,Wi(Qi(e,t)[2])),e}function Qi(e,t){null==t&&(t=10);var n=zi(e),r=n[1]-n[0],i=Math.pow(10,Math.floor(Math.log(r/t)/Math.LN10)),o=t/r*i;return.15>=o?i*=10:.35>=o?i*=5:.75>=o&&(i*=2),n[0]=Math.ceil(n[0]/i)*i,n[1]=Math.floor(n[1]/i)*i+.5*i,n[2]=i,n}function Ji(e,t){return ua.range.apply(ua,Qi(e,t))}function eo(e,t,n){var r=Qi(e,t);if(n){var i=fs.exec(n);if(i.shift(),"s"===i[8]){var o=ua.formatPrefix(Math.max(_a(r[0]),_a(r[1])));return i[7]||(i[7]="."+to(o.scale(r[2]))),i[8]="f",n=ua.format(i.join("")),function(e){return n(o.scale(e))+o.symbol}}i[7]||(i[7]="."+no(i[8],r)),n=i.join("")}else n=",."+to(r[2])+"f";return ua.format(n)}function to(e){return-Math.floor(Math.log(e)/Math.LN10+.01)}function no(e,t){var n=to(t[2]);return e in ku?Math.abs(n-to(Math.max(_a(t[0]),_a(t[1]))))+ +("e"!==e):n-2*("%"===e)}function ro(e,t,n,r){function i(e){return(n?Math.log(0>e?0:e):-Math.log(e>0?0:-e))/Math.log(t)}function o(e){return n?Math.pow(t,e):-Math.pow(t,-e)}function a(t){return e(i(t))}return a.invert=function(t){return o(e.invert(t))},a.domain=function(t){return arguments.length?(n=t[0]>=0,e.domain((r=t.map(Number)).map(i)),a):r},a.base=function(n){return arguments.length?(t=+n,e.domain(r.map(i)),a):t},a.nice=function(){var t=Gi(r.map(i),n?Math:Mu);return e.domain(t),r=t.map(o),a},a.ticks=function(){var e=zi(r),a=[],s=e[0],u=e[1],l=Math.floor(i(s)),c=Math.ceil(i(u)),h=t%1?2:t;if(isFinite(c-l)){if(n){for(;c>l;l++)for(var f=1;h>f;f++)a.push(o(l)*f);a.push(o(l))}else for(a.push(o(l));l++<c;)for(var f=h-1;f>0;f--)a.push(o(l)*f);for(l=0;a[l]<s;l++);for(c=a.length;a[c-1]>u;c--);a=a.slice(l,c)}return a},a.tickFormat=function(e,n){if(!arguments.length)return Pu;arguments.length<2?n=Pu:"function"!=typeof n&&(n=ua.format(n));var r=Math.max(1,t*e/a.ticks().length);return function(e){var a=e/o(Math.round(i(e)));return t-.5>a*t&&(a*=t),r>=a?n(e):""}},a.copy=function(){return ro(e.copy(),t,n,r)},Ki(a,e)}function io(e,t,n){function r(t){return e(i(t))}var i=oo(t),o=oo(1/t);return r.invert=function(t){return o(e.invert(t))},r.domain=function(t){return arguments.length?(e.domain((n=t.map(Number)).map(i)),r):n},r.ticks=function(e){return Ji(n,e)},r.tickFormat=function(e,t){return eo(n,e,t)},r.nice=function(e){return r.domain(Zi(n,e))},r.exponent=function(a){return arguments.length?(i=oo(t=a),o=oo(1/t),e.domain(n.map(i)),r):t},r.copy=function(){return io(e.copy(),t,n)},Ki(r,e)}function oo(e){return function(t){return 0>t?-Math.pow(-t,e):Math.pow(t,e)}}function ao(e,t){function n(n){return o[((i.get(n)||("range"===t.t?i.set(n,e.push(n)):NaN))-1)%o.length]}function r(t,n){return ua.range(e.length).map(function(e){return t+n*e})}var i,o,a;return n.domain=function(r){if(!arguments.length)return e;e=[],i=new l;for(var o,a=-1,s=r.length;++a<s;)i.has(o=r[a])||i.set(o,e.push(o));return n[t.t].apply(n,t.a)},n.range=function(e){return arguments.length?(o=e,a=0,t={t:"range",a:arguments},n):o},n.rangePoints=function(i,s){arguments.length<2&&(s=0);var u=i[0],l=i[1],c=e.length<2?(u=(u+l)/2,0):(l-u)/(e.length-1+s);return o=r(u+c*s/2,c),a=0,t={t:"rangePoints",a:arguments},n},n.rangeRoundPoints=function(i,s){arguments.length<2&&(s=0);var u=i[0],l=i[1],c=e.length<2?(u=l=Math.round((u+l)/2),0):(l-u)/(e.length-1+s)|0;return o=r(u+Math.round(c*s/2+(l-u-(e.length-1+s)*c)/2),c),a=0,t={t:"rangeRoundPoints",a:arguments},n},n.rangeBands=function(i,s,u){arguments.length<2&&(s=0),arguments.length<3&&(u=s);var l=i[1]<i[0],c=i[l-0],h=i[1-l],f=(h-c)/(e.length-s+2*u);return o=r(c+f*u,f),l&&o.reverse(),a=f*(1-s),t={t:"rangeBands",a:arguments},n},n.rangeRoundBands=function(i,s,u){arguments.length<2&&(s=0),arguments.length<3&&(u=s);var l=i[1]<i[0],c=i[l-0],h=i[1-l],f=Math.floor((h-c)/(e.length-s+2*u));return o=r(c+Math.round((h-c-(e.length-s)*f)/2),f),l&&o.reverse(),a=Math.round(f*(1-s)),t={t:"rangeRoundBands",a:arguments},n},n.rangeBand=function(){return a},n.rangeExtent=function(){return zi(t.a[0])},n.copy=function(){return ao(e,t)},n.domain(e)}function so(e,t){function o(){var n=0,r=t.length;for(s=[];++n<r;)s[n-1]=ua.quantile(e,n/r);return a}function a(e){return isNaN(e=+e)?void 0:t[ua.bisect(s,e)]}var s;return a.domain=function(t){return arguments.length?(e=t.map(r).filter(i).sort(n),o()):e},a.range=function(e){return arguments.length?(t=e,o()):t},a.quantiles=function(){return s},a.invertExtent=function(n){return n=t.indexOf(n),0>n?[NaN,NaN]:[n>0?s[n-1]:e[0],n<s.length?s[n]:e[e.length-1]]},a.copy=function(){return so(e,t)},o()}function uo(e,t,n){function r(t){return n[Math.max(0,Math.min(a,Math.floor(o*(t-e))))]}function i(){return o=n.length/(t-e),a=n.length-1,r}var o,a;return r.domain=function(n){return arguments.length?(e=+n[0],t=+n[n.length-1],i()):[e,t]},r.range=function(e){return arguments.length?(n=e,i()):n},r.invertExtent=function(t){return t=n.indexOf(t),t=0>t?NaN:t/o+e,[t,t+1/o]},r.copy=function(){return uo(e,t,n)},i()}function lo(e,t){function n(n){return n>=n?t[ua.bisect(e,n)]:void 0}return n.domain=function(t){return arguments.length?(e=t,n):e},n.range=function(e){return arguments.length?(t=e,n):t},n.invertExtent=function(n){return n=t.indexOf(n),[e[n-1],e[n]]},n.copy=function(){return lo(e,t)},n}function co(e){function t(e){return+e}return t.invert=t,t.domain=t.range=function(n){return arguments.length?(e=n.map(t),t):e},t.ticks=function(t){return Ji(e,t)},t.tickFormat=function(t,n){return eo(e,t,n)},t.copy=function(){return co(e)},t}function ho(){return 0}function fo(e){return e.innerRadius}function po(e){return e.outerRadius}function mo(e){return e.startAngle}function go(e){return e.endAngle}function vo(e){return e&&e.padAngle}function yo(e,t,n,r){return(e-n)*t-(t-r)*e>0?0:1}function bo(e,t,n,r,i){var o=e[0]-t[0],a=e[1]-t[1],s=(i?r:-r)/Math.sqrt(o*o+a*a),u=s*a,l=-s*o,c=e[0]+u,h=e[1]+l,f=t[0]+u,p=t[1]+l,d=(c+f)/2,m=(h+p)/2,g=f-c,v=p-h,y=g*g+v*v,b=n-r,_=c*p-f*h,w=(0>v?-1:1)*Math.sqrt(Math.max(0,b*b*y-_*_)),x=(_*v-g*w)/y,S=(-_*g-v*w)/y,C=(_*v+g*w)/y,k=(-_*g+v*w)/y,P=x-d,M=S-m,T=C-d,A=k-m;return P*P+M*M>T*T+A*A&&(x=C,S=k),[[x-u,S-l],[x*n/b,S*n/b]]}function _o(e){function t(t){function a(){l.push("M",o(e(c),s))}for(var u,l=[],c=[],h=-1,f=t.length,p=Pe(n),d=Pe(r);++h<f;)i.call(this,u=t[h],h)?c.push([+p.call(this,u,h),+d.call(this,u,h)]):c.length&&(a(),c=[]);return c.length&&a(),l.length?l.join(""):null}var n=An,r=On,i=At,o=wo,a=o.key,s=.7;return t.x=function(e){return arguments.length?(n=e,t):n},t.y=function(e){return arguments.length?(r=e,t):r},t.defined=function(e){return arguments.length?(i=e,t):i},t.interpolate=function(e){return arguments.length?(a="function"==typeof e?o=e:(o=Nu.get(e)||wo).key,t):a},t.tension=function(e){return arguments.length?(s=e,t):s},t}function wo(e){return e.length>1?e.join("L"):e+"Z"}function xo(e){return e.join("L")+"Z"}function So(e){for(var t=0,n=e.length,r=e[0],i=[r[0],",",r[1]];++t<n;)i.push("H",(r[0]+(r=e[t])[0])/2,"V",r[1]);return n>1&&i.push("H",r[0]),i.join("")}function Co(e){for(var t=0,n=e.length,r=e[0],i=[r[0],",",r[1]];++t<n;)i.push("V",(r=e[t])[1],"H",r[0]);return i.join("")}function ko(e){for(var t=0,n=e.length,r=e[0],i=[r[0],",",r[1]];++t<n;)i.push("H",(r=e[t])[0],"V",r[1]);return i.join("")}function Po(e,t){return e.length<4?wo(e):e[1]+Ao(e.slice(1,-1),Oo(e,t))}function Mo(e,t){return e.length<3?xo(e):e[0]+Ao((e.push(e[0]),e),Oo([e[e.length-2]].concat(e,[e[1]]),t))}function To(e,t){return e.length<3?wo(e):e[0]+Ao(e,Oo(e,t))}function Ao(e,t){if(t.length<1||e.length!=t.length&&e.length!=t.length+2)return wo(e);var n=e.length!=t.length,r="",i=e[0],o=e[1],a=t[0],s=a,u=1;if(n&&(r+="Q"+(o[0]-2*a[0]/3)+","+(o[1]-2*a[1]/3)+","+o[0]+","+o[1],i=e[1],u=2),t.length>1){s=t[1],o=e[u],u++,r+="C"+(i[0]+a[0])+","+(i[1]+a[1])+","+(o[0]-s[0])+","+(o[1]-s[1])+","+o[0]+","+o[1];for(var l=2;l<t.length;l++,u++)o=e[u],s=t[l],r+="S"+(o[0]-s[0])+","+(o[1]-s[1])+","+o[0]+","+o[1]}if(n){var c=e[u];r+="Q"+(o[0]+2*s[0]/3)+","+(o[1]+2*s[1]/3)+","+c[0]+","+c[1]}return r}function Oo(e,t){for(var n,r=[],i=(1-t)/2,o=e[0],a=e[1],s=1,u=e.length;++s<u;)n=o,o=a,a=e[s],r.push([i*(a[0]-n[0]),i*(a[1]-n[1])]);return r}function Eo(e){if(e.length<3)return wo(e);var t=1,n=e.length,r=e[0],i=r[0],o=r[1],a=[i,i,i,(r=e[1])[0]],s=[o,o,o,r[1]],u=[i,",",o,"L",Do(ju,a),",",Do(ju,s)];for(e.push(e[n-1]);++t<=n;)r=e[t],a.shift(),a.push(r[0]),s.shift(),s.push(r[1]),jo(u,a,s);return e.pop(),u.push("L",r),u.join("")}function $o(e){if(e.length<4)return wo(e);for(var t,n=[],r=-1,i=e.length,o=[0],a=[0];++r<3;)t=e[r],o.push(t[0]),a.push(t[1]);for(n.push(Do(ju,o)+","+Do(ju,a)),--r;++r<i;)t=e[r],o.shift(),o.push(t[0]),a.shift(),a.push(t[1]),jo(n,o,a);return n.join("")}function No(e){for(var t,n,r=-1,i=e.length,o=i+4,a=[],s=[];++r<4;)n=e[r%i],a.push(n[0]),s.push(n[1]);for(t=[Do(ju,a),",",Do(ju,s)],--r;++r<o;)n=e[r%i],a.shift(),a.push(n[0]),s.shift(),s.push(n[1]),jo(t,a,s);return t.join("")}function Io(e,t){var n=e.length-1;if(n)for(var r,i,o=e[0][0],a=e[0][1],s=e[n][0]-o,u=e[n][1]-a,l=-1;++l<=n;)r=e[l],i=l/n,r[0]=t*r[0]+(1-t)*(o+i*s),r[1]=t*r[1]+(1-t)*(a+i*u);return Eo(e)}function Do(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function jo(e,t,n){e.push("C",Do(Iu,t),",",Do(Iu,n),",",Do(Du,t),",",Do(Du,n),",",Do(ju,t),",",Do(ju,n))}function Fo(e,t){return(t[1]-e[1])/(t[0]-e[0])}function Lo(e){for(var t=0,n=e.length-1,r=[],i=e[0],o=e[1],a=r[0]=Fo(i,o);++t<n;)r[t]=(a+(a=Fo(i=o,o=e[t+1])))/2;return r[t]=a,r}function Ro(e){for(var t,n,r,i,o=[],a=Lo(e),s=-1,u=e.length-1;++s<u;)t=Fo(e[s],e[s+1]),_a(t)<Fa?a[s]=a[s+1]=0:(n=a[s]/t,r=a[s+1]/t,i=n*n+r*r,i>9&&(i=3*t/Math.sqrt(i),a[s]=i*n,a[s+1]=i*r));for(s=-1;++s<=u;)i=(e[Math.min(u,s+1)][0]-e[Math.max(0,s-1)][0])/(6*(1+a[s]*a[s])),o.push([i||0,a[s]*i||0]);return o}function Uo(e){return e.length<3?wo(e):e[0]+Ao(e,Ro(e))}function Vo(e){for(var t,n,r,i=-1,o=e.length;++i<o;)t=e[i],n=t[0],r=t[1]-qa,t[0]=n*Math.cos(r),t[1]=n*Math.sin(r);return e}function qo(e){function t(t){function u(){m.push("M",s(e(v),h),c,l(e(g.reverse()),h),"Z")}for(var f,p,d,m=[],g=[],v=[],y=-1,b=t.length,_=Pe(n),w=Pe(i),x=n===r?function(){return p}:Pe(r),S=i===o?function(){return d}:Pe(o);++y<b;)a.call(this,f=t[y],y)?(g.push([p=+_.call(this,f,y),d=+w.call(this,f,y)]),v.push([+x.call(this,f,y),+S.call(this,f,y)])):g.length&&(u(),g=[],v=[]);return g.length&&u(),m.length?m.join(""):null}var n=An,r=An,i=0,o=On,a=At,s=wo,u=s.key,l=s,c="L",h=.7;return t.x=function(e){return arguments.length?(n=r=e,t):r},t.x0=function(e){return arguments.length?(n=e,t):n},t.x1=function(e){return arguments.length?(r=e,t):r},t.y=function(e){return arguments.length?(i=o=e,t):o},t.y0=function(e){return arguments.length?(i=e,t):i},t.y1=function(e){return arguments.length?(o=e,t):o},t.defined=function(e){return arguments.length?(a=e,t):a},t.interpolate=function(e){return arguments.length?(u="function"==typeof e?s=e:(s=Nu.get(e)||wo).key,l=s.reverse||s,c=s.closed?"M":"L",t):u},t.tension=function(e){return arguments.length?(h=e,t):h},t}function zo(e){return e.radius}function Bo(e){return[e.x,e.y]}function Ho(e){return function(){var t=e.apply(this,arguments),n=t[0],r=t[1]-qa;return[n*Math.cos(r),n*Math.sin(r)]}}function Go(){return 64}function Wo(){return"circle"}function Yo(e){var t=Math.sqrt(e/Ra);return"M0,"+t+"A"+t+","+t+" 0 1,1 0,"+-t+"A"+t+","+t+" 0 1,1 0,"+t+"Z"}function Xo(e){return function(){var t,n,r;(t=this[e])&&(r=t[n=t.active])&&(r.timer.c=null,r.timer.t=NaN,--t.count?delete t[n]:delete this[e],t.active+=.5,r.event&&r.event.interrupt.call(this,this.__data__,r.index))}}function Ko(e,t,n){return ka(e,zu),e.namespace=t,e.id=n,e}function Zo(e,t,n,r){var i=e.id,o=e.namespace;return z(e,"function"==typeof n?function(e,a,s){
e[o][i].tween.set(t,r(n.call(e,e.__data__,a,s)))}:(n=r(n),function(e){e[o][i].tween.set(t,n)}))}function Qo(e){return null==e&&(e=""),function(){this.textContent=e}}function Jo(e){return null==e?"__transition__":"__transition_"+e+"__"}function ea(e,t,n,r,i){function o(e){var t=m.delay;return c.t=t+u,e>=t?a(e-t):void(c.c=a)}function a(n){var i=d.active,o=d[i];o&&(o.timer.c=null,o.timer.t=NaN,--d.count,delete d[i],o.event&&o.event.interrupt.call(e,e.__data__,o.index));for(var a in d)if(r>+a){var l=d[a];l.timer.c=null,l.timer.t=NaN,--d.count,delete d[a]}c.c=s,Ee(function(){return c.c&&s(n||1)&&(c.c=null,c.t=NaN),1},0,u),d.active=r,m.event&&m.event.start.call(e,e.__data__,t),p=[],m.tween.forEach(function(n,r){(r=r.call(e,e.__data__,t))&&p.push(r)}),f=m.ease,h=m.duration}function s(i){for(var o=i/h,a=f(o),s=p.length;s>0;)p[--s].call(e,a);return o>=1?(m.event&&m.event.end.call(e,e.__data__,t),--d.count?delete d[r]:delete e[n],1):void 0}var u,c,h,f,p,d=e[n]||(e[n]={active:0,count:0}),m=d[r];m||(u=i.time,c=Ee(o,0,u),m=d[r]={tween:new l,time:u,timer:c,delay:i.delay,duration:i.duration,ease:i.ease,index:t},i=null,++d.count)}function ta(e,t,n){e.attr("transform",function(e){var r=t(e);return"translate("+(isFinite(r)?r:n(e))+",0)"})}function na(e,t,n){e.attr("transform",function(e){var r=t(e);return"translate(0,"+(isFinite(r)?r:n(e))+")"})}function ra(e){return e.toISOString()}function ia(e,t,n){function r(t){return e(t)}function i(e,n){var r=e[1]-e[0],i=r/n,o=ua.bisect(Qu,i);return o==Qu.length?[t.year,Qi(e.map(function(e){return e/31536e6}),n)[2]]:o?t[i/Qu[o-1]<Qu[o]/i?o-1:o]:[tl,Qi(e,n)[2]]}return r.invert=function(t){return oa(e.invert(t))},r.domain=function(t){return arguments.length?(e.domain(t),r):e.domain().map(oa)},r.nice=function(e,t){function n(n){return!isNaN(n)&&!e.range(n,oa(+n+1),t).length}var o=r.domain(),a=zi(o),s=null==e?i(a,10):"number"==typeof e&&i(a,e);return s&&(e=s[0],t=s[1]),r.domain(Gi(o,t>1?{floor:function(t){for(;n(t=e.floor(t));)t=oa(t-1);return t},ceil:function(t){for(;n(t=e.ceil(t));)t=oa(+t+1);return t}}:e))},r.ticks=function(e,t){var n=zi(r.domain()),o=null==e?i(n,10):"number"==typeof e?i(n,e):!e.range&&[{range:e},t];return o&&(e=o[0],t=o[1]),e.range(n[0],oa(+n[1]+1),1>t?1:t)},r.tickFormat=function(){return n},r.copy=function(){return ia(e.copy(),t,n)},Ki(r,e)}function oa(e){return new Date(e)}function aa(e){return JSON.parse(e.responseText)}function sa(e){var t=ha.createRange();return t.selectNode(ha.body),t.createContextualFragment(e.responseText)}var ua={version:"3.5.17"},la=[].slice,ca=function(e){return la.call(e)},ha=this.document;if(ha)try{ca(ha.documentElement.childNodes)[0].nodeType}catch(fa){ca=function(e){for(var t=e.length,n=new Array(t);t--;)n[t]=e[t];return n}}if(Date.now||(Date.now=function(){return+new Date}),ha)try{ha.createElement("DIV").style.setProperty("opacity",0,"")}catch(pa){var da=this.Element.prototype,ma=da.setAttribute,ga=da.setAttributeNS,va=this.CSSStyleDeclaration.prototype,ya=va.setProperty;da.setAttribute=function(e,t){ma.call(this,e,t+"")},da.setAttributeNS=function(e,t,n){ga.call(this,e,t,n+"")},va.setProperty=function(e,t,n){ya.call(this,e,t+"",n)}}ua.ascending=n,ua.descending=function(e,t){return e>t?-1:t>e?1:t>=e?0:NaN},ua.min=function(e,t){var n,r,i=-1,o=e.length;if(1===arguments.length){for(;++i<o;)if(null!=(r=e[i])&&r>=r){n=r;break}for(;++i<o;)null!=(r=e[i])&&n>r&&(n=r)}else{for(;++i<o;)if(null!=(r=t.call(e,e[i],i))&&r>=r){n=r;break}for(;++i<o;)null!=(r=t.call(e,e[i],i))&&n>r&&(n=r)}return n},ua.max=function(e,t){var n,r,i=-1,o=e.length;if(1===arguments.length){for(;++i<o;)if(null!=(r=e[i])&&r>=r){n=r;break}for(;++i<o;)null!=(r=e[i])&&r>n&&(n=r)}else{for(;++i<o;)if(null!=(r=t.call(e,e[i],i))&&r>=r){n=r;break}for(;++i<o;)null!=(r=t.call(e,e[i],i))&&r>n&&(n=r)}return n},ua.extent=function(e,t){var n,r,i,o=-1,a=e.length;if(1===arguments.length){for(;++o<a;)if(null!=(r=e[o])&&r>=r){n=i=r;break}for(;++o<a;)null!=(r=e[o])&&(n>r&&(n=r),r>i&&(i=r))}else{for(;++o<a;)if(null!=(r=t.call(e,e[o],o))&&r>=r){n=i=r;break}for(;++o<a;)null!=(r=t.call(e,e[o],o))&&(n>r&&(n=r),r>i&&(i=r))}return[n,i]},ua.sum=function(e,t){var n,r=0,o=e.length,a=-1;if(1===arguments.length)for(;++a<o;)i(n=+e[a])&&(r+=n);else for(;++a<o;)i(n=+t.call(e,e[a],a))&&(r+=n);return r},ua.mean=function(e,t){var n,o=0,a=e.length,s=-1,u=a;if(1===arguments.length)for(;++s<a;)i(n=r(e[s]))?o+=n:--u;else for(;++s<a;)i(n=r(t.call(e,e[s],s)))?o+=n:--u;return u?o/u:void 0},ua.quantile=function(e,t){var n=(e.length-1)*t+1,r=Math.floor(n),i=+e[r-1],o=n-r;return o?i+o*(e[r]-i):i},ua.median=function(e,t){var o,a=[],s=e.length,u=-1;if(1===arguments.length)for(;++u<s;)i(o=r(e[u]))&&a.push(o);else for(;++u<s;)i(o=r(t.call(e,e[u],u)))&&a.push(o);return a.length?ua.quantile(a.sort(n),.5):void 0},ua.variance=function(e,t){var n,o,a=e.length,s=0,u=0,l=-1,c=0;if(1===arguments.length)for(;++l<a;)i(n=r(e[l]))&&(o=n-s,s+=o/++c,u+=o*(n-s));else for(;++l<a;)i(n=r(t.call(e,e[l],l)))&&(o=n-s,s+=o/++c,u+=o*(n-s));return c>1?u/(c-1):void 0},ua.deviation=function(){var e=ua.variance.apply(this,arguments);return e?Math.sqrt(e):e};var ba=o(n);ua.bisectLeft=ba.left,ua.bisect=ua.bisectRight=ba.right,ua.bisector=function(e){return o(1===e.length?function(t,r){return n(e(t),r)}:e)},ua.shuffle=function(e,t,n){(o=arguments.length)<3&&(n=e.length,2>o&&(t=0));for(var r,i,o=n-t;o;)i=Math.random()*o--|0,r=e[o+t],e[o+t]=e[i+t],e[i+t]=r;return e},ua.permute=function(e,t){for(var n=t.length,r=new Array(n);n--;)r[n]=e[t[n]];return r},ua.pairs=function(e){for(var t,n=0,r=e.length-1,i=e[0],o=new Array(0>r?0:r);r>n;)o[n]=[t=i,i=e[++n]];return o},ua.transpose=function(e){if(!(i=e.length))return[];for(var t=-1,n=ua.min(e,a),r=new Array(n);++t<n;)for(var i,o=-1,s=r[t]=new Array(i);++o<i;)s[o]=e[o][t];return r},ua.zip=function(){return ua.transpose(arguments)},ua.keys=function(e){var t=[];for(var n in e)t.push(n);return t},ua.values=function(e){var t=[];for(var n in e)t.push(e[n]);return t},ua.entries=function(e){var t=[];for(var n in e)t.push({key:n,value:e[n]});return t},ua.merge=function(e){for(var t,n,r,i=e.length,o=-1,a=0;++o<i;)a+=e[o].length;for(n=new Array(a);--i>=0;)for(r=e[i],t=r.length;--t>=0;)n[--a]=r[t];return n};var _a=Math.abs;ua.range=function(e,t,n){if(arguments.length<3&&(n=1,arguments.length<2&&(t=e,e=0)),(t-e)/n===1/0)throw new Error("infinite range");var r,i=[],o=s(_a(n)),a=-1;if(e*=o,t*=o,n*=o,0>n)for(;(r=e+n*++a)>t;)i.push(r/o);else for(;(r=e+n*++a)<t;)i.push(r/o);return i},ua.map=function(e,t){var n=new l;if(e instanceof l)e.forEach(function(e,t){n.set(e,t)});else if(Array.isArray(e)){var r,i=-1,o=e.length;if(1===arguments.length)for(;++i<o;)n.set(i,e[i]);else for(;++i<o;)n.set(t.call(e,r=e[i],i),r)}else for(var a in e)n.set(a,e[a]);return n};var wa="__proto__",xa="\x00";u(l,{has:f,get:function(e){return this._[c(e)]},set:function(e,t){return this._[c(e)]=t},remove:p,keys:d,values:function(){var e=[];for(var t in this._)e.push(this._[t]);return e},entries:function(){var e=[];for(var t in this._)e.push({key:h(t),value:this._[t]});return e},size:m,empty:g,forEach:function(e){for(var t in this._)e.call(this,h(t),this._[t])}}),ua.nest=function(){function e(t,a,s){if(s>=o.length)return r?r.call(i,a):n?a.sort(n):a;for(var u,c,h,f,p=-1,d=a.length,m=o[s++],g=new l;++p<d;)(f=g.get(u=m(c=a[p])))?f.push(c):g.set(u,[c]);return t?(c=t(),h=function(n,r){c.set(n,e(t,r,s))}):(c={},h=function(n,r){c[n]=e(t,r,s)}),g.forEach(h),c}function t(e,n){if(n>=o.length)return e;var r=[],i=a[n++];return e.forEach(function(e,i){r.push({key:e,values:t(i,n)})}),i?r.sort(function(e,t){return i(e.key,t.key)}):r}var n,r,i={},o=[],a=[];return i.map=function(t,n){return e(n,t,0)},i.entries=function(n){return t(e(ua.map,n,0),0)},i.key=function(e){return o.push(e),i},i.sortKeys=function(e){return a[o.length-1]=e,i},i.sortValues=function(e){return n=e,i},i.rollup=function(e){return r=e,i},i},ua.set=function(e){var t=new v;if(e)for(var n=0,r=e.length;r>n;++n)t.add(e[n]);return t},u(v,{has:f,add:function(e){return this._[c(e+="")]=!0,e},remove:p,values:d,size:m,empty:g,forEach:function(e){for(var t in this._)e.call(this,h(t))}}),ua.behavior={},ua.rebind=function(e,t){for(var n,r=1,i=arguments.length;++r<i;)e[n=arguments[r]]=b(e,t,t[n]);return e};var Sa=["webkit","ms","moz","Moz","o","O"];ua.dispatch=function(){for(var e=new x,t=-1,n=arguments.length;++t<n;)e[arguments[t]]=S(e);return e},x.prototype.on=function(e,t){var n=e.indexOf("."),r="";if(n>=0&&(r=e.slice(n+1),e=e.slice(0,n)),e)return arguments.length<2?this[e].on(r):this[e].on(r,t);if(2===arguments.length){if(null==t)for(e in this)this.hasOwnProperty(e)&&this[e].on(r,null);return this}},ua.event=null,ua.requote=function(e){return e.replace(Ca,"\\$&")};var Ca=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,ka={}.__proto__?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)e[n]=t[n]},Pa=function(e,t){return t.querySelector(e)},Ma=function(e,t){return t.querySelectorAll(e)},Ta=function(e,t){var n=e.matches||e[_(e,"matchesSelector")];return(Ta=function(e,t){return n.call(e,t)})(e,t)};"function"==typeof Sizzle&&(Pa=function(e,t){return Sizzle(e,t)[0]||null},Ma=Sizzle,Ta=Sizzle.matchesSelector),ua.selection=function(){return ua.select(ha.documentElement)};var Aa=ua.selection.prototype=[];Aa.select=function(e){var t,n,r,i,o=[];e=T(e);for(var a=-1,s=this.length;++a<s;){o.push(t=[]),t.parentNode=(r=this[a]).parentNode;for(var u=-1,l=r.length;++u<l;)(i=r[u])?(t.push(n=e.call(i,i.__data__,u,a)),n&&"__data__"in i&&(n.__data__=i.__data__)):t.push(null)}return M(o)},Aa.selectAll=function(e){var t,n,r=[];e=A(e);for(var i=-1,o=this.length;++i<o;)for(var a=this[i],s=-1,u=a.length;++s<u;)(n=a[s])&&(r.push(t=ca(e.call(n,n.__data__,s,i))),t.parentNode=n);return M(r)};var Oa="http://www.w3.org/1999/xhtml",Ea={svg:"http://www.w3.org/2000/svg",xhtml:Oa,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};ua.ns={prefix:Ea,qualify:function(e){var t=e.indexOf(":"),n=e;return t>=0&&"xmlns"!==(n=e.slice(0,t))&&(e=e.slice(t+1)),Ea.hasOwnProperty(n)?{space:Ea[n],local:e}:e}},Aa.attr=function(e,t){if(arguments.length<2){if("string"==typeof e){var n=this.node();return e=ua.ns.qualify(e),e.local?n.getAttributeNS(e.space,e.local):n.getAttribute(e)}for(t in e)this.each(O(t,e[t]));return this}return this.each(O(e,t))},Aa.classed=function(e,t){if(arguments.length<2){if("string"==typeof e){var n=this.node(),r=(e=N(e)).length,i=-1;if(t=n.classList){for(;++i<r;)if(!t.contains(e[i]))return!1}else for(t=n.getAttribute("class");++i<r;)if(!$(e[i]).test(t))return!1;return!0}for(t in e)this.each(I(t,e[t]));return this}return this.each(I(e,t))},Aa.style=function(e,n,r){var i=arguments.length;if(3>i){if("string"!=typeof e){2>i&&(n="");for(r in e)this.each(j(r,e[r],n));return this}if(2>i){var o=this.node();return t(o).getComputedStyle(o,null).getPropertyValue(e)}r=""}return this.each(j(e,n,r))},Aa.property=function(e,t){if(arguments.length<2){if("string"==typeof e)return this.node()[e];for(t in e)this.each(F(t,e[t]));return this}return this.each(F(e,t))},Aa.text=function(e){return arguments.length?this.each("function"==typeof e?function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}:null==e?function(){this.textContent=""}:function(){this.textContent=e}):this.node().textContent},Aa.html=function(e){return arguments.length?this.each("function"==typeof e?function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}:null==e?function(){this.innerHTML=""}:function(){this.innerHTML=e}):this.node().innerHTML},Aa.append=function(e){return e=L(e),this.select(function(){return this.appendChild(e.apply(this,arguments))})},Aa.insert=function(e,t){return e=L(e),t=T(t),this.select(function(){return this.insertBefore(e.apply(this,arguments),t.apply(this,arguments)||null)})},Aa.remove=function(){return this.each(R)},Aa.data=function(e,t){function n(e,n){var r,i,o,a=e.length,h=n.length,f=Math.min(a,h),p=new Array(h),d=new Array(h),m=new Array(a);if(t){var g,v=new l,y=new Array(a);for(r=-1;++r<a;)(i=e[r])&&(v.has(g=t.call(i,i.__data__,r))?m[r]=i:v.set(g,i),y[r]=g);for(r=-1;++r<h;)(i=v.get(g=t.call(n,o=n[r],r)))?i!==!0&&(p[r]=i,i.__data__=o):d[r]=U(o),v.set(g,!0);for(r=-1;++r<a;)r in y&&v.get(y[r])!==!0&&(m[r]=e[r])}else{for(r=-1;++r<f;)i=e[r],o=n[r],i?(i.__data__=o,p[r]=i):d[r]=U(o);for(;h>r;++r)d[r]=U(n[r]);for(;a>r;++r)m[r]=e[r]}d.update=p,d.parentNode=p.parentNode=m.parentNode=e.parentNode,s.push(d),u.push(p),c.push(m)}var r,i,o=-1,a=this.length;if(!arguments.length){for(e=new Array(a=(r=this[0]).length);++o<a;)(i=r[o])&&(e[o]=i.__data__);return e}var s=B([]),u=M([]),c=M([]);if("function"==typeof e)for(;++o<a;)n(r=this[o],e.call(r,r.parentNode.__data__,o));else for(;++o<a;)n(r=this[o],e);return u.enter=function(){return s},u.exit=function(){return c},u},Aa.datum=function(e){return arguments.length?this.property("__data__",e):this.property("__data__")},Aa.filter=function(e){var t,n,r,i=[];"function"!=typeof e&&(e=V(e));for(var o=0,a=this.length;a>o;o++){i.push(t=[]),t.parentNode=(n=this[o]).parentNode;for(var s=0,u=n.length;u>s;s++)(r=n[s])&&e.call(r,r.__data__,s,o)&&t.push(r)}return M(i)},Aa.order=function(){for(var e=-1,t=this.length;++e<t;)for(var n,r=this[e],i=r.length-1,o=r[i];--i>=0;)(n=r[i])&&(o&&o!==n.nextSibling&&o.parentNode.insertBefore(n,o),o=n);return this},Aa.sort=function(e){e=q.apply(this,arguments);for(var t=-1,n=this.length;++t<n;)this[t].sort(e);return this.order()},Aa.each=function(e){return z(this,function(t,n,r){e.call(t,t.__data__,n,r)})},Aa.call=function(e){var t=ca(arguments);return e.apply(t[0]=this,t),this},Aa.empty=function(){return!this.node()},Aa.node=function(){for(var e=0,t=this.length;t>e;e++)for(var n=this[e],r=0,i=n.length;i>r;r++){var o=n[r];if(o)return o}return null},Aa.size=function(){var e=0;return z(this,function(){++e}),e};var $a=[];ua.selection.enter=B,ua.selection.enter.prototype=$a,$a.append=Aa.append,$a.empty=Aa.empty,$a.node=Aa.node,$a.call=Aa.call,$a.size=Aa.size,$a.select=function(e){for(var t,n,r,i,o,a=[],s=-1,u=this.length;++s<u;){r=(i=this[s]).update,a.push(t=[]),t.parentNode=i.parentNode;for(var l=-1,c=i.length;++l<c;)(o=i[l])?(t.push(r[l]=n=e.call(i.parentNode,o.__data__,l,s)),n.__data__=o.__data__):t.push(null)}return M(a)},$a.insert=function(e,t){return arguments.length<2&&(t=H(this)),Aa.insert.call(this,e,t)},ua.select=function(t){var n;return"string"==typeof t?(n=[Pa(t,ha)],n.parentNode=ha.documentElement):(n=[t],n.parentNode=e(t)),M([n])},ua.selectAll=function(e){var t;return"string"==typeof e?(t=ca(Ma(e,ha)),t.parentNode=ha.documentElement):(t=ca(e),t.parentNode=null),M([t])},Aa.on=function(e,t,n){var r=arguments.length;if(3>r){if("string"!=typeof e){2>r&&(t=!1);for(n in e)this.each(G(n,e[n],t));return this}if(2>r)return(r=this.node()["__on"+e])&&r._;n=!1}return this.each(G(e,t,n))};var Na=ua.map({mouseenter:"mouseover",mouseleave:"mouseout"});ha&&Na.forEach(function(e){"on"+e in ha&&Na.remove(e)});var Ia,Da=0;ua.mouse=function(e){return K(e,k())};var ja=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;ua.touch=function(e,t,n){if(arguments.length<3&&(n=t,t=k().changedTouches),t)for(var r,i=0,o=t.length;o>i;++i)if((r=t[i]).identifier===n)return K(e,r)},ua.behavior.drag=function(){function e(){this.on("mousedown.drag",o).on("touchstart.drag",a)}function n(e,t,n,o,a){return function(){function s(){var e,n,r=t(f,m);r&&(e=r[0]-b[0],n=r[1]-b[1],d|=e|n,b=r,p({type:"drag",x:r[0]+l[0],y:r[1]+l[1],dx:e,dy:n}))}function u(){t(f,m)&&(v.on(o+g,null).on(a+g,null),y(d),p({type:"dragend"}))}var l,c=this,h=ua.event.target.correspondingElement||ua.event.target,f=c.parentNode,p=r.of(c,arguments),d=0,m=e(),g=".drag"+(null==m?"":"-"+m),v=ua.select(n(h)).on(o+g,s).on(a+g,u),y=X(h),b=t(f,m);i?(l=i.apply(c,arguments),l=[l.x-b[0],l.y-b[1]]):l=[0,0],p({type:"dragstart"})}}var r=P(e,"drag","dragstart","dragend"),i=null,o=n(w,ua.mouse,t,"mousemove","mouseup"),a=n(Z,ua.touch,y,"touchmove","touchend");return e.origin=function(t){return arguments.length?(i=t,e):i},ua.rebind(e,r,"on")},ua.touches=function(e,t){return arguments.length<2&&(t=k().touches),t?ca(t).map(function(t){var n=K(e,t);return n.identifier=t.identifier,n}):[]};var Fa=1e-6,La=Fa*Fa,Ra=Math.PI,Ua=2*Ra,Va=Ua-Fa,qa=Ra/2,za=Ra/180,Ba=180/Ra,Ha=Math.SQRT2,Ga=2,Wa=4;ua.interpolateZoom=function(e,t){var n,r,i=e[0],o=e[1],a=e[2],s=t[0],u=t[1],l=t[2],c=s-i,h=u-o,f=c*c+h*h;if(La>f)r=Math.log(l/a)/Ha,n=function(e){return[i+e*c,o+e*h,a*Math.exp(Ha*e*r)]};else{var p=Math.sqrt(f),d=(l*l-a*a+Wa*f)/(2*a*Ga*p),m=(l*l-a*a-Wa*f)/(2*l*Ga*p),g=Math.log(Math.sqrt(d*d+1)-d),v=Math.log(Math.sqrt(m*m+1)-m);r=(v-g)/Ha,n=function(e){var t=e*r,n=re(g),s=a/(Ga*p)*(n*ie(Ha*t+g)-ne(g));return[i+s*c,o+s*h,a*n/re(Ha*t+g)]}}return n.duration=1e3*r,n},ua.behavior.zoom=function(){function e(e){e.on(E,h).on(Xa+".zoom",p).on("dblclick.zoom",d).on(I,f)}function n(e){return[(e[0]-k.x)/k.k,(e[1]-k.y)/k.k]}function r(e){return[e[0]*k.k+k.x,e[1]*k.k+k.y]}function i(e){k.k=Math.max(T[0],Math.min(T[1],e))}function o(e,t){t=r(t),k.x+=e[0]-t[0],k.y+=e[1]-t[1]}function a(t,n,r,a){t.__chart__={x:k.x,y:k.y,k:k.k},i(Math.pow(2,a)),o(g=n,r),t=ua.select(t),A>0&&(t=t.transition().duration(A)),t.call(e.event)}function s(){w&&w.domain(_.range().map(function(e){return(e-k.x)/k.k}).map(_.invert)),S&&S.domain(x.range().map(function(e){return(e-k.y)/k.k}).map(x.invert))}function u(e){O++||e({type:"zoomstart"})}function l(e){s(),e({type:"zoom",scale:k.k,translate:[k.x,k.y]})}function c(e){--O||(e({type:"zoomend"}),g=null)}function h(){function e(){s=1,o(ua.mouse(i),f),l(a)}function r(){h.on($,null).on(N,null),p(s),c(a)}var i=this,a=D.of(i,arguments),s=0,h=ua.select(t(i)).on($,e).on(N,r),f=n(ua.mouse(i)),p=X(i);qu.call(i),u(a)}function f(){function e(){var e=ua.touches(d);return p=k.k,e.forEach(function(e){e.identifier in g&&(g[e.identifier]=n(e))}),e}function t(){var t=ua.event.target;ua.select(t).on(_,r).on(w,s),x.push(t);for(var n=ua.event.changedTouches,i=0,o=n.length;o>i;++i)g[n[i].identifier]=null;var u=e(),l=Date.now();if(1===u.length){if(500>l-b){var c=u[0];a(d,c,g[c.identifier],Math.floor(Math.log(k.k)/Math.LN2)+1),C()}b=l}else if(u.length>1){var c=u[0],h=u[1],f=c[0]-h[0],p=c[1]-h[1];v=f*f+p*p}}function r(){var e,t,n,r,a=ua.touches(d);qu.call(d);for(var s=0,u=a.length;u>s;++s,r=null)if(n=a[s],r=g[n.identifier]){if(t)break;e=n,t=r}if(r){var c=(c=n[0]-e[0])*c+(c=n[1]-e[1])*c,h=v&&Math.sqrt(c/v);e=[(e[0]+n[0])/2,(e[1]+n[1])/2],t=[(t[0]+r[0])/2,(t[1]+r[1])/2],i(h*p)}b=null,o(e,t),l(m)}function s(){if(ua.event.touches.length){for(var t=ua.event.changedTouches,n=0,r=t.length;r>n;++n)delete g[t[n].identifier];for(var i in g)return void e()}ua.selectAll(x).on(y,null),S.on(E,h).on(I,f),P(),c(m)}var p,d=this,m=D.of(d,arguments),g={},v=0,y=".zoom-"+ua.event.changedTouches[0].identifier,_="touchmove"+y,w="touchend"+y,x=[],S=ua.select(d),P=X(d);t(),u(m),S.on(E,null).on(I,t)}function p(){var e=D.of(this,arguments);y?clearTimeout(y):(qu.call(this),m=n(g=v||ua.mouse(this)),u(e)),y=setTimeout(function(){y=null,c(e)},50),C(),i(Math.pow(2,.002*Ya())*k.k),o(g,m),l(e)}function d(){var e=ua.mouse(this),t=Math.log(k.k)/Math.LN2;a(this,e,n(e),ua.event.shiftKey?Math.ceil(t)-1:Math.floor(t)+1)}var m,g,v,y,b,_,w,x,S,k={x:0,y:0,k:1},M=[960,500],T=Ka,A=250,O=0,E="mousedown.zoom",$="mousemove.zoom",N="mouseup.zoom",I="touchstart.zoom",D=P(e,"zoomstart","zoom","zoomend");return Xa||(Xa="onwheel"in ha?(Ya=function(){return-ua.event.deltaY*(ua.event.deltaMode?120:1)},"wheel"):"onmousewheel"in ha?(Ya=function(){return ua.event.wheelDelta},"mousewheel"):(Ya=function(){return-ua.event.detail},"MozMousePixelScroll")),e.event=function(e){e.each(function(){var e=D.of(this,arguments),t=k;Uu?ua.select(this).transition().each("start.zoom",function(){k=this.__chart__||{x:0,y:0,k:1},u(e)}).tween("zoom:zoom",function(){var n=M[0],r=M[1],i=g?g[0]:n/2,o=g?g[1]:r/2,a=ua.interpolateZoom([(i-k.x)/k.k,(o-k.y)/k.k,n/k.k],[(i-t.x)/t.k,(o-t.y)/t.k,n/t.k]);return function(t){var r=a(t),s=n/r[2];this.__chart__=k={x:i-r[0]*s,y:o-r[1]*s,k:s},l(e)}}).each("interrupt.zoom",function(){c(e)}).each("end.zoom",function(){c(e)}):(this.__chart__=k,u(e),l(e),c(e))})},e.translate=function(t){return arguments.length?(k={x:+t[0],y:+t[1],k:k.k},s(),e):[k.x,k.y]},e.scale=function(t){return arguments.length?(k={x:k.x,y:k.y,k:null},i(+t),s(),e):k.k},e.scaleExtent=function(t){return arguments.length?(T=null==t?Ka:[+t[0],+t[1]],e):T},e.center=function(t){return arguments.length?(v=t&&[+t[0],+t[1]],e):v},e.size=function(t){return arguments.length?(M=t&&[+t[0],+t[1]],e):M},e.duration=function(t){return arguments.length?(A=+t,e):A},e.x=function(t){return arguments.length?(w=t,_=t.copy(),k={x:0,y:0,k:1},e):w},e.y=function(t){return arguments.length?(S=t,x=t.copy(),k={x:0,y:0,k:1},e):S},ua.rebind(e,D,"on")};var Ya,Xa,Ka=[0,1/0];ua.color=ae,ae.prototype.toString=function(){return this.rgb()+""},ua.hsl=se;var Za=se.prototype=new ae;Za.brighter=function(e){return e=Math.pow(.7,arguments.length?e:1),new se(this.h,this.s,this.l/e)},Za.darker=function(e){return e=Math.pow(.7,arguments.length?e:1),new se(this.h,this.s,e*this.l)},Za.rgb=function(){return ue(this.h,this.s,this.l)},ua.hcl=le;var Qa=le.prototype=new ae;Qa.brighter=function(e){return new le(this.h,this.c,Math.min(100,this.l+Ja*(arguments.length?e:1)))},Qa.darker=function(e){return new le(this.h,this.c,Math.max(0,this.l-Ja*(arguments.length?e:1)))},Qa.rgb=function(){return ce(this.h,this.c,this.l).rgb()},ua.lab=he;var Ja=18,es=.95047,ts=1,ns=1.08883,rs=he.prototype=new ae;rs.brighter=function(e){return new he(Math.min(100,this.l+Ja*(arguments.length?e:1)),this.a,this.b)},rs.darker=function(e){return new he(Math.max(0,this.l-Ja*(arguments.length?e:1)),this.a,this.b)},rs.rgb=function(){return fe(this.l,this.a,this.b)},ua.rgb=ve;var is=ve.prototype=new ae;is.brighter=function(e){e=Math.pow(.7,arguments.length?e:1);var t=this.r,n=this.g,r=this.b,i=30;return t||n||r?(t&&i>t&&(t=i),n&&i>n&&(n=i),r&&i>r&&(r=i),new ve(Math.min(255,t/e),Math.min(255,n/e),Math.min(255,r/e))):new ve(i,i,i)},is.darker=function(e){return e=Math.pow(.7,arguments.length?e:1),new ve(e*this.r,e*this.g,e*this.b)},is.hsl=function(){return xe(this.r,this.g,this.b)},is.toString=function(){return"#"+_e(this.r)+_e(this.g)+_e(this.b)};var os=ua.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});os.forEach(function(e,t){os.set(e,ye(t))}),ua.functor=Pe,ua.xhr=Me(y),ua.dsv=function(e,t){function n(e,n,o){arguments.length<3&&(o=n,n=null);var a=Te(e,t,null==n?r:i(n),o);return a.row=function(e){return arguments.length?a.response(null==(n=e)?r:i(e)):n},a}function r(e){return n.parse(e.responseText)}function i(e){return function(t){return n.parse(t.responseText,e)}}function o(t){return t.map(a).join(e)}function a(e){return s.test(e)?'"'+e.replace(/\"/g,'""')+'"':e}var s=new RegExp('["'+e+"\n]"),u=e.charCodeAt(0);return n.parse=function(e,t){var r;return n.parseRows(e,function(e,n){if(r)return r(e,n-1);var i=new Function("d","return {"+e.map(function(e,t){return JSON.stringify(e)+": d["+t+"]"}).join(",")+"}");r=t?function(e,n){return t(i(e),n)}:i})},n.parseRows=function(e,t){function n(){if(c>=l)return a;if(i)return i=!1,o;var t=c;if(34===e.charCodeAt(t)){for(var n=t;n++<l;)if(34===e.charCodeAt(n)){if(34!==e.charCodeAt(n+1))break;++n}c=n+2;var r=e.charCodeAt(n+1);return 13===r?(i=!0,10===e.charCodeAt(n+2)&&++c):10===r&&(i=!0),e.slice(t+1,n).replace(/""/g,'"')}for(;l>c;){var r=e.charCodeAt(c++),s=1;if(10===r)i=!0;else if(13===r)i=!0,10===e.charCodeAt(c)&&(++c,++s);else if(r!==u)continue;return e.slice(t,c-s)}return e.slice(t)}for(var r,i,o={},a={},s=[],l=e.length,c=0,h=0;(r=n())!==a;){for(var f=[];r!==o&&r!==a;)f.push(r),r=n();t&&null==(f=t(f,h++))||s.push(f)}return s},n.format=function(t){if(Array.isArray(t[0]))return n.formatRows(t);var r=new v,i=[];return t.forEach(function(e){for(var t in e)r.has(t)||i.push(r.add(t))}),[i.map(a).join(e)].concat(t.map(function(t){return i.map(function(e){return a(t[e])}).join(e)})).join("\n")},n.formatRows=function(e){return e.map(o).join("\n")},n},ua.csv=ua.dsv(",","text/csv"),ua.tsv=ua.dsv("	","text/tab-separated-values");var as,ss,us,ls,cs=this[_(this,"requestAnimationFrame")]||function(e){setTimeout(e,17)};ua.timer=function(){Ee.apply(this,arguments)},ua.timer.flush=function(){Ne(),Ie()},ua.round=function(e,t){return t?Math.round(e*(t=Math.pow(10,t)))/t:Math.round(e)};var hs=["y","z","a","f","p","n","Âµ","m","","k","M","G","T","P","E","Z","Y"].map(je);ua.formatPrefix=function(e,t){var n=0;return(e=+e)&&(0>e&&(e*=-1),t&&(e=ua.round(e,De(e,t))),n=1+Math.floor(1e-12+Math.log(e)/Math.LN10),n=Math.max(-24,Math.min(24,3*Math.floor((n-1)/3)))),hs[8+n/3]};var fs=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,ps=ua.map({b:function(e){return e.toString(2)},c:function(e){return String.fromCharCode(e)},o:function(e){return e.toString(8)},x:function(e){return e.toString(16)},X:function(e){return e.toString(16).toUpperCase()},g:function(e,t){return e.toPrecision(t)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},r:function(e,t){return(e=ua.round(e,De(e,t))).toFixed(Math.max(0,Math.min(20,De(e*(1+1e-15),t))))}}),ds=ua.time={},ms=Date;Re.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){gs.setUTCDate.apply(this._,arguments)},setDay:function(){gs.setUTCDay.apply(this._,arguments)},setFullYear:function(){gs.setUTCFullYear.apply(this._,arguments)},setHours:function(){gs.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){gs.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){gs.setUTCMinutes.apply(this._,arguments)},setMonth:function(){gs.setUTCMonth.apply(this._,arguments)},setSeconds:function(){gs.setUTCSeconds.apply(this._,arguments)},setTime:function(){gs.setTime.apply(this._,arguments)}};var gs=Date.prototype;ds.year=Ue(function(e){return e=ds.day(e),e.setMonth(0,1),e},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e){return e.getFullYear()}),ds.years=ds.year.range,ds.years.utc=ds.year.utc.range,ds.day=Ue(function(e){var t=new ms(2e3,0);return t.setFullYear(e.getFullYear(),e.getMonth(),e.getDate()),t},function(e,t){e.setDate(e.getDate()+t)},function(e){return e.getDate()-1}),ds.days=ds.day.range,ds.days.utc=ds.day.utc.range,ds.dayOfYear=function(e){var t=ds.year(e);return Math.floor((e-t-6e4*(e.getTimezoneOffset()-t.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(e,t){t=7-t;var n=ds[e]=Ue(function(e){return(e=ds.day(e)).setDate(e.getDate()-(e.getDay()+t)%7),e},function(e,t){e.setDate(e.getDate()+7*Math.floor(t))},function(e){var n=ds.year(e).getDay();return Math.floor((ds.dayOfYear(e)+(n+t)%7)/7)-(n!==t)});ds[e+"s"]=n.range,ds[e+"s"].utc=n.utc.range,ds[e+"OfYear"]=function(e){var n=ds.year(e).getDay();return Math.floor((ds.dayOfYear(e)+(n+t)%7)/7)}}),ds.week=ds.sunday,ds.weeks=ds.sunday.range,ds.weeks.utc=ds.sunday.utc.range,ds.weekOfYear=ds.sundayOfYear;var vs={"-":"",_:" ",0:"0"},ys=/^\s*\d+/,bs=/^%/;ua.locale=function(e){return{numberFormat:Fe(e),timeFormat:qe(e)}};var _s=ua.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});ua.format=_s.numberFormat,ua.geo={},lt.prototype={s:0,t:0,add:function(e){ct(e,this.t,ws),ct(ws.s,this.s,this),this.s?this.t+=ws.t:this.s=ws.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var ws=new lt;ua.geo.stream=function(e,t){e&&xs.hasOwnProperty(e.type)?xs[e.type](e,t):ht(e,t)};var xs={Feature:function(e,t){ht(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)ht(n[r].geometry,t)}},Ss={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){ft(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)ft(n[r],t,0)},Polygon:function(e,t){pt(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)pt(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)ht(n[r],t)}};ua.geo.area=function(e){return Cs=0,ua.geo.stream(e,Ps),Cs};var Cs,ks=new lt,Ps={sphere:function(){Cs+=4*Ra},point:w,lineStart:w,lineEnd:w,polygonStart:function(){ks.reset(),Ps.lineStart=dt},polygonEnd:function(){var e=2*ks;Cs+=0>e?4*Ra+e:e,Ps.lineStart=Ps.lineEnd=Ps.point=w;
}};ua.geo.bounds=function(){function e(e,t){b.push(_=[c=e,f=e]),h>t&&(h=t),t>p&&(p=t)}function t(t,n){var r=mt([t*za,n*za]);if(v){var i=vt(v,r),o=[i[1],-i[0],0],a=vt(o,i);_t(a),a=wt(a);var u=t-d,l=u>0?1:-1,m=a[0]*Ba*l,g=_a(u)>180;if(g^(m>l*d&&l*t>m)){var y=a[1]*Ba;y>p&&(p=y)}else if(m=(m+360)%360-180,g^(m>l*d&&l*t>m)){var y=-a[1]*Ba;h>y&&(h=y)}else h>n&&(h=n),n>p&&(p=n);g?d>t?s(c,t)>s(c,f)&&(f=t):s(t,f)>s(c,f)&&(c=t):f>=c?(c>t&&(c=t),t>f&&(f=t)):t>d?s(c,t)>s(c,f)&&(f=t):s(t,f)>s(c,f)&&(c=t)}else e(t,n);v=r,d=t}function n(){w.point=t}function r(){_[0]=c,_[1]=f,w.point=e,v=null}function i(e,n){if(v){var r=e-d;y+=_a(r)>180?r+(r>0?360:-360):r}else m=e,g=n;Ps.point(e,n),t(e,n)}function o(){Ps.lineStart()}function a(){i(m,g),Ps.lineEnd(),_a(y)>Fa&&(c=-(f=180)),_[0]=c,_[1]=f,v=null}function s(e,t){return(t-=e)<0?t+360:t}function u(e,t){return e[0]-t[0]}function l(e,t){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}var c,h,f,p,d,m,g,v,y,b,_,w={point:e,lineStart:n,lineEnd:r,polygonStart:function(){w.point=i,w.lineStart=o,w.lineEnd=a,y=0,Ps.polygonStart()},polygonEnd:function(){Ps.polygonEnd(),w.point=e,w.lineStart=n,w.lineEnd=r,0>ks?(c=-(f=180),h=-(p=90)):y>Fa?p=90:-Fa>y&&(h=-90),_[0]=c,_[1]=f}};return function(e){p=f=-(c=h=1/0),b=[],ua.geo.stream(e,w);var t=b.length;if(t){b.sort(u);for(var n,r=1,i=b[0],o=[i];t>r;++r)n=b[r],l(n[0],i)||l(n[1],i)?(s(i[0],n[1])>s(i[0],i[1])&&(i[1]=n[1]),s(n[0],i[1])>s(i[0],i[1])&&(i[0]=n[0])):o.push(i=n);for(var a,n,d=-(1/0),t=o.length-1,r=0,i=o[t];t>=r;i=n,++r)n=o[r],(a=s(i[1],n[0]))>d&&(d=a,c=n[0],f=i[1])}return b=_=null,c===1/0||h===1/0?[[NaN,NaN],[NaN,NaN]]:[[c,h],[f,p]]}}(),ua.geo.centroid=function(e){Ms=Ts=As=Os=Es=$s=Ns=Is=Ds=js=Fs=0,ua.geo.stream(e,Ls);var t=Ds,n=js,r=Fs,i=t*t+n*n+r*r;return La>i&&(t=$s,n=Ns,r=Is,Fa>Ts&&(t=As,n=Os,r=Es),i=t*t+n*n+r*r,La>i)?[NaN,NaN]:[Math.atan2(n,t)*Ba,te(r/Math.sqrt(i))*Ba]};var Ms,Ts,As,Os,Es,$s,Ns,Is,Ds,js,Fs,Ls={sphere:w,point:St,lineStart:kt,lineEnd:Pt,polygonStart:function(){Ls.lineStart=Mt},polygonEnd:function(){Ls.lineStart=kt}},Rs=Nt(At,Ft,Rt,[-Ra,-Ra/2]),Us=1e9;ua.geo.clipExtent=function(){var e,t,n,r,i,o,a={stream:function(e){return i&&(i.valid=!1),i=o(e),i.valid=!0,i},extent:function(s){return arguments.length?(o=zt(e=+s[0][0],t=+s[0][1],n=+s[1][0],r=+s[1][1]),i&&(i.valid=!1,i=null),a):[[e,t],[n,r]]}};return a.extent([[0,0],[960,500]])},(ua.geo.conicEqualArea=function(){return Bt(Ht)}).raw=Ht,ua.geo.albers=function(){return ua.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},ua.geo.albersUsa=function(){function e(e){var o=e[0],a=e[1];return t=null,n(o,a),t||(r(o,a),t)||i(o,a),t}var t,n,r,i,o=ua.geo.albers(),a=ua.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s=ua.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),u={point:function(e,n){t=[e,n]}};return e.invert=function(e){var t=o.scale(),n=o.translate(),r=(e[0]-n[0])/t,i=(e[1]-n[1])/t;return(i>=.12&&.234>i&&r>=-.425&&-.214>r?a:i>=.166&&.234>i&&r>=-.214&&-.115>r?s:o).invert(e)},e.stream=function(e){var t=o.stream(e),n=a.stream(e),r=s.stream(e);return{point:function(e,i){t.point(e,i),n.point(e,i),r.point(e,i)},sphere:function(){t.sphere(),n.sphere(),r.sphere()},lineStart:function(){t.lineStart(),n.lineStart(),r.lineStart()},lineEnd:function(){t.lineEnd(),n.lineEnd(),r.lineEnd()},polygonStart:function(){t.polygonStart(),n.polygonStart(),r.polygonStart()},polygonEnd:function(){t.polygonEnd(),n.polygonEnd(),r.polygonEnd()}}},e.precision=function(t){return arguments.length?(o.precision(t),a.precision(t),s.precision(t),e):o.precision()},e.scale=function(t){return arguments.length?(o.scale(t),a.scale(.35*t),s.scale(t),e.translate(o.translate())):o.scale()},e.translate=function(t){if(!arguments.length)return o.translate();var l=o.scale(),c=+t[0],h=+t[1];return n=o.translate(t).clipExtent([[c-.455*l,h-.238*l],[c+.455*l,h+.238*l]]).stream(u).point,r=a.translate([c-.307*l,h+.201*l]).clipExtent([[c-.425*l+Fa,h+.12*l+Fa],[c-.214*l-Fa,h+.234*l-Fa]]).stream(u).point,i=s.translate([c-.205*l,h+.212*l]).clipExtent([[c-.214*l+Fa,h+.166*l+Fa],[c-.115*l-Fa,h+.234*l-Fa]]).stream(u).point,e},e.scale(1070)};var Vs,qs,zs,Bs,Hs,Gs,Ws={point:w,lineStart:w,lineEnd:w,polygonStart:function(){qs=0,Ws.lineStart=Gt},polygonEnd:function(){Ws.lineStart=Ws.lineEnd=Ws.point=w,Vs+=_a(qs/2)}},Ys={point:Wt,lineStart:w,lineEnd:w,polygonStart:w,polygonEnd:w},Xs={point:Kt,lineStart:Zt,lineEnd:Qt,polygonStart:function(){Xs.lineStart=Jt},polygonEnd:function(){Xs.point=Kt,Xs.lineStart=Zt,Xs.lineEnd=Qt}};ua.geo.path=function(){function e(e){return e&&("function"==typeof s&&o.pointRadius(+s.apply(this,arguments)),a&&a.valid||(a=i(o)),ua.geo.stream(e,a)),o.result()}function t(){return a=null,e}var n,r,i,o,a,s=4.5;return e.area=function(e){return Vs=0,ua.geo.stream(e,i(Ws)),Vs},e.centroid=function(e){return As=Os=Es=$s=Ns=Is=Ds=js=Fs=0,ua.geo.stream(e,i(Xs)),Fs?[Ds/Fs,js/Fs]:Is?[$s/Is,Ns/Is]:Es?[As/Es,Os/Es]:[NaN,NaN]},e.bounds=function(e){return Hs=Gs=-(zs=Bs=1/0),ua.geo.stream(e,i(Ys)),[[zs,Bs],[Hs,Gs]]},e.projection=function(e){return arguments.length?(i=(n=e)?e.stream||nn(e):y,t()):n},e.context=function(e){return arguments.length?(o=null==(r=e)?new Yt:new en(e),"function"!=typeof s&&o.pointRadius(s),t()):r},e.pointRadius=function(t){return arguments.length?(s="function"==typeof t?t:(o.pointRadius(+t),+t),e):s},e.projection(ua.geo.albersUsa()).context(null)},ua.geo.transform=function(e){return{stream:function(t){var n=new rn(t);for(var r in e)n[r]=e[r];return n}}},rn.prototype={point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},ua.geo.projection=an,ua.geo.projectionMutator=sn,(ua.geo.equirectangular=function(){return an(ln)}).raw=ln.invert=ln,ua.geo.rotation=function(e){function t(t){return t=e(t[0]*za,t[1]*za),t[0]*=Ba,t[1]*=Ba,t}return e=hn(e[0]%360*za,e[1]*za,e.length>2?e[2]*za:0),t.invert=function(t){return t=e.invert(t[0]*za,t[1]*za),t[0]*=Ba,t[1]*=Ba,t},t},cn.invert=ln,ua.geo.circle=function(){function e(){var e="function"==typeof r?r.apply(this,arguments):r,t=hn(-e[0]*za,-e[1]*za,0).invert,i=[];return n(null,null,1,{point:function(e,n){i.push(e=t(e,n)),e[0]*=Ba,e[1]*=Ba}}),{type:"Polygon",coordinates:[i]}}var t,n,r=[0,0],i=6;return e.origin=function(t){return arguments.length?(r=t,e):r},e.angle=function(r){return arguments.length?(n=mn((t=+r)*za,i*za),e):t},e.precision=function(r){return arguments.length?(n=mn(t*za,(i=+r)*za),e):i},e.angle(90)},ua.geo.distance=function(e,t){var n,r=(t[0]-e[0])*za,i=e[1]*za,o=t[1]*za,a=Math.sin(r),s=Math.cos(r),u=Math.sin(i),l=Math.cos(i),c=Math.sin(o),h=Math.cos(o);return Math.atan2(Math.sqrt((n=h*a)*n+(n=l*c-u*h*s)*n),u*c+l*h*s)},ua.geo.graticule=function(){function e(){return{type:"MultiLineString",coordinates:t()}}function t(){return ua.range(Math.ceil(o/g)*g,i,g).map(f).concat(ua.range(Math.ceil(l/v)*v,u,v).map(p)).concat(ua.range(Math.ceil(r/d)*d,n,d).filter(function(e){return _a(e%g)>Fa}).map(c)).concat(ua.range(Math.ceil(s/m)*m,a,m).filter(function(e){return _a(e%v)>Fa}).map(h))}var n,r,i,o,a,s,u,l,c,h,f,p,d=10,m=d,g=90,v=360,y=2.5;return e.lines=function(){return t().map(function(e){return{type:"LineString",coordinates:e}})},e.outline=function(){return{type:"Polygon",coordinates:[f(o).concat(p(u).slice(1),f(i).reverse().slice(1),p(l).reverse().slice(1))]}},e.extent=function(t){return arguments.length?e.majorExtent(t).minorExtent(t):e.minorExtent()},e.majorExtent=function(t){return arguments.length?(o=+t[0][0],i=+t[1][0],l=+t[0][1],u=+t[1][1],o>i&&(t=o,o=i,i=t),l>u&&(t=l,l=u,u=t),e.precision(y)):[[o,l],[i,u]]},e.minorExtent=function(t){return arguments.length?(r=+t[0][0],n=+t[1][0],s=+t[0][1],a=+t[1][1],r>n&&(t=r,r=n,n=t),s>a&&(t=s,s=a,a=t),e.precision(y)):[[r,s],[n,a]]},e.step=function(t){return arguments.length?e.majorStep(t).minorStep(t):e.minorStep()},e.majorStep=function(t){return arguments.length?(g=+t[0],v=+t[1],e):[g,v]},e.minorStep=function(t){return arguments.length?(d=+t[0],m=+t[1],e):[d,m]},e.precision=function(t){return arguments.length?(y=+t,c=vn(s,a,90),h=yn(r,n,y),f=vn(l,u,90),p=yn(o,i,y),e):y},e.majorExtent([[-180,-90+Fa],[180,90-Fa]]).minorExtent([[-180,-80-Fa],[180,80+Fa]])},ua.geo.greatArc=function(){function e(){return{type:"LineString",coordinates:[t||r.apply(this,arguments),n||i.apply(this,arguments)]}}var t,n,r=bn,i=_n;return e.distance=function(){return ua.geo.distance(t||r.apply(this,arguments),n||i.apply(this,arguments))},e.source=function(n){return arguments.length?(r=n,t="function"==typeof n?null:n,e):r},e.target=function(t){return arguments.length?(i=t,n="function"==typeof t?null:t,e):i},e.precision=function(){return arguments.length?e:0},e},ua.geo.interpolate=function(e,t){return wn(e[0]*za,e[1]*za,t[0]*za,t[1]*za)},ua.geo.length=function(e){return Ks=0,ua.geo.stream(e,Zs),Ks};var Ks,Zs={sphere:w,point:w,lineStart:xn,lineEnd:w,polygonStart:w,polygonEnd:w},Qs=Sn(function(e){return Math.sqrt(2/(1+e))},function(e){return 2*Math.asin(e/2)});(ua.geo.azimuthalEqualArea=function(){return an(Qs)}).raw=Qs;var Js=Sn(function(e){var t=Math.acos(e);return t&&t/Math.sin(t)},y);(ua.geo.azimuthalEquidistant=function(){return an(Js)}).raw=Js,(ua.geo.conicConformal=function(){return Bt(Cn)}).raw=Cn,(ua.geo.conicEquidistant=function(){return Bt(kn)}).raw=kn;var eu=Sn(function(e){return 1/e},Math.atan);(ua.geo.gnomonic=function(){return an(eu)}).raw=eu,Pn.invert=function(e,t){return[e,2*Math.atan(Math.exp(t))-qa]},(ua.geo.mercator=function(){return Mn(Pn)}).raw=Pn;var tu=Sn(function(){return 1},Math.asin);(ua.geo.orthographic=function(){return an(tu)}).raw=tu;var nu=Sn(function(e){return 1/(1+e)},function(e){return 2*Math.atan(e)});(ua.geo.stereographic=function(){return an(nu)}).raw=nu,Tn.invert=function(e,t){return[-t,2*Math.atan(Math.exp(e))-qa]},(ua.geo.transverseMercator=function(){var e=Mn(Tn),t=e.center,n=e.rotate;return e.center=function(e){return e?t([-e[1],e[0]]):(e=t(),[e[1],-e[0]])},e.rotate=function(e){return e?n([e[0],e[1],e.length>2?e[2]+90:90]):(e=n(),[e[0],e[1],e[2]-90])},n([0,0,90])}).raw=Tn,ua.geom={},ua.geom.hull=function(e){function t(e){if(e.length<3)return[];var t,i=Pe(n),o=Pe(r),a=e.length,s=[],u=[];for(t=0;a>t;t++)s.push([+i.call(this,e[t],t),+o.call(this,e[t],t),t]);for(s.sort($n),t=0;a>t;t++)u.push([s[t][0],-s[t][1]]);var l=En(s),c=En(u),h=c[0]===l[0],f=c[c.length-1]===l[l.length-1],p=[];for(t=l.length-1;t>=0;--t)p.push(e[s[l[t]][2]]);for(t=+h;t<c.length-f;++t)p.push(e[s[c[t]][2]]);return p}var n=An,r=On;return arguments.length?t(e):(t.x=function(e){return arguments.length?(n=e,t):n},t.y=function(e){return arguments.length?(r=e,t):r},t)},ua.geom.polygon=function(e){return ka(e,ru),e};var ru=ua.geom.polygon.prototype=[];ru.area=function(){for(var e,t=-1,n=this.length,r=this[n-1],i=0;++t<n;)e=r,r=this[t],i+=e[1]*r[0]-e[0]*r[1];return.5*i},ru.centroid=function(e){var t,n,r=-1,i=this.length,o=0,a=0,s=this[i-1];for(arguments.length||(e=-1/(6*this.area()));++r<i;)t=s,s=this[r],n=t[0]*s[1]-s[0]*t[1],o+=(t[0]+s[0])*n,a+=(t[1]+s[1])*n;return[o*e,a*e]},ru.clip=function(e){for(var t,n,r,i,o,a,s=Dn(e),u=-1,l=this.length-Dn(this),c=this[l-1];++u<l;){for(t=e.slice(),e.length=0,i=this[u],o=t[(r=t.length-s)-1],n=-1;++n<r;)a=t[n],Nn(a,c,i)?(Nn(o,c,i)||e.push(In(o,a,c,i)),e.push(a)):Nn(o,c,i)&&e.push(In(o,a,c,i)),o=a;s&&e.push(e[0]),c=i}return e};var iu,ou,au,su,uu,lu=[],cu=[];zn.prototype.prepare=function(){for(var e,t=this.edges,n=t.length;n--;)e=t[n].edge,e.b&&e.a||t.splice(n,1);return t.sort(Hn),t.length},tr.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},nr.prototype={insert:function(e,t){var n,r,i;if(e){if(t.P=e,t.N=e.N,e.N&&(e.N.P=t),e.N=t,e.R){for(e=e.R;e.L;)e=e.L;e.L=t}else e.R=t;n=e}else this._?(e=ar(this._),t.P=null,t.N=e,e.P=e.L=t,n=e):(t.P=t.N=null,this._=t,n=null);for(t.L=t.R=null,t.U=n,t.C=!0,e=t;n&&n.C;)r=n.U,n===r.L?(i=r.R,i&&i.C?(n.C=i.C=!1,r.C=!0,e=r):(e===n.R&&(ir(this,n),e=n,n=e.U),n.C=!1,r.C=!0,or(this,r))):(i=r.L,i&&i.C?(n.C=i.C=!1,r.C=!0,e=r):(e===n.L&&(or(this,n),e=n,n=e.U),n.C=!1,r.C=!0,ir(this,r))),n=e.U;this._.C=!1},remove:function(e){e.N&&(e.N.P=e.P),e.P&&(e.P.N=e.N),e.N=e.P=null;var t,n,r,i=e.U,o=e.L,a=e.R;if(n=o?a?ar(a):o:a,i?i.L===e?i.L=n:i.R=n:this._=n,o&&a?(r=n.C,n.C=e.C,n.L=o,o.U=n,n!==a?(i=n.U,n.U=e.U,e=n.R,i.L=e,n.R=a,a.U=n):(n.U=i,i=n,e=n.R)):(r=e.C,e=n),e&&(e.U=i),!r){if(e&&e.C)return void(e.C=!1);do{if(e===this._)break;if(e===i.L){if(t=i.R,t.C&&(t.C=!1,i.C=!0,ir(this,i),t=i.R),t.L&&t.L.C||t.R&&t.R.C){t.R&&t.R.C||(t.L.C=!1,t.C=!0,or(this,t),t=i.R),t.C=i.C,i.C=t.R.C=!1,ir(this,i),e=this._;break}}else if(t=i.L,t.C&&(t.C=!1,i.C=!0,or(this,i),t=i.L),t.L&&t.L.C||t.R&&t.R.C){t.L&&t.L.C||(t.R.C=!1,t.C=!0,ir(this,t),t=i.L),t.C=i.C,i.C=t.L.C=!1,or(this,i),e=this._;break}t.C=!0,e=i,i=i.U}while(!e.C);e&&(e.C=!1)}}},ua.geom.voronoi=function(e){function t(e){var t=new Array(e.length),r=s[0][0],i=s[0][1],o=s[1][0],a=s[1][1];return sr(n(e),s).cells.forEach(function(n,s){var u=n.edges,l=n.site,c=t[s]=u.length?u.map(function(e){var t=e.start();return[t.x,t.y]}):l.x>=r&&l.x<=o&&l.y>=i&&l.y<=a?[[r,a],[o,a],[o,i],[r,i]]:[];c.point=e[s]}),t}function n(e){return e.map(function(e,t){return{x:Math.round(o(e,t)/Fa)*Fa,y:Math.round(a(e,t)/Fa)*Fa,i:t}})}var r=An,i=On,o=r,a=i,s=hu;return e?t(e):(t.links=function(e){return sr(n(e)).edges.filter(function(e){return e.l&&e.r}).map(function(t){return{source:e[t.l.i],target:e[t.r.i]}})},t.triangles=function(e){var t=[];return sr(n(e)).cells.forEach(function(n,r){for(var i,o,a=n.site,s=n.edges.sort(Hn),u=-1,l=s.length,c=s[l-1].edge,h=c.l===a?c.r:c.l;++u<l;)i=c,o=h,c=s[u].edge,h=c.l===a?c.r:c.l,r<o.i&&r<h.i&&lr(a,o,h)<0&&t.push([e[r],e[o.i],e[h.i]])}),t},t.x=function(e){return arguments.length?(o=Pe(r=e),t):r},t.y=function(e){return arguments.length?(a=Pe(i=e),t):i},t.clipExtent=function(e){return arguments.length?(s=null==e?hu:e,t):s===hu?null:s},t.size=function(e){return arguments.length?t.clipExtent(e&&[[0,0],e]):s===hu?null:s&&s[1]},t)};var hu=[[-1e6,-1e6],[1e6,1e6]];ua.geom.delaunay=function(e){return ua.geom.voronoi().triangles(e)},ua.geom.quadtree=function(e,t,n,r,i){function o(e){function o(e,t,n,r,i,o,a,s){if(!isNaN(n)&&!isNaN(r))if(e.leaf){var u=e.x,c=e.y;if(null!=u)if(_a(u-n)+_a(c-r)<.01)l(e,t,n,r,i,o,a,s);else{var h=e.point;e.x=e.y=e.point=null,l(e,h,u,c,i,o,a,s),l(e,t,n,r,i,o,a,s)}else e.x=n,e.y=r,e.point=t}else l(e,t,n,r,i,o,a,s)}function l(e,t,n,r,i,a,s,u){var l=.5*(i+s),c=.5*(a+u),h=n>=l,f=r>=c,p=f<<1|h;e.leaf=!1,e=e.nodes[p]||(e.nodes[p]=fr()),h?i=l:s=l,f?a=c:u=c,o(e,t,n,r,i,a,s,u)}var c,h,f,p,d,m,g,v,y,b=Pe(s),_=Pe(u);if(null!=t)m=t,g=n,v=r,y=i;else if(v=y=-(m=g=1/0),h=[],f=[],d=e.length,a)for(p=0;d>p;++p)c=e[p],c.x<m&&(m=c.x),c.y<g&&(g=c.y),c.x>v&&(v=c.x),c.y>y&&(y=c.y),h.push(c.x),f.push(c.y);else for(p=0;d>p;++p){var w=+b(c=e[p],p),x=+_(c,p);m>w&&(m=w),g>x&&(g=x),w>v&&(v=w),x>y&&(y=x),h.push(w),f.push(x)}var S=v-m,C=y-g;S>C?y=g+S:v=m+C;var k=fr();if(k.add=function(e){o(k,e,+b(e,++p),+_(e,p),m,g,v,y)},k.visit=function(e){pr(e,k,m,g,v,y)},k.find=function(e){return dr(k,e[0],e[1],m,g,v,y)},p=-1,null==t){for(;++p<d;)o(k,e[p],h[p],f[p],m,g,v,y);--p}else e.forEach(k.add);return h=f=e=c=null,k}var a,s=An,u=On;return(a=arguments.length)?(s=cr,u=hr,3===a&&(i=n,r=t,n=t=0),o(e)):(o.x=function(e){return arguments.length?(s=e,o):s},o.y=function(e){return arguments.length?(u=e,o):u},o.extent=function(e){return arguments.length?(null==e?t=n=r=i=null:(t=+e[0][0],n=+e[0][1],r=+e[1][0],i=+e[1][1]),o):null==t?null:[[t,n],[r,i]]},o.size=function(e){return arguments.length?(null==e?t=n=r=i=null:(t=n=0,r=+e[0],i=+e[1]),o):null==t?null:[r-t,i-n]},o)},ua.interpolateRgb=mr,ua.interpolateObject=gr,ua.interpolateNumber=vr,ua.interpolateString=yr;var fu=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,pu=new RegExp(fu.source,"g");ua.interpolate=br,ua.interpolators=[function(e,t){var n=typeof t;return("string"===n?os.has(t.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(t)?mr:yr:t instanceof ae?mr:Array.isArray(t)?_r:"object"===n&&isNaN(t)?gr:vr)(e,t)}],ua.interpolateArray=_r;var du=function(){return y},mu=ua.map({linear:du,poly:Mr,quad:function(){return Cr},cubic:function(){return kr},sin:function(){return Tr},exp:function(){return Ar},circle:function(){return Or},elastic:Er,back:$r,bounce:function(){return Nr}}),gu=ua.map({"in":y,out:xr,"in-out":Sr,"out-in":function(e){return Sr(xr(e))}});ua.ease=function(e){var t=e.indexOf("-"),n=t>=0?e.slice(0,t):e,r=t>=0?e.slice(t+1):"in";return n=mu.get(n)||du,r=gu.get(r)||y,wr(r(n.apply(null,la.call(arguments,1))))},ua.interpolateHcl=Ir,ua.interpolateHsl=Dr,ua.interpolateLab=jr,ua.interpolateRound=Fr,ua.transform=function(e){var t=ha.createElementNS(ua.ns.prefix.svg,"g");return(ua.transform=function(e){if(null!=e){t.setAttribute("transform",e);var n=t.transform.baseVal.consolidate()}return new Lr(n?n.matrix:vu)})(e)},Lr.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var vu={a:1,b:0,c:0,d:1,e:0,f:0};ua.interpolateTransform=Wr,ua.layout={},ua.layout.bundle=function(){return function(e){for(var t=[],n=-1,r=e.length;++n<r;)t.push(Kr(e[n]));return t}},ua.layout.chord=function(){function e(){var e,l,h,f,p,d={},m=[],g=ua.range(o),v=[];for(n=[],r=[],e=0,f=-1;++f<o;){for(l=0,p=-1;++p<o;)l+=i[f][p];m.push(l),v.push(ua.range(o)),e+=l}for(a&&g.sort(function(e,t){return a(m[e],m[t])}),s&&v.forEach(function(e,t){e.sort(function(e,n){return s(i[t][e],i[t][n])})}),e=(Ua-c*o)/e,l=0,f=-1;++f<o;){for(h=l,p=-1;++p<o;){var y=g[f],b=v[y][p],_=i[y][b],w=l,x=l+=_*e;d[y+"-"+b]={index:y,subindex:b,startAngle:w,endAngle:x,value:_}}r[y]={index:y,startAngle:h,endAngle:l,value:m[y]},l+=c}for(f=-1;++f<o;)for(p=f-1;++p<o;){var S=d[f+"-"+p],C=d[p+"-"+f];(S.value||C.value)&&n.push(S.value<C.value?{source:C,target:S}:{source:S,target:C})}u&&t()}function t(){n.sort(function(e,t){return u((e.source.value+e.target.value)/2,(t.source.value+t.target.value)/2)})}var n,r,i,o,a,s,u,l={},c=0;return l.matrix=function(e){return arguments.length?(o=(i=e)&&i.length,n=r=null,l):i},l.padding=function(e){return arguments.length?(c=e,n=r=null,l):c},l.sortGroups=function(e){return arguments.length?(a=e,n=r=null,l):a},l.sortSubgroups=function(e){return arguments.length?(s=e,n=null,l):s},l.sortChords=function(e){return arguments.length?(u=e,n&&t(),l):u},l.chords=function(){return n||e(),n},l.groups=function(){return r||e(),r},l},ua.layout.force=function(){function e(e){return function(t,n,r,i){if(t.point!==e){var o=t.cx-e.x,a=t.cy-e.y,s=i-n,u=o*o+a*a;if(u>s*s/v){if(m>u){var l=t.charge/u;e.px-=o*l,e.py-=a*l}return!0}if(t.point&&u&&m>u){var l=t.pointCharge/u;e.px-=o*l,e.py-=a*l}}return!t.charge}}function t(e){e.px=ua.event.x,e.py=ua.event.y,u.resume()}var n,r,i,o,a,s,u={},l=ua.dispatch("start","tick","end"),c=[1,1],h=.9,f=yu,p=bu,d=-30,m=_u,g=.1,v=.64,b=[],_=[];return u.tick=function(){if((i*=.99)<.005)return n=null,l.end({type:"end",alpha:i=0}),!0;var t,r,u,f,p,m,v,y,w,x=b.length,S=_.length;for(r=0;S>r;++r)u=_[r],f=u.source,p=u.target,y=p.x-f.x,w=p.y-f.y,(m=y*y+w*w)&&(m=i*a[r]*((m=Math.sqrt(m))-o[r])/m,y*=m,w*=m,p.x-=y*(v=f.weight+p.weight?f.weight/(f.weight+p.weight):.5),p.y-=w*v,f.x+=y*(v=1-v),f.y+=w*v);if((v=i*g)&&(y=c[0]/2,w=c[1]/2,r=-1,v))for(;++r<x;)u=b[r],u.x+=(y-u.x)*v,u.y+=(w-u.y)*v;if(d)for(ri(t=ua.geom.quadtree(b),i,s),r=-1;++r<x;)(u=b[r]).fixed||t.visit(e(u));for(r=-1;++r<x;)u=b[r],u.fixed?(u.x=u.px,u.y=u.py):(u.x-=(u.px-(u.px=u.x))*h,u.y-=(u.py-(u.py=u.y))*h);l.tick({type:"tick",alpha:i})},u.nodes=function(e){return arguments.length?(b=e,u):b},u.links=function(e){return arguments.length?(_=e,u):_},u.size=function(e){return arguments.length?(c=e,u):c},u.linkDistance=function(e){return arguments.length?(f="function"==typeof e?e:+e,u):f},u.distance=u.linkDistance,u.linkStrength=function(e){return arguments.length?(p="function"==typeof e?e:+e,u):p},u.friction=function(e){return arguments.length?(h=+e,u):h},u.charge=function(e){return arguments.length?(d="function"==typeof e?e:+e,u):d},u.chargeDistance=function(e){return arguments.length?(m=e*e,u):Math.sqrt(m)},u.gravity=function(e){return arguments.length?(g=+e,u):g},u.theta=function(e){return arguments.length?(v=e*e,u):Math.sqrt(v)},u.alpha=function(e){return arguments.length?(e=+e,i?e>0?i=e:(n.c=null,n.t=NaN,n=null,l.end({type:"end",alpha:i=0})):e>0&&(l.start({type:"start",alpha:i=e}),n=Ee(u.tick)),u):i},u.start=function(){function e(e,r){if(!n){for(n=new Array(i),u=0;i>u;++u)n[u]=[];for(u=0;l>u;++u){var o=_[u];n[o.source.index].push(o.target),n[o.target.index].push(o.source)}}for(var a,s=n[t],u=-1,c=s.length;++u<c;)if(!isNaN(a=s[u][e]))return a;return Math.random()*r}var t,n,r,i=b.length,l=_.length,h=c[0],m=c[1];for(t=0;i>t;++t)(r=b[t]).index=t,r.weight=0;for(t=0;l>t;++t)r=_[t],"number"==typeof r.source&&(r.source=b[r.source]),"number"==typeof r.target&&(r.target=b[r.target]),++r.source.weight,++r.target.weight;for(t=0;i>t;++t)r=b[t],isNaN(r.x)&&(r.x=e("x",h)),isNaN(r.y)&&(r.y=e("y",m)),isNaN(r.px)&&(r.px=r.x),isNaN(r.py)&&(r.py=r.y);if(o=[],"function"==typeof f)for(t=0;l>t;++t)o[t]=+f.call(this,_[t],t);else for(t=0;l>t;++t)o[t]=f;if(a=[],"function"==typeof p)for(t=0;l>t;++t)a[t]=+p.call(this,_[t],t);else for(t=0;l>t;++t)a[t]=p;if(s=[],"function"==typeof d)for(t=0;i>t;++t)s[t]=+d.call(this,b[t],t);else for(t=0;i>t;++t)s[t]=d;return u.resume()},u.resume=function(){return u.alpha(.1)},u.stop=function(){return u.alpha(0)},u.drag=function(){return r||(r=ua.behavior.drag().origin(y).on("dragstart.force",Jr).on("drag.force",t).on("dragend.force",ei)),arguments.length?void this.on("mouseover.force",ti).on("mouseout.force",ni).call(r):r},ua.rebind(u,l,"on")};var yu=20,bu=1,_u=1/0;ua.layout.hierarchy=function(){function e(i){var o,a=[i],s=[];for(i.depth=0;null!=(o=a.pop());)if(s.push(o),(l=n.call(e,o,o.depth))&&(u=l.length)){for(var u,l,c;--u>=0;)a.push(c=l[u]),c.parent=o,c.depth=o.depth+1;r&&(o.value=0),o.children=l}else r&&(o.value=+r.call(e,o,o.depth)||0),delete o.children;return ai(i,function(e){var n,i;t&&(n=e.children)&&n.sort(t),r&&(i=e.parent)&&(i.value+=e.value)}),s}var t=li,n=si,r=ui;return e.sort=function(n){return arguments.length?(t=n,e):t},e.children=function(t){return arguments.length?(n=t,e):n},e.value=function(t){return arguments.length?(r=t,e):r},e.revalue=function(t){return r&&(oi(t,function(e){e.children&&(e.value=0)}),ai(t,function(t){var n;t.children||(t.value=+r.call(e,t,t.depth)||0),(n=t.parent)&&(n.value+=t.value)})),t},e},ua.layout.partition=function(){function e(t,n,r,i){var o=t.children;if(t.x=n,t.y=t.depth*i,t.dx=r,t.dy=i,o&&(a=o.length)){var a,s,u,l=-1;for(r=t.value?r/t.value:0;++l<a;)e(s=o[l],n,u=s.value*r,i),n+=u}}function t(e){var n=e.children,r=0;if(n&&(i=n.length))for(var i,o=-1;++o<i;)r=Math.max(r,t(n[o]));return 1+r}function n(n,o){var a=r.call(this,n,o);return e(a[0],0,i[0],i[1]/t(a[0])),a}var r=ua.layout.hierarchy(),i=[1,1];return n.size=function(e){return arguments.length?(i=e,n):i},ii(n,r)},ua.layout.pie=function(){function e(a){var s,u=a.length,l=a.map(function(n,r){return+t.call(e,n,r)}),c=+("function"==typeof r?r.apply(this,arguments):r),h=("function"==typeof i?i.apply(this,arguments):i)-c,f=Math.min(Math.abs(h)/u,+("function"==typeof o?o.apply(this,arguments):o)),p=f*(0>h?-1:1),d=ua.sum(l),m=d?(h-u*p)/d:0,g=ua.range(u),v=[];return null!=n&&g.sort(n===wu?function(e,t){return l[t]-l[e]}:function(e,t){return n(a[e],a[t])}),g.forEach(function(e){v[e]={data:a[e],value:s=l[e],startAngle:c,endAngle:c+=s*m+p,padAngle:f}}),v}var t=Number,n=wu,r=0,i=Ua,o=0;return e.value=function(n){return arguments.length?(t=n,e):t},e.sort=function(t){return arguments.length?(n=t,e):n},e.startAngle=function(t){return arguments.length?(r=t,e):r},e.endAngle=function(t){return arguments.length?(i=t,e):i},e.padAngle=function(t){return arguments.length?(o=t,e):o},e};var wu={};ua.layout.stack=function(){function e(s,u){if(!(f=s.length))return s;var l=s.map(function(n,r){return t.call(e,n,r)}),c=l.map(function(t){return t.map(function(t,n){return[o.call(e,t,n),a.call(e,t,n)]})}),h=n.call(e,c,u);l=ua.permute(l,h),c=ua.permute(c,h);var f,p,d,m,g=r.call(e,c,u),v=l[0].length;for(d=0;v>d;++d)for(i.call(e,l[0][d],m=g[d],c[0][d][1]),p=1;f>p;++p)i.call(e,l[p][d],m+=c[p-1][d][1],c[p][d][1]);return s}var t=y,n=di,r=mi,i=pi,o=hi,a=fi;return e.values=function(n){return arguments.length?(t=n,e):t},e.order=function(t){return arguments.length?(n="function"==typeof t?t:xu.get(t)||di,e):n},e.offset=function(t){return arguments.length?(r="function"==typeof t?t:Su.get(t)||mi,e):r},e.x=function(t){return arguments.length?(o=t,e):o},e.y=function(t){return arguments.length?(a=t,e):a},e.out=function(t){return arguments.length?(i=t,e):i},e};var xu=ua.map({"inside-out":function(e){var t,n,r=e.length,i=e.map(gi),o=e.map(vi),a=ua.range(r).sort(function(e,t){return i[e]-i[t]}),s=0,u=0,l=[],c=[];for(t=0;r>t;++t)n=a[t],u>s?(s+=o[n],l.push(n)):(u+=o[n],c.push(n));return c.reverse().concat(l)},reverse:function(e){return ua.range(e.length).reverse()},"default":di}),Su=ua.map({silhouette:function(e){var t,n,r,i=e.length,o=e[0].length,a=[],s=0,u=[];for(n=0;o>n;++n){for(t=0,r=0;i>t;t++)r+=e[t][n][1];r>s&&(s=r),a.push(r)}for(n=0;o>n;++n)u[n]=(s-a[n])/2;return u},wiggle:function(e){var t,n,r,i,o,a,s,u,l,c=e.length,h=e[0],f=h.length,p=[];for(p[0]=u=l=0,n=1;f>n;++n){for(t=0,i=0;c>t;++t)i+=e[t][n][1];for(t=0,o=0,s=h[n][0]-h[n-1][0];c>t;++t){for(r=0,a=(e[t][n][1]-e[t][n-1][1])/(2*s);t>r;++r)a+=(e[r][n][1]-e[r][n-1][1])/s;o+=a*e[t][n][1]}p[n]=u-=i?o/i*s:0,l>u&&(l=u)}for(n=0;f>n;++n)p[n]-=l;return p},expand:function(e){var t,n,r,i=e.length,o=e[0].length,a=1/i,s=[];for(n=0;o>n;++n){for(t=0,r=0;i>t;t++)r+=e[t][n][1];if(r)for(t=0;i>t;t++)e[t][n][1]/=r;else for(t=0;i>t;t++)e[t][n][1]=a}for(n=0;o>n;++n)s[n]=0;return s},zero:mi});ua.layout.histogram=function(){function e(e,o){for(var a,s,u=[],l=e.map(n,this),c=r.call(this,l,o),h=i.call(this,c,l,o),o=-1,f=l.length,p=h.length-1,d=t?1:1/f;++o<p;)a=u[o]=[],a.dx=h[o+1]-(a.x=h[o]),a.y=0;if(p>0)for(o=-1;++o<f;)s=l[o],s>=c[0]&&s<=c[1]&&(a=u[ua.bisect(h,s,1,p)-1],a.y+=d,a.push(e[o]));return u}var t=!0,n=Number,r=wi,i=bi;return e.value=function(t){return arguments.length?(n=t,e):n},e.range=function(t){return arguments.length?(r=Pe(t),e):r},e.bins=function(t){return arguments.length?(i="number"==typeof t?function(e){return _i(e,t)}:Pe(t),e):i},e.frequency=function(n){return arguments.length?(t=!!n,e):t},e},ua.layout.pack=function(){function e(e,o){var a=n.call(this,e,o),s=a[0],u=i[0],l=i[1],c=null==t?Math.sqrt:"function"==typeof t?t:function(){return t};if(s.x=s.y=0,ai(s,function(e){e.r=+c(e.value)}),ai(s,Pi),r){var h=r*(t?1:Math.max(2*s.r/u,2*s.r/l))/2;ai(s,function(e){e.r+=h}),ai(s,Pi),ai(s,function(e){e.r-=h})}return Ai(s,u/2,l/2,t?1:1/Math.max(2*s.r/u,2*s.r/l)),a}var t,n=ua.layout.hierarchy().sort(xi),r=0,i=[1,1];return e.size=function(t){return arguments.length?(i=t,e):i},e.radius=function(n){return arguments.length?(t=null==n||"function"==typeof n?n:+n,e):t},e.padding=function(t){return arguments.length?(r=+t,e):r},ii(e,n)},ua.layout.tree=function(){function e(e,i){var c=a.call(this,e,i),h=c[0],f=t(h);if(ai(f,n),f.parent.m=-f.z,oi(f,r),l)oi(h,o);else{var p=h,d=h,m=h;oi(h,function(e){e.x<p.x&&(p=e),e.x>d.x&&(d=e),e.depth>m.depth&&(m=e)});var g=s(p,d)/2-p.x,v=u[0]/(d.x+s(d,p)/2+g),y=u[1]/(m.depth||1);oi(h,function(e){e.x=(e.x+g)*v,e.y=e.depth*y})}return c}function t(e){for(var t,n={A:null,children:[e]},r=[n];null!=(t=r.pop());)for(var i,o=t.children,a=0,s=o.length;s>a;++a)r.push((o[a]=i={_:o[a],parent:t,children:(i=o[a].children)&&i.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:a}).a=i);return n.children[0]}function n(e){var t=e.children,n=e.parent.children,r=e.i?n[e.i-1]:null;if(t.length){Di(e);var o=(t[0].z+t[t.length-1].z)/2;r?(e.z=r.z+s(e._,r._),e.m=e.z-o):e.z=o}else r&&(e.z=r.z+s(e._,r._));e.parent.A=i(e,r,e.parent.A||n[0])}function r(e){e._.x=e.z+e.parent.m,e.m+=e.parent.m}function i(e,t,n){if(t){for(var r,i=e,o=e,a=t,u=i.parent.children[0],l=i.m,c=o.m,h=a.m,f=u.m;a=Ni(a),i=$i(i),a&&i;)u=$i(u),o=Ni(o),o.a=e,r=a.z+h-i.z-l+s(a._,i._),r>0&&(Ii(ji(a,e,n),e,r),l+=r,c+=r),h+=a.m,l+=i.m,f+=u.m,c+=o.m;a&&!Ni(o)&&(o.t=a,o.m+=h-c),i&&!$i(u)&&(u.t=i,u.m+=l-f,n=e)}return n}function o(e){e.x*=u[0],e.y=e.depth*u[1]}var a=ua.layout.hierarchy().sort(null).value(null),s=Ei,u=[1,1],l=null;return e.separation=function(t){return arguments.length?(s=t,e):s},e.size=function(t){return arguments.length?(l=null==(u=t)?o:null,e):l?null:u},e.nodeSize=function(t){return arguments.length?(l=null==(u=t)?null:o,e):l?u:null},ii(e,a)},ua.layout.cluster=function(){function e(e,o){var a,s=t.call(this,e,o),u=s[0],l=0;ai(u,function(e){var t=e.children;t&&t.length?(e.x=Li(t),e.y=Fi(t)):(e.x=a?l+=n(e,a):0,e.y=0,a=e)});var c=Ri(u),h=Ui(u),f=c.x-n(c,h)/2,p=h.x+n(h,c)/2;return ai(u,i?function(e){e.x=(e.x-u.x)*r[0],e.y=(u.y-e.y)*r[1]}:function(e){e.x=(e.x-f)/(p-f)*r[0],e.y=(1-(u.y?e.y/u.y:1))*r[1]}),s}var t=ua.layout.hierarchy().sort(null).value(null),n=Ei,r=[1,1],i=!1;return e.separation=function(t){return arguments.length?(n=t,e):n},e.size=function(t){return arguments.length?(i=null==(r=t),e):i?null:r},e.nodeSize=function(t){return arguments.length?(i=null!=(r=t),e):i?r:null},ii(e,t)},ua.layout.treemap=function(){function e(e,t){for(var n,r,i=-1,o=e.length;++i<o;)r=(n=e[i]).value*(0>t?0:t),n.area=isNaN(r)||0>=r?0:r}function t(n){var o=n.children;if(o&&o.length){var a,s,u,l=h(n),c=[],f=o.slice(),d=1/0,m="slice"===p?l.dx:"dice"===p?l.dy:"slice-dice"===p?1&n.depth?l.dy:l.dx:Math.min(l.dx,l.dy);for(e(f,l.dx*l.dy/n.value),c.area=0;(u=f.length)>0;)c.push(a=f[u-1]),c.area+=a.area,"squarify"!==p||(s=r(c,m))<=d?(f.pop(),d=s):(c.area-=c.pop().area,i(c,m,l,!1),m=Math.min(l.dx,l.dy),c.length=c.area=0,d=1/0);c.length&&(i(c,m,l,!0),c.length=c.area=0),o.forEach(t)}}function n(t){var r=t.children;if(r&&r.length){var o,a=h(t),s=r.slice(),u=[];for(e(s,a.dx*a.dy/t.value),u.area=0;o=s.pop();)u.push(o),u.area+=o.area,null!=o.z&&(i(u,o.z?a.dx:a.dy,a,!s.length),u.length=u.area=0);r.forEach(n)}}function r(e,t){for(var n,r=e.area,i=0,o=1/0,a=-1,s=e.length;++a<s;)(n=e[a].area)&&(o>n&&(o=n),n>i&&(i=n));return r*=r,t*=t,r?Math.max(t*i*d/r,r/(t*o*d)):1/0}function i(e,t,n,r){var i,o=-1,a=e.length,s=n.x,l=n.y,c=t?u(e.area/t):0;if(t==n.dx){for((r||c>n.dy)&&(c=n.dy);++o<a;)i=e[o],i.x=s,i.y=l,i.dy=c,s+=i.dx=Math.min(n.x+n.dx-s,c?u(i.area/c):0);i.z=!0,i.dx+=n.x+n.dx-s,n.y+=c,n.dy-=c}else{for((r||c>n.dx)&&(c=n.dx);++o<a;)i=e[o],i.x=s,i.y=l,i.dx=c,l+=i.dy=Math.min(n.y+n.dy-l,c?u(i.area/c):0);i.z=!1,i.dy+=n.y+n.dy-l,n.x+=c,n.dx-=c}}function o(r){var i=a||s(r),o=i[0];return o.x=o.y=0,o.value?(o.dx=l[0],o.dy=l[1]):o.dx=o.dy=0,a&&s.revalue(o),e([o],o.dx*o.dy/o.value),(a?n:t)(o),f&&(a=i),i}var a,s=ua.layout.hierarchy(),u=Math.round,l=[1,1],c=null,h=Vi,f=!1,p="squarify",d=.5*(1+Math.sqrt(5));return o.size=function(e){return arguments.length?(l=e,o):l},o.padding=function(e){function t(t){var n=e.call(o,t,t.depth);return null==n?Vi(t):qi(t,"number"==typeof n?[n,n,n,n]:n)}function n(t){return qi(t,e)}if(!arguments.length)return c;var r;return h=null==(c=e)?Vi:"function"==(r=typeof e)?t:"number"===r?(e=[e,e,e,e],n):n,o},o.round=function(e){return arguments.length?(u=e?Math.round:Number,o):u!=Number},o.sticky=function(e){return arguments.length?(f=e,a=null,o):f},o.ratio=function(e){return arguments.length?(d=e,o):d},o.mode=function(e){return arguments.length?(p=e+"",o):p},ii(o,s)},ua.random={normal:function(e,t){var n=arguments.length;return 2>n&&(t=1),1>n&&(e=0),function(){var n,r,i;do n=2*Math.random()-1,r=2*Math.random()-1,i=n*n+r*r;while(!i||i>1);return e+t*n*Math.sqrt(-2*Math.log(i)/i)}},logNormal:function(){var e=ua.random.normal.apply(ua,arguments);return function(){return Math.exp(e())}},bates:function(e){var t=ua.random.irwinHall(e);
return function(){return t()/e}},irwinHall:function(e){return function(){for(var t=0,n=0;e>n;n++)t+=Math.random();return t}}},ua.scale={};var Cu={floor:y,ceil:y};ua.scale.linear=function(){return Xi([0,1],[0,1],br,!1)};var ku={s:1,g:1,p:1,r:1,e:1};ua.scale.log=function(){return ro(ua.scale.linear().domain([0,1]),10,!0,[1,10])};var Pu=ua.format(".0e"),Mu={floor:function(e){return-Math.ceil(-e)},ceil:function(e){return-Math.floor(-e)}};ua.scale.pow=function(){return io(ua.scale.linear(),1,[0,1])},ua.scale.sqrt=function(){return ua.scale.pow().exponent(.5)},ua.scale.ordinal=function(){return ao([],{t:"range",a:[[]]})},ua.scale.category10=function(){return ua.scale.ordinal().range(Tu)},ua.scale.category20=function(){return ua.scale.ordinal().range(Au)},ua.scale.category20b=function(){return ua.scale.ordinal().range(Ou)},ua.scale.category20c=function(){return ua.scale.ordinal().range(Eu)};var Tu=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(be),Au=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(be),Ou=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(be),Eu=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(be);ua.scale.quantile=function(){return so([],[])},ua.scale.quantize=function(){return uo(0,1,[0,1])},ua.scale.threshold=function(){return lo([.5],[0,1])},ua.scale.identity=function(){return co([0,1])},ua.svg={},ua.svg.arc=function(){function e(){var e=Math.max(0,+n.apply(this,arguments)),l=Math.max(0,+r.apply(this,arguments)),c=a.apply(this,arguments)-qa,h=s.apply(this,arguments)-qa,f=Math.abs(h-c),p=c>h?0:1;if(e>l&&(d=l,l=e,e=d),f>=Va)return t(l,p)+(e?t(e,1-p):"")+"Z";var d,m,g,v,y,b,_,w,x,S,C,k,P=0,M=0,T=[];if((v=(+u.apply(this,arguments)||0)/2)&&(g=o===$u?Math.sqrt(e*e+l*l):+o.apply(this,arguments),p||(M*=-1),l&&(M=te(g/l*Math.sin(v))),e&&(P=te(g/e*Math.sin(v)))),l){y=l*Math.cos(c+M),b=l*Math.sin(c+M),_=l*Math.cos(h-M),w=l*Math.sin(h-M);var A=Math.abs(h-c-2*M)<=Ra?0:1;if(M&&yo(y,b,_,w)===p^A){var O=(c+h)/2;y=l*Math.cos(O),b=l*Math.sin(O),_=w=null}}else y=b=0;if(e){x=e*Math.cos(h-P),S=e*Math.sin(h-P),C=e*Math.cos(c+P),k=e*Math.sin(c+P);var E=Math.abs(c-h+2*P)<=Ra?0:1;if(P&&yo(x,S,C,k)===1-p^E){var $=(c+h)/2;x=e*Math.cos($),S=e*Math.sin($),C=k=null}}else x=S=0;if(f>Fa&&(d=Math.min(Math.abs(l-e)/2,+i.apply(this,arguments)))>.001){m=l>e^p?0:1;var N=d,I=d;if(Ra>f){var D=null==C?[x,S]:null==_?[y,b]:In([y,b],[C,k],[_,w],[x,S]),j=y-D[0],F=b-D[1],L=_-D[0],R=w-D[1],U=1/Math.sin(Math.acos((j*L+F*R)/(Math.sqrt(j*j+F*F)*Math.sqrt(L*L+R*R)))/2),V=Math.sqrt(D[0]*D[0]+D[1]*D[1]);I=Math.min(d,(e-V)/(U-1)),N=Math.min(d,(l-V)/(U+1))}if(null!=_){var q=bo(null==C?[x,S]:[C,k],[y,b],l,N,p),z=bo([_,w],[x,S],l,N,p);d===N?T.push("M",q[0],"A",N,",",N," 0 0,",m," ",q[1],"A",l,",",l," 0 ",1-p^yo(q[1][0],q[1][1],z[1][0],z[1][1]),",",p," ",z[1],"A",N,",",N," 0 0,",m," ",z[0]):T.push("M",q[0],"A",N,",",N," 0 1,",m," ",z[0])}else T.push("M",y,",",b);if(null!=C){var B=bo([y,b],[C,k],e,-I,p),H=bo([x,S],null==_?[y,b]:[_,w],e,-I,p);d===I?T.push("L",H[0],"A",I,",",I," 0 0,",m," ",H[1],"A",e,",",e," 0 ",p^yo(H[1][0],H[1][1],B[1][0],B[1][1]),",",1-p," ",B[1],"A",I,",",I," 0 0,",m," ",B[0]):T.push("L",H[0],"A",I,",",I," 0 0,",m," ",B[0])}else T.push("L",x,",",S)}else T.push("M",y,",",b),null!=_&&T.push("A",l,",",l," 0 ",A,",",p," ",_,",",w),T.push("L",x,",",S),null!=C&&T.push("A",e,",",e," 0 ",E,",",1-p," ",C,",",k);return T.push("Z"),T.join("")}function t(e,t){return"M0,"+e+"A"+e+","+e+" 0 1,"+t+" 0,"+-e+"A"+e+","+e+" 0 1,"+t+" 0,"+e}var n=fo,r=po,i=ho,o=$u,a=mo,s=go,u=vo;return e.innerRadius=function(t){return arguments.length?(n=Pe(t),e):n},e.outerRadius=function(t){return arguments.length?(r=Pe(t),e):r},e.cornerRadius=function(t){return arguments.length?(i=Pe(t),e):i},e.padRadius=function(t){return arguments.length?(o=t==$u?$u:Pe(t),e):o},e.startAngle=function(t){return arguments.length?(a=Pe(t),e):a},e.endAngle=function(t){return arguments.length?(s=Pe(t),e):s},e.padAngle=function(t){return arguments.length?(u=Pe(t),e):u},e.centroid=function(){var e=(+n.apply(this,arguments)+ +r.apply(this,arguments))/2,t=(+a.apply(this,arguments)+ +s.apply(this,arguments))/2-qa;return[Math.cos(t)*e,Math.sin(t)*e]},e};var $u="auto";ua.svg.line=function(){return _o(y)};var Nu=ua.map({linear:wo,"linear-closed":xo,step:So,"step-before":Co,"step-after":ko,basis:Eo,"basis-open":$o,"basis-closed":No,bundle:Io,cardinal:To,"cardinal-open":Po,"cardinal-closed":Mo,monotone:Uo});Nu.forEach(function(e,t){t.key=e,t.closed=/-closed$/.test(e)});var Iu=[0,2/3,1/3,0],Du=[0,1/3,2/3,0],ju=[0,1/6,2/3,1/6];ua.svg.line.radial=function(){var e=_o(Vo);return e.radius=e.x,delete e.x,e.angle=e.y,delete e.y,e},Co.reverse=ko,ko.reverse=Co,ua.svg.area=function(){return qo(y)},ua.svg.area.radial=function(){var e=qo(Vo);return e.radius=e.x,delete e.x,e.innerRadius=e.x0,delete e.x0,e.outerRadius=e.x1,delete e.x1,e.angle=e.y,delete e.y,e.startAngle=e.y0,delete e.y0,e.endAngle=e.y1,delete e.y1,e},ua.svg.chord=function(){function e(e,s){var u=t(this,o,e,s),l=t(this,a,e,s);return"M"+u.p0+r(u.r,u.p1,u.a1-u.a0)+(n(u,l)?i(u.r,u.p1,u.r,u.p0):i(u.r,u.p1,l.r,l.p0)+r(l.r,l.p1,l.a1-l.a0)+i(l.r,l.p1,u.r,u.p0))+"Z"}function t(e,t,n,r){var i=t.call(e,n,r),o=s.call(e,i,r),a=u.call(e,i,r)-qa,c=l.call(e,i,r)-qa;return{r:o,a0:a,a1:c,p0:[o*Math.cos(a),o*Math.sin(a)],p1:[o*Math.cos(c),o*Math.sin(c)]}}function n(e,t){return e.a0==t.a0&&e.a1==t.a1}function r(e,t,n){return"A"+e+","+e+" 0 "+ +(n>Ra)+",1 "+t}function i(e,t,n,r){return"Q 0,0 "+r}var o=bn,a=_n,s=zo,u=mo,l=go;return e.radius=function(t){return arguments.length?(s=Pe(t),e):s},e.source=function(t){return arguments.length?(o=Pe(t),e):o},e.target=function(t){return arguments.length?(a=Pe(t),e):a},e.startAngle=function(t){return arguments.length?(u=Pe(t),e):u},e.endAngle=function(t){return arguments.length?(l=Pe(t),e):l},e},ua.svg.diagonal=function(){function e(e,i){var o=t.call(this,e,i),a=n.call(this,e,i),s=(o.y+a.y)/2,u=[o,{x:o.x,y:s},{x:a.x,y:s},a];return u=u.map(r),"M"+u[0]+"C"+u[1]+" "+u[2]+" "+u[3]}var t=bn,n=_n,r=Bo;return e.source=function(n){return arguments.length?(t=Pe(n),e):t},e.target=function(t){return arguments.length?(n=Pe(t),e):n},e.projection=function(t){return arguments.length?(r=t,e):r},e},ua.svg.diagonal.radial=function(){var e=ua.svg.diagonal(),t=Bo,n=e.projection;return e.projection=function(e){return arguments.length?n(Ho(t=e)):t},e},ua.svg.symbol=function(){function e(e,r){return(Fu.get(t.call(this,e,r))||Yo)(n.call(this,e,r))}var t=Wo,n=Go;return e.type=function(n){return arguments.length?(t=Pe(n),e):t},e.size=function(t){return arguments.length?(n=Pe(t),e):n},e};var Fu=ua.map({circle:Yo,cross:function(e){var t=Math.sqrt(e/5)/2;return"M"+-3*t+","+-t+"H"+-t+"V"+-3*t+"H"+t+"V"+-t+"H"+3*t+"V"+t+"H"+t+"V"+3*t+"H"+-t+"V"+t+"H"+-3*t+"Z"},diamond:function(e){var t=Math.sqrt(e/(2*Ru)),n=t*Ru;return"M0,"+-t+"L"+n+",0 0,"+t+" "+-n+",0Z"},square:function(e){var t=Math.sqrt(e)/2;return"M"+-t+","+-t+"L"+t+","+-t+" "+t+","+t+" "+-t+","+t+"Z"},"triangle-down":function(e){var t=Math.sqrt(e/Lu),n=t*Lu/2;return"M0,"+n+"L"+t+","+-n+" "+-t+","+-n+"Z"},"triangle-up":function(e){var t=Math.sqrt(e/Lu),n=t*Lu/2;return"M0,"+-n+"L"+t+","+n+" "+-t+","+n+"Z"}});ua.svg.symbolTypes=Fu.keys();var Lu=Math.sqrt(3),Ru=Math.tan(30*za);Aa.transition=function(e){for(var t,n,r=Uu||++Bu,i=Jo(e),o=[],a=Vu||{time:Date.now(),ease:Pr,delay:0,duration:250},s=-1,u=this.length;++s<u;){o.push(t=[]);for(var l=this[s],c=-1,h=l.length;++c<h;)(n=l[c])&&ea(n,c,i,r,a),t.push(n)}return Ko(o,i,r)},Aa.interrupt=function(e){return this.each(null==e?qu:Xo(Jo(e)))};var Uu,Vu,qu=Xo(Jo()),zu=[],Bu=0;zu.call=Aa.call,zu.empty=Aa.empty,zu.node=Aa.node,zu.size=Aa.size,ua.transition=function(e,t){return e&&e.transition?Uu?e.transition(t):e:ua.selection().transition(e)},ua.transition.prototype=zu,zu.select=function(e){var t,n,r,i=this.id,o=this.namespace,a=[];e=T(e);for(var s=-1,u=this.length;++s<u;){a.push(t=[]);for(var l=this[s],c=-1,h=l.length;++c<h;)(r=l[c])&&(n=e.call(r,r.__data__,c,s))?("__data__"in r&&(n.__data__=r.__data__),ea(n,c,o,i,r[o][i]),t.push(n)):t.push(null)}return Ko(a,o,i)},zu.selectAll=function(e){var t,n,r,i,o,a=this.id,s=this.namespace,u=[];e=A(e);for(var l=-1,c=this.length;++l<c;)for(var h=this[l],f=-1,p=h.length;++f<p;)if(r=h[f]){o=r[s][a],n=e.call(r,r.__data__,f,l),u.push(t=[]);for(var d=-1,m=n.length;++d<m;)(i=n[d])&&ea(i,d,s,a,o),t.push(i)}return Ko(u,s,a)},zu.filter=function(e){var t,n,r,i=[];"function"!=typeof e&&(e=V(e));for(var o=0,a=this.length;a>o;o++){i.push(t=[]);for(var n=this[o],s=0,u=n.length;u>s;s++)(r=n[s])&&e.call(r,r.__data__,s,o)&&t.push(r)}return Ko(i,this.namespace,this.id)},zu.tween=function(e,t){var n=this.id,r=this.namespace;return arguments.length<2?this.node()[r][n].tween.get(e):z(this,null==t?function(t){t[r][n].tween.remove(e)}:function(i){i[r][n].tween.set(e,t)})},zu.attr=function(e,t){function n(){this.removeAttribute(s)}function r(){this.removeAttributeNS(s.space,s.local)}function i(e){return null==e?n:(e+="",function(){var t,n=this.getAttribute(s);return n!==e&&(t=a(n,e),function(e){this.setAttribute(s,t(e))})})}function o(e){return null==e?r:(e+="",function(){var t,n=this.getAttributeNS(s.space,s.local);return n!==e&&(t=a(n,e),function(e){this.setAttributeNS(s.space,s.local,t(e))})})}if(arguments.length<2){for(t in e)this.attr(t,e[t]);return this}var a="transform"==e?Wr:br,s=ua.ns.qualify(e);return Zo(this,"attr."+e,t,s.local?o:i)},zu.attrTween=function(e,t){function n(e,n){var r=t.call(this,e,n,this.getAttribute(i));return r&&function(e){this.setAttribute(i,r(e))}}function r(e,n){var r=t.call(this,e,n,this.getAttributeNS(i.space,i.local));return r&&function(e){this.setAttributeNS(i.space,i.local,r(e))}}var i=ua.ns.qualify(e);return this.tween("attr."+e,i.local?r:n)},zu.style=function(e,n,r){function i(){this.style.removeProperty(e)}function o(n){return null==n?i:(n+="",function(){var i,o=t(this).getComputedStyle(this,null).getPropertyValue(e);return o!==n&&(i=br(o,n),function(t){this.style.setProperty(e,i(t),r)})})}var a=arguments.length;if(3>a){if("string"!=typeof e){2>a&&(n="");for(r in e)this.style(r,e[r],n);return this}r=""}return Zo(this,"style."+e,n,o)},zu.styleTween=function(e,n,r){function i(i,o){var a=n.call(this,i,o,t(this).getComputedStyle(this,null).getPropertyValue(e));return a&&function(t){this.style.setProperty(e,a(t),r)}}return arguments.length<3&&(r=""),this.tween("style."+e,i)},zu.text=function(e){return Zo(this,"text",e,Qo)},zu.remove=function(){var e=this.namespace;return this.each("end.transition",function(){var t;this[e].count<2&&(t=this.parentNode)&&t.removeChild(this)})},zu.ease=function(e){var t=this.id,n=this.namespace;return arguments.length<1?this.node()[n][t].ease:("function"!=typeof e&&(e=ua.ease.apply(ua,arguments)),z(this,function(r){r[n][t].ease=e}))},zu.delay=function(e){var t=this.id,n=this.namespace;return arguments.length<1?this.node()[n][t].delay:z(this,"function"==typeof e?function(r,i,o){r[n][t].delay=+e.call(r,r.__data__,i,o)}:(e=+e,function(r){r[n][t].delay=e}))},zu.duration=function(e){var t=this.id,n=this.namespace;return arguments.length<1?this.node()[n][t].duration:z(this,"function"==typeof e?function(r,i,o){r[n][t].duration=Math.max(1,e.call(r,r.__data__,i,o))}:(e=Math.max(1,e),function(r){r[n][t].duration=e}))},zu.each=function(e,t){var n=this.id,r=this.namespace;if(arguments.length<2){var i=Vu,o=Uu;try{Uu=n,z(this,function(t,i,o){Vu=t[r][n],e.call(t,t.__data__,i,o)})}finally{Vu=i,Uu=o}}else z(this,function(i){var o=i[r][n];(o.event||(o.event=ua.dispatch("start","end","interrupt"))).on(e,t)});return this},zu.transition=function(){for(var e,t,n,r,i=this.id,o=++Bu,a=this.namespace,s=[],u=0,l=this.length;l>u;u++){s.push(e=[]);for(var t=this[u],c=0,h=t.length;h>c;c++)(n=t[c])&&(r=n[a][i],ea(n,c,a,o,{time:r.time,ease:r.ease,delay:r.delay+r.duration,duration:r.duration})),e.push(n)}return Ko(s,a,o)},ua.svg.axis=function(){function e(e){e.each(function(){var e,l=ua.select(this),c=this.__chart__||n,h=this.__chart__=n.copy(),f=null==u?h.ticks?h.ticks.apply(h,s):h.domain():u,p=null==t?h.tickFormat?h.tickFormat.apply(h,s):y:t,d=l.selectAll(".tick").data(f,h),m=d.enter().insert("g",".domain").attr("class","tick").style("opacity",Fa),g=ua.transition(d.exit()).style("opacity",Fa).remove(),v=ua.transition(d.order()).style("opacity",1),b=Math.max(i,0)+a,_=Bi(h),w=l.selectAll(".domain").data([0]),x=(w.enter().append("path").attr("class","domain"),ua.transition(w));m.append("line"),m.append("text");var S,C,k,P,M=m.select("line"),T=v.select("line"),A=d.select("text").text(p),O=m.select("text"),E=v.select("text"),$="top"===r||"left"===r?-1:1;if("bottom"===r||"top"===r?(e=ta,S="x",k="y",C="x2",P="y2",A.attr("dy",0>$?"0em":".71em").style("text-anchor","middle"),x.attr("d","M"+_[0]+","+$*o+"V0H"+_[1]+"V"+$*o)):(e=na,S="y",k="x",C="y2",P="x2",A.attr("dy",".32em").style("text-anchor",0>$?"end":"start"),x.attr("d","M"+$*o+","+_[0]+"H0V"+_[1]+"H"+$*o)),M.attr(P,$*i),O.attr(k,$*b),T.attr(C,0).attr(P,$*i),E.attr(S,0).attr(k,$*b),h.rangeBand){var N=h,I=N.rangeBand()/2;c=h=function(e){return N(e)+I}}else c.rangeBand?c=h:g.call(e,h,c);m.call(e,c,h),v.call(e,h,h)})}var t,n=ua.scale.linear(),r=Hu,i=6,o=6,a=3,s=[10],u=null;return e.scale=function(t){return arguments.length?(n=t,e):n},e.orient=function(t){return arguments.length?(r=t in Gu?t+"":Hu,e):r},e.ticks=function(){return arguments.length?(s=ca(arguments),e):s},e.tickValues=function(t){return arguments.length?(u=t,e):u},e.tickFormat=function(n){return arguments.length?(t=n,e):t},e.tickSize=function(t){var n=arguments.length;return n?(i=+t,o=+arguments[n-1],e):i},e.innerTickSize=function(t){return arguments.length?(i=+t,e):i},e.outerTickSize=function(t){return arguments.length?(o=+t,e):o},e.tickPadding=function(t){return arguments.length?(a=+t,e):a},e.tickSubdivide=function(){return arguments.length&&e},e};var Hu="bottom",Gu={top:1,right:1,bottom:1,left:1};ua.svg.brush=function(){function e(t){t.each(function(){var t=ua.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",o).on("touchstart.brush",o),a=t.selectAll(".background").data([0]);a.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),t.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var s=t.selectAll(".resize").data(m,y);s.exit().remove(),s.enter().append("g").attr("class",function(e){return"resize "+e}).style("cursor",function(e){return Wu[e]}).append("rect").attr("x",function(e){return/[ew]$/.test(e)?-3:null}).attr("y",function(e){return/^[ns]/.test(e)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),s.style("display",e.empty()?"none":null);var u,h=ua.transition(t),f=ua.transition(a);l&&(u=Bi(l),f.attr("x",u[0]).attr("width",u[1]-u[0]),r(h)),c&&(u=Bi(c),f.attr("y",u[0]).attr("height",u[1]-u[0]),i(h)),n(h)})}function n(e){e.selectAll(".resize").attr("transform",function(e){return"translate("+h[+/e$/.test(e)]+","+f[+/^s/.test(e)]+")"})}function r(e){e.select(".extent").attr("x",h[0]),e.selectAll(".extent,.n>rect,.s>rect").attr("width",h[1]-h[0])}function i(e){e.select(".extent").attr("y",f[0]),e.selectAll(".extent,.e>rect,.w>rect").attr("height",f[1]-f[0])}function o(){function o(){32==ua.event.keyCode&&(A||(b=null,E[0]-=h[1],E[1]-=f[1],A=2),C())}function m(){32==ua.event.keyCode&&2==A&&(E[0]+=h[1],E[1]+=f[1],A=0,C())}function g(){var e=ua.mouse(w),t=!1;_&&(e[0]+=_[0],e[1]+=_[1]),A||(ua.event.altKey?(b||(b=[(h[0]+h[1])/2,(f[0]+f[1])/2]),E[0]=h[+(e[0]<b[0])],E[1]=f[+(e[1]<b[1])]):b=null),M&&v(e,l,0)&&(r(k),t=!0),T&&v(e,c,1)&&(i(k),t=!0),t&&(n(k),S({type:"brush",mode:A?"move":"resize"}))}function v(e,t,n){var r,i,o=Bi(t),u=o[0],l=o[1],c=E[n],m=n?f:h,g=m[1]-m[0];return A&&(u-=c,l-=g+c),r=(n?d:p)?Math.max(u,Math.min(l,e[n])):e[n],A?i=(r+=c)+g:(b&&(c=Math.max(u,Math.min(l,2*b[n]-r))),r>c?(i=r,r=c):i=c),m[0]!=r||m[1]!=i?(n?s=null:a=null,m[0]=r,m[1]=i,!0):void 0}function y(){g(),k.style("pointer-events","all").selectAll(".resize").style("display",e.empty()?"none":null),ua.select("body").style("cursor",null),$.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),O(),S({type:"brushend"})}var b,_,w=this,x=ua.select(ua.event.target),S=u.of(w,arguments),k=ua.select(w),P=x.datum(),M=!/^(n|s)$/.test(P)&&l,T=!/^(e|w)$/.test(P)&&c,A=x.classed("extent"),O=X(w),E=ua.mouse(w),$=ua.select(t(w)).on("keydown.brush",o).on("keyup.brush",m);if(ua.event.changedTouches?$.on("touchmove.brush",g).on("touchend.brush",y):$.on("mousemove.brush",g).on("mouseup.brush",y),k.interrupt().selectAll("*").interrupt(),A)E[0]=h[0]-E[0],E[1]=f[0]-E[1];else if(P){var N=+/w$/.test(P),I=+/^n/.test(P);_=[h[1-N]-E[0],f[1-I]-E[1]],E[0]=h[N],E[1]=f[I]}else ua.event.altKey&&(b=E.slice());k.style("pointer-events","none").selectAll(".resize").style("display",null),ua.select("body").style("cursor",x.style("cursor")),S({type:"brushstart"}),g()}var a,s,u=P(e,"brushstart","brush","brushend"),l=null,c=null,h=[0,0],f=[0,0],p=!0,d=!0,m=Yu[0];return e.event=function(e){e.each(function(){var e=u.of(this,arguments),t={x:h,y:f,i:a,j:s},n=this.__chart__||t;this.__chart__=t,Uu?ua.select(this).transition().each("start.brush",function(){a=n.i,s=n.j,h=n.x,f=n.y,e({type:"brushstart"})}).tween("brush:brush",function(){var n=_r(h,t.x),r=_r(f,t.y);return a=s=null,function(i){h=t.x=n(i),f=t.y=r(i),e({type:"brush",mode:"resize"})}}).each("end.brush",function(){a=t.i,s=t.j,e({type:"brush",mode:"resize"}),e({type:"brushend"})}):(e({type:"brushstart"}),e({type:"brush",mode:"resize"}),e({type:"brushend"}))})},e.x=function(t){return arguments.length?(l=t,m=Yu[!l<<1|!c],e):l},e.y=function(t){return arguments.length?(c=t,m=Yu[!l<<1|!c],e):c},e.clamp=function(t){return arguments.length?(l&&c?(p=!!t[0],d=!!t[1]):l?p=!!t:c&&(d=!!t),e):l&&c?[p,d]:l?p:c?d:null},e.extent=function(t){var n,r,i,o,u;return arguments.length?(l&&(n=t[0],r=t[1],c&&(n=n[0],r=r[0]),a=[n,r],l.invert&&(n=l(n),r=l(r)),n>r&&(u=n,n=r,r=u),n==h[0]&&r==h[1]||(h=[n,r])),c&&(i=t[0],o=t[1],l&&(i=i[1],o=o[1]),s=[i,o],c.invert&&(i=c(i),o=c(o)),i>o&&(u=i,i=o,o=u),i==f[0]&&o==f[1]||(f=[i,o])),e):(l&&(a?(n=a[0],r=a[1]):(n=h[0],r=h[1],l.invert&&(n=l.invert(n),r=l.invert(r)),n>r&&(u=n,n=r,r=u))),c&&(s?(i=s[0],o=s[1]):(i=f[0],o=f[1],c.invert&&(i=c.invert(i),o=c.invert(o)),i>o&&(u=i,i=o,o=u))),l&&c?[[n,i],[r,o]]:l?[n,r]:c&&[i,o])},e.clear=function(){return e.empty()||(h=[0,0],f=[0,0],a=s=null),e},e.empty=function(){return!!l&&h[0]==h[1]||!!c&&f[0]==f[1]},ua.rebind(e,u,"on")};var Wu={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Yu=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],Xu=ds.format=_s.timeFormat,Ku=Xu.utc,Zu=Ku("%Y-%m-%dT%H:%M:%S.%LZ");Xu.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?ra:Zu,ra.parse=function(e){var t=new Date(e);return isNaN(t)?null:t},ra.toString=Zu.toString,ds.second=Ue(function(e){return new ms(1e3*Math.floor(e/1e3))},function(e,t){e.setTime(e.getTime()+1e3*Math.floor(t))},function(e){return e.getSeconds()}),ds.seconds=ds.second.range,ds.seconds.utc=ds.second.utc.range,ds.minute=Ue(function(e){return new ms(6e4*Math.floor(e/6e4))},function(e,t){e.setTime(e.getTime()+6e4*Math.floor(t))},function(e){return e.getMinutes()}),ds.minutes=ds.minute.range,ds.minutes.utc=ds.minute.utc.range,ds.hour=Ue(function(e){var t=e.getTimezoneOffset()/60;return new ms(36e5*(Math.floor(e/36e5-t)+t))},function(e,t){e.setTime(e.getTime()+36e5*Math.floor(t))},function(e){return e.getHours()}),ds.hours=ds.hour.range,ds.hours.utc=ds.hour.utc.range,ds.month=Ue(function(e){return e=ds.day(e),e.setDate(1),e},function(e,t){e.setMonth(e.getMonth()+t)},function(e){return e.getMonth()}),ds.months=ds.month.range,ds.months.utc=ds.month.utc.range;var Qu=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],Ju=[[ds.second,1],[ds.second,5],[ds.second,15],[ds.second,30],[ds.minute,1],[ds.minute,5],[ds.minute,15],[ds.minute,30],[ds.hour,1],[ds.hour,3],[ds.hour,6],[ds.hour,12],[ds.day,1],[ds.day,2],[ds.week,1],[ds.month,1],[ds.month,3],[ds.year,1]],el=Xu.multi([[".%L",function(e){return e.getMilliseconds()}],[":%S",function(e){return e.getSeconds()}],["%I:%M",function(e){return e.getMinutes()}],["%I %p",function(e){return e.getHours()}],["%a %d",function(e){return e.getDay()&&1!=e.getDate()}],["%b %d",function(e){return 1!=e.getDate()}],["%B",function(e){return e.getMonth()}],["%Y",At]]),tl={range:function(e,t,n){return ua.range(Math.ceil(e/n)*n,+t,n).map(oa)},floor:y,ceil:y};Ju.year=ds.year,ds.scale=function(){return ia(ua.scale.linear(),Ju,el)};var nl=Ju.map(function(e){return[e[0].utc,e[1]]}),rl=Ku.multi([[".%L",function(e){return e.getUTCMilliseconds()}],[":%S",function(e){return e.getUTCSeconds()}],["%I:%M",function(e){return e.getUTCMinutes()}],["%I %p",function(e){return e.getUTCHours()}],["%a %d",function(e){return e.getUTCDay()&&1!=e.getUTCDate()}],["%b %d",function(e){return 1!=e.getUTCDate()}],["%B",function(e){return e.getUTCMonth()}],["%Y",At]]);nl.year=ds.year.utc,ds.scale.utc=function(){return ia(ua.scale.linear(),nl,rl)},ua.text=Me(function(e){return e.responseText}),ua.json=function(e,t){return Te(e,"application/json",aa,t)},ua.html=function(e,t){return Te(e,"text/html",sa,t)},ua.xml=Me(function(e){return e.responseXML}),"function"==typeof define&&define.amd?(this.d3=ua,define("d3",ua)):"object"==typeof module&&module.exports?module.exports=ua:this.d3=ua}(),define("metapolator/ui/metapolator/specimen-panel/specimen-tools/size-rope/size-rope-directive",["d3","jquery"],function(e,t){"use strict";function n(){return{restrict:"E",controller:"SizeRopeController",replace:!1,scope:{model:"=mtkModel",type:"=mtkType"},link:function(n,r,i,o){function a(){d.screenX=t(r).offset().left,d.screenY=t(r).offset().top,d.originX=d.screenX+p,d.originY=d.screenY+p,d.templayer.svg=e.select(d.templayer.element).append("svg").attr("width","100%").attr("height","100%"),d.templayer.g=d.templayer.svg.append("g"),d.templayer.line=d.templayer.g.append("line").attr("x1",d.originX).attr("y1",d.originY).attr("x2",d.originX).attr("y2",d.originY).attr("class","size-rope-line"),d.templayer.diamond=d.templayer.svg.append("g").attr("transform","translate("+d.screenX+","+d.screenY+")").append("polygon").attr("points",d.diamondShape).attr("class","size-rope-diamond"),d.created=!0}function s(t,n){d.templayer.diamond.attr("transform","translate("+t+","+n+")"),d.templayer.line.attr("x2",e.event.x+d.screenX).attr("y2",e.event.y+d.screenY)}function u(){v.attr("class","size-rope-diamond-invisible"),d.templayer.line.attr("x2",d.originX).attr("y2",d.originY),d.templayer.diamond.attr("transform","translate(0,0)")}function l(){d.fontSize=parseInt(n.model.fontSize),d.pixelOffset=f(d.fontSize)}function c(e,t){var n=e+t;return n>399?n-300:11250/(500-n)-12.5}function h(e,t){var n;return e>=0&&t>=0||0>=e&&0>=t?(n=Math.sqrt(Math.pow(e,2)+Math.pow(t,2)),0>t&&(n*=-1)):n=0,n}function f(e){return e>99?300+e:500-11250/(e+12.5)}var p=8,d={svg:e.select(r[0]).append("svg").attr("width",2*p+2).attr("height",2*p+2),diamondShape:p+1+",1 "+(2*p+1)+","+(p+1)+" "+(p+1)+","+(2*p+1)+" 1,"+(p+1),templayer:{created:!1,element:t('<div class="templayer"></div>')[0],svg:null,g:null,line:null,diamond:null},screenX:null,screenY:null,originX:null,originY:null,fontSize:null,pixelOffset:null},m=e.behavior.drag().on("dragstart",function(){d.created||a(),u(),l(),t(document.body).append(d.templayer.element)}).on("drag",function(){var t,r=e.event.x-p,i=e.event.y-p;s(r,i),t=h(r,-i),d.fontSize=c(t,d.pixelOffset),n.limitFontSize(d.fontSize),n.handleSVGbox()}).on("dragend",function(){v.attr("class","size-rope-diamond"),t(d.templayer.element).remove()}),g=d.svg.append("g").call(m),v=g.append("polygon").attr("points",d.diamondShape).attr("class","size-rope-diamond")}}}return n.$inject=[],n}),define("metapolator/ui/metapolator/specimen-panel/specimen-tools/size-rope/size-rope",["angular","./size-rope-controller","./size-rope-directive"],function(e,t,n){"use strict";return e.module("mtk.sizeRope",[]).controller("SizeRopeController",t).directive("mtkSizeRope",n)}),define("metapolator/ui/metapolator/specimen-panel/specimen-tools/size-input/size-input-controller",[],function(){"use strict";function e(e){this.$scope=e,e.handleSVGbox=function(){for(var t=document.getElementsByClassName("specimen-ul-"+e.type)[0],n=t.children,r=0,i=n.length;i>r;r++)n[r].firstElementChild.style.width="auto"}}e.$inject=["$scope"];e.prototype;return e}),define("require/text!metapolator/ui/metapolator/specimen-panel/specimen-tools/size-input/size-input.tpl",[],function(){return'<input class="specimen-tools-size-input" ng-model="model.fontSize" ng-change="handleSVGbox()">'}),define("metapolator/ui/metapolator/specimen-panel/specimen-tools/size-input/size-input-directive",["require/text!./size-input.tpl"],function(e){"use strict";function t(){return{restrict:"E",controller:"SizeInputController",replace:!1,template:e,scope:{model:"=mtkModel",type:"=mtkType"}}}return t.$inject=[],t}),define("metapolator/ui/metapolator/specimen-panel/specimen-tools/size-input/size-input",["angular","./size-input-controller","./size-input-directive"],function(e,t,n){"use strict";return e.module("mtk.sizeInput",[]).controller("SizeInputController",t).directive("mtkSizeInput",n)}),define("metapolator/ui/metapolator/specimen-panel/specimen-tools/line-height/line-height-controller",[],function(){"use strict";function e(e){function t(){var t,n=e.model.lineHeightSetting,r=e.model.fontSize;-1!==n&&(1===n?t=(1/(.1*r+.58)+.8673).toFixed(1):0===n?t=(1/(.1525*r+.85)+.7785).toFixed(1):2===n&&(t=(1/(.087*r+.195)+1.062).toFixed(1)),e.model.lineHeight=t)}this.$scope=e,e.options=[{name:"Tight",img:"tight.png",title:"Tight: 1.2@10pt, 1@24, 0.8@300\ufeff"},{name:"Normal",img:"normal.png",title:"Normal: 1.5@10pt, 1.2@24, 0.9@300"},{name:"Loose",img:"loose.png",title:"Loose: 2@10pt, 1.5@24, 1.1@300\ufeff"}],e.changeLineHeightSetting=function(n){e.model.lineHeightSetting=n,t()},t()}e.$inject=["$scope"];e.prototype;return e}),define("require/text!metapolator/ui/metapolator/specimen-panel/specimen-tools/line-height/line-height.tpl",[],function(){return'<mtk-local-menu class="localmenu lm-align-left">\n    <div class="lm-head" ng-mousedown="localMenuCtrl.toggleMenu(\'lineHeight\')">\n        <div ng-if="model.lineHeightSetting !== -1" class="lm-head-container">\n            <img ng-src="lib/ui/metapolator/assets/img/{{options[model.lineHeightSetting].img}}" title="Amount of line spacing (leading) in em">\n        </div>\n        <div ng-if="model.lineHeightSetting === -1" class="lm-head-container">\n            / <input class="lineheight-custom" ng-model="model.lineHeight" ng-focus="updateLineHeightCustom(\'blur\')" ng-keyup="updateLineHeightCustom($event)">\n        </div>\n    </div>\n    <div class="lm-body" ng-if="display.localMenu == \'lineHeight\'">\n        <div class="lm-button" ng-mouseup="changeLineHeightSetting($index)" ng-repeat="option in options track by $index" title="{{option.title}}">\n            <div class="lm-checkmark"><span ng-if="$index === model.lineHeightSetting">H</span></div>{{option.name}}\n        </div>\n        <div class="lm-divider"></div>\n        <div class="lm-button" ng-mouseup="changeLineHeightSetting(-1)">\n            <div class="lm-checkmark"><span ng-if="model.lineHeightSetting === -1">H</span></div>Custom\n        </div>\n    </div>\n</mtk-local-menu>\n'}),define("metapolator/ui/metapolator/specimen-panel/specimen-tools/line-height/line-height-directive",["require/text!./line-height.tpl"],function(e){"use strict";function t(){return{restrict:"E",controller:"LineHeightController",replace:!1,template:e,scope:{model:"=mtkModel"}}}return t.$inject=[],t}),define("metapolator/ui/metapolator/specimen-panel/specimen-tools/line-height/line-height",["angular","../../../local-menu/local-menu","./line-height-controller","./line-height-directive"],function(e,t,n,r){"use strict";return e.module("mtk.lineHeight",[t.name]).controller("LineHeightController",n).directive("mtkLineHeight",r)}),define("metapolator/ui/metapolator/specimen-panel/specimen-tools/mixer/mixer-controller",[],function(){"use strict";function e(e){this.$scope=e}e.$inject=["$scope"];e.prototype;return e}),define("require/text!metapolator/ui/metapolator/specimen-panel/specimen-tools/mixer/mixer.tpl",[],function(){return'<input ng-if="model.specimenSample.name !== \'Glyph Range\'"\n       placeholder="Mix glyphsâ¦" \n       type="text" \n       ng-model="model.filter" \n       ng-trim="false"\n       class="specimen-tool">\n<input ng-if="model.specimenSample.name === \'Glyph Range\'"\n       placeholder="Filter" \n       type="text" \n       id="filter" \n       ng-model="model.filter" \n       ng-trim="false"\n       class="specimen-tool">\n<mtk-strict ng-if="model.specimenSample.name !== \'Glyph Range\'"\n     title="Set how glyphs are mixed with the specimen" \n     class="specimen-tool strict-box"\n     mtk-model="model">\n</mtk-strict>  '}),define("metapolator/ui/metapolator/specimen-panel/specimen-tools/mixer/mixer-directive",["require/text!./mixer.tpl"],function(e){"use strict";function t(){return{restrict:"E",controller:"MixerController",replace:!1,template:e,scope:{model:"=mtkModel"}}}return t.$inject=[],t}),define("metapolator/ui/metapolator/specimen-panel/specimen-tools/mixer/strict/strict-controller",[],function(){"use strict";function e(e){this.$scope=e,e.setStrict=function(t){e.model.strict=t}}e.$inject=["$scope"];e.prototype;return e}),define("metapolator/ui/metapolator/specimen-panel/specimen-tools/mixer/strict/strict-directive",["d3"],function(e){"use strict";function t(){return{restrict:"E",controller:"StrictController",replace:!1,scope:{model:"=mtkModel"},link:function(t,n,r,i){function o(){p.selectAll("*").remove();var e=t.model.strict;p.append("text").attr("class","slider-label").attr("x",54).attr("y",14).text(function(){return m[e]}).attr("class","standard-text-svg");var n=(p.append("rect").attr("width",c).attr("height",c).attr("x",e*(c+h)+f).attr("y",.5*c).attr("class","standard-style-svg").call(d),p.append("line").attr("x1",.5*c+f).attr("y1",c).attr("x2",2.5*c+2*h+f).attr("y2",c).attr("class","standard-line-svg"),p.append("g"));n.selectAll("rect").data(m).enter().append("rect").attr("width",c+h).attr("height",c).attr("x",function(e,t){return t*(c+h)+f-.5*h}).style("display",function(t,n){return n==e?"none":"block"}).attr("y",.5*c).style("fill","transparent").on("click",function(e,n){t.setStrict(n),t.$apply(),o()})}function a(e){var t=l.margin,n=t+2*(l.buttonW+l.spacing);return t>e?e=t:e>n&&(e=n),e}function s(e){var t,n=l.margin,r=l.margin+l.buttonW+l.spacing,i=l.margin+2*(l.buttonW+l.spacing);return e<r-.5*l.buttonW?(e=n,t=0):e<i-.5*l.buttonW?(e=r,t=1):(e=i,t=2),{x:e,strict:t}}var u,l={buttonW:10,spacing:6,margin:2},c=l.buttonW,h=l.spacing,f=l.margin,p=e.select(n[0]).append("svg").attr("width","110px").attr("height","20px"),d=e.behavior.drag().on("dragstart",function(){}).on("drag",function(){u=e.event.x,e.select(this).attr("x",a(u))}).on("dragend",function(){e.select(this).attr("x",s(u).x),t.setStrict(s(u).strict),t.$apply(),o()}),m=["Sprinkled","50â50","Exclusive"];o()}}}return t.$inject=[],t}),define("metapolator/ui/metapolator/specimen-panel/specimen-tools/mixer/strict/strict",["angular","d3","./strict-controller","./strict-directive"],function(e,t,n,r){"use strict";return e.module("mtk.strict",[]).controller("StrictController",n).directive("mtkStrict",r);
}),define("metapolator/ui/metapolator/specimen-panel/specimen-tools/mixer/mixer",["angular","d3","./mixer-controller","./mixer-directive","./strict/strict"],function(e,t,n,r,i){"use strict";return e.module("mtk.mixer",[i.name]).controller("MixerController",n).directive("mtkMixer",r)}),define("metapolator/ui/metapolator/specimen-panel/specimen-tools/font-by/font-by-controller",[],function(){"use strict";function e(e){this.$scope=e,e.fontBys=["Glyph","Word","Specimen"],e.setFontBy=function(t){e.model.fontBy=t}}e.$inject=["$scope"];e.prototype;return e}),define("require/text!metapolator/ui/metapolator/specimen-panel/specimen-tools/font-by/font-by.tpl",[],function(){return'<mtk-local-menu class="localmenu lm-inside lm-align-right">\n    <div class="lm-head" ng-mousedown="localMenuCtrl.toggleMenu(\'fontBy\')">\n        <div class="lm-head-container">\n            Font by: {{model.fontBy}}\n        </div>\n    </div>\n    <div class="lm-body" ng-if="display.localMenu == \'fontBy\'">\n        <div class="lm-button" ng-repeat="fontBy in fontBys" ng-mouseup="setFontBy(fontBy)">\n            <div class="lm-checkmark"><span ng-if="fontBy === model.fontBy">H</span></div>{{fontBy}}\n        </div>\n    </div>\n\n</mtk-local-menu>'}),define("metapolator/ui/metapolator/specimen-panel/specimen-tools/font-by/font-by-directive",["require/text!./font-by.tpl"],function(e){"use strict";function t(){return{restrict:"E",controller:"FontByController",replace:!1,template:e,scope:{model:"=mtkModel"}}}return t.$inject=[],t}),define("metapolator/ui/metapolator/specimen-panel/specimen-tools/font-by/font-by",["angular","../../../local-menu/local-menu","./font-by-controller","./font-by-directive"],function(e,t,n,r){"use strict";return e.module("mtk.fontBy",[t.name]).controller("FontByController",n).directive("mtkFontBy",r)}),define("metapolator/ui/metapolator/specimen-panel/specimen-tools/specimen-tools",["angular","./specimen-tools-controller","./specimen-tools-directive","./specimen-samples/specimen-samples","./size-rope/size-rope","./size-input/size-input","./line-height/line-height","./mixer/mixer","./font-by/font-by"],function(e,t,n,r,i,o,a,s,u){"use strict";return e.module("mtk.specimenTools",[i.name,o.name,a.name,r.name,s.name,u.name]).controller("SpecimenToolsController",t).directive("mtkSpecimenTools",n)}),define("metapolator/ui/metapolator/specimen-panel/specimen-field/specimen-field-controller",["jquery","metapolator/ui/metapolator/ui-tools/selectionTools"],function(e,t){"use strict";function n(n,r){function i(){for(var e=n.model.mixer.filter,t=n.glyphsIn(),r=0,i=[],o=s(e,!1,!0),a=Math.sqrt(2*t.length/e.length),u=.5,l=0,c=t.length;c>l;l++){i.push(t[l]);var h=Math.floor(u*a);h===l&&(i.push(o[r]),r++,r===o.length&&(r=0),u++)}return i}function o(){for(var e=n.model.mixer.filter,t=n.glyphsIn(),r=0,i=[],o=s(e,!1,!0),a=0,u=1,c=0,h=t.length;h>c;c++)l(t[c])?i.push(t[c]):(a===u?(i.push(o[r]),u+=2,r++,r===o.length&&(r=0)):i.push(t[c]),a++);return i}function a(){var e=n.model.mixer.filter,t=s(e,!0,!1),r=[];if(1===t.length)r.push(t[0]);else for(var i=0,o=t.length;o>i;i++)for(var a=i;o>a;a++)i===a?0===i||i===t.length-1?r.push(t[i],t[i]):r.push("space",t[i],t[i]):(a-i)%2===0?r.push("space",t[i],t[a],t[i]):r.push(t[a],t[i]);return r}function s(e,t,n){for(var r,i=[],o=0,a=e.length;a>o;o++){var s=e[o],u=c(s);if(" "===s)s="space";else if("*"!==s||"n"!==e[o+1]&&"p"!==e[o+1])if("<"===s){s="",r=!1;for(var l=1;10>l;l++)r||(">"!=e[o+l]?s+=e[o+l]:r=!0);r?o=o+s.length+1:s="<"}else u>-1&&(s=fontMapping[u].glyphName);else s="*"+e[o+1],o++;t?(i.indexOf(s)<0||"*n"===s||"*p"===s)&&("space"!=s||n)&&i.push(s):("space"!==s||n)&&i.push(s)}return i}function u(e,t){for(var n=e.children.length-1;n>=0;n--){var r=e.children[n];if(r.name===t)return r}return!1}function l(e){return"space"===e||"*n"===e||"*p"===e?!0:!1}function c(e){if(/^[a-zA-Z]*$/.test(e)||" "===e)return-1;for(var t=-1,n=e.charCodeAt(0).toString(16).toUpperCase(),r=4-n.length,i="",o=0;r>o;o++)i+="0";return t}function h(e){e.edit?e.edit=!1:e.edit=!1}function f(e){e.edit=!0}function p(){clearTimeout(y),y=setTimeout(function(){d()},50)}function d(){b||(b=parseInt(e("mtk-specimen-field > .specimen-content").css("padding-left")));var t=e(".space-character"),n=!1;e(t).css({width:"auto",clear:"none"});var r=!1;e("mtk-specimen-field li").each(function(){e(this).position().left===b&&(e(this).hasClass("space-character")&&e(this).css({width:"0",clear:"both"}),!r||e(this).hasClass("space-character")||e(this).hasClass("line-break")||e(this).hasClass("paragraph-break")||e(this).hasClass("specimen-break")||e(n).css({width:"0",clear:"both"})),e(this).hasClass("space-character")?(n=this,r=!1):r=e(this).hasClass("line-break")||e(this).hasClass("paragraph-break")||e(this).hasClass("specimen-break")?!1:!0})}this.$scope=n,n.tracker=function(e,t){return n.getMasterName(t)+"-"+t.name+"-"+e};var m={name:"*specimenbreak",type:"fake"},g={name:"*n",type:"fake"},v={name:"*p",type:"fake"};n.getMasterName=function(e){return"fake"===e.type?"fake":e.getMasterName()},n.filteredGlyphs=function(){var e=n.selectedMasters(),t=n.glyphsOut(),r=n.model.mixer.fontBy,i=[];if(0===e.length)i=[];else{for(var o,a=0,s=0,l=e.length;l>s;s++){for(var c=s,h=0,f=t.length;f>h;h++){var d=t[h],y=e[c];o="*p"===d?v:"*n"===d?g:"*specimenbreak"===d?m:u(y,d),o&&i.push(o),a++,("Glyph"===r||"Word"===r&&"space"===d||"Specimen"===r&&h===t.length-1)&&c++,c===l&&(c=0)}s<e.length-1&&i.push(m)}p()}return i},n.selectedMasters=function(){for(var e=[],t=0,i=n.model.sequences.length;i>t;t++)for(var o=n.model.sequences[t],a=0,s=o.children.length;s>a;a++){var u=o.children[a];("master"===n.model.type&&u.edit||"instance"===n.model.type&&u===r.currentInstance||u.display)&&e.push(u)}return e},n.glyphsOut=function(){var e=n.model.mixer.filter,t=n.model.mixer.strict;return 0===e.length?n.glyphsIn():0===t?i():1===t?o():2===t?a():void 0},n.glyphsIn=function(){var e=n.model.mixer.specimenSample.text;return e.length>0?s(e,!1,!0):[]},n.glyphClick=function(e,r){n.model.rubberband&&r.level&&r.parent.edit&&(e.metaKey||e.shiftKey||e.altKey?h(r):f(r),t.updateSelection("glyph"))};var y,b=null}n.$inject=["$scope","metapolatorModel"];n.prototype;return n}),define("require/text!metapolator/ui/metapolator/specimen-panel/specimen-field/specimen-field.tpl",[],function(){return'<div mtk-specimen-rubberband="{{model.rubberband}}"\n     mtk-model="model.sequences"\n     class="specimen-content non-glyph-range"\n     ng-class="\'specimen-field-\' + model.type"\n     ng-if="model.mixer.specimenSamples.currentSample.name !== \'Glyph Range\'">\n    <ul class="specimen-ul-{{model.type}}">\n        <li ng-repeat="glyph in filteredGlyphs() track by tracker($index, glyph)"\n            ng-class="\'master-\' + getMasterName(glyph)"\n            ng-style="{\'height\': model.sizes.lineHeight * model.sizes.fontSize}"><!--\n            --><mtk-glyph mtk-model="glyph"\n                          ng-click="glyphClick($event, glyph)"\n                          ng-class="{\'selected\' : glyph.edit, \'selected-master\': glyph.parent.edit}"\n                          ng-style="{\'height\': model.sizes.fontSize + \'px\'}"></mtk-glyph><!--\n\n        --></li>\n    </ul>\n</div>'}),define("metapolator/ui/metapolator/specimen-panel/specimen-field/specimen-field-directive",["require/text!./specimen-field.tpl"],function(e){"use strict";function t(){return{restrict:"E",controller:"SpecimenFieldController",replace:!1,template:e,scope:{model:"=mtkModel",type:"=type"}}}return t.$inject=[],t}),define("metapolator/ui/metapolator/specimen-panel/specimen-field/specimen-rubberband/specimen-rubberband-controller",["metapolator/ui/metapolator/ui-tools/selectionTools"],function(e){"use strict";function t(t){this.$scope=t,t.toggleSet=function(n){function r(e){for(var t=n.length-1;t>=0;t--){var r=n[t];if(r==e)return!0}return!1}for(var i=t.model.length-1;i>=0;i--)for(var o=t.model[i],a=o.children.length-1;a>=0;a--){var s=o.children[a];if(s.edit)for(var u=s.children.length-1;u>=0;u--){var l=s.children[u];r(l)&&(l.edit=!l.edit)}}e.updateSelection("glyph"),t.$apply()},t.selectSet=function(n){for(var r=n.length-1;r>=0;r--){var i=n[r];i.edit=!0}e.updateSelection("glyph"),t.$apply()},t.deselectAllGlyphs=function(){for(var n=t.model.length-1;n>=0;n--)for(var r=t.model[n],i=r.children.length-1;i>=0;i--){var o=r.children[i];if(o.edit)for(var a=o.children.length-1;a>=0;a--){var s=o.children[a];s.edit=!1}}e.updateSelection("glyph"),t.$apply()}}t.$inject=["$scope"];t.prototype;return t}),define("metapolator/ui/metapolator/specimen-panel/specimen-field/specimen-rubberband/specimen-rubberband-directive",["jquery","angular"],function(e,t){"use strict";function n(){return{restrict:"A",controller:"SpecimenRubberbandController",replace:!1,scope:{model:"=mtkModel"},link:function(n,r,i,o){function a(){l(),e(r).append(d)}function s(){e(d).remove()}function u(){e(d).css({left:p.x1+"px",top:p.y1+"px",width:p.x2-p.x1+"px",height:p.y2-p.y1+"px"})}function l(){e(d).css({left:0,top:0,width:"0px",height:"0px"})}function c(t){e(r).find("mtk-glyph.selected-master").each(function(){t.shiftKey||t.ctrlKey||t.metaKey?h(this)?e(this).hasClass("selected")?e(this).addClass("temp-unselected"):e(this).addClass("temp-selected"):e(this).removeClass("temp-selected"):h(this)?e(this).addClass("temp-selected"):e(this).removeClass("temp-selected")})}function h(t){if(e(t).hasClass("no-glyph"))return!1;var n=p.x1,r=p.x2,i=p.y1,o=p.y2,a=e(t).offset().left,s=e(t).offset().left+e(t).outerWidth(),u=e(t).offset().top,l=e(t).offset().top+e(t).outerHeight();return(a>n&&r>a||s>n&&r>s||n>a&&s>r)&&(u>i&&o>u||l>i&&o>l||i>u&&l>o)?!0:!1}if("true"===i.mtkSpecimenRubberband){var f={click:!1,move:!1,startX:null,startY:null},p={x1:null,x2:null,y1:null,y2:null},d=e('<div class="rubberband"></div>')[0];r.bind("mousedown",function(t){t.pageX<e(r).offset().left+e(r).outerWidth()-20&&(t.shiftKey||t.ctrlKey||t.metaKey||n.deselectAllGlyphs(),f.click=!0,f.startX=t.pageX,f.startY=t.pageY,a())}),r.bind("mousemove",function(e){if(f.click){f.move=!0;var t=e.pageX,n=e.pageY;t<f.startX?(p.x1=t,p.x2=f.startX):(p.x1=f.startX,p.x2=t),n<f.startY?(p.y1=n,p.y2=f.startY):(p.y1=f.startY,p.y2=n),u(),c(e)}}),r.bind("mouseup",function(i){if(e(r).find(".temp-unselected").each(function(){e(this).removeClass("temp-unselected")}),f.move){var o=[];e(r).find("mtk-glyph.selected-master").each(function(){if(e(this).removeClass("temp-selected"),h(this)){var n=t.element(this).isolateScope().model;o.push(n)}}),i.shiftKey||i.ctrlKey||i.metaKey?n.toggleSet(o):n.selectSet(o)}s(),f.click=!1,f.move=!1})}}}}return n.$inject=[],n}),define("metapolator/ui/metapolator/specimen-panel/specimen-field/specimen-rubberband/specimen-rubberband",["angular","./specimen-rubberband-controller","./specimen-rubberband-directive"],function(e,t,n){"use strict";return e.module("mtk.specimenRubberband",[]).controller("SpecimenRubberbandController",t).directive("mtkSpecimenRubberband",n)}),define("metapolator/ui/metapolator/specimen-panel/specimen-field/specimen-field",["angular","./specimen-field-controller","./specimen-field-directive","./specimen-rubberband/specimen-rubberband"],function(e,t,n,r){"use strict";return e.module("mtk.specimenField",[r.name]).controller("SpecimenFieldController",t).directive("mtkSpecimenField",n)}),define("metapolator/ui/metapolator/specimen-panel/specimen-panel",["angular","./specimen-panel-controller","./specimen-panel-directive","./specimen-tools/specimen-tools","./specimen-field/specimen-field"],function(e,t,n,r,i){"use strict";return e.module("mtk.specimenPanel",[r.name,i.name]).controller("SpecimenPanelController",t).directive("mtkSpecimenPanel",n)}),function(e,t){"object"==typeof exports&&exports&&"string"!=typeof exports.nodeName?t(exports):"function"==typeof define&&define.amd?define("mustache",["exports"],t):(e.Mustache={},t(e.Mustache))}(this,function(e){function t(e){return"function"==typeof e}function n(e){return m(e)?"array":typeof e}function r(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function i(e,t){return null!=e&&"object"==typeof e&&t in e}function o(e,t){return g.call(e,t)}function a(e){return!o(v,e)}function s(e){return String(e).replace(/[&<>"'`=\/]/g,function(e){return y[e]})}function u(t,n){function i(){if(v&&!y)for(;g.length;)delete d[g.pop()];else g=[];v=!1,y=!1}function o(e){if("string"==typeof e&&(e=e.split(_,2)),!m(e)||2!==e.length)throw new Error("Invalid tags: "+e);s=new RegExp(r(e[0])+"\\s*"),u=new RegExp("\\s*"+r(e[1])),f=new RegExp("\\s*"+r("}"+e[1]))}if(!t)return[];var s,u,f,p=[],d=[],g=[],v=!1,y=!1;o(n||e.tags);for(var C,k,P,M,T,A,O=new h(t);!O.eos();){if(C=O.pos,P=O.scanUntil(s))for(var E=0,$=P.length;$>E;++E)M=P.charAt(E),a(M)?g.push(d.length):y=!0,d.push(["text",M,C,C+1]),C+=1,"\n"===M&&i();if(!O.scan(s))break;if(v=!0,k=O.scan(S)||"name",O.scan(b),"="===k?(P=O.scanUntil(w),O.scan(w),O.scanUntil(u)):"{"===k?(P=O.scanUntil(f),O.scan(x),O.scanUntil(u),k="&"):P=O.scanUntil(u),!O.scan(u))throw new Error("Unclosed tag at "+O.pos);if(T=[k,P,C,O.pos],d.push(T),"#"===k||"^"===k)p.push(T);else if("/"===k){if(A=p.pop(),!A)throw new Error('Unopened section "'+P+'" at '+C);if(A[1]!==P)throw new Error('Unclosed section "'+A[1]+'" at '+C)}else"name"===k||"{"===k||"&"===k?y=!0:"="===k&&o(P)}if(A=p.pop())throw new Error('Unclosed section "'+A[1]+'" at '+O.pos);return c(l(d))}function l(e){for(var t,n,r=[],i=0,o=e.length;o>i;++i)t=e[i],t&&("text"===t[0]&&n&&"text"===n[0]?(n[1]+=t[1],n[3]=t[3]):(r.push(t),n=t));return r}function c(e){for(var t,n,r=[],i=r,o=[],a=0,s=e.length;s>a;++a)switch(t=e[a],t[0]){case"#":case"^":i.push(t),o.push(t),i=t[4]=[];break;case"/":n=o.pop(),n[5]=t[2],i=o.length>0?o[o.length-1][4]:r;break;default:i.push(t)}return r}function h(e){this.string=e,this.tail=e,this.pos=0}function f(e,t){this.view=e,this.cache={".":this.view},this.parent=t}function p(){this.cache={}}var d=Object.prototype.toString,m=Array.isArray||function(e){return"[object Array]"===d.call(e)},g=RegExp.prototype.test,v=/\S/,y={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"},b=/\s*/,_=/\s+/,w=/\s*=/,x=/\s*\}/,S=/#|\^|\/|>|\{|&|=|!/;h.prototype.eos=function(){return""===this.tail},h.prototype.scan=function(e){var t=this.tail.match(e);if(!t||0!==t.index)return"";var n=t[0];return this.tail=this.tail.substring(n.length),this.pos+=n.length,n},h.prototype.scanUntil=function(e){var t,n=this.tail.search(e);switch(n){case-1:t=this.tail,this.tail="";break;case 0:t="";break;default:t=this.tail.substring(0,n),this.tail=this.tail.substring(n)}return this.pos+=t.length,t},f.prototype.push=function(e){return new f(e,this)},f.prototype.lookup=function(e){var n,r=this.cache;if(r.hasOwnProperty(e))n=r[e];else{for(var o,a,s=this,u=!1;s;){if(e.indexOf(".")>0)for(n=s.view,o=e.split("."),a=0;null!=n&&a<o.length;)a===o.length-1&&(u=i(n,o[a])),n=n[o[a++]];else n=s.view[e],u=i(s.view,e);if(u)break;s=s.parent}r[e]=n}return t(n)&&(n=n.call(this.view)),n},p.prototype.clearCache=function(){this.cache={}},p.prototype.parse=function(e,t){var n=this.cache,r=n[e];return null==r&&(r=n[e]=u(e,t)),r},p.prototype.render=function(e,t,n){var r=this.parse(e),i=t instanceof f?t:new f(t);return this.renderTokens(r,i,n,e)},p.prototype.renderTokens=function(e,t,n,r){for(var i,o,a,s="",u=0,l=e.length;l>u;++u)a=void 0,i=e[u],o=i[0],"#"===o?a=this.renderSection(i,t,n,r):"^"===o?a=this.renderInverted(i,t,n,r):">"===o?a=this.renderPartial(i,t,n,r):"&"===o?a=this.unescapedValue(i,t):"name"===o?a=this.escapedValue(i,t):"text"===o&&(a=this.rawValue(i)),void 0!==a&&(s+=a);return s},p.prototype.renderSection=function(e,n,r,i){function o(e){return a.render(e,n,r)}var a=this,s="",u=n.lookup(e[1]);if(u){if(m(u))for(var l=0,c=u.length;c>l;++l)s+=this.renderTokens(e[4],n.push(u[l]),r,i);else if("object"==typeof u||"string"==typeof u||"number"==typeof u)s+=this.renderTokens(e[4],n.push(u),r,i);else if(t(u)){if("string"!=typeof i)throw new Error("Cannot use higher-order sections without the original template");u=u.call(n.view,i.slice(e[3],e[5]),o),null!=u&&(s+=u)}else s+=this.renderTokens(e[4],n,r,i);return s}},p.prototype.renderInverted=function(e,t,n,r){var i=t.lookup(e[1]);return!i||m(i)&&0===i.length?this.renderTokens(e[4],t,n,r):void 0},p.prototype.renderPartial=function(e,n,r){if(r){var i=t(r)?r(e[1]):r[e[1]];return null!=i?this.renderTokens(this.parse(i),n,r,i):void 0}},p.prototype.unescapedValue=function(e,t){var n=t.lookup(e[1]);return null!=n?n:void 0},p.prototype.escapedValue=function(t,n){var r=n.lookup(t[1]);return null!=r?e.escape(r):void 0},p.prototype.rawValue=function(e){return e[1]},e.name="mustache.js",e.version="2.2.1",e.tags=["{{","}}"];var C=new p;e.clearCache=function(){return C.clearCache()},e.parse=function(e,t){return C.parse(e,t)},e.render=function(e,t,r){if("string"!=typeof e)throw new TypeError('Invalid template! Template should be a "string" but "'+n(e)+'" was given as the first argument for mustache#render(template, view, partials)');return C.render(e,t,r)},e.to_html=function(n,r,i,o){var a=e.render(n,r,i);return t(o)?void o(a):a},e.escape=s,e.Scanner=h,e.Context=f,e.Writer=p}),define("require/text!Atem-MOM/cpsGenerators/metapolation.tpl",[],function(){return"@import 'lib/MOM/primary.cps';\n\nglyph {\n{{#n}}\n    base{{.}}: baseMaster{{.}}[Selector \"glyph#\" + this:id];\n{{/n}}\n}\n\n\ncomponent {\n    baseGlyphName: baseNode:baseGlyphName;\n    /* FIXME: there's currently no way of interpolating transformation matrixes\nsee: https://github.com/graphicore/Atem-Property-Language/issues/1\n    */\n    transformation: baseNode:transformation;\n{{#n}}\n    base{{.}}: parent:base{{.}}\n        :children[index]\n        ;\n{{/n}}\n}\n\ncontour > p {\n    indexContour: parent:index;\n{{#n}}\n    base{{.}}: parent:parent:base{{.}}\n        :children[indexContour]\n        :children[index]\n        ;\n{{/n}}\n}\n\ncenter {\n    indexPenstroke: parent:index;\n{{#n}}\n    base{{.}}: parent:parent:base{{.}}\n        :children[indexPenstroke]\n        :children[index]\n        ;\n{{/n}}\n}\n\ncenter > * {\n    indexPenstroke: parent:parent:index;\n    indexCenter: parent:index;\n{{#n}}\n    base{{.}}: parent:parent:parent:base{{.}}\n        :children[indexPenstroke]\n        :children[indexCenter]\n        :children[index]\n        ;\n{{/n}}\n}\n\n* {\n    /* Ensure that the used proportions sum up to 1.\n     * Any other value produces usually unwanted effects.\n     * If you don't want this in your master redefine it as\n     * interpolationUnit: 1;\n     */\n    interpolationUnit: 1/(0{{#n}}\n        + proportion{{.}}{{/n}});\n{{#n}}\n    _p{{.}}: proportion{{.}} * interpolationUnit;\n{{/n}}\n}\n\nglyph {\n    width: 0{{#n}}\n        + base{{.}}:width * _p{{.}}{{/n}};\n    height: 0{{#n}}\n        + base{{.}}:height * _p{{.}}{{/n}};\n}\n\ncenter, center > * {\n    inLength: 0{{#n}}\n        + base{{.}}:inLength * _p{{.}}{{/n}};\n    outLength: 0{{#n}}\n        + base{{.}}:outLength * _p{{.}}{{/n}};\n    /* This transforms tensions of Infinity to 10000. Then we can interpolate\n     * without creating NaN values.\n     *\n     * NaN is produced when a tension is Infinity and a proportion is zero:\n     * Infinity * 0 => NaN.\n     * AFAIK this behavior is mathematically correct.\n     * But in that case we clearly want a 0 as result, because a proportion\n     * of 0 means we don't want to include the master into the Interpolation.\n     *\n     * 10000 will set the control point very very close to the on-curve\n     * point.\n     * FIXME: it would be better to keep the Infinity value when all\n     * `base*:**Tension` values are Infinity. But I think there is no way\n     * to do this right now.\n     * something like:\n     * ifelse (isInfinity base1:inTension and _p1 equals 0) 0 (base1:inTension * _p1)\n     * but that would require the new operators `ifelse` `isInfinity` `equals` `and`\n     * and that would require the booleans `true` and `false` also, consequently\n     * we'd like also to introduce `not` `or` `isNaN`\n     * But we are holding off conditional execution at the moment, because\n     * we don't want to introduce to much power/complexity in CPS.\n     *\n     * (base1:inTension * _p1) elseif (isInfinity base1:inTension and _p1 equals 0) 0\n     *\n     * In another situation we may wan't to `grow` a control point in\n     * an interpolation. For better control, the master `not` having that\n     * control point can set the tension value to some big value itself.\n     * This is really the workaround for the missing `ifelse` etc.\n     * What a good value is must be determined in the case itself. I think\n     * it's likely that it would be well under 50 then.\n     * FIXME: Thus it may better here to go with a lower replacement value\n     * for Infinity, e.g. 10 or 100?\n     */\n    inTension: 0{{#n}}\n        + (min 1000 base{{.}}:inTension * _p{{.}}){{/n}};\n    outTension: 0{{#n}}\n        + (min 1000 base{{.}}:outTension * _p{{.}}){{/n}};\n    inDirIntrinsic: ((Vector 0 0){{#n}}\n        + (Polar 1 base{{.}}:inDirIntrinsic) * _p{{.}}{{/n}}\n        ):angle;\n    outDirIntrinsic: ((Vector 0 0){{#n}}\n        + (Polar 1 base{{.}}:outDirIntrinsic) * _p{{.}}{{/n}}\n        ):angle;\n}\n\ncontour > p {\n    on: Vector 0 0{{#n}}\n        + base{{.}}:on * _p{{.}}{{/n}};\n    inDir: ((Vector 0 0){{#n}}\n        + (Polar 1  base{{.}}:inDir) * _p{{.}}{{/n}}\n        ):angle;\n    outDir: ((Vector 0 0){{#n}}\n        + (Polar 1  base{{.}}:outDir) * _p{{.}}{{/n}}\n        ):angle;\n    inTension: 0{{#n}}\n        + (min 10000 base{{.}}:inTension) * _p{{.}}{{/n}};\n    outTension: 0{{#n}}\n        + (min 10000 base{{.}}:outTension) * _p{{.}}{{/n}};\n}\n\ncenter > left, center > right {\n    onDir: ((Vector 0 0){{#n}}\n        + (Polar 1 base{{.}}:onDir) * _p{{.}}{{/n}}\n        ):angle;\n    onLength: 0{{#n}}\n        + base{{.}}:onLength * _p{{.}}{{/n}};\n}\n\ncenter {\n    on: Vector 0 0{{#n}}\n        + base{{.}}:on * _p{{.}}{{/n}};\n    in: Vector 0 0{{#n}}\n        + base{{.}}:in * _p{{.}}{{/n}};\n    out: Vector 0 0{{#n}}\n        + base{{.}}:out * _p{{.}}{{/n}};\n}\n\n/* terminals overide of skeleton2outline */\ncenter:i(0) > left,\ncenter:i(0) > right {\n    inDir: ((Vector 0 0){{#n}}\n        + (Polar 1  base{{.}}:inDir) * _p{{.}}{{/n}}\n        ):angle;\n}\n\ncenter:i(-1) > right,\ncenter:i(-1) > left {\n    outDir: ((Vector 0 0){{#n}}\n        + (Polar 1  base{{.}}:outDir) * _p{{.}}{{/n}}\n        ):angle;\n}\n\nmaster * {\n{{#n}}\n    baseMaster{{.}}: master:baseMaster{{.}};\n{{/n}}\n{{#n}}\n    proportion{{.}}: master:proportion{{.}};\n{{/n}}\n}\n\n/****\n * set up the baseMasters and the proportions of the <MOM Master>:\n\n master {\n{{#n}}\n    baseMaster{{.}}: S\"master#anyName_{{.}}\";\n{{/n}}\n{{#n}}\n    proportion{{.}}: 1;\n{{/n}}\n}\n\n****/\n"}),define("Atem-MOM/cpsGenerators/metapolation",["mustache","require/text!./metapolation.tpl"],function(e,t){return function(n){var r,i={},o=i.n=[];for(r=0;n>r;r++)o.push(r);return e.render(t,i)}}),define("Atem-CPS/CPS/elements/Property",["./_Node"],function(e){"use strict";function t(t,n,r,i){e.call(this,r,i),this._value=n,Object.defineProperties(this,{name:{value:t.name,enumerable:!0},value:{value:n,enumerable:!0},invalid:{value:n.invalid,enumerable:!0}}),Object.defineProperty(this,"hash",{value:[this.name,": ",this._value].join(""),enumerable:!0})}var n=t.prototype=Object.create(e.prototype);return n.constructor=t,n.toString=function(){return[this.name,": ",this._value,";"].join("")},Object.defineProperty(n,"message",{get:function(){return this._value.message}}),t}),define("Atem-CPS/CPS/elements/PropertyDict",["Atem-CPS/errors","Atem-CPS/emitterMixin","./_Node","./GenericCPSNode","./Property","./Comment"],function(e,t,n,r,i,o){"use strict";function a(e,r,i){n.call(this,r,i),this._items=e.slice(),this._dict=void 0,this._keys=null,this._indexes=Object.create(null),t.init(this,l)}function s(e){return e instanceof i&&!e.invalid}function u(e){return e instanceof o||s(e)}var l,c=e.Value,h=e.Key,f=e.Assertion;l={stateProperty:"_propertyChannels",onAPI:"onPropertyChange",offAPI:"offPropertyChange",triggerAPI:"_triggerPropertyChange"};var p=a.prototype=Object.create(n.prototype);return p.constructor=a,t(p,l),p.toString=function(){var e=this._items.map(function(e){return e?e instanceof r?["    ",e,";"].join(""):"    "+e:""});return e.unshift("{"),e.push("}"),e.join("\n")},Object.defineProperty(p,"items",{get:function(){return this._items.slice()}}),p._getItemValue=function(e){return this._items[e].value},Object.defineProperty(p,"dict",{get:function(){this._dict||this._buildIndex();var e,t=Object.create(null),n=this._dict;for(e in n)t[e]=this._getItemValue(n[e]);return t}}),Object.defineProperty(p,"length",{get:function(){return this._items.length}}),p._buildIndex=function(){var e,t,n,r,o,a,s=this._items;for(this._dict=r=Object.create(null),this._keys=o=[],this._indexes=a=Object.create(null),t=s.length-1;t>=0;t--)e=s[t],e instanceof i&&(n=e.name,a[n]||(a[n]=[]),a[n].unshift(t),e.invalid||n in r||(r[n]=t,o.push(n)))},p._getInsertedDict=function(e,t){var n,r,o,a,s,u=Object.create(null);for(n=0,r=e.length;r>n;n++)o=e[n],o instanceof i&&(a=o.name,s=u[a],s||(u[a]=s=[]),s.push(n+t));return u},p._updateIndexes=function(e,t,n,r,i){var o,a,s,u,l=null,c=0,h=i.length;if(a=e.length,a&&e[a-1]>=t)for(o=0;a>o;o++)s=e[o],t>s||(null===l&&(l=o),n>s?c+=1:e[o]=s+r);return null===l?(h&&Array.prototype.push.apply(e,i),!1):0===l&&0===h&&c===e.length?!0:(u=[l,c],Array.prototype.push.apply(u,i),Array.prototype.splice.apply(e,u),!1)},p._getActiveIndex=function(e){var t,n,r=this._indexes[e];for(t=r.length-1;t>=0;t--)if(n=r[t],!this._items[n].invalid)return n;return-1},p._updateDict=function(e,t,n,r){var i=this._dict[e],o=this._getActiveIndex(e);return-1===o?"delete":(i>=t&&(n>i?i=-1:i+=r),o!==i?(this._dict[e]=o,"change"):(this._dict[e]=i,null))},p._getCanonicalStartIndex=function(e,t){return e>=t?t:0>e?Math.max(0,t-e):e},p._triggerEvents=function(e){var t,n;for(t in e)n=e[t],"erase"!==t&&this._triggerPropertyChange(n,t),this._trigger(t,n)},p._splice=function(e,t,n){this._dict||this._buildIndex();var r,i,o,a,s,l=n instanceof Array?n:void 0===n?[]:[n],h=Object.create(null),f=this._items.length,p=l.length;for(o=0,a=p;a>o;o++)if(!u(l[o]))throw new c('Trying to insert an invalid item: "'+l[o]+'"'+(l[o].message?' message: "'+l[o].message+'"':""));if(i=[e,t],Array.prototype.push.apply(i,l),r=Array.prototype.splice.apply(this._items,i),s=r.length,0===p&&0===s)return[null,0,0];for(o=0;s>o;o++)r[o].destroy();var d,m,g,v,y,b,_=p-s,w=this._getCanonicalStartIndex(e,f),x=w+s,S=this._getInsertedDict(l,w),C=[];for(d in S)d in this._indexes||C.push(d);for(d in this._indexes)v=this._indexes[d],g=S[d]||[],y=this._updateIndexes(v,w,x,_,g),y&&(delete this._indexes[d],h.erase||(h.erase=[]),h.erase.push(d));for(d in this._dict)b=d in this._indexes?this._updateDict(d,w,x,_):"delete",b&&("delete"===b&&delete this._dict[d],h[b]||(h[b]=[]),h[b].push(d));for(o=0,a=C.length;a>o;o++)d=C[o],this._indexes[d]=S[d],m=this._getActiveIndex(d),-1!==m&&(this._dict[d]=m,h.add||(h.add=[]),h.add.push(d));return("add"in h||"delete"in h)&&(this._keys=null),this._triggerEvents(h),[e,s,p,r]},p.splice=function(e,t,n){var r=this._splice(e,t,n);return(r[1]||r[2])&&this._trigger("update"),r},p.setProperty=function(e){var t,n,r,i=e.name,o=this._items,a=Object.create(null);if(!s(e))throw new c("Trying to set an invalid property: "+e);this.has(i)?(n="change",t=this._dict[i],r=o[t],o[t]=e):(n="add",t=o.length,o.push(e),this._indexes[i]?this._indexes[i].push(t):this._indexes[i]=[t],this._dict[i]=t,this._keys.push(i)),r&&r.destroy(),a[n]=[i],this._triggerEvents(a),this._trigger("update")},p.erase=function(e){var t,n,r,i,o,a;for(this._indexes||this._buildIndex(),t=0,n=0;e in this._indexes;){if(a=this._indexes[e],i=a.length,0===i)throw new f("There MUST NOT be a key without any index");for(t=1,o=a[0],r=1;i>r;r++)a[r]===o+t&&t++;this._splice(o,t),n+=t}return n&&this._trigger("update"),n},p.removeCurrentActiveProperty=function(e){if(!this.has(e))return 0;var t=this._dict[e];return this.splice(t,1),1},p.keys=function(){return this._dict?this._keys||(this._keys=Object.keys(this._dict)):this._buildIndex(),this._keys.slice()},p.get=function(e){if(this._dict||this._buildIndex(),!(e in this._dict))throw new h('Key "'+e+'" not in PropertyDict.');return this._getItemValue(this._dict[e])},p.getItem=function(e){return this._items[e]},p.has=function(e){return this._dict||this._buildIndex(),e in this._dict},p.find=function(e){return this._dict||this._buildIndex(),this._indexes[e].slice()||[]},a}),define("obtain/Promise",[],function(){"use strict";if("undefined"!=typeof window){if(window.Promise)return window.Promise;throw new Error("Your Browser doesn't support promises yet")}return require.nodeRequire("lie")}),define("obtain/obtain",["./Promise"],function(e){"use strict";function t(e){Object.defineProperty(this,"name",{get:function(){return e}})}function n(e){Object.defineProperty(this,"value",{get:function(){return e}})}function r(e,t,n){for(var n=n.slice(0),r=n.pop(),i=[],o=t?{_callback:null,_errback:null}:{},a=0;a<n.length;a++)"string"!=typeof n[a]||n[a]in o||(o[n[a]]=null,i.push(n[a]));Object.defineProperty(this,"name",{get:function(){return e}}),Object.defineProperty(this,"async",{get:function(){return!!t}}),Object.defineProperty(this,"getter",{get:function(){return r}}),Object.defineProperty(this,"args",{get:function(){return n.slice(0)}}),Object.defineProperty(this,"hasDependencies",{get:function(){return!!i.length}}),Object.defineProperty(this,"dependencyCount",{get:function(){return i.length}}),Object.defineProperty(this,"dependencies",{get:function(){return i.slice(0)}})}function i(e){this.name=e.name,this.visitDependencies=e.hasDependencies,this.dependency=e,this.dependencyCount=e.dependencyCount}function o(){}function a(e){this.message=e,this.name="AssertionFailed","function"==typeof Error.captureStackTrace?Error.captureStackTrace(this,a):this.stack=(new Error).stack}function s(e,t){if(!e)throw new a(t)}function u(e){this.message=e,this.name="DependencyGraphError","function"==typeof Error.captureStackTrace?Error.captureStackTrace(this,a):this.stack=(new Error).stack}function l(e,t,n,r){this.asyncGetters=t,this.syncGetters=e,this._cache={_asyncDependencies:{},_syncDependencies:{},_callerArgumentsDependencies:{},asyncEvaluation:{},syncEvaluation:{}},this.callerArguments=n instanceof Array?n:[],this.job=r}function c(t,n,r){var i,o=0;for(this._host=t,this._graph=n,this._async=r[0],this._args=r.slice(1),this._async?(this.promise=new e(function(e,t){this._resolvePromise=e,this._rejectPromise=t}.bind(this)),"object"==typeof this._async&&(this._async.unified&&(i=this.promise.then(function(e){this.unified(void 0,e)}.bind(this._async),function(e){this.unified(e)}.bind(this._async))),(this._async.callback||this._async.errback)&&(i=this.promise.then(this._async.callback||void 0,this._async.errback||void 0)),i&&(i.then(void 0,function(e){throw console.log("unhandled error in callback",e,e.stack),e}),i=this.promise))):(this.promise=void 0,this._resolvePromise=void 0,this._rejectPromise=void 0),this._obtained={};o<this._graph.callerArguments.length;o++)this._obtained[this._graph.callerArguments[o]]=this._args[o];this._args.unshift(this._obtainAPI.bind(this)),this._waitingFor={},this._waitingCount=0,this._dependencyCounters=null,this._dependents=null,this._isShutDown=!1}function h(e,t,n,r){var i=new l(e,t,n,r);return function(){var e=new c(this,i,Array.prototype.slice.call(arguments)),t=arguments[0];return t?(setTimeout(e.execute.bind(e),0),e.promise):e.execute()}}t.prototype=Object.create(Error.prototype),t.prototype.toString=function(){return"<Expectation "+this.name+">"},n.prototype.toString=function(){return"<Argument "+this.value+">"};var f=r.prototype;f.toString=function(){return"<Dependency "+this.name+">"},f._getArg=function(e,t){return"string"==typeof t?e(t):t instanceof n?t.value:t},f.getArgs=function(e,t,n){
var r,i=0,o=this.args,a=[],s={_callback:[],_errback:[]};if(this.async){for(;i<o.length;i++)o[i]in s?(s[o[i]].push(i),a.push(null)):a.push(this._getArg(e,o[i]));if(s._errback.length)for(i=0;i<s._errback.length;i++)a[s._errback[i]]=n;else r=function(e,r){null!==e&&void 0!==e?n(e):t(r)};for(i=0;i<s._callback.length;i++)a[s._callback[i]]=r||t}else for(;i<o.length;i++)a.push(this._getArg(e,o[i]));return a},a.prototype=Object.create(Error.prototype),u.prototype=Object.create(Error.prototype);var p=l.prototype;p._nameIsCallerArg=function(e){for(var t=0;t<this.callerArguments.length;t++)if(this.callerArguments[t]===e)return!0;return!1},p.getDependency=function(e,t){var n,i,o=!1,a=!1;if(this._nameIsCallerArg(t))a=!0,n=this._cache._callerArgumentsDependencies;else if(e&&t in this.asyncGetters)o=!0,n=this._cache._asyncDependencies;else{if(!(t in this.syncGetters))throw new u(['Name "',t,'" not found in DependencyGraph.'].join(""));n=this._cache._syncDependencies}return t in n||(i=a?[]:(o?this.asyncGetters:this.syncGetters)[t],n[t]=new r(t,o,i)),n[t]},p._getEvaluationOrder=function(e,t){var n,r,o,a,s=[],l={},c={},h={},f={},p=[];for(a=function(t){return new i(this.getDependency(e,t))}.bind(this),s.push(a(t)),c[t]=[];s.length;)if(n=s[s.length-1],n.name in f)s.pop();else{if(n.visitDependencies&&n.name in h)throw new u(["Circle detected but the ","graph must be acyclic!","Current frame.name:",n.name,"Path:",p.join("->"),"strongly connected component:",p.slice(p.indexOf(n.name)).concat([n.name]).join("->")].join(" "));if(p.push(n.name),l[n.name]=n.dependencyCount,n.visitDependencies)for(h[n.name]=null,n.visitDependencies=!1,r=0;r<n.dependencyCount;r++)o=n.dependency.dependencies[r],o in c||(c[o]=[]),c[o].push(n.name),o in f||s.push(a(o));else f[n.name]=null,p.pop(),s.pop()}return[l,c]},p.getEvaluationOrder=function(e,t){var n,r,i=e?this._cache.asyncEvaluation:this._cache.syncEvaluation,o=[{},{}];t in i||(i[t]=this._getEvaluationOrder(e,t)),n=i[t];for(r in n[0])o[0][r]=n[0][r];for(r in n[1])o[1][r]=n[1][r].slice();return o};var d=c.prototype;return d.addWaitingAsync=function(e){return s(!(e in this._waitingFor),"Already waiting for "+e),this._waitingFor[e]=null,this._waitingCount+=1,this._waitingCount},d.removeWaitingAsync=function(e){return s(e in this._waitingFor,"Not waiting for "+e),delete this._waitingFor[e],this._waitingCount-=1,this._waitingCount},Object.defineProperty(d,"waitingAsyncCount",{get:function(){return this._waitingCount}}),d.getDependency=function(e){return this._graph.getDependency(this._async,e)},d._removeDependency=function(e){for(var t,n=this._dependents[e.name]||[],r=this._dependencyCounters,i=0,o=[];i<n.length;i++)t=this.getDependency(n[i]),r[t.name]-=1,0===r[t.name]&&o.push(t);return o},d.getValue=function(e){if(!(e in this._obtained))throw new t(e);return this._obtained[e]},d._dependencyCallback=function(e,t){var n;if(!this._isShutDown){this.removeWaitingAsync(e),this._obtained[e.name]=t,n=this._removeDependency(e);try{this._resolve.apply(this,n)}catch(r){return this._errorShutdown(),void this._rejectPromise(r)}this.waitingAsyncCount||this.execute()}},d._errorShutdown=function(){this._isShutDown=!0},d._dependencyErrback=function(e,t){this._isShutDown||(this.removeWaitingAsync(e),this._errorShutdown(),this._rejectPromise(t))},d._call=function(e){var t,n,r,i,o=this.getValue.bind(this);if(!e.getter)throw new TypeError("The "+(e.async?"asynchronous":"synchronous")+' getter function of "'+e.name+'" is missing.');return e.async?(n=this._dependencyCallback.bind(this,e),r=this._dependencyErrback.bind(this,e),t=e.getArgs(o,n,r),this.addWaitingAsync(e),i=e.getter.apply(this._host,t),i&&"function"==typeof i.then&&i.then(n).then(null,r),void 0):(t=e.getArgs(o),e.getter.apply(this._host,t))},d._resolve=function(){for(var e,t,n=Array.prototype.slice.call(arguments),r=[];(e=n.pop())||(e=r.pop());)e.name in this._obtained||(e.async?this._call(e):0!==n.length?r.push(e):(this._obtained[e.name]=this._call(e),t=this._removeDependency(e),n.push.apply(n,t)))},d._obtain=function(e){s(!(e in this._obtained),'Key "'+e+'" must not be in this._obtained, but it is.');var t,n=this._graph.getEvaluationOrder(this._async,e),r=[],i=this._dependencyCounters=n[0];this._dependents=n[1];for(t in this._obtained)this._removeDependency(this.getDependency(t));for(t in i)0===i[t]&&r.push(this.getDependency(t));if(this._resolve.apply(this,r),this.waitingAsyncCount)throw new o;s(e in this._obtained,'Key "'+e+"\" must be in this._obtained, but it isn't.")},d._obtainAPI=function(e){return e in this._obtained||this._obtain(e),this._obtained[e]},d.execute=function(){var e;try{e=this._graph.job.apply(this._host,this._args)}catch(t){if(t instanceof o)return;if(!this._async)throw t;return this._errorShutdown(),void this._rejectPromise(t)}return this._async?void this._resolvePromise(e):e},{factory:h,Argument:n,DependencyGraphError:u}}),define("Atem-CPS/CPS/elements/AtImportCollection",["Atem-CPS/errors","./PropertyCollection","./_Node","obtain/obtain"],function(e,t,n,r){"use strict";function i(e,t,r){n.call(this,t,r),this._selectorList=null,this._name=null,this.name="import",this._resourceName=null,this._reference=null,this._ruleController=e}function o(e,t){var n={};return n.enumerable=t.enumerable,n.configurable=t.configurable,"value"in t?"function"==typeof t?n.value=function(){this._reference[0][e].apply(this._reference[0],arguments)}:(n.get=function(){return this._reference[0][e]},n.set=function(t){this._reference[0][e]=t}):("get"in t&&(n.get=function(){return this._reference[0][e]}),"set"in t&&(n.set=function(t){this._reference[0][e]=t})),"set"in n||(n.writable=t.writable),n}var a=(e.CPS,i.prototype=Object.create(t.prototype));return a.constructor=i,a._proxyEventHandler=function(e,t,n){this._trigger(t,n)},a._setResource=function(e,t){if(this._reference){if(this._reference[0]===t)return;this._reference[0].off(this._reference[1])}this._resourceName=e,this._reference=[t,t.on("structural-change",[this,"_proxyEventHandler"])],this._trigger(["resource-change","structural-change","update"])},a._getRule=function(e,t){return this._ruleController.getRule(e,t)},a.setResource=r.factory({propertyCollection:[!1,"resourceName",a._getRule]},{propertyCollection:[!0,"resourceName",a._getRule]},["resourceName"],function(e,t){var n=e("propertyCollection");return this._setResource(t,n),!0}),a.toString=function(){return'@import "'+this.resourceName+'";'},Object.defineProperty(a,"invalid",{get:function(){return!this._reference||this._reference[0].invalid}}),Object.defineProperty(a,"resourceName",{get:function(){return this._resourceName},enumerable:!0}),function(e,t){var n,r,i,a,s,u=Object.getOwnPropertyNames(t);for(n=0,r=u.length;r>n;n++)i=u[n],"_"===i[0]||"name"===i||e.hasOwnProperty(i)||(a=Object.getOwnPropertyDescriptor(t,i),s=o(i,a),Object.defineProperty(e,i,s))}(a,t.prototype),i}),define("Atem-CPS/CPS/elements/PropertyValue",["Atem-CPS/errors","./_Node"],function(e,t){"use strict";function n(e,n,r,i){t.call(this,r,i),this._valueData=e,this._comments=n,this.value=void 0,this.invalid=!1,this.message=void 0}var r=n.prototype=Object.create(t.prototype);return r.constructor=n,r._setInvalid=function(e){Object.defineProperty(this,"invalid",{value:!0,enumerable:!0}),Object.defineProperty(this,"message",{value:e,enumerable:!0})},r._setValue=function(t){if(void 0===t)throw new e.CPS("value may not be undefined");Object.defineProperty(this,"value",{value:t,enumerable:!0})},r.initialize=function(t,n){if(void 0!==this.value)throw new e.CPS("this.value is already set!");if(this.invalid)throw new e.CPS("Can't set value: value is already marked as invalid: "+this._message);var r=n(this.valueString);r[0]?this._setInvalid(r[0]):this._setValue(r[1])},Object.defineProperty(r,"valueString",{get:function(){return this._valueData.join("")}}),Object.defineProperty(r,"astTokens",{get:function(){return this._valueData.map(function(e){return e._ast})}}),r.toString=function(){return[this._comments.join("\n"),this._comments.length?" ":"",this.valueString.trim()].join("")},n}),define("Atem-CPS/CPS/cpsTools",["Atem-CPS/errors","./elements/Property","./elements/PropertyDict","./elements/Rule","./elements/AtImportCollection","./elements/PropertyValue","./parsing/parseSelectorList","./elements/SimpleSelector"],function(e,t,n,r,i,o,a,s){"use strict";function u(e,t,n){e.splice(t,1,[n])}function l(e,t){e.splice(e.length,0,[t])}function c(e,t,n,r){var i,o;return e===n?(o=n.items,i=o.splice(t,1)[0],o.splice(r,0,i),void n.splice(0,o.length,o)):(i=e.splice(t,1)[3][0],void n.splice(r,0,i))}function h(e){return e instanceof t}function f(e,t,i){var o="generated",s=a.fromString(i),u=new n([],o,0),l=new r(s,u,o,0);return e.splice(t,0,l)[0]}function p(t,n,r,o,a){function s(){return n.splice(r,0,u)[0]}var u=new i(o,"generated"),l=u.setResource(t,a);return t?l.then(s,e.unhandledPromise):s()}function d(e){function n(n,r){var i=new o([r],[]);return e(n,i),new t({name:n},i)}function r(e,t){var r,i;if(t){r=[];for(i in t)r.push(n(i,t[i]));e.splice(0,e.length,r)}}function i(e,t,r){var i=n(t,r);e.setProperty(i)}function a(e,t){r(e.properties,t)}function d(e){return s.prototype.escape(e)}return{initializePropertyValue:e,makeProperty:n,appendProperty:l,updateProperty:u,moveCPSElement:c,isProperty:h,setProperty:i,addNewRule:f,addNewAtImport:p,setProperties:r,setElementProperties:a,escapeSelectorName:d}}e.NotImplemented;return d}),define("Atem-Property-Language/_Expression",["Atem-Property-Language/errors"],function(e){"use strict";function t(){}var n=e.NotImplemented,r=t.prototype;return r.constructor=t,r.evaluate=function(e){throw new n("The getValue Interface must be implemented by a subclass")},r.getValue=function(t){return e.warn('The method "getValue" is deprecated! Use "evaluate" instead,'),this.execute(t)},r.toString=function(){throw new n("The toString Interface must be implemented by a subclass")},t}),define("Atem-CPS-whitelisting/whitelisting",["Atem-Errors/errors"],function(e){"use strict";function t(e){return"number"==typeof e&&e===e&&e===(0|e)}function n(e){return"string"!=typeof e?!1:f.test(e)}function r(e,t,n){return e?"string"!=typeof n?[!1,"name must be string but it is: "+typeof n]:e.hasOwnProperty(n)?[!0,e[n]]:[!1,'Name "'+n+'" is not whitelisted for item "'+t+'" '+Object.keys(e).join(", ")]:[!1,'Key "'+n+'" is not whitelisted because the whitelist is missing.']}function i(e,t,n){return r(e,t,n)[0]}function o(e,t,n){var i=r(e,t,n);if(!i[0])throw new h(i[1]);return t[i[1]]}function a(e){return i(this._cps_whitelist,this,e)}function s(e){return o(this._cps_whitelist,this,e)}function u(e,r){var i;if("length"===r)return[!0,r];if(n(r)&&(r=parseInt(r,10)),!t(r))return[!1,'Key must be "length" or an integer but it is: '+r+" "+typeof r];if(i=0>r?e.length+r:r,0>i||i>=e.length)throw new h('The index "'+r+'" is not in the array. Length: '+e.length);return[!0,i]}function l(e,t){return u(e,t)[0]}function c(e,t){var n=u(e,t);if(!n[0])throw new h(n[1]);return e[n[1]]}var h=e.Key,f=/^[+-]?[0-9]+$/;return{has:i,get:o,hasMethod:a,getMethod:s,arrayHas:l,arrayGet:c}}),function(e,t){"object"==typeof exports&&exports?t(exports):"function"==typeof define&&define.amd?define("bloomfilter",["exports"],t):t(e)}(this,function(e){function t(e,t){var n;"number"!=typeof e&&(n=e,e=32*n.length);var r=Math.ceil(e/32);if(this.m=e=32*r,this.k=t,s){var i=1<<Math.ceil(Math.log(Math.ceil(Math.log(e)/Math.LN2/8))/Math.LN2),o=1===i?Uint8Array:2===i?Uint16Array:Uint32Array,a=new ArrayBuffer(i*t);this._locations=new o(a)}else this._locations=[];this.buckets=n?n instanceof Array?n.slice():new n.constructor(n):[]}function n(e){return e-=e>>1&1431655765,e=(858993459&e)+(e>>2&858993459),16843009*(e+(e>>4)&252645135)>>24}function r(e){for(var t=2166136261,n=0,r=e.length;r>n;++n){var o=e.charCodeAt(n),s=65280&o;s&&(t=i(t^s>>8)),t=i(t^255&o)}return a(t)}function i(e){return e+(e<<1)+(e<<4)+(e<<7)+(e<<8)+(e<<24)}function o(e){return a(i(e))}function a(e){return e+=e<<13,e^=e>>>7,e+=e<<3,e^=e>>>17,e+=e<<5,4294967295&e}e.BloomFilter=t,e.fnv_1a=r,e.fnv_1a_b=o;var s="undefined"!=typeof ArrayBuffer;t.prototype.clone=function(){return new t(this.buckets,this.k)},t.prototype.locations=function(e){for(var t=this.k,n=this.m,i=this._locations,a=r(e),s=o(a),u=a%n,l=0;t>l;++l)i[l]=0>u?u+n:u,u=(u+s)%n;return i},t.prototype.getLocations=function(e){var t=this.locations(e);return t instanceof Array?t.slice():new t.constructor(t)},t.prototype.add=function(e){for(var t=this.locations(e+""),n=this.k,r=this.buckets,i=0;n>i;++i)r[Math.floor(t[i]/32)]|=1<<t[i]%32},t.prototype.test=function(e){var t=this.locations(e+"");return this.testByLocations(t)},t.prototype.testByLocations=function(e){for(var t=e,n=this.k,r=this.buckets,i=0;n>i;++i){var o=t[i];if(0===(r[Math.floor(o/32)]&1<<o%32))return!1}return!0},t.prototype.size=function(){for(var e=this.buckets,t=0,r=0,i=e.length;i>r;++r)t+=n(e[r]);return-this.m*Math.log(1-t/this.m)/this.k}}),define("Atem-CPS/OMA/_Node",["Atem-CPS/errors","Atem-CPS-whitelisting/whitelisting","Atem-CPS/emitterMixin","Atem-CPS/CPS/elements/PropertyDict","bloomfilter"],function(e,t,n,r,i){"use strict";function o(){return g++}function a(){if(this.constructor.prototype===v)throw new c("OMA _Node must not be instantiated directly");Object.defineProperty(this,"nodeID",{value:o()}),this._children=[],this._childrenData=new Map,this._ids=this.idManager?Object.create(null):null,this._attachedData=null,this._parent=null,this._index=null,this._tailIndex=null,this._indexPaths=Object.create(null),this._id=null,this._classes=Object.create(null),this._bloomFilter=null,Object.defineProperty(this,"properties",{value:new r([],"*element properties*"),enumerable:!0}),this._changeSubscriptions=null,n.init(this,u),n.init(this,l),this._cpsChange={timeoutId:null,eventData:[],trigger:this._triggerCpsChange.bind(this)}}function s(e){e!==this.id&&(this._bloomFilter=null,this._id=e||null,this._triggerPropertyChange("id"))}var u,l,c=e.OMA,h=e.OMAId,f=e.Value,p=e.Key,d=e.NotImplemented,m=e.assert,g=0;u={stateProperty:"_channel",onAPI:"_on",offAPI:"_off",triggerAPI:"_trigger"},l={stateProperty:"_dependants",onAPI:"onPropertyChange",offAPI:"offPropertyChange",triggerAPI:"_triggerPropertyChange"};var v=a.prototype;return v.constructor=a,v._cps_whitelist={parent:"parent",children:"children",root:"root",index:"index",id:"id",type:"type",baseNode:"baseNode"},v.cpsGet=t.getMethod,v.cpsHas=t.hasMethod,v._propertiesDependentOnParent=["parent","root"],v._getValidator=function(e){return null},v.checkPropertyValue=function(e,t){var n=this._getValidator(e),r=t;if(n&&(r=n.call(this,e,r)),void 0===r)throw new f('The formula of "'+e+'" in a '+this+" returned `undefined` which is never valid");return r},v.clone=function(e){var t=new this.constructor;return this.finishClone(t,e),t},v.finishClone=function(e,t){var n,r,i,o,a=Object.isFrozen(this._children);for(this.cloneProperties(e,t),n=0,r=this._children.length;r>n;n++)i=this._children[n],a?(o=e.getChild(n),i.finishClone(o,t)):e.add(i.clone(t))},v._cloneAttachedData=function(e){var t=this._dumpAttachment();t&&e.attachData(t)},v.cloneProperties=function(e,t){var n=void 0===t?15:t,r=1&n,i=2&n,o=4&n,a=8&n,s=16&n,u=32&n;r&&this._id&&(e.id=this._id),i&&e.setClasses(this.classes),o&&e.properties.splice(0,e.properties.length,this.properties.items),a&&this._cloneAttachedData(e),s?e.baseNode=this:u&&this._baseNode&&(e.baseNode=this._baseNode)},v._dumpClasses=function(){var e;for(e in this._classes)return this.classes;return null},v._loadClasses=function(e){var t,n,r,i=new Set;for(t=0,n=e.length;n>t;t++)if(r=e[t],i.add(r),!(r in this._classes)){this._classes=null;break}if(null!==this._classes)for(r in this._classes)if(!i.has(r)){this._classes=null;break}null===this._classes&&(this._classes=Object.create(null),this.setClasses(e))},v._dumpProperties=function(e){var t,n,r,i,o,a,s=null;if(e){for(t=Object.create(null),o=this.properties.keys(),n=0,r=o.length;r>n;n++)i=o[n],t[i]=this.properties.get(i).valueString;r&&(s=t)}else{for(t=[],a=this.properties.items,n=0,r=a.length;r>n;n++)t.push([a[n].name,a[n].value.valueString]);r&&(s=t)}return s},v._loadProperties=function(e,t){var n,r,i,o=[];if(t instanceof Array)for(r=0,i=t.length;i>r;r++)o.push(e(t[r][0],t[r][1]));else for(n in t)o.push(e(n,t[n]));this.properties.splice(0,this.properties.length,o)},v._dumpAttachment=function(){var e;if(this._attachedData)for(e in this._attachedData)return JSON.parse(JSON.stringify(this._attachedData));return null},v._loadAttachment=function(e){this.attachData(JSON.parse(JSON.stringify(e)))},v.dumpData=function(e,t){var n,r,i=Object.create(null),o=void 0===t?15:t,a=1&o,s=2&o,u=4&o,l=8&o;a&&this._id&&(i.id=this._id),s&&(n=this._dumpClasses(),n&&(i.classes=n)),u&&(n=this._dumpProperties(e),n&&(i.properties=n)),l&&(n=this._dumpAttachment(),n&&(i.attachment=n));for(r in i)return i;return null},v._loadData=function(e,t){"id"in t&&(this.id=t.id),"classes"in t&&this._loadClasses(t.classes),"properties"in t&&this._loadProperties(e,t.properties),"attachment"in t&&this._loadAttachment(t.attachment)},v._dumpChildren=function(e,t){var n,r,i,o,a,s=Object.isFrozen(this._children);if(!this._children.length)return null;for(n=[],o=0,a=this._children.length;a>o;o++)r=this._children[o],i=r[e].apply(r,t||[]),s||(i=[r.type,i]),n.push(i);return n},v._loadChildren=function(e,t,n){var r,i,o,a,s,u,l,h=Object.isFrozen(this._children);for(h||(r=[]),i=0,o=n.length;o>i;i++)if(h){if(a=this._children[i],!a)throw new c("Child is missing. The data suggests that a child should be at index "+i+"in "+this);u=n[i],null!==u&&a[e](u)}else s=n[i][0],u=n[i][1],l=this.getChildConstructor(s),"function"==typeof l[t]?a=l[t](u):(a=new l,null!==u&&a[e](u)),r.push(a);h||this.splice(0,this._children.length,r)},v.dumpEssence=function(){return this._dumpChildren("dumpEssence")},v.dumpTree=function(e){var t=this.dumpData(e),n=this._dumpChildren("dumpTree",[e]);return n&&(t||(t=Object.create(null)),t.children=n),t},v.loadData=function(e){throw new d("A subclass must implement loadData")},v.loadEssence=function(e){e&&this._loadChildren("loadEssence","fromEssence",e)},v.loadTree=function(e){e&&this.loadData(e),e.children&&this._loadChildren("loadTree","fromTree",e.children)},v.walkTreeDepthFirst=function(e){var t,n;for(e(this),t=0,n=this._children.length;n>t;t++)this._children[t].walkTreeDepthFirst(e)},v.attachData=function(e,t){return 1===arguments.length&&"object"==typeof e?void(this._attachedData=e):(this._attachedData||(this._attachedData=Object.create(null)),void(this._attachedData[e]=t))},v.detachData=function(e){0===arguments.length?this._attachedData=null:this._attachedData&&delete this._attachedData[e]},v.getAttachment=function(e,t){return 0===arguments.length?this._attachedData:this._attachedData&&e in this._attachedData?this._attachedData[e]:t&&this._baseNode?this._baseNode.getAttachment(e,t):void 0},v.hasBaseNode=function(){return!!this._baseNode},Object.defineProperty(v,"baseNode",{get:function(){if(!this._baseNode)throw new p(this+" has no baseNode.");return this._baseNode},set:function(e){if(this._baseNode!==e){if(this._baseNode&&this._baseNode!==e)throw new c(this+"already has already a baseNode ("+e+") it is not allowed to change it.");if(e.type!==this.type)throw new c('Node must be a "'+this.type+'", but it is "'+e.type+'".');var t=e;do{if(this===t)throw new c("Recursion in baseNode chain: "+this+" is already in the base nodes of "+e+".");t=t.hasBaseNode()&&t.baseNode}while(t);this._baseNode=e}}}),n(v,u),n(v,l),Object.defineProperty(v,"type",{get:function(){throw new d("Implement CPS-Type name!")}}),Object.defineProperty(v,"children",{get:function(){return this._children.slice()}}),Object.defineProperty(v,"childrenLength",{get:function(){return this._children.length}}),v.getChild=function(e){return this._children[e]},Object.defineProperty(v,"idManager",{value:!1}),v.requestSetId=function(e,t){return this.idManager?e.getIdManager()!==this?!1:this._setDescendantId(e,t):this.parent&&this.parent.requestSetId(e,t)},v._setDescendantId=function(e,t,n){var r=this._ids[t];if(r)throw new h('Id "'+t+'" is already taken by: '+r+" "+r.particulars);return e.id&&(n||m(this._ids[e.id]===e,"The nodes id should be registered here."),this._ids[e.id]===e&&delete this._ids[e.id]),null!==t&&(this._ids[t]=e,e.updateId(t)),!0},v.removeSubtreeIds=function(e){if(!this.idManager)return this.parent&&this.parent.removeSubtreeIds(e);for(var t,n=[e];t=n.pop();)t.id&&this._ids[t.id]===t&&t.getIdManager()!==this&&delete this._ids[e.id],t.idManager||Array.prototype.push.apply(n,t.children)},v.addSubtreeIds=function(e){if(!this.idManager)return this.parent&&this.parent.addSubtreeIds(e);if(e.getIdManager()!==this)return!1;for(var t,n=[e];t=n.pop();)t.id&&this._setDescendantId(t,t.id,!0),t.idManager||Array.prototype.unshift.apply(n,t.children.reverse())},v.getById=function(e){return this.idManager?this._ids[e]:this.parent&&this.parent.getById(e)},v.getIdManager=function(){for(var e=this.parent;e;){if(e.idManager)return e;e=e.parent}return!1},v.updateId=function(e){if(this.parent){var t=this.parent.getById(e);t===this&&s.call(this,e)}},Object.defineProperty(v,"id",{set:function(e){var t=this.parent&&this.parent.requestSetId(this,e);t&&null!==e||s.call(this,e)},get:function(){return this._id}}),v._rootType="root",v.isRoot=function(){return this.type===this._rootType},Object.defineProperty(v,"root",{get:function(){return this._parent?this._parent.isRoot()?this._parent:this._parent.root:null}}),Object.defineProperty(v,"particulars",{get:function(){return[this._parent?this._parent.particulars:"(no parent)"," ",this.type,this.id?"#"+this.id:"",this._parent?":i("+this.index+")":""].join("")}}),v._setCLass=function(e){return this._bloomFilter=null,e in this._classes?!1:(this._classes[e]=null,!0)},v.setClass=function(e){this._setCLass(e)&&this._triggerPropertyChange("classes")},v.setClasses=function(e){var t,n,r;for(t=0,n=e.length;n>t;t++)r=this._setCLass(e[t])||r;r&&this._triggerPropertyChange("classes")},v.removeClass=function(e){this._bloomFilter=null,e in this._classes[e]&&(delete this._classes[e],this._triggerPropertyChange("classes"))},v.hasClass=function(e){return e in this._classes},Object.defineProperty(v,"classes",{get:function(){return Object.keys(this._classes)},enumerable:!0}),v.toString=function(){return["<",this.type," ",this.nodeID,">"].join("")},v.isOMANode=function(e){return e instanceof a},v._acceptedChildren=Object.create(null),v.qualifiesAsChild=function(e){return this.isOMANode(e)&&e!==this&&e.type in this._acceptedChildren&&e instanceof this._acceptedChildren[e.type]?!0:!1},v.getChildConstructor=function(e){var t=this._acceptedChildren[e];if(!t)throw new p('No child constructor found for type "'+e+'" in '+this);return t},v.find=function(e){var t=this._childrenData.get(e);return void 0===t?!1:t[0]},Object.defineProperty(v,"index",{get:function(){return this._index}}),v.getIndexPath=function(e){var t,n=e&&e.nodeID||"",r=this._indexPaths[n];return r||(this.isRoot()&&(r="/"),this===e?r=".":this.parent?(t=this.parent.getIndexPath(e),r=[t,this._index].join("/"!==t?"/":"")):r=this._index,this._indexPaths[n]=r),r},Object.defineProperty(v,"parent",{set:function(e){if(null===e){if(null===this._parent)return;if(this._parent.find(this)!==!1)throw new c("Can't unset the parent property when the parent still has this Node as a child");return this._bloomFilter=null,this._parent=null,this.updateIndex(),void this._triggerPropertyChange(this._propertiesDependentOnParent)}if(null!==this._parent)throw new c([this,"is still a child of a",this._parent,'you can\'t set a new parent Node. Use "newParent.add(child)"',"to move the child to another parent"].join(" "));if(!this.isOMANode(e))throw new c('The parent property must be an OMA Node, but it is: "'+e+'" typeof: '+typeof e);if(e.find(this)===!1)throw new c('A OMA Node must already be a child of its parent when trying to set its parent property. Use "parent.add(child)" instead.');this._bloomFilter=null,this._parent=e,this.updateIndex(),this._triggerPropertyChange(this._propertiesDependentOnParent)},get:function(){return this._parent}}),v.updateIndex=function(){var e=this._parent?this._parent.find(this):null,t=null!==e?this._parent.childrenLength-e-1:null,n=[];e!==this._index&&(this._index=e,this._indexPaths=Object.create(null),n.push("index")),t!==this._tailIndex&&(this._tailIndex=t,n.push("tail-index")),this._triggerPropertyChange(n)},v._getCanonicalStartIndex=function(e,t){return e>=t?t:0>e?Math.max(0,t-e):e},v._childSubtreeChangeHandler=function(){this._triggerPropertyChange("subtree")},v._removeDoubles=function(e){var t,n,r=new Set;for(t=e.length-1;t>=0;t--)n=e[t],r.has(n)?e.splice(t,1):r.add(n)},v.splice=function(e,t,n){if(Object.isFrozen(this._children))throw new c("Adding or removing children is not allowed in this element.");var r,i,o,a,s,u,l,h,f,p,d,m,g=n instanceof Array?n:void 0===n?[]:[n],v=this._getCanonicalStartIndex(e,this._children.length),y=this.root;for(this._removeDoubles(g),o=0,a=g.length;a>o;o++)if(s=g[o],!this.qualifiesAsChild(s))throw new c([this,"doesn't accept",s,"as a child object."].join(" "));for(u=g.map(function(e){return e.parent===this?e.index:-1},this),u.sort(),o=u.length-1;o>=0;o--)l=u[o],-1!==l&&(this._children.splice(l,1),l>=v&&v+t>l&&(t-=1),v>=l&&v>0&&(v-=1));for(v=Math.min(v,this._children.length),i=[v,t],Array.prototype.push.apply(i,g),r=Array.prototype.splice.apply(this._children,i),o=0,a=r.length;a>o;o++)s=r[o],h=this._childrenData.get(s),this._childrenData["delete"](s),s.offPropertyChange(h[1]),s.parent=null,this.removeSubtreeIds(s),y&&(s.lostRoot(),y.removeFromTree(s)),this._unsubscribeFromStyleChange(s);for(o=0,a=g.length;a>o;o++)s=g[o],l=v+o,s.parent!==this?(null!==s.parent&&s.parent.remove(s),m=s.onPropertyChange(["subtree","id","classes"],[this,"_childSubtreeChangeHandler"]),this._childrenData.set(s,[l,m]),s.parent=this,this.addSubtreeIds(s),this._subscribeToStyleChange(s),y&&s.gainedRoot()):(this._childrenData.get(s)[0]=l,s.updateIndex());for(p=g.length-r.length-u.length,f=v+g.length,o=0,a=this._children.length;a>o;o++)s=this._children[o],o>=v&&f>o||((d=s.index!==o)&&(this._childrenData.get(s)[0]=o),(p||d)&&s.updateIndex());return(r.length||g.length||u.length)&&this._triggerPropertyChange(["children","subtree"]),r},v.remove=function(e){var t=this.find(e);if(t===!1)throw new c([this,"can't remove",e,"because","it is not a child."].join(" "));return this.splice(t,1),!0},v.add=function(e){this.splice(this._children.length,0,e)},v.query=function(e){return this.root.query(e,this)},v.queryAll=function(e){return this.root.queryAll(e,this)},v.getComputedStyle=function(){return this.root.getComputedStyleFor(this)},v._triggerCpsChange=function(){clearTimeout(this._cpsChange.timeoutId);var e=this._cpsChange.eventData;this._cpsChange.timeoutId=null,this._cpsChange.eventData=[],this._trigger("CPS-change",e)},v._cpsChangeHandler=function(e,t,n){n&&this._cpsChange.eventData.push(n),this._cpsChange.timeoutId&&clearTimeout(this._cpsChange.timeoutId),this._cpsChange.timeoutId=setTimeout(this._cpsChange.trigger)},v.flushStyleChanges=function(){var e,t,n;for(this._cpsChange.timeoutId&&clearTimeout(this._cpsChange.timeoutId),this._cpsChange.timeoutId=null,this._cpsChange.eventData=[],e=this.getComputedStyle(),e.flushStyleChanges("change"),t=0,n=this._children.length;n>t;t++)this._children[t].flushStyleChanges()},v._unsubscribeFromStyleChange=function(e){var t,n,r=this._changeSubscriptions;if(r)if(e)n=e===this?"_styleDict_":e.nodeID,t=r[n],t&&(t[0].off(t[1]),delete r[n]);else for(n in r)t=r[n],t[0].off(t[1]),delete r[n]},v._subscribeToStyleChange=function(e){var t,n,r,i,o=this._changeSubscriptions;o&&(t=[this,"_cpsChangeHandler"],r=e===this?"_styleDict_":e.nodeID,r in o||(e===this?(n=this.getComputedStyle(),i=[n,n.on("change",t)]):i=[e,e.on("CPS-change",t)],o[r]=i))},v.lostRoot=function(){var e,t;for(m(!this.root,this+"must not have a root."),this._unsubscribeFromStyleChange(this),e=0,t=this._children.length;t>e;e++)this._children[e].lostRoot()},v.gainedRoot=function(){var e,t;for(m(!!this.root,this+"must have a root."),this._subscribeToStyleChange(this),e=0,t=this._children.length;t>e;e++)this._children[e].gainedRoot()},v._initCPSChangeEvent=function(){var e,t,n,r=this._changeSubscriptions;if(null===r)for(r=this._changeSubscriptions=Object.create(null),Object.defineProperty(r,"counter",{value:0,writable:!0,enumerable:!1}),this.root&&this._subscribeToStyleChange(this),e=this._children,t=0,n=e.length;n>t;t++)this._subscribeToStyleChange(e[t]);r.counter+=1},v._deinitCPSChangeEvent=function(e){var t=this._changeSubscriptions;t&&(t.counter-=1,0===t.counter&&this._unsubscribeFromStyleChange(),this._changeSubscriptions=null)},v.on=function(e,t,n){var r,i;if(e instanceof Array){for(r=0,i=e.length;i>r;r++)if("CPS-change"===e[r]){this._initCPSChangeEvent();break}}else"CPS-change"===e&&this._initCPSChangeEvent();return this._on(e,t,n)},v.off=function(e){var t,n,r=this._off(e);if(e[0]instanceof Array)for(t=0,n=e.length;n>t;t++){if("CPS-change"===e[t][0]){this._deinitCPSChangeEvent();break}"CPS-change"===e[0]&&this._deinitCPSChangeEvent()}return r},v._getBloomFilterData=function(){var e,t,n,r;e=[this.type],t=this.id,t&&e.push("#"+t),r=this._classes;for(n in r)e.push("."+n);return e},v.getBloomFilter=function(){var e,t,n,r=this._bloomFilter;if(!r)for(r=this.parent?this.parent.getBloomFilter().clone():new i.BloomFilter(512,5),this._bloomFilter=r,e=this._getBloomFilterData(),t=0,n=e.length;n>t;t++)r.add(e[t]);return r},a}),define("Atem-Math-Tools/transform",["Atem-Errors/errors"],function(e){"use strict";function t(e){return Math.abs(e)<a?e=0:e>s?e=1:u>e&&(e=-1),e}function n(e){var t=[1,0,0,1,0,0];if(this.__get=function(e){if(void 0===t[e])throw new o("The key "+e+"does not exist in"+this);return t[e]},this.__affine=function(){return t.slice(0)},void 0!==e)for(var n=0;6>n;n++)void 0!==e[n]&&null!==e[n]&&(t[n]=e[n])}function r(e,t){return e=e||0,t=t||0,new n([1,0,0,1,e,t])}function i(e,t){return(void 0===t||null===t)&&(t=e),new n([e,0,0,t,0,0])}var o=e.Key,a=1e-15,s=1-a,u=-1+a,l=n.prototype;l.transformPoint=function(e){var t=this[0],n=this[1],r=this[2],i=this[3],o=this[4],a=this[5],s=e[0],u=e[1];return[t*s+r*u+o,n*s+i*u+a]},l.transformPoints=function(e){return e.map(this.transformPoint,this)},l.translate=function(e,t){return e=e||0,t=t||0,this.transform([1,0,0,1,e,t])},l.scale=function(e,t){return void 0===e&&(e=1),(void 0===t||null===t)&&(t=e),this.transform([e,0,0,t,0,0])},l.rotate=function(e){var n=t(Math.cos(e)),r=t(Math.sin(e));return this.transform([n,r,-r,n,0,0])},l.skew=function(e,t){return e=e||0,t=t||0,this.transform([1,Math.tan(t),Math.tan(e),1,0,0])},l.transform=function(e){var t=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=this[0],l=this[1],c=this[2],h=this[3],f=this[4],p=this[5];return new n([t*u+r*c,t*l+r*h,i*u+o*c,i*l+o*h,u*a+c*s+f,l*a+h*s+p])},l.reverseTransform=function(e){var t=this[0],r=this[1],i=this[2],o=this[3],a=this[4],s=this[5],u=e[0],l=e[1],c=e[2],h=e[3],f=e[4],p=e[5];return new n([t*u+r*c,t*l+r*h,i*u+o*c,i*l+o*h,u*a+c*s+f,l*a+h*s+p])},l.inverse=function(){if(this.cmp(c))return this;var e=this[0],t=this[1],r=this[2],i=this[3],o=this[4],a=this[5],s=e*i-r*t,u=i/s,l=-t/s,h=-r/s,f=e/s,p=-u*o-h*a,d=-l*o-f*a;return new n([u,l,h,f,p,d])},l.toPS=function(){return["[",this.__affine().join(" "),"]"].join("")},l.cmp=function(e){return e[0]===this[0]&&e[1]===this[1]&&e[2]===this[2]&&e[3]===this[3]&&e[4]===this[4]&&e[5]===this[5]},l.valueOf=function(){return["<Transform ",this.toPS(),">"].join("")},l.toString=function(){return this.__affine().join(" ")},Object.defineProperty(l,"length",{get:function(){return 6}}),l.slice=function(e,t){return this.__affine().slice(e,t)},Object.defineProperties(l,{0:{get:function(){return this.__get(0)}},1:{get:function(){return this.__get(1)}},2:{get:function(){return this.__get(2)}},3:{get:function(){return this.__get(3)}},4:{get:function(){return this.__get(4)}},5:{get:function(){return this.__get(5)}}});var c=new n;return{Transform:n,
Identity:c,Offset:r,Scale:i}}),function(e,t){"object"==typeof exports&&exports?module.exports=t():"function"==typeof define&&define.amd?define("complex/Complex",[],t):e.Complex=t()}(this,function(){"use strict";var e=function(e,t){Object.defineProperty(this,"real",{value:void 0!==e?e:0,writable:!1}),Object.defineProperty(this,"imag",{value:void 0!==t?t:0,writable:!1})},t=e.prototype={constructor:e,fromRect:function(e,t){return new this.constructor(e,t)},fromPolar:function(e,t){if("string"==typeof e){var n=e.split(" ");e=n[0],t=n[1]}return new this.constructor(e*Math.cos(t),e*Math.sin(t))},toPrecision:function(e){return new this.constructor(this.real.toPrecision(e),this.imag.toPrecision(e))},toFixed:function(e){return new this.constructor(this.real.toFixed(e),this.imag.toFixed(e))},magnitude:function(){var e=this.real,t=this.imag;return Math.sqrt(e*e+t*t)},angle:function(){return Math.atan2(this.imag,this.real)},conjugate:function(){return new this.constructor(this.real,-this.imag)},negate:function(){return new this.constructor(-this.real,-this.imag)},multiply:function(e){e=this.constructor.from(e);var t=this.real,n=this.imag;return new this.constructor(e.real*t-e.imag*n,n*e.real+e.imag*t)},divide:function(e){e=this.constructor.from(e);var t=Math.pow(e.real,2)+Math.pow(e.imag,2),n=this.real,r=this.imag;return new this.constructor((n*e.real+r*e.imag)/t,(r*e.real-n*e.imag)/t)},add:function(e){return e=this.constructor.from(e),new this.constructor(this.real+e.real,this.imag+e.imag)},subtract:function(e){return e=this.constructor.from(e),new this.constructor(this.real-e.real,this.imag-e.imag)},pow:function(e){e=this.constructor.from(e);var t=e.multiply(this.clone().log()).exp();return new this.constructor(t.real,t.imag)},sqrt:function(){var e=this.magnitude(),t=this.imag<0?-1:1;return new this.constructor(Math.sqrt((e+this.real)/2),t*Math.sqrt((e-this.real)/2))},log:function(e){return e||(e=0),new this.constructor(Math.log(this.magnitude()),this.angle()+2*e*Math.PI)},exp:function(){return this.fromPolar(Math.exp(this.real),this.imag)},sin:function(){var e=this.real,t=this.imag;return new this.constructor(Math.sin(e)*s(t),Math.cos(e)*a(t))},cos:function(){var e=this.real,t=this.imag;return new this.constructor(Math.cos(e)*s(t),Math.sin(e)*a(t)*-1)},tan:function(){var e=this.real,t=this.imag,n=Math.cos(2*e)+s(2*t);return new this.constructor(Math.sin(2*e)/n,a(2*t)/n)},sinh:function(){var e=this.real,t=this.imag;return new this.constructor(a(e)*Math.cos(t),s(e)*Math.sin(t))},cosh:function(){var e=this.real,t=this.imag;return new this.constructor(s(e)*Math.cos(t),a(e)*Math.sin(t))},tanh:function(){var e=this.real,t=this.imag,n=s(2*e)+Math.cos(2*t);return new this.constructor(a(2*e)/n,Math.sin(2*t)/n)},clone:function(){return new this.constructor(this.real,this.imag)},toString:function(e){if(e)return this.magnitude()+" "+this.angle();var t="",n=this.real,r=this.imag;if(n&&(t+=n),(n&&r||0>r)&&(t+=0>r?"-":"+"),r){var i=Math.abs(r);1!=i&&(t+=i),t+="i"}return t||"0"},equals:function(e){return e=this.constructor.from(e),e.real==this.real&&e.imag==this.imag}},n={abs:"magnitude",arg:"angle",phase:"angle",conj:"conjugate","**":"pow",mult:"multiply","*":"multiply",dev:"divide","/":"divide","+":"add",sub:"subtract","-":"subtract","=":"equals"};for(var r in n)t[r]=t[n[r]];var i={from:function(t,n){return t instanceof e?new e(t.real,t.imag):new e(t,n)},fromString:function(t){var n,r,i;return"i"==t&&(t="0+1i"),n=t.match(/(\d+)?([\+\-]\d*)[ij]/),n&&(r=n[1],i="+"==n[2]||"-"==n[2]?n[2]+"1":n[2]),new e(+r,+i)},fromPolar:function(t,n){return new e(1,1).fromPolar(t,n)},i:new e(0,1),one:new e(1,0)};for(var o in i)e[o]=i[o];var a=function(e){return(Math.pow(Math.E,e)-Math.pow(Math.E,-e))/2},s=function(e){return(Math.pow(Math.E,e)+Math.pow(Math.E,-e))/2};return e}),define("Atem-Math-Tools/Vector",["complex/Complex","Atem-CPS-whitelisting/whitelisting"],function(e,t){"use strict";function n(t,n){e.call(this,t,n)}function r(){return this.real}function i(){return this.imag}var o=n.prototype=Object.create(e.prototype);return o.constructor=n,o._cps_whitelist={x:"x",y:"y",length:"len",angle:"rad"},o.cpsGet=t.getMethod,o.cpsHas=t.hasMethod,n.fromArray=function(e){return new o.constructor(e[0],e[1])},Object.defineProperty(o,"x",{get:r}),Object.defineProperty(o,"y",{get:i}),Object.defineProperty(o,"length",{value:2,writable:!1,enumerable:!0}),Object.defineProperty(o,"0",{get:r}),Object.defineProperty(o,"1",{get:i}),o.valueOf=function(){return Array.prototype.slice.call(this)},o.toString=function(){return"<Vector "+this.valueOf()+">"},n.i=new n(0,1),n.one=new n(1,0),n.from=function(t,r){var i=e.from(t,r);return new n(i.real,i.imag)},n.fromPolar=function(e,t){return new n(1,1).fromPolar(e,t)},Object.defineProperty(o,"len",{get:e.prototype.magnitude}),Object.defineProperty(o,"rad",{get:e.prototype.angle}),n}),define("Atem-Math-Tools/utils",[],function(){"use strict";function e(e){var t=e%(2*Math.PI);return 0>t&&(t+=2*Math.PI),t}return{normalizeAngle:e}}),define("Atem-Math-Tools/hobby",["./Vector","./utils"],function(e,t){"use strict";function n(e,t){var n=Math.sin(e),r=Math.cos(e),i=Math.sin(t),o=Math.cos(t);return(2+Math.sqrt(2)*(n-1/16*i)*(i-1/16*n)*(r-o))/(3*(1+.5*(Math.sqrt(5)-1)*r+.5*(3-Math.sqrt(5))*o))}function r(e,t,r,i,o,a){var s,u,l=a["-"](e),c=l.angle(),h=l.magnitude(),f=y(t-c),p=y(c-o);return void 0!==r&&(s=0!==h||0!==r&&r!==1/0?h*n(f,p)/r:0===r?1/0:0),void 0!==i&&(u=0!==h||0!==i&&i!==1/0?h*n(p,f)/i:0===i?1/0:0),[s,u]}function i(e,t,n,i,o,a){var s=r(e,t,n,i,o,a);return void 0===s[0]&&(s[0]=NaN),void 0===s[1]&&(s[1]=NaN),s}function o(e,t,n,i,o){return r(e,t,n,void 0,i,o)[0]}function a(e,t,n,i,o){return r(e,t,void 0,n,i,o)[1]}function s(e,t,n,r,i,o){var a,s,u,l=0===n||void 0===n?void 0:1,c=0===r||void 0===r?void 0:1;return(l||c)&&(a=h(e,t,l,c,i,o)),0===n?s=1/0:void 0!==n&&(s=a[0]["-"](e).magnitude()/n),0===r?u=1/0:void 0!==r&&(u=a[1]["-"](o).magnitude()/r),[s,u]}function u(e,t,n,r,i,o){var a=s(e,t,n,r,i,o);return void 0===a[0]&&(a[0]=NaN),void 0===a[1]&&(a[1]=NaN),a}function l(e,t,n,r,i){return s(e,t,n,void 0,r,i)[0]}function c(e,t,n,r,i){return s(e,t,void 0,n,r,i)[1]}function h(t,n,i,o,a,s){var u,l,c,h,f;return(n instanceof e||a instanceof e)&&console.warn("It is deprecated to use Vectors for dir0 or dir1"),u=n instanceof e?n.arg():n,l=a instanceof e?a.arg():a,c=r(t,u,i,o,l,s),void 0!==c[0]&&(h=e.fromPolar(c[0],u)["+"](t)),void 0!==c[1]&&(f=s["-"](e.fromPolar(c[1],l))),[h,f]}function f(t,n,r,i,o,a){var s=h(t,n,r,i,o,a);return void 0===s[0]&&(s[0]=new e(NaN,NaN)),void 0===s[1]&&(s[1]=new e(NaN,NaN)),s}function p(e,t,n,r,i){return f(e,t,n,void 0,r,i)[0]}function d(e,t,n,r,i){return f(e,t,void 0,n,r,i)[1]}function m(e,t,n,r){var i=t["-"](e),o=r["-"](n),a=i.angle(),u=o.angle(),l=i.magnitude(),c=o.magnitude();return s(e,a,l,c,u,r)}function g(e,t,n,r){var i=t["-"](e),o=r["-"](n),a=i.angle(),s=o.magnitude(),u=i.magnitude();return l(t,a,u,s,r)}function v(e,t,n,r){var i=t["-"](e),o=r["-"](n),a=i.angle(),s=o.magnitude(),u=o.magnitude();return c(t,a,u,s,r)}var y=t.normalizeAngle;return{hobby:n,tension2magnitude:i,tension2magnitudeOut:o,tension2magnitudeIn:a,magnitude2tension:u,magnitude2tensionOut:l,magnitude2tensionIn:c,tension2control:f,hobby2cubic:f,tension2controlOut:p,tension2controlIn:d,control2tension:m,tensions:m,control2tensionOut:g,posttension:g,control2tensionIn:v,pretension:v}}),define("Atem-Property-Language/flavours/MOM/parser",["Atem-Property-Language/errors","Atem-Property-Language/parsing/Parser","Atem-Property-Language/parsing/Stack","Atem-Property-Language/parsing/OperatorToken","Atem-Property-Language/parsing/NameToken","Atem-Property-Language/parsing/_Token","Atem-CPS/CPS/elements/SelectorList","Atem-CPS/CPS/parsing/parseSelectorList","Atem-CPS/OMA/_Node","Atem-Math-Tools/transform","Atem-Math-Tools/Vector","Atem-Math-Tools/hobby","Atem-Math-Tools/utils"],function(e,t,n,r,i,o,a,s,u,l,c,h,f){"use strict";function p(e){n.call(this,e)}var d,m=(e.Value,e.PropertyLanguage),g=l.Transform,v=s.fromString;d=new t(new r("List",!1,-(1/0),0,1/0,function(){return Array.prototype.slice.call(arguments)}),new r("__get__",!1,1/0,1,1,[["*getAPI*",i,"string",function(e,t,n){var r=e.get(t.getValue());return e.genericGetter(r,n)}],["*getAPI*",i,i,function(e,t,n){var r=e.get(t.getValue()),i=e.get(n.getValue());return e.genericGetter(r,i)}],["*unboxed+getAPI*",u,a,function(e,t,n){var r=e.query(t,n);if(!r)throw new m("Not found: an element for "+n+" in "+t.particulars);return r}],["*unboxed+getAPI*","*anything*",["number","string"],function(e,t,n){return e.genericGetter(t,n)}]]),new r(":",!0,1/0,1,1,[["*getAPI*",i,i,function(e,t,n){var r=e.get(t.getValue());return r||console.log("item:",r,"from",'"'+t.getValue()+'"',"key:",'"'+n.getValue()+'"'),e.genericGetter(r,n.getValue())}],["*getAPI*",a,i,function(e,t,n){var r=e.get("this"),i=e.genericGetter(r,"multivers"),o=e.query(i,t);if(!o)throw new m("Not found: an element for "+t);return e.genericGetter(o,n.getValue())}],["*getAPI*","*anything*",i,function(e,t,n){return e.genericGetter(t,n.getValue())}]]),new r("negate",!1,60,0,1,[["number",function(e){return-e}],[c,function(e){return e.negate()}],[g,function(e){return e.inverse()}]]),new r("+",!0,10,1,1,[["number","number",function(e,t){return e+t}],["string","string",function(e,t){return e+t}],[Array,Array,function(e,t){return e.concat(t)}],[c,c,function(e,t){return e["+"](t)}],[c,"number",function(e,t){return e["+"](t)}]]),new r("-",!0,10,1,1,[["number","number",function(e,t){return e-t}],[c,c,function(e,t){return e["-"](t)}],[c,"number",function(e,t){return e["-"](t)}]]),new r("*",!0,20,1,1,[["number","number",function(e,t){return e*t}],[c,c,function(e,t){return e["*"](t)}],[c,"number",function(e,t){return e["*"](t)}],[g,c,function(e,t){return c.fromArray(e.transformPoint(t))}],[g,g,function(e,t){return e.transform(t)}]]),new r("/",!0,20,1,1,[["number","number",function(e,t){return e/t}],[c,c,function(e,t){return e["/"](t)}],[c,"number",function(e,t){return e["/"](t)}]]),new r("^",!0,30,1,1,[["number","number",function(e,t){return Math.pow(e,t)}],[c,c,function(e,t){return e["**"](t)}],[c,"number",function(e,t){return e["**"](t)}]]),new r("min",!0,40,0,2,[["number","number",function(e,t){return Math.min(e,t)}]]),new r("max",!0,40,0,2,[["number","number",function(e,t){return Math.max(e,t)}]]),new r("Vector",!1,40,0,2,[["number","number",function(e,t){return new c(e,t)}]]),new r("Polar",!1,40,0,2,[["number","number",function(e,t){return c.fromPolar(e,t)}]]),new r("tension2controlOut",!1,40,0,5,[[c,"number","number","number",c,h.tension2controlOut]]),new r("tension2controlIn",!1,40,0,5,[[c,"number","number","number",c,h.tension2controlIn]]),new r("tension2magnitudeIn",!1,40,0,5,[[c,"number","number","number",c,h.tension2magnitudeIn]]),new r("tension2magnitudeOut",!1,40,0,5,[[c,"number","number","number",c,h.tension2magnitudeOut]]),new r("magnitude2tensionOut",!1,40,0,5,[[c,"number","number","number",c,h.magnitude2tensionOut]]),new r("magnitude2tensionIn",!1,40,0,5,[[c,"number","number","number",c,h.magnitude2tensionIn]]),new r("deg",!1,50,0,1,[["number",function(e){return e*Math.PI/180}]]),new r("normalizeAngle",!1,50,0,1,[["number",function(e){return f.normalizeAngle(e)}]]),new r("_print",!1,1/0,0,1,function(e){return console.log('cps _print: "'+e+'" typeof',typeof e,"object: ",e),e}),new r("Scaling",!1,0,0,2,[["number","number",function(e,t){return l.Scale(e,t)}]]),new r("Translation",!1,0,0,2,[["number","number",function(e,t){return l.Offset(e,t)}]]),new r("Skew",!1,0,0,2,[["number","number",function(e,t){return l.Identity.skew(e,t)}]]),new r("Rotation",!1,0,0,1,[["number",function(e){return l.Identity.rotate(e)}]]),new r("Transformation",!1,0,0,6,[["number","number","number","number","number","number",function(e,t,n,r,i,o){return new g(e,t,n,r,i,o)}]]),new r("Identity",!1,0,0,0,function(){return l.Identity}),new r("Selector",!1,0,0,1,[["string",function(e){return v(e)}]]));var y=p.prototype=Object.create(n.prototype);return y.constructor=p,y._finalizeMethod=function(e,t){if(e instanceof i)return t.get(e.getValue());if(e instanceof a){var n=t.get("this"),r=t.genericGetter(n,"multivers"),s=t.query(r,e);if(!s)throw new m("Not found: an element for "+e);return s}if(e instanceof o)throw new m("It is not allowed for a stack to resolve into a _Token, but this Stack did: "+e);return e},d.setBracketOperator("[","__get__"),d.setNegateOperator("-","negate"),d.setStackConstructor(p),d}),define("Atem-Property-Language/flavours/MOM/Expression",["Atem-Property-Language/errors","Atem-Property-Language/_Expression","./parser"],function(e,t,n){"use strict";function r(e){t.call(this),this._stack=e}var i=(e.Value,e.PropertyLanguage),o=r.prototype=Object.create(t.prototype);return o.constructor=r,r.factory=function(e){var t=null,o=null;try{o=n.parse(e)}catch(a){if(!(a instanceof i))throw a;t=a.message}return[t,o&&new r(o)]},o.evaluate=function(e){return this._stack.execute(e)},o.toString=function(){return"<"+this.constructor.name+' with stack "'+this._stack+'">'},r}),define("Atem-Property-Language/flavours/MOM/initializePropertyValue",["./Expression"],function(e){"use strict";function t(t,n){n.initialize(t,e.factory)}return t}),define("Atem-MOM/cpsTools",["Atem-CPS/CPS/cpsTools","Atem-Property-Language/flavours/MOM/initializePropertyValue"],function(e,t){"use strict";return e(t)}),define("metapolator/ui/metapolator/ui-tools/instanceTools",["Atem-MOM/cpsGenerators/metapolation","Atem-MOM/cpsTools"],function(e,t){"use strict";function n(e,t){var n,r=i(e.ruleController,t.axes.length);return n=e.createDerivedMaster(!1,t.axes[0].master.name,t.name,r),e.addMasterToSession(n),t.__cpsFileAxesCount=t.axes.length,t.setMOMElement(n),o(n,t.axes),n}function r(e,t){var n,r;t.__cpsFileAxesCount!==t.axes.length&&(t.__cpsFileAxesCount=t.axes.length,n=i(e.ruleController,t.axes.length),r=e.controller.getCPSName(t.momElement),e.ruleController.write(!1,r,n),e.ruleController.reloadRule(!1,r)),o(t.momElement,t.axes)}function i(e,t){var n=e.generateCPS("metapolation",[t]);return'@import "'+n+'";'}function o(e,n){var r,i,o,a,s=e.properties,u=/^[0-9]+$/,l=s.items,c=[],h=[],f="baseMaster",p=f.length,d="proportion",m=d.length;for(r=0,i=n.length;i>r;r++)h.push(n[r].master),o=t.makeProperty(f+r,'S"master#'+t.escapeSelectorName(n[r].master.momElement.id)+'"'),c.push(o),o=t.makeProperty(d+r,n[r].metapolationValue),c.push(o);for(e.attachData("requiredMasters",h),r=0,i=l.length;i>r;r++)o=l[r],a=o.name,a.slice(0,p)===f&&u.test(a.slice(p))||a.slice(0,m)===d&&u.test(a.slice(m))||c.push(o);s.splice(0,l.length,c)}return{registerInstance:n,update:r}}),define("metapolator/ui/metapolator/ui-tools/dialog",["jquery"],function(e){"use strict";var t,n,r,i,o,a={layover:e('<div class="layover"></div>')[0],dialog:e('<div class="dialog"></div>')[0],close:e('<div class="dialog-close">Ã</div>')[0],loading:e('<div class="dialog-loading"><img src="lib/ui/metapolator/assets/img/loading.gif"></div>')[0],content:e('<div class="dialog-content"></div>')[0],confirm:e('<div class="dialog-confirm"></div>')[0],buttonTrue:e('<button class="dialog-button-true">Okay</button>')[0],buttonFalse:e('<button class="dialog-button-false">Cancel</button>')[0]};return t=function(t,i){n(t,!1,!0,!1),e(a.buttonTrue).click(function(){r(),e(a.buttonTrue).unbind(),i(!0)}),e(a.buttonFalse).click(function(){r(),e(a.buttonFalse).unbind(),i(!1)})},i=function(t,n,i,o){e(document.body).append(a.layover),e(a.layover).append(a.dialog),e(a.dialog).append(a.content),e(a.content).html(t),n&&e(a.dialog).append(a.loading),o&&(e(a.dialog).append(a.close),e(a.close).click(function(){r(),e(a.close).unbind()})),i&&(e(a.dialog).append(a.confirm),e(a.confirm).append(a.buttonTrue),e(a.confirm).append(a.buttonFalse))},o=function(){e(a.content).empty(),e(a.dialog).empty(),e(a.confirm).empty(),e(a.layover).empty(),e(a.layover).remove()},n=function(t,n,r,o){i(t,n,r,o),e(a.layover).fadeIn(100)},r=function(){var t=300;e(a.layover).fadeOut(t),setTimeout(function(){o()},t)},{confirm:t,openDialogScreen:n,closeDialogScreen:r}}),define("require/text!metapolator-cpsLib/ui-master.cps",[],function(){return"@import 'lib/metapolator/metamaster.cps';\n"}),!function(e){if("object"==typeof exports)module.exports=e();else if("function"==typeof define&&define.amd)define("path",e);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.path=e()}}(function(){return function e(t,n,r){function i(a,s){if(!n[a]){if(!t[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(o)return o(a,!0);throw new Error("Cannot find module '"+a+"'")}var l=n[a]={exports:{}};t[a][0].call(l.exports,function(e){var n=t[a][1][e];return i(n?n:e)},l,l.exports,e,t,n,r)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(e,t,n){(function(e){function t(e,t){for(var n=0,r=e.length-1;r>=0;r--){var i=e[r];"."===i?e.splice(r,1):".."===i?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}function r(e,t){if(e.filter)return e.filter(t);for(var n=[],r=0;r<e.length;r++)t(e[r],r,e)&&n.push(e[r]);return n}var i=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,o=function(e){return i.exec(e).slice(1)};n.resolve=function(){for(var n="",i=!1,o=arguments.length-1;o>=-1&&!i;o--){var a=o>=0?arguments[o]:e.cwd();if("string"!=typeof a)throw new TypeError("Arguments to path.resolve must be strings");a&&(n=a+"/"+n,i="/"===a.charAt(0))}return n=t(r(n.split("/"),function(e){return!!e}),!i).join("/"),(i?"/":"")+n||"."},n.normalize=function(e){var i=n.isAbsolute(e),o="/"===a(e,-1);return e=t(r(e.split("/"),function(e){return!!e}),!i).join("/"),e||i||(e="."),e&&o&&(e+="/"),(i?"/":"")+e},n.isAbsolute=function(e){return"/"===e.charAt(0)},n.join=function(){var e=Array.prototype.slice.call(arguments,0);return n.normalize(r(e,function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e}).join("/"))},n.relative=function(e,t){function r(e){for(var t=0;t<e.length&&""===e[t];t++);for(var n=e.length-1;n>=0&&""===e[n];n--);return t>n?[]:e.slice(t,n-t+1)}e=n.resolve(e).substr(1),t=n.resolve(t).substr(1);for(var i=r(e.split("/")),o=r(t.split("/")),a=Math.min(i.length,o.length),s=a,u=0;a>u;u++)if(i[u]!==o[u]){s=u;break}for(var l=[],u=s;u<i.length;u++)l.push("..");return l=l.concat(o.slice(s)),l.join("/")},n.sep="/",n.delimiter=":",n.dirname=function(e){var t=o(e),n=t[0],r=t[1];return n||r?(r&&(r=r.substr(0,r.length-1)),n+r):"."},n.basename=function(e,t){var n=o(e)[2];return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},n.extname=function(e){return o(e)[3]};var a="b"==="ab".substr(-1)?function(e,t,n){return e.substr(t,n)}:function(e,t,n){return 0>t&&(t=e.length+t),e.substr(t,n)}}).call(this,e("+xKvab"))},{"+xKvab":2}],2:[function(e,t,n){function r(){}var i=t.exports={};i.nextTick=function(){var e="undefined"!=typeof window&&window.setImmediate,t="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(e)return function(e){return window.setImmediate(e)};if(t){var n=[];return window.addEventListener("message",function(e){var t=e.source;if((t===window||null===t)&&"process-tick"===e.data&&(e.stopPropagation(),n.length>0)){var r=n.shift();r()}},!0),function(e){n.push(e),window.postMessage("process-tick","*")}}return function(e){setTimeout(e,0)}}(),i.title="browser",i.browser=!0,i.env={},i.argv=[],i.on=r,i.addListener=r,i.once=r,i.off=r,i.removeListener=r,i.removeAllListeners=r,i.emit=r,i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")}},{}],3:[function(e,t,n){t.exports=e("path")},{path:1}]},{},[3])(3)}),!function(e){if("object"==typeof exports)module.exports=e();else if("function"==typeof define&&define.amd)define("util",e);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.util=e()}}(function(){return function e(t,n,r){function i(a,s){if(!n[a]){if(!t[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(o)return o(a,!0);throw new Error("Cannot find module '"+a+"'")}var l=n[a]={exports:{}};t[a][0].call(l.exports,function(e){var n=t[a][1][e];return i(n?n:e)},l,l.exports,e,t,n,r)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(e,t,n){"function"==typeof Object.create?t.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},{}],2:[function(e,t,n){function r(){}var i=t.exports={};i.nextTick=function(){var e="undefined"!=typeof window&&window.setImmediate,t="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(e)return function(e){return window.setImmediate(e)};if(t){var n=[];return window.addEventListener("message",function(e){var t=e.source;if((t===window||null===t)&&"process-tick"===e.data&&(e.stopPropagation(),n.length>0)){var r=n.shift();r()}},!0),function(e){n.push(e),window.postMessage("process-tick","*")}}return function(e){setTimeout(e,0)}}(),i.title="browser",i.browser=!0,i.env={},i.argv=[],i.on=r,i.addListener=r,i.once=r,i.off=r,i.removeListener=r,i.removeAllListeners=r,i.emit=r,i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")}},{}],3:[function(e,t,n){t.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},{}],4:[function(e,t,n){(function(t,r){function i(e,t){var r={seen:[],stylize:a};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),m(t)?r.showHidden=t:t&&n._extend(r,t),w(r.showHidden)&&(r.showHidden=!1),w(r.depth)&&(r.depth=2),w(r.colors)&&(r.colors=!1),w(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=o),u(r,e,r.depth)}function o(e,t){var n=i.styles[t];return n?"["+i.colors[n][0]+"m"+e+"["+i.colors[n][1]+"m":e}function a(e,t){return e}function s(e){var t={};return e.forEach(function(e,n){t[e]=!0}),t}function u(e,t,r){if(e.customInspect&&t&&P(t.inspect)&&t.inspect!==n.inspect&&(!t.constructor||t.constructor.prototype!==t)){var i=t.inspect(r,e);return b(i)||(i=u(e,i,r)),i}var o=l(e,t);if(o)return o;var a=Object.keys(t),m=s(a);if(e.showHidden&&(a=Object.getOwnPropertyNames(t)),k(t)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return c(t);if(0===a.length){if(P(t)){var g=t.name?": "+t.name:"";return e.stylize("[Function"+g+"]","special")}if(x(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(C(t))return e.stylize(Date.prototype.toString.call(t),"date");if(k(t))return c(t)}var v="",y=!1,_=["{","}"];if(d(t)&&(y=!0,_=["[","]"]),P(t)){var w=t.name?": "+t.name:"";v=" [Function"+w+"]"}if(x(t)&&(v=" "+RegExp.prototype.toString.call(t)),C(t)&&(v=" "+Date.prototype.toUTCString.call(t)),k(t)&&(v=" "+c(t)),0===a.length&&(!y||0==t.length))return _[0]+v+_[1];if(0>r)return x(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special");e.seen.push(t);var S;return S=y?h(e,t,r,m,a):a.map(function(n){return f(e,t,r,m,n,y)}),e.seen.pop(),p(S,v,_)}function l(e,t){if(w(t))return e.stylize("undefined","undefined");if(b(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}return y(t)?e.stylize(""+t,"number"):m(t)?e.stylize(""+t,"boolean"):g(t)?e.stylize("null","null"):void 0}function c(e){return"["+Error.prototype.toString.call(e)+"]"}function h(e,t,n,r,i){for(var o=[],a=0,s=t.length;s>a;++a)E(t,String(a))?o.push(f(e,t,n,r,String(a),!0)):o.push("");return i.forEach(function(i){i.match(/^\d+$/)||o.push(f(e,t,n,r,i,!0))}),o}function f(e,t,n,r,i,o){var a,s,l;if(l=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]},l.get?s=l.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):l.set&&(s=e.stylize("[Setter]","special")),E(r,i)||(a="["+i+"]"),s||(e.seen.indexOf(l.value)<0?(s=g(n)?u(e,l.value,null):u(e,l.value,n-1),s.indexOf("\n")>-1&&(s=o?s.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+s.split("\n").map(function(e){return"   "+e}).join("\n"))):s=e.stylize("[Circular]","special")),w(a)){if(o&&i.match(/^\d+$/))return s;a=JSON.stringify(""+i),a.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=e.stylize(a,"string"))}return a+": "+s}function p(e,t,n){var r=0,i=e.reduce(function(e,t){return r++,t.indexOf("\n")>=0&&r++,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0);return i>60?n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1]:n[0]+t+" "+e.join(", ")+" "+n[1]}function d(e){return Array.isArray(e)}function m(e){return"boolean"==typeof e}function g(e){return null===e}function v(e){return null==e}function y(e){return"number"==typeof e}function b(e){return"string"==typeof e}function _(e){return"symbol"==typeof e}function w(e){return void 0===e}function x(e){return S(e)&&"[object RegExp]"===T(e)}function S(e){return"object"==typeof e&&null!==e}function C(e){return S(e)&&"[object Date]"===T(e)}function k(e){return S(e)&&("[object Error]"===T(e)||e instanceof Error)}function P(e){return"function"==typeof e}function M(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||"undefined"==typeof e}function T(e){return Object.prototype.toString.call(e)}function A(e){return 10>e?"0"+e.toString(10):e.toString(10)}function O(){var e=new Date,t=[A(e.getHours()),A(e.getMinutes()),A(e.getSeconds())].join(":");return[e.getDate(),D[e.getMonth()],t].join(" ")}function E(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var $=/%[sdj%]/g;n.format=function(e){if(!b(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(i(arguments[n]));return t.join(" ")}for(var n=1,r=arguments,o=r.length,a=String(e).replace($,function(e){if("%%"===e)return"%";if(n>=o)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(t){return"[Circular]"}default:return e}}),s=r[n];o>n;s=r[++n])a+=g(s)||!S(s)?" "+s:" "+i(s);return a},n.deprecate=function(e,i){function o(){if(!a){if(t.throwDeprecation)throw new Error(i);t.traceDeprecation?console.trace(i):console.error(i),a=!0}return e.apply(this,arguments)}if(w(r.process))return function(){return n.deprecate(e,i).apply(this,arguments)};if(t.noDeprecation===!0)return e;var a=!1;return o};var N,I={};n.debuglog=function(e){if(w(N)&&(N=t.env.NODE_DEBUG||""),e=e.toUpperCase(),!I[e])if(new RegExp("\\b"+e+"\\b","i").test(N)){var r=t.pid;I[e]=function(){var t=n.format.apply(n,arguments);console.error("%s %d: %s",e,r,t)}}else I[e]=function(){};return I[e]},n.inspect=i,i.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},i.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"},n.isArray=d,n.isBoolean=m,n.isNull=g,n.isNullOrUndefined=v,n.isNumber=y,n.isString=b,n.isSymbol=_,n.isUndefined=w,n.isRegExp=x,n.isObject=S,n.isDate=C,n.isError=k,n.isFunction=P,n.isPrimitive=M,n.isBuffer=e("./support/isBuffer");var D=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];n.log=function(){console.log("%s - %s",O(),n.format.apply(n,arguments))},n.inherits=e("inherits"),n._extend=function(e,t){if(!t||!S(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e}}).call(this,e("+xKvab"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"+xKvab":2,"./support/isBuffer":3,inherits:1}],5:[function(e,t,n){t.exports=e("util")},{util:4}]},{},[5])(5)}),define("util-logging/level",["require","exports","module","util"],function(e,t,n){var r=e("util"),i=function(e){var t=this;(t.super_=i.super_).call(t);var e=e||{};return void 0==e.name||void 0===e.value?(t._name="INFO",t._value=4,t):(t._name=e.name,t._value=e.value,t)};r.inherits(i,Object),i.OFF=new i({name:"OFF",value:7}),i.prototype.OFF=i.OFF,i.SEVERE=new i({name:"SEVERE",value:6}),i.prototype.SEVERE=i.SEVERE,i.WARNING=new i({name:"WARNING",value:5}),i.prototype.WARNING=i.WARNING,i.INFO=new i({name:"INFO",value:4}),i.prototype.INFO=i.INFO,i.CONFIG=new i({name:"CONFIG",value:3}),i.prototype.CONFIG=i.CONFIG,i.DEBUG=new i({name:"DEBUG",value:3}),i.prototype.DEBUG=i.DEBUG,i.FINE=new i({name:"FINE",value:2}),i.prototype.FINE=i.FINE,i.FINER=new i({name:"FINER",value:1}),i.prototype.FINER=i.FINER,i.FINEST=new i({name:"FINEST",value:0}),i.prototype.FINEST=i.FINEST,i.ALL=new i({name:"ALL",value:0}),i.prototype.ALL=i.ALL,i.prototype.intValue=function(){return this._value},i.prototype.getName=function(){return this._name},i.prototype.equals=function(e){return e instanceof i?this.intValue()==e.intValue():!1},i.prototype.compare=function(e){if(e instanceof i){var t=this.intValue(),n=e.intValue();return t==n?0:t>n?1:n>t?-1:void 0}},i.prototype.toString=function(){return this.getName()},i.isValid=function(e){return e&&e instanceof i?e.intValue()>=i.ALL.intValue()||e.intValue()<=i.OFF.intValue():!1},i.prototype.isValid=function(){return i.isValid(this)},n.exports=i}),define("util-logging/logrecord",["require","exports","module","./level","util"],function(e,t,n){"use strict";var r=e("./level"),i=e("util"),o=function(e){var t=this;return(t.super_=o.super_).call(t),e=e||{},t._sourceStack=e._sourceStack||null,t._level=e.level||r.INFO,t._message=e.message||null,t._millis=e.millis||(new Date).getTime(),t._loggerName=e.loggerName||null,t._parameters=e.parameters||null,t._thrown=e.thrown||null,t._sourceMethodName=e._sourceMethodName||null,t._sourceFileName=e._sourceFileName||null,t};i.inherits(o,Object),o.prototype.setLevel=function(e){return this._level=e,this},o.prototype.getLevel=function(){return this._level},o.prototype.setMessage=function(e){return this._message=e,this},o.prototype.getMessage=function(){return this._message},o.prototype.setMillis=function(e){this._millis=e},o.prototype.getMillis=function(){return this._millis},o.prototype.setLoggerName=function(e){return this._loggerName=e,this},o.prototype.getLoggerName=function(){return this._loggerName},o.prototype.setParameters=function(e){return this._parameters=e,this},o.prototype.getParameters=function(){return this._parameters},o.prototype.setThrown=function(e){return i.isError(e)?(this._thrown=e,this):this},o.prototype.getThrown=function(){return this._thrown},o.prototype.setSourceMethodName=function(e){return this._sourceMethodName=e,this},o.prototype.getSourceMethodName=function(){return this._sourceMethodName},o.prototype.setSourceFileName=function(e){return this._sourceFileName=e,this},o.prototype.getSourceFileName=function(){return this._sourceFileName},o.prototype.setSourceStackFrame=function(e){this._sourceStack=e},o.prototype.getSourceStackFrame=function(){return this._sourceStack},n.exports=o}),define("util-logging/handler",["require","exports","module","./level","./logrecord","util"],function(e,t,n){"use strict";var r=e("./level"),i=e("./logrecord"),o=e("util"),a=function(){var e=this;return(e.super_=a.super_).call(e),e._level=r.FINEST,e._formatter=void 0,e._logRecords=[],e};o.inherits(a,Object),a.prototype.setLevel=function(e){return r.isValid(e)?(this._level=e,this):this},a.prototype.getLevel=function(){return this._level},a.prototype.isLoggable=function(e){if(!(e&&e instanceof i))return!1;var t=e.getLevel();return r.isValid(t)&&t.intValue()>=this.getLevel().intValue()},a.prototype.publish=function(e){return this.isLoggable(e)?(this._logRecords.push(e),
this):this},a.prototype.flush=function(){return this._logRecords=[],this},a.prototype.setFormatter=function(e){return this._formatter=e,this},a.prototype.getFormatter=function(){return this._formatter},n.exports=a}),define("util-logging/logger",["require","exports","module","path","util","./level","./handler","./logrecord"],function(e,t,n){"use strict";var r=(e("path"),e("util")),i=e("./level"),o=e("./handler"),a=e("./logrecord"),s=function(e){var t=this;(t.super_=s.super_).call(t);var e=e||{};return this._level=i.isValid(e.level)?e.level:i.SEVERE,this._name=e.name,this._handlers=[],this};r.inherits(s,Object);var u=function(e){var t=Error.prepareStackTrace;try{var n,r=new Error;Error.prepareStackTrace=function(e,t){return t};for(var i=r.stack.shift(),o=i.getFileName();r.stack.length;){var a=r.stack.shift();if(n=a.getFileName(),o!==n){var s=a.toString();return e.setSourceFileName(a.getFileName()),e.setSourceMethodName(a.getMethodName()),e.setSourceStackFrame(a),s}}}catch(r){}finally{Error.prepareStackTrace=t}};s.prototype.setLevel=function(e){return i.isValid(e)?(this._level=e,this):this},s.prototype.getLevel=function(){return this._level},s.prototype.setName=function(e){return e?(this._name=e,this):this},s.prototype.getName=function(){return this._name},s.prototype.addHandler=function(e){return e&&e instanceof o?(this._handlers.push(e),this):this},s.prototype.removeHandler=function(e){if(!(e&&e instanceof o))return this;var t=this._handlers.indexOf(e);return 0>t?this:(this._handlers.splice(t,1),this)},s.prototype.getHandlers=function(){return this._handlers},s.prototype.log=function(){},s.prototype.log=function(){},s.prototype.log=function(){},s.prototype.log=function(){},s.prototype.log=function(){var e=Array.prototype.splice.call(arguments,0);if(e.length<2)return this;var t,n=e.shift(),o=e.shift(),s=[];if(r.isError(o)&&0==e.length?(t=o,o=""):1==e.length&&r.isError(e[0])?t=e[0]:s=1==e.length&&e[0]instanceof Array?e[0]:e,!i.isValid(n)||void 0===o)return this;var l=this.getHandlers();if(n<this.getLevel())return this;var c=new a;return c.setLevel(n),c.setLoggerName(this.getName()),c.setMessage(o),c.setMillis((new Date).getTime()),c.setParameters(s),c.setThrown(t),u(c),l.forEach(function(e){e.publish(c)}),this},s.prototype._log=function(e,t){return t=Array.prototype.splice.call(t,0),t.unshift(e),this.log.apply(this,t),this},s.prototype.severe=function(){},s.prototype.severe=function(){},s.prototype.severe=function(){},s.prototype.severe=function(){return this._log(i.SEVERE,arguments)},s.prototype.warning=function(){},s.prototype.warning=function(){},s.prototype.warning=function(){},s.prototype.warning=function(){return this._log(i.WARNING,arguments)},s.prototype.config=function(){},s.prototype.config=function(){},s.prototype.config=function(){},s.prototype.config=function(){return this._log(i.CONFIG,arguments)},s.prototype.info=function(){},s.prototype.info=function(){},s.prototype.info=function(){},s.prototype.info=function(){return this._log(i.INFO,arguments)},s.prototype.debug=function(){},s.prototype.debug=function(){},s.prototype.debug=function(){},s.prototype.debug=function(){return this._log(i.DEBUG,arguments)},s.prototype.fine=function(){},s.prototype.fine=function(){},s.prototype.fine=function(){},s.prototype.fine=function(){return this._log(i.FINE,arguments)},s.prototype.finer=function(){},s.prototype.finer=function(){},s.prototype.finer=function(){},s.prototype.finer=function(){return this._log(i.FINER,arguments)},s.prototype.finest=function(){},s.prototype.finest=function(){},s.prototype.finest=function(){},s.prototype.finest=function(){return this._log(i.FINEST,arguments)},n.exports=s}),define("Atem-Logging/Logger",["util-logging/logger"],function(e){"use strict";function t(t){e.call(this,t)}var n=t.prototype=Object.create(e.prototype);return n.relog=function(e){return this.getHandlers().forEach(function(t){e.getLevel().intValue()>=this.getLevel().intValue()&&t.publish(e)},this),this},t}),define("Atem-Logging/Level",["util-logging/level"],function(e){return e}),define("metapolator/ui/metapolator/master-panel/import/ImportProcess",["Atem-Logging/Logger","Atem-Logging/Level"],function(e,t){"use strict";function n(n,r,i,o,a){this._project=n,this._baseMasterPrefix=i,this._resolve=null,this._reject=null,this._onMasterReady=o,this._promise=new Promise(function(e,t){this._resolve=e,this._reject=t}.bind(this)),this._io=null,this._current=null,this._items=[],this._log=(new e).setLevel(t.DEBUG),this._log.addHandler(a),this.initialized=n.unpackImportBlob(r,i).then(function(e){this._io=e[0],this._items=e[1]}.bind(this),this._initFailed.bind(this))}var r=n.prototype;return Object.defineProperties(r,{itemsLength:{get:function(){return this._items.length}},current:{get:function(){return this._current?{name:this._current.name,file:this._current.file,i:this._current.state&&this._current.state.i,total:this._current.state&&this._current.state.total}:void 0}}}),r.after=function(){var e,t,n=[];for(e=0,t=arguments.length;t>e;e++)n.push(arguments[e]);return this._promise.then.apply(this._promise,n)},r.end=function(){this._io=null,this._resolve(this)},r.next=function(e){var t,n,r,i,o,a,s;if(this._current){if(o=this._current.gen.next(e),!o.done)return this._current.state=o.value,this.current;o.value!==!1&&(a=o.value,this._project.initializeImportedMaster(a,this._current.name),this._onMasterReady&&this._onMasterReady(a)),this._current=null}return(t=this._items.shift())?(n=t[0],r=t[1],i=void 0,this._log.info("# File: "+n),s=this._project.ufoImporterFactory(!1,n,this._io,this._log),s&&(this._current={file:t[0],name:t[1],importer:s,gen:s.importGenerator(!1,i)}),this.next()):void this.end()},r._initFailed=function(e){this._log.warning("ImportProcess init failed with "+e,e),this.end()},r.cancelScheduled=function(e){var t,n;for(t=0,n=this._items.length;n>t;t++)if(this._items[t][0]===e){this._items.splice(t,1);break}},r.getItem=function(e){var t=this._items[e];if(t)return{file:t[0],name:t[1]}},n}),define("util-logging/formatter",["require","exports","module","util","./logrecord","path"],function(e,t,n){"use strict";var r=e("util"),i=e("./logrecord"),o=e("path"),a=function(){var e=this;return(e.super_=a.super_).call(e),e};r.inherits(a,Object),a.prototype.formatMessage=function(e){if(e&&e instanceof i){var t=e.getMessage()||"";r.isError(t)&&(t=t.message||t.toString()),"string"!=typeof t&&(t="\n"+JSON.stringify(t,null,2));var n=e.getMillis(),a=new Date;n&&"number"==typeof n&&a.setTime(n);var s=e.getLevel(),u=s?s.getName():void 0,l=e.getLoggerName(),c=a.toISOString()+" - ["+u+"] ";u&&"string"==typeof l&&(c=c+"["+l+"] ");var h=e.getSourceStackFrame();if(h){var f=h.getFileName(),p=o.basename(f),d=h.toString();d=d.replace(f,p),c=c+"["+d+"] "}var m=e.getParameters();m&&m instanceof Array&&(m.unshift(t),t=r.format.apply(this,m),m.shift()),t=c+t;var g=e.getThrown();return g&&r.isError(g)&&(g.message&&(t+=g.message),g.stack&&(t+="\n"+g.stack)),t}},n.exports=a}),define("Atem-Logging/CallbackHandler",["util","util-logging/level","util-logging/handler","util-logging/formatter"],function(e,t,n,r){"use strict";var i=function(e){var t=this;return(t.super_=i.super_).call(t),t._defaultFormatter=new r,t._callback=e,t};return e.inherits(i,n),i.prototype.getDefaultFormatter=function(){return this._defaultFormatter},i.prototype.publish=function(e){if(this.isLoggable(e)){var t=this.getFormatter();t&&t instanceof r||(t=this.getDefaultFormatter());var n=t.formatMessage(e);n&&"string"==typeof n&&this._callback(n)}},i}),define("Atem-Logging/Formatter",["util-logging/formatter"],function(e){return e}),define("Atem-Logging/LogRecord",["util-logging/logrecord"],function(e){return e}),function(){function e(e){this.tokens=[],this.tokens.links={},this.options=e||l.defaults,this.rules=c.normal,this.options.gfm&&(this.options.tables?this.rules=c.tables:this.rules=c.gfm)}function t(e,t){if(this.options=t||l.defaults,this.links=e,this.rules=h.normal,this.renderer=this.options.renderer||new n,this.renderer.options=this.options,!this.links)throw new Error("Tokens array requires a `links` property.");this.options.gfm?this.options.breaks?this.rules=h.breaks:this.rules=h.gfm:this.options.pedantic&&(this.rules=h.pedantic)}function n(e){this.options=e||{}}function r(e){this.tokens=[],this.token=null,this.options=e||l.defaults,this.options.renderer=this.options.renderer||new n,this.renderer=this.options.renderer,this.renderer.options=this.options}function i(e,t){return e.replace(t?/&/g:/&(?!#?\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function o(e){return e.replace(/&([#\w]+);/g,function(e,t){return t=t.toLowerCase(),"colon"===t?":":"#"===t.charAt(0)?"x"===t.charAt(1)?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):""})}function a(e,t){return e=e.source,t=t||"",function n(r,i){return r?(i=i.source||i,i=i.replace(/(^|[^\[])\^/g,"$1"),e=e.replace(r,i),n):new RegExp(e,t)}}function s(){}function u(e){for(var t,n,r=1;r<arguments.length;r++){t=arguments[r];for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}function l(t,n,o){if(o||"function"==typeof n){o||(o=n,n=null),n=u({},l.defaults,n||{});var a,s,c=n.highlight,h=0;try{a=e.lex(t,n)}catch(f){return o(f)}s=a.length;var p=function(e){if(e)return n.highlight=c,o(e);var t;try{t=r.parse(a,n)}catch(i){e=i}return n.highlight=c,e?o(e):o(null,t)};if(!c||c.length<3)return p();if(delete n.highlight,!s)return p();for(;h<a.length;h++)!function(e){return"code"!==e.type?--s||p():c(e.text,e.lang,function(t,n){return t?p(t):null==n||n===e.text?--s||p():(e.text=n,e.escaped=!0,void(--s||p()))})}(a[h])}else try{return n&&(n=u({},l.defaults,n)),r.parse(e.lex(t,n),n)}catch(f){if(f.message+="\nPlease report this to https://github.com/chjj/marked.",(n||l.defaults).silent)return"<p>An error occured:</p><pre>"+i(f.message+"",!0)+"</pre>";throw f}}var c={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,fences:s,hr:/^( *[-*_]){3,} *(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *#* *(?:\n+|$)/,nptable:s,lheading:/^([^\n]+)\n *(=|-){2,} *(?:\n+|$)/,blockquote:/^( *>[^\n]+(\n(?!def)[^\n]+)*\n*)+/,list:/^( *)(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,html:/^ *(?:comment *(?:\n|\s*$)|closed *(?:\n{2,}|\s*$)|closing *(?:\n{2,}|\s*$))/,def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +["(]([^\n]+)[")])? *(?:\n+|$)/,table:s,paragraph:/^((?:[^\n]+\n?(?!hr|heading|lheading|blockquote|tag|def))+)\n*/,text:/^[^\n]+/};c.bullet=/(?:[*+-]|\d+\.)/,c.item=/^( *)(bull) [^\n]*(?:\n(?!\1bull )[^\n]*)*/,c.item=a(c.item,"gm")(/bull/g,c.bullet)(),c.list=a(c.list)(/bull/g,c.bullet)("hr","\\n+(?=\\1?(?:[-*_] *){3,}(?:\\n+|$))")("def","\\n+(?="+c.def.source+")")(),c.blockquote=a(c.blockquote)("def",c.def)(),c._tag="(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:/|[^\\w\\s@]*@)\\b",c.html=a(c.html)("comment",/<!--[\s\S]*?-->/)("closed",/<(tag)[\s\S]+?<\/\1>/)("closing",/<tag(?:"[^"]*"|'[^']*'|[^'">])*?>/)(/tag/g,c._tag)(),c.paragraph=a(c.paragraph)("hr",c.hr)("heading",c.heading)("lheading",c.lheading)("blockquote",c.blockquote)("tag","<"+c._tag)("def",c.def)(),c.normal=u({},c),c.gfm=u({},c.normal,{fences:/^ *(`{3,}|~{3,})[ \.]*(\S+)? *\n([\s\S]*?)\s*\1 *(?:\n+|$)/,paragraph:/^/,heading:/^ *(#{1,6}) +([^\n]+?) *#* *(?:\n+|$)/}),c.gfm.paragraph=a(c.paragraph)("(?!","(?!"+c.gfm.fences.source.replace("\\1","\\2")+"|"+c.list.source.replace("\\1","\\3")+"|")(),c.tables=u({},c.gfm,{nptable:/^ *(\S.*\|.*)\n *([-:]+ *\|[-| :]*)\n((?:.*\|.*(?:\n|$))*)\n*/,table:/^ *\|(.+)\n *\|( *[-:]+[-| :]*)\n((?: *\|.*(?:\n|$))*)\n*/}),e.rules=c,e.lex=function(t,n){var r=new e(n);return r.lex(t)},e.prototype.lex=function(e){return e=e.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    ").replace(/\u00a0/g," ").replace(/\u2424/g,"\n"),this.token(e,!0)},e.prototype.token=function(e,t,n){for(var r,i,o,a,s,u,l,h,f,e=e.replace(/^ +$/gm,"");e;)if((o=this.rules.newline.exec(e))&&(e=e.substring(o[0].length),o[0].length>1&&this.tokens.push({type:"space"})),o=this.rules.code.exec(e))e=e.substring(o[0].length),o=o[0].replace(/^ {4}/gm,""),this.tokens.push({type:"code",text:this.options.pedantic?o:o.replace(/\n+$/,"")});else if(o=this.rules.fences.exec(e))e=e.substring(o[0].length),this.tokens.push({type:"code",lang:o[2],text:o[3]||""});else if(o=this.rules.heading.exec(e))e=e.substring(o[0].length),this.tokens.push({type:"heading",depth:o[1].length,text:o[2]});else if(t&&(o=this.rules.nptable.exec(e))){for(e=e.substring(o[0].length),u={type:"table",header:o[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:o[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:o[3].replace(/\n$/,"").split("\n")},h=0;h<u.align.length;h++)/^ *-+: *$/.test(u.align[h])?u.align[h]="right":/^ *:-+: *$/.test(u.align[h])?u.align[h]="center":/^ *:-+ *$/.test(u.align[h])?u.align[h]="left":u.align[h]=null;for(h=0;h<u.cells.length;h++)u.cells[h]=u.cells[h].split(/ *\| */);this.tokens.push(u)}else if(o=this.rules.lheading.exec(e))e=e.substring(o[0].length),this.tokens.push({type:"heading",depth:"="===o[2]?1:2,text:o[1]});else if(o=this.rules.hr.exec(e))e=e.substring(o[0].length),this.tokens.push({type:"hr"});else if(o=this.rules.blockquote.exec(e))e=e.substring(o[0].length),this.tokens.push({type:"blockquote_start"}),o=o[0].replace(/^ *> ?/gm,""),this.token(o,t,!0),this.tokens.push({type:"blockquote_end"});else if(o=this.rules.list.exec(e)){for(e=e.substring(o[0].length),a=o[2],this.tokens.push({type:"list_start",ordered:a.length>1}),o=o[0].match(this.rules.item),r=!1,f=o.length,h=0;f>h;h++)u=o[h],l=u.length,u=u.replace(/^ *([*+-]|\d+\.) +/,""),~u.indexOf("\n ")&&(l-=u.length,u=this.options.pedantic?u.replace(/^ {1,4}/gm,""):u.replace(new RegExp("^ {1,"+l+"}","gm"),"")),this.options.smartLists&&h!==f-1&&(s=c.bullet.exec(o[h+1])[0],a===s||a.length>1&&s.length>1||(e=o.slice(h+1).join("\n")+e,h=f-1)),i=r||/\n\n(?!\s*$)/.test(u),h!==f-1&&(r="\n"===u.charAt(u.length-1),i||(i=r)),this.tokens.push({type:i?"loose_item_start":"list_item_start"}),this.token(u,!1,n),this.tokens.push({type:"list_item_end"});this.tokens.push({type:"list_end"})}else if(o=this.rules.html.exec(e))e=e.substring(o[0].length),this.tokens.push({type:this.options.sanitize?"paragraph":"html",pre:!this.options.sanitizer&&("pre"===o[1]||"script"===o[1]||"style"===o[1]),text:o[0]});else if(!n&&t&&(o=this.rules.def.exec(e)))e=e.substring(o[0].length),this.tokens.links[o[1].toLowerCase()]={href:o[2],title:o[3]};else if(t&&(o=this.rules.table.exec(e))){for(e=e.substring(o[0].length),u={type:"table",header:o[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:o[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:o[3].replace(/(?: *\| *)?\n$/,"").split("\n")},h=0;h<u.align.length;h++)/^ *-+: *$/.test(u.align[h])?u.align[h]="right":/^ *:-+: *$/.test(u.align[h])?u.align[h]="center":/^ *:-+ *$/.test(u.align[h])?u.align[h]="left":u.align[h]=null;for(h=0;h<u.cells.length;h++)u.cells[h]=u.cells[h].replace(/^ *\| *| *\| *$/g,"").split(/ *\| */);this.tokens.push(u)}else if(t&&(o=this.rules.paragraph.exec(e)))e=e.substring(o[0].length),this.tokens.push({type:"paragraph",text:"\n"===o[1].charAt(o[1].length-1)?o[1].slice(0,-1):o[1]});else if(o=this.rules.text.exec(e))e=e.substring(o[0].length),this.tokens.push({type:"text",text:o[0]});else if(e)throw new Error("Infinite loop on byte: "+e.charCodeAt(0));return this.tokens};var h={escape:/^\\([\\`*{}\[\]()#+\-.!_>])/,autolink:/^<([^ >]+(@|:\/)[^ >]+)>/,url:s,tag:/^<!--[\s\S]*?-->|^<\/?\w+(?:"[^"]*"|'[^']*'|[^'">])*?>/,link:/^!?\[(inside)\]\(href\)/,reflink:/^!?\[(inside)\]\s*\[([^\]]*)\]/,nolink:/^!?\[((?:\[[^\]]*\]|[^\[\]])*)\]/,strong:/^__([\s\S]+?)__(?!_)|^\*\*([\s\S]+?)\*\*(?!\*)/,em:/^\b_((?:[^_]|__)+?)_\b|^\*((?:\*\*|[\s\S])+?)\*(?!\*)/,code:/^(`+)\s*([\s\S]*?[^`])\s*\1(?!`)/,br:/^ {2,}\n(?!\s*$)/,del:s,text:/^[\s\S]+?(?=[\\<!\[_*`]| {2,}\n|$)/};h._inside=/(?:\[[^\]]*\]|[^\[\]]|\](?=[^\[]*\]))*/,h._href=/\s*<?([\s\S]*?)>?(?:\s+['"]([\s\S]*?)['"])?\s*/,h.link=a(h.link)("inside",h._inside)("href",h._href)(),h.reflink=a(h.reflink)("inside",h._inside)(),h.normal=u({},h),h.pedantic=u({},h.normal,{strong:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/}),h.gfm=u({},h.normal,{escape:a(h.escape)("])","~|])")(),url:/^(https?:\/\/[^\s<]+[^<.,:;"')\]\s])/,del:/^~~(?=\S)([\s\S]*?\S)~~/,text:a(h.text)("]|","~]|")("|","|https?://|")()}),h.breaks=u({},h.gfm,{br:a(h.br)("{2,}","*")(),text:a(h.gfm.text)("{2,}","*")()}),t.rules=h,t.output=function(e,n,r){var i=new t(n,r);return i.output(e)},t.prototype.output=function(e){for(var t,n,r,o,a="";e;)if(o=this.rules.escape.exec(e))e=e.substring(o[0].length),a+=o[1];else if(o=this.rules.autolink.exec(e))e=e.substring(o[0].length),"@"===o[2]?(n=":"===o[1].charAt(6)?this.mangle(o[1].substring(7)):this.mangle(o[1]),r=this.mangle("mailto:")+n):(n=i(o[1]),r=n),a+=this.renderer.link(r,null,n);else if(this.inLink||!(o=this.rules.url.exec(e))){if(o=this.rules.tag.exec(e))!this.inLink&&/^<a /i.test(o[0])?this.inLink=!0:this.inLink&&/^<\/a>/i.test(o[0])&&(this.inLink=!1),e=e.substring(o[0].length),a+=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(o[0]):i(o[0]):o[0];else if(o=this.rules.link.exec(e))e=e.substring(o[0].length),this.inLink=!0,a+=this.outputLink(o,{href:o[2],title:o[3]}),this.inLink=!1;else if((o=this.rules.reflink.exec(e))||(o=this.rules.nolink.exec(e))){if(e=e.substring(o[0].length),t=(o[2]||o[1]).replace(/\s+/g," "),t=this.links[t.toLowerCase()],!t||!t.href){a+=o[0].charAt(0),e=o[0].substring(1)+e;continue}this.inLink=!0,a+=this.outputLink(o,t),this.inLink=!1}else if(o=this.rules.strong.exec(e))e=e.substring(o[0].length),a+=this.renderer.strong(this.output(o[2]||o[1]));else if(o=this.rules.em.exec(e))e=e.substring(o[0].length),a+=this.renderer.em(this.output(o[2]||o[1]));else if(o=this.rules.code.exec(e))e=e.substring(o[0].length),a+=this.renderer.codespan(i(o[2],!0));else if(o=this.rules.br.exec(e))e=e.substring(o[0].length),a+=this.renderer.br();else if(o=this.rules.del.exec(e))e=e.substring(o[0].length),a+=this.renderer.del(this.output(o[1]));else if(o=this.rules.text.exec(e))e=e.substring(o[0].length),a+=this.renderer.text(i(this.smartypants(o[0])));else if(e)throw new Error("Infinite loop on byte: "+e.charCodeAt(0))}else e=e.substring(o[0].length),n=i(o[1]),r=n,a+=this.renderer.link(r,null,n);return a},t.prototype.outputLink=function(e,t){var n=i(t.href),r=t.title?i(t.title):null;return"!"!==e[0].charAt(0)?this.renderer.link(n,r,this.output(e[1])):this.renderer.image(n,r,i(e[1]))},t.prototype.smartypants=function(e){return this.options.smartypants?e.replace(/---/g,"â").replace(/--/g,"â").replace(/(^|[-\u2014\/(\[{"\s])'/g,"$1â").replace(/'/g,"â").replace(/(^|[-\u2014\/(\[{\u2018\s])"/g,"$1â").replace(/"/g,"â").replace(/\.{3}/g,"â¦"):e},t.prototype.mangle=function(e){if(!this.options.mangle)return e;for(var t,n="",r=e.length,i=0;r>i;i++)t=e.charCodeAt(i),Math.random()>.5&&(t="x"+t.toString(16)),n+="&#"+t+";";return n},n.prototype.code=function(e,t,n){if(this.options.highlight){var r=this.options.highlight(e,t);null!=r&&r!==e&&(n=!0,e=r)}return t?'<pre><code class="'+this.options.langPrefix+i(t,!0)+'">'+(n?e:i(e,!0))+"\n</code></pre>\n":"<pre><code>"+(n?e:i(e,!0))+"\n</code></pre>"},n.prototype.blockquote=function(e){return"<blockquote>\n"+e+"</blockquote>\n"},n.prototype.html=function(e){return e},n.prototype.heading=function(e,t,n){return"<h"+t+' id="'+this.options.headerPrefix+n.toLowerCase().replace(/[^\w]+/g,"-")+'">'+e+"</h"+t+">\n"},n.prototype.hr=function(){return this.options.xhtml?"<hr/>\n":"<hr>\n"},n.prototype.list=function(e,t){var n=t?"ol":"ul";return"<"+n+">\n"+e+"</"+n+">\n"},n.prototype.listitem=function(e){return"<li>"+e+"</li>\n"},n.prototype.paragraph=function(e){return"<p>"+e+"</p>\n"},n.prototype.table=function(e,t){return"<table>\n<thead>\n"+e+"</thead>\n<tbody>\n"+t+"</tbody>\n</table>\n"},n.prototype.tablerow=function(e){return"<tr>\n"+e+"</tr>\n"},n.prototype.tablecell=function(e,t){var n=t.header?"th":"td",r=t.align?"<"+n+' style="text-align:'+t.align+'">':"<"+n+">";return r+e+"</"+n+">\n"},n.prototype.strong=function(e){return"<strong>"+e+"</strong>"},n.prototype.em=function(e){return"<em>"+e+"</em>"},n.prototype.codespan=function(e){return"<code>"+e+"</code>"},n.prototype.br=function(){return this.options.xhtml?"<br/>":"<br>"},n.prototype.del=function(e){return"<del>"+e+"</del>"},n.prototype.link=function(e,t,n){if(this.options.sanitize){try{var r=decodeURIComponent(o(e)).replace(/[^\w:]/g,"").toLowerCase()}catch(i){return""}if(0===r.indexOf("javascript:")||0===r.indexOf("vbscript:"))return""}var a='<a href="'+e+'"';return t&&(a+=' title="'+t+'"'),a+=">"+n+"</a>"},n.prototype.image=function(e,t,n){var r='<img src="'+e+'" alt="'+n+'"';return t&&(r+=' title="'+t+'"'),r+=this.options.xhtml?"/>":">"},n.prototype.text=function(e){return e},r.parse=function(e,t,n){var i=new r(t,n);return i.parse(e)},r.prototype.parse=function(e){this.inline=new t(e.links,this.options,this.renderer),this.tokens=e.reverse();for(var n="";this.next();)n+=this.tok();return n},r.prototype.next=function(){return this.token=this.tokens.pop()},r.prototype.peek=function(){return this.tokens[this.tokens.length-1]||0},r.prototype.parseText=function(){for(var e=this.token.text;"text"===this.peek().type;)e+="\n"+this.next().text;return this.inline.output(e)},r.prototype.tok=function(){switch(this.token.type){case"space":return"";case"hr":return this.renderer.hr();case"heading":return this.renderer.heading(this.inline.output(this.token.text),this.token.depth,this.token.text);case"code":return this.renderer.code(this.token.text,this.token.lang,this.token.escaped);case"table":var e,t,n,r,i,o="",a="";for(n="",e=0;e<this.token.header.length;e++)r={header:!0,align:this.token.align[e]},n+=this.renderer.tablecell(this.inline.output(this.token.header[e]),{header:!0,align:this.token.align[e]});for(o+=this.renderer.tablerow(n),e=0;e<this.token.cells.length;e++){for(t=this.token.cells[e],n="",i=0;i<t.length;i++)n+=this.renderer.tablecell(this.inline.output(t[i]),{header:!1,align:this.token.align[i]});a+=this.renderer.tablerow(n)}return this.renderer.table(o,a);case"blockquote_start":for(var a="";"blockquote_end"!==this.next().type;)a+=this.tok();return this.renderer.blockquote(a);case"list_start":for(var a="",s=this.token.ordered;"list_end"!==this.next().type;)a+=this.tok();return this.renderer.list(a,s);case"list_item_start":for(var a="";"list_item_end"!==this.next().type;)a+="text"===this.token.type?this.parseText():this.tok();return this.renderer.listitem(a);case"loose_item_start":for(var a="";"list_item_end"!==this.next().type;)a+=this.tok();return this.renderer.listitem(a);case"html":var u=this.token.pre||this.options.pedantic?this.token.text:this.inline.output(this.token.text);return this.renderer.html(u);case"paragraph":return this.renderer.paragraph(this.inline.output(this.token.text));case"text":return this.renderer.paragraph(this.parseText())}},s.exec=s,l.options=l.setOptions=function(e){return u(l.defaults,e),l},l.defaults={gfm:!0,tables:!0,breaks:!1,pedantic:!1,sanitize:!1,sanitizer:null,mangle:!0,smartLists:!1,silent:!1,highlight:null,langPrefix:"lang-",smartypants:!1,headerPrefix:"",renderer:new n,xhtml:!1},l.Parser=r,l.parser=r.parse,l.Renderer=n,l.Lexer=e,l.lexer=e.lex,l.InlineLexer=t,l.inlineLexer=t.output,l.parse=l,"undefined"!=typeof module&&"object"==typeof exports?module.exports=l:"function"==typeof define&&define.amd?define("marked",[],function(){return l}):this.marked=l}.call(function(){return this||("undefined"!=typeof window?window:global)}()),define("metapolator/ui/metapolator/master-panel/master-panel-controller",["jquery","angular","metapolator/ui/metapolator/ui-tools/instanceTools","metapolator/ui/metapolator/ui-tools/dialog","metapolator/ui/metapolator/ui-tools/selectionTools","require/text!metapolator-cpsLib/ui-master.cps","./import/ImportProcess","Atem-Logging/Level","Atem-Logging/CallbackHandler","Atem-Logging/Formatter","Atem-Logging/LogRecord","marked"],function(e,t,n,r,i,o,a,s,u,l,c,h){"use strict";function f(f,p,d){function m(e,t,n){e.name=n.id,e.id=t,e.setMasterAndMOM(e,n),e.displayName=g(e.displayName),e.cpsFile=d.controller.getCPSName(n)}function g(e){return e+" copy"}function v(e){var t=P+e.id.slice(k.length),n=d.createDerivedMaster(!1,e.id,t,o),r=null;d.addMasterToSession(n),f.model.masterSequences[0].addMaster(n.id,n,r)}function y(e){var t=f.importProcesses.indexOf(e);if(-1!==t){f.importProcesses.splice(t,1);var n,r=window.open();r&&(r.blur(),window.focus(),n=M.get(e),M["delete"](e),n.makeReport(r.document)),f.$apply()}}function b(t){if(f.model.currentDesignSpace){var n=e(".drop-area").offset().left,r=e(".drop-area").offset().left+e(".drop-area").outerWidth(),i=e(".drop-area").offset().top,o=e(".drop-area").offset().top+e(".drop-area").outerHeight(),a=t.offset.left,s=t.offset.left+t.item.outerWidth(),u=t.offset.top,l=t.offset.top+t.item.outerHeight(),c=t.item.outerWidth()/2,h=t.item.outerHeight()/2;return a+c>n&&r>s-c&&u+h>i&&o>l-h?!0:!1}return!1}function _(e){for(var t=f.model.currentDesignSpace,n=t.axes.length-1;n>=0;n--){var r=t.axes[n];if(r===e)return!0}return!1}function w(t,n){O=!0,e(document.body).append(E),e(E).css({left:t+10,top:n+10})}function x(){e(E).remove(),O=!1}function S(t,n){e(E).css({left:t+10,top:n+10})}function C(t){t?e(E).html("+").removeClass("cursor-not-ok"):e(E).html("Ã").addClass("cursor-not-ok")}this.$scope=f,f.removeMasters=function(){if(f.model.areMastersSelected())for(var e=0,t=f.model.masterSequences.length;t>e;e++)for(var n=f.model.masterSequences[e],r=0,i=n.children.length;i>r;r++){var o=n.children[r];o.edit&&o.remove()}},f.duplicateMasters=function(){if(f.model.areMastersSelected()){for(var e=0,t=f.model.masterSequences.length;t>e;e++){for(var n,r=f.model.masterSequences[e],o=[],a=0,s=r.children.length;s>a;a++){var u=r.children[a];if(u.deselectAllChildren(),u.edit){var l=u.clone(),c=r.addToMasterId();n=d.cloneMaster(!1,u.name,"master-"+u.sequenceId+"-"+c),m(l,c,n),u.edit=!1;for(var h=0,p=l.parameters.length;p>h;h++)l.parameters[h].destackOperators();o.push(l)}}for(var g=0,v=o.length;v>g;g++)r.add(o[g])}i.updateSelection("master")}};var k="base-",P="master-";f.importProcesses=[];var M=new Map,T=function(){function e(){(this.super_=l.super_).call(this)}var t=e.prototype=Object.create(l.prototype);return t.formatMessage=function(e){var t,n,r={};if(!(e&&e instanceof c))return null;n=e.getThrown(),n?r.message=n.name+" "+n.message:r.message=e.getMessage()||"(no message)";var i=e.getLevel();i&&(r.level=i.getName());var o=e.getParameters();return o&&o instanceof Array?r.parameters=o:r.parameters=[],t="INFO"===r.level?"":"**"+r.level+"**\n","#"===r.message[0]?r.message+(t&&" ")+t+(r.parameters.length&&" "+r.parameters.join()||""):" * "+t+(t&&" ")+r.message+(r.parameters.length&&" "+r.parameters.join()||"")},e}(),A=function(e){function t(){this._logData=[],this.logHandler=new u(this._log.bind(this)),this.logHandler.setLevel(s.INFO),this.logHandler.setFormatter(new e)}var n=t.prototype;return n._log=function(e){this._logData.push(e)},n._makeReportHeader=function(e){var t=e.createElement("header");return t.innerHTML=h("# Metapolator UFO Import Report\n\nDate: "+new Date+"\n\n"),t},n._makeReportBody=function(){function e(e){for(var t="### glyph";e.length&&e[e.length-1].slice(0,t.length)===t;)e.pop()}var t,n,r=document.createElement("article"),i=[];for(t=0,n=this._logData.length;n>t;t++)"#"===this._logData[t][0]&&e(i),i.push(this._logData[t]);return e(i),r.innerHTML=h(i.join("\n")),r},n.makeReport=function(e){var t=this._makeReportHeader(e),n=this._makeReportBody(e);e.title="UFO import report | Metapolator",e.body.appendChild(t),e.body.appendChild(n)},t}(T);f.handleUFOimportFiles=function(e){var t,n,r=e.files[0];r&&(t=new FileReader,t.onload=function(e){n=new A;var t=new a(d,e.target.result,k,v,n.logHandler);M.set(t,n),f.importProcesses.push(t),t.after(y).then(null,function(e){throw alert(e),e}),f.$apply()},t.readAsArrayBuffer(r))},f.importUfo=function(){var e=p[0].ownerDocument,t=e.createElement("input");t.setAttribute("type","file"),t.setAttribute("accept","application/zip"),t.addEventListener("change",f.handleUFOimportFiles.bind(f,t),!1),t.click()},f.addMasterToDesignSpace=function(e){var t,i=f.model.currentDesignSpace,o=i.axes,a=null;if(0===o.length){a=50,i.addAxis(e),t=[{master:e,axisValue:a,metapolationValue:1}];var s=f.model.instanceSequences[0].createNewInstance(t,i,d);n.registerInstance(d,s),f.model.instanceSequences[0].addInstance(s)}else{var u,l=i.axes[0].momElement.isInterpolationCompatible(e.momElement,!0);if(!l[0])return u=h("## The masters are not compatible for metapolation:\n\n"+l[1].map(function(e){return"* "+e.replace("<","`<").replace(">",">`")}).join("\n")),void r.openDialogScreen(u,!1,!1,!0);i.addAxis(e);for(var c=f.model.instanceSequences.length-1;c>=0;c--)for(var p=f.model.instanceSequences[c],m=p.children.length-1;m>=0;m--){var g=p.children[m];g.designSpace===i&&(a=1===g.axes.length?100-g.axes[0].axisValue:0,g.addAxis(e,a,null,d),n.update(d,g))}}},f.sortableOptions={handle:".list-edit",helper:"clone",connectWith:".drop-area",sort:function(n,r){if(b(r)){e(".drop-area").addClass("drag-over"),O||w(n.pageX,n.pageY),S(n.pageX,n.pageY);var i=e(r.item).find("mtk-master"),o=t.element(i).isolateScope().model;_(o)?C(!1):(C(!0),e(".drop-area").addClass("drag-over"))}else x(),e(".drop-area").removeClass("drag-over")},update:function(e,t){},stop:function(n,r){x();var i=e(r.item).find("mtk-master"),o=t.element(i).isolateScope().model;b(r)&&!_(o)&&(f.addMasterToDesignSpace(o),f.$apply()),e(".drop-area").removeClass("drag-over")}};var O=!1,E=e('<div class="cursor-helper"></div>')[0];f.mouseoverMaster=function(t){if(t.display||t.edit){var n=e(".specimen-field-master ul li.master-"+t.name);e(".specimen-field-masters ul li").not(n).each(function(){e(this).addClass("dimmed")})}},f.mouseleaveMaster=function(){e(".specimen-field-masters ul li").removeClass("dimmed")}}return f.$inject=["$scope","$element","project"],f}),define("require/text!metapolator/ui/metapolator/master-panel/master-panel.tpl",[],function(){return'<mtk-local-menu class="localmenu">\n    <div class="lm-head" ng-mousedown="localMenuCtrl.toggleMenu(\'masters\')">\n        Masters\n    </div>\n    <div class="lm-body" ng-if="display.localMenu == \'masters\'">\n        <div class="lm-button" ng-mouseup="importUfo()">Import ufoâ¦</div>\n        <div class="lm-divider"></div>\n        <div class="lm-button" ng-mouseup="duplicateMasters()" ng-class="{\'inactive\': !model.areMastersSelected()}">Duplicate</div>\n        <div class="lm-divider"></div>\n        <div class="lm-button" ng-mouseup="removeMasters()" ng-class="{\'inactive\': !model.areMastersSelected()}">Deleteâ¦</div>\n    </div>\n</mtk-local-menu>\n\n<div class="list-container" mtk-view-rubberband="masters">\n    <ul class="ul-sequence">\n        <li class="li-sequence" ng-repeat="sequence in model.masterSequences">\n            <ul class="ul-master" ui-sortable="sortableOptions" ng-model="sequence.children">\n                <li class="li-master"\n                    ng-repeat="master in sequence.children"\n                    ng-mouseover="mouseoverMaster(master)"\n                    ng-mouseleave="mouseleaveMaster()">\n                    <mtk-master class="mtk-master"\n                                mtk-model="master"\n                                ng-class="{\'selected\': master.edit}"></mtk-master>\n                </li>\n            </ul>\n        </li>\n        <li class="masters-import"\n            ng-repeat="process in importProcesses">\n            <mtk-masters-import\n                mtk-import-process="process"\n                ></mtk-masters-import>\n        </li>\n\n    </ul>\n    <div class="list-buttons">\n        <div title="Import UFO" ng-click="importUfo();" class="list-button">\n            <img src="lib/ui/metapolator/assets/img/importUfo.png">\n        </div>\n        <div title="Duplicate Master(s)" ng-click="duplicateMasters();" class="list-button">\n            <img src="lib/ui/metapolator/assets/img/duplicateMaster.png" ng-class="{\'inactive\': !model.areMastersSelected()}">\n        </div>\n    </div>\n</div>\n';
}),define("metapolator/ui/metapolator/master-panel/master-panel-directive",["require/text!./master-panel.tpl"],function(e){"use strict";function t(){return{restrict:"E",controller:"MasterPanelController",scope:{model:"=mtkModel"},replace:!1,template:e}}return t.$inject=[],t}),define("metapolator/ui/metapolator/glyph/glyph-controller",[],function(){"use strict";function e(e,t){this.$scope=e,e.checkBaseMasters=function(e){for(var t=e.parent,n=t.axes.length-1;n>=0;n--){var r=t.axes[n],i=r.master,o=i.findGlyphByName(e.name);o.measured||o.measureGlyph()}},e.renderGlyph=function(e){return t.get(e)}}e.$inject=["$scope","glyphUIService"];e.prototype;return e}),define("metapolator/ui/metapolator/glyph/glyph-directive",[],function(){"use strict";function e(e){return{restrict:"E",controller:"GlyphController",replace:!1,scope:{model:"=mtkModel"},link:function(e,n,r,i){var o,a=e.model.name,s=n.parent();if("space"===a?s.addClass("space-character"):"*n"===a?(n.addClass("no-glyph"),s.addClass("line-break")):"*p"===a?(n.addClass("no-glyph"),s.addClass("paragraph-break")):"*specimenbreak"===a&&(n.addClass("no-glyph"),s.addClass("specimen-break")),e.model.level){if("master"===e.model.type)e.model.checkIfIsDisplayed();else if("instance"===e.model.type)for(var u=e.model.getMasterGlyphs(e.model.name),l=u.length-1;l>=0;l--)u[l].checkIfIsDisplayed();o=e.renderGlyph(e.model.momElement),o.on("viewBox-change",t,n[0]),n.append(o.element),n.bind("$destroy",function(e){o.destroy()})}}}}function t(e,t,n){var r=n[2]/n[3]*e.clientHeight;e.style.width=r+"px"}return e.$inject=["cpsController"],e}),define("metapolator/ui/metapolator/glyph/glyph",["angular","./glyph-controller","./glyph-directive"],function(e,t,n){"use strict";return e.module("mtk.glyph",[]).controller("GlyphController",t).directive("mtkGlyph",n)}),define("metapolator/ui/metapolator/rename/rename-controller",["jquery"],function(e){"use strict";function t(t){this.$scope=t,this.$scope.name="rename",t.giveRenamingProperties=function(n){e(n).attr("contenteditable","true"),e(n).addClass("renaming"),e(n).focus(),t.selectAllText(n)},t.selectAllText=function(e){var t,n=document;if(n.body.createTextRange)t=document.body.createTextRange(),t.moveToElementText(e),t.select();else if(window.getSelection){var r=window.getSelection();t=document.createRange(),t.selectNodeContents(e),r.removeAllRanges(),r.addRange(t)}},t.finishedRenaming=function(n,r){t.$apply(function(){t.model=r.html()}),document.getSelection().removeAllRanges(),e(n).removeAttr("contenteditable"),e(n).removeClass("renaming")}}t.$inject=["$scope"];t.prototype;return t}),define("require/text!metapolator/ui/metapolator/rename/rename.tpl",[],function(){return"{{model}}\n"}),define("metapolator/ui/metapolator/rename/rename-directive",["require/text!./rename.tpl","jquery"],function(e,t){"use strict";function n(){return{restrict:"A",controller:"RenameController",scope:{model:"=mtkRename"},replace:!1,template:e,link:function(e,n,r,i){n.bind("dblclick",function(){e.giveRenamingProperties(n[0])}),n.bind("blur",function(){e.finishedRenaming(n[0],n)}),n.bind("keypress",function(r){13===r.which&&(e.finishedRenaming(n[0],n),t(n[0]).blur())})}}}return n.$inject=[],n}),define("metapolator/ui/metapolator/rename/rename",["angular","./rename-controller","./rename-directive"],function(e,t,n){"use strict";return e.module("mtk.rename",[]).controller("RenameController",t).directive("mtkRename",n)}),define("metapolator/ui/metapolator/master-panel/master/master-controller",["metapolator/ui/metapolator/ui-tools/selectionTools"],function(e){"use strict";function t(t,n){function r(e){e.edit?e.edit=!1:e.edit=!0,e.edit||e.deselectAllChildren()}function i(e){for(var t=n.lastMasterSelected,r=0,i=n.masterSequences.length-1;i>=0;i--)for(var o=n.masterSequences[i],a=o.children.length-1;a>=0;a--){var s=o.children[a],u=!1;(s==e||s==t)&&(r++,u=!0),1==r||2==r&&u?s.edit=!0:(s.edit=!1,s.deselectAllChildren())}}function o(e){n.lastMasterSelected=e;for(var t=n.masterSequences.length-1;t>=0;t--)for(var r=n.masterSequences[t],i=r.children.length-1;i>=0;i--){var o=r.children[i];o==e?o.edit=!0:o.edit&&(o.edit=!1,o.deselectAllChildren())}}this.$scope=t,this.$scope.name="master",t.getGlyph=function(e){for(var n=t.model.children.length-1;n>=0;n--){var r=t.model.children[n];if(r.name==e)return r}},t.selectManager=function(t,n){t.ctrlKey||t.metaKey?r(n):t.shiftKey?i(n):o(n),e.updateSelection("master")}}t.$inject=["$scope","metapolatorModel"];t.prototype;return t}),define("require/text!metapolator/ui/metapolator/master-panel/master/master.tpl",[],function(){return'<div class="list-sequence">\n    <svg height="12" width="12">\n        <polygon points="5,0 0,3 0,8 5,11 10,8 10,3">\n    </svg> \n</div>\n\n<div class="list-view" ng-class="{\'selected\': model.display}">\n    <ul>\n        <li ng-repeat="character in model.ag"><!--\n            \n            --><mtk-glyph ng-if="getGlyph(character)" mtk-model="getGlyph(character)" class="list-mtk-glyph"></mtk-glyph><!--\n            \n        --></li>\n    </ul> \n</div>\n\n<div mtk-rename="model.displayName" class="list-edit" ng-click="selectManager($event, model)"></div>'}),define("metapolator/ui/metapolator/master-panel/master/master-directive",["require/text!./master.tpl"],function(e){"use strict";function t(){return{restrict:"E",controller:"MasterController",scope:{model:"=mtkModel"},replace:!1,template:e}}return t.$inject=[],t}),define("metapolator/ui/metapolator/master-panel/master/master",["angular","../../glyph/glyph","../../rename/rename","./master-controller","./master-directive"],function(e,t,n,r,i){"use strict";return e.module("mtk.master",[n.name,t.name]).controller("MasterController",r).directive("mtkMaster",i)}),define("metapolator/ui/metapolator/view-rubberband/view-rubberband-controller",[],function(){"use strict";function e(e,t){this.$scope=e,e.selectSet=function(e,t){if(e.length>0)for(var n=0,r=e.length;r>n;n++){var i=e[n];i.display=!t}}}e.$inject=["$scope","metapolatorModel"];e.prototype;return e}),define("metapolator/ui/metapolator/view-rubberband/view-rubberband-directive",["jquery"],function(e){"use strict";function t(){return{restrict:"A",controller:"ViewRubberbandController",replace:!1,scope:{model:"=mtkModel"},link:function(t,n,r,i){function o(){u(),e(n).append(d)}function a(){e(d).remove()}function s(t){var n=t.pageX,r=t.pageY;n<h.startX?(f.x1=n,f.x2=h.startX):(f.x1=h.startX,f.x2=n),r<h.startY?(f.y1=r,f.y2=h.startY):(f.y1=h.startY,f.y2=r),e(d).css({left:f.x1+"px",top:f.y1+"px",width:f.x2-f.x1+"px",height:f.y2-f.y1+"px"})}function u(){e(d).css({left:0,top:0,width:"0px",height:"0px"})}function l(){e(n).find(".list-view").each(function(){e(this).removeClass("temp-selected temp-unselected"),c(this)&&!p?e(this).addClass("temp-selected"):c(this)&&p&&e(this).addClass("temp-unselected")})}function c(t){var n=f.x1,r=f.x2,i=f.y1,o=f.y2,a=e(t).offset().left,s=e(t).offset().left+e(t).outerWidth(),u=e(t).offset().top,l=e(t).offset().top+e(t).outerHeight();return(a>n&&r>a||s>n&&r>s||n>a&&s>r)&&(u>i&&o>u||l>i&&o>l||i>u&&l>o)?!0:!1}var h={click:!1,move:!1,startX:null,startY:null},f={x1:null,x2:null,y1:null,y2:null},p=null,d=e('<div class="view-rubberband"></div>')[0];n.bind("mousedown",function(t){if(e(t.target).parents(".list-view").length){var n=e(t.target).closest(".mtk-master");p=angular.element(n).isolateScope().model.display,h.click=!0,h.startX=t.pageX,h.startY=t.pageY,o(),s(t)}}),n.bind("mousemove",function(e){h.click&&(h.move=!0,s(e),l(e))}),n.bind("mouseup",function(){e(n).find(".temp-unselected").each(function(){e(this).removeClass("temp-unselected")});var r=[];e(n).find(".list-view").each(function(){if(e(this).removeClass("temp-selected"),c(this)){var t=e(this).parent(),n=angular.element(t).isolateScope().model;r.push(n)}}),t.selectSet(r,p),a(),h.click=!1,h.move=!1})}}}return t.$inject=[],t}),define("metapolator/ui/metapolator/view-rubberband/view-rubberband",["angular","./view-rubberband-controller","./view-rubberband-directive"],function(e,t,n){"use strict";return e.module("mtk.viewRubberband",[]).controller("ViewRubberbandController",t).directive("mtkViewRubberband",n)}),define("metapolator/ui/metapolator/master-panel/import/import-controller",["metapolator/errors"],function(e){"use strict";function t(e,t){this.$scope=e,this.$timeout=t,this.items=[],this.current=null,this.next=this._next.bind(this),this.importProcess.initialized.then(this.next,n)}var n=e.unhandledPromise;t.$inject=["$scope","$timeout"];var r=t.prototype;return r._next=function(){this._updateItems(),this.current&&(this.$timeout(this.next,0,!1),this.$scope.$apply())},r.cancel=function(e){this.current.file===e?this.current.cancel=!0:(this.importProcess.cancelScheduled(e),this.$scope.$apply())},r._updateItems=function(){var e,t,n;for(this.current=this.importProcess.next(this.current?!this.current.cancel:!0)||null,this.items=[],e=0,t=this.importProcess.itemsLength;t>e;e++)n=this.importProcess.getItem(e),this.items.push(n.file);this.$scope.$apply()},t}),define("require/text!metapolator/ui/metapolator/master-panel/import/import.tpl",[],function(){return'<ol ng-if"$ctrl.items.length">\n    <li\n        class="current"\n        ng-if="$ctrl.current"\n        >\n        <span title="{{$ctrl.current.file}}" class="name">{{$ctrl.current.file}}</span>\n        <span class="current of total">{{$ctrl.current.i}} of {{$ctrl.current.total}}</span>\n        <button ng-click="$ctrl.cancel($ctrl.current.file)" title="cancel">X</button>\n        <div class="progress-bar" style="width: {{(100*$ctrl.current.i/$ctrl.current.total)}}%"></div>\n    </li>\n    <li\n        class="scheduled"\n        ng-repeat="file in $ctrl.items"\n        >\n        <span title="{{file}}" class="name">{{file}}</span>\n        <span class="progress-waiting" title="waiting"></span>\n        <button ng-click="$ctrl.cancel(file)" title="cancel">X</button>\n    </li>\n</ol>\n'}),define("metapolator/ui/metapolator/master-panel/import/import-directive",["require/text!./import.tpl"],function(e){"use strict";function t(){function t(e,t,n,r){}return{restrict:"E",controller:"MastersImportController",replace:!1,template:e,scope:{},bindToController:{importProcess:"=mtkImportProcess"},controllerAs:"$ctrl",link:t}}return t.$inject=[],t}),define("metapolator/ui/metapolator/master-panel/import/import",["angular","./import-controller","./import-directive"],function(e,t,n){"use strict";return e.module("mtk.mastersImport",[]).controller("MastersImportController",t).directive("mtkMastersImport",n)}),function(e){"function"==typeof define&&define.amd?define("jquery-ui/core",["jquery"],e):e(jQuery)}(function(e){function t(t,r){var i,o,a,s=t.nodeName.toLowerCase();return"area"===s?(i=t.parentNode,o=i.name,t.href&&o&&"map"===i.nodeName.toLowerCase()?(a=e("img[usemap='#"+o+"']")[0],!!a&&n(a)):!1):(/^(input|select|textarea|button|object)$/.test(s)?!t.disabled:"a"===s?t.href||r:r)&&n(t)}function n(t){return e.expr.filters.visible(t)&&!e(t).parents().addBack().filter(function(){return"hidden"===e.css(this,"visibility")}).length}e.ui=e.ui||{},e.extend(e.ui,{version:"1.11.4",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({scrollParent:function(t){var n=this.css("position"),r="absolute"===n,i=t?/(auto|scroll|hidden)/:/(auto|scroll)/,o=this.parents().filter(function(){var t=e(this);return r&&"static"===t.css("position")?!1:i.test(t.css("overflow")+t.css("overflow-y")+t.css("overflow-x"))}).eq(0);return"fixed"!==n&&o.length?o:e(this[0].ownerDocument||document)},uniqueId:function(){var e=0;return function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++e)})}}(),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&e(this).removeAttr("id")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(n){return!!e.data(n,t)}}):function(t,n,r){return!!e.data(t,r[3])},focusable:function(n){return t(n,!isNaN(e.attr(n,"tabindex")))},tabbable:function(n){var r=e.attr(n,"tabindex"),i=isNaN(r);return(i||r>=0)&&t(n,!i)}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(t,n){function r(t,n,r,o){return e.each(i,function(){n-=parseFloat(e.css(t,"padding"+this))||0,r&&(n-=parseFloat(e.css(t,"border"+this+"Width"))||0),o&&(n-=parseFloat(e.css(t,"margin"+this))||0)}),n}var i="Width"===n?["Left","Right"]:["Top","Bottom"],o=n.toLowerCase(),a={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+n]=function(t){return void 0===t?a["inner"+n].call(this):this.each(function(){e(this).css(o,r(this,t)+"px")})},e.fn["outer"+n]=function(t,i){return"number"!=typeof t?a["outer"+n].call(this,t):this.each(function(){e(this).css(o,r(this,t,!0,i)+"px")})}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(e.fn.removeData=function(t){return function(n){return arguments.length?t.call(this,e.camelCase(n)):t.call(this)}}(e.fn.removeData)),e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),e.fn.extend({focus:function(t){return function(n,r){return"number"==typeof n?this.each(function(){var t=this;setTimeout(function(){e(t).focus(),r&&r.call(t)},n)}):t.apply(this,arguments)}}(e.fn.focus),disableSelection:function(){var e="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.bind(e+".ui-disableSelection",function(e){e.preventDefault()})}}(),enableSelection:function(){return this.unbind(".ui-disableSelection")},zIndex:function(t){if(void 0!==t)return this.css("zIndex",t);if(this.length)for(var n,r,i=e(this[0]);i.length&&i[0]!==document;){if(n=i.css("position"),("absolute"===n||"relative"===n||"fixed"===n)&&(r=parseInt(i.css("zIndex"),10),!isNaN(r)&&0!==r))return r;i=i.parent()}return 0}}),e.ui.plugin={add:function(t,n,r){var i,o=e.ui[t].prototype;for(i in r)o.plugins[i]=o.plugins[i]||[],o.plugins[i].push([n,r[i]])},call:function(e,t,n,r){var i,o=e.plugins[t];if(o&&(r||e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType))for(i=0;i<o.length;i++)e.options[o[i][0]]&&o[i][1].apply(e.element,n)}}}),function(e){"function"==typeof define&&define.amd?define("jquery-ui/widget",["jquery"],e):e(jQuery)}(function(e){var t=0,n=Array.prototype.slice;return e.cleanData=function(t){return function(n){var r,i,o;for(o=0;null!=(i=n[o]);o++)try{r=e._data(i,"events"),r&&r.remove&&e(i).triggerHandler("remove")}catch(a){}t(n)}}(e.cleanData),e.widget=function(t,n,r){var i,o,a,s,u={},l=t.split(".")[0];return t=t.split(".")[1],i=l+"-"+t,r||(r=n,n=e.Widget),e.expr[":"][i.toLowerCase()]=function(t){return!!e.data(t,i)},e[l]=e[l]||{},o=e[l][t],a=e[l][t]=function(e,t){return this._createWidget?void(arguments.length&&this._createWidget(e,t)):new a(e,t)},e.extend(a,o,{version:r.version,_proto:e.extend({},r),_childConstructors:[]}),s=new n,s.options=e.widget.extend({},s.options),e.each(r,function(t,r){return e.isFunction(r)?void(u[t]=function(){var e=function(){return n.prototype[t].apply(this,arguments)},i=function(e){return n.prototype[t].apply(this,e)};return function(){var t,n=this._super,o=this._superApply;return this._super=e,this._superApply=i,t=r.apply(this,arguments),this._super=n,this._superApply=o,t}}()):void(u[t]=r)}),a.prototype=e.widget.extend(s,{widgetEventPrefix:o?s.widgetEventPrefix||t:t},u,{constructor:a,namespace:l,widgetName:t,widgetFullName:i}),o?(e.each(o._childConstructors,function(t,n){var r=n.prototype;e.widget(r.namespace+"."+r.widgetName,a,n._proto)}),delete o._childConstructors):n._childConstructors.push(a),e.widget.bridge(t,a),a},e.widget.extend=function(t){for(var r,i,o=n.call(arguments,1),a=0,s=o.length;s>a;a++)for(r in o[a])i=o[a][r],o[a].hasOwnProperty(r)&&void 0!==i&&(e.isPlainObject(i)?t[r]=e.isPlainObject(t[r])?e.widget.extend({},t[r],i):e.widget.extend({},i):t[r]=i);return t},e.widget.bridge=function(t,r){var i=r.prototype.widgetFullName||t;e.fn[t]=function(o){var a="string"==typeof o,s=n.call(arguments,1),u=this;return a?this.each(function(){var n,r=e.data(this,i);return"instance"===o?(u=r,!1):r?e.isFunction(r[o])&&"_"!==o.charAt(0)?(n=r[o].apply(r,s),n!==r&&void 0!==n?(u=n&&n.jquery?u.pushStack(n.get()):n,!1):void 0):e.error("no such method '"+o+"' for "+t+" widget instance"):e.error("cannot call methods on "+t+" prior to initialization; attempted to call method '"+o+"'")}):(s.length&&(o=e.widget.extend.apply(null,[o].concat(s))),this.each(function(){var t=e.data(this,i);t?(t.option(o||{}),t._init&&t._init()):e.data(this,i,new r(o,this))})),u}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(n,r){r=e(r||this.defaultElement||this)[0],this.element=e(r),this.uuid=t++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=e(),this.hoverable=e(),this.focusable=e(),r!==this&&(e.data(r,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===r&&this.destroy()}}),this.document=e(r.style?r.ownerDocument:r.document||r),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this.options=e.widget.extend({},this.options,this._getCreateOptions(),n),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(t,n){var r,i,o,a=t;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof t)if(a={},r=t.split("."),t=r.shift(),r.length){for(i=a[t]=e.widget.extend({},this.options[t]),o=0;o<r.length-1;o++)i[r[o]]=i[r[o]]||{},i=i[r[o]];if(t=r.pop(),1===arguments.length)return void 0===i[t]?null:i[t];i[t]=n}else{if(1===arguments.length)return void 0===this.options[t]?null:this.options[t];a[t]=n}return this._setOptions(a),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!t),t&&(this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"))),this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_on:function(t,n,r){var i,o=this;"boolean"!=typeof t&&(r=n,n=t,t=!1),r?(n=i=e(n),this.bindings=this.bindings.add(n)):(r=n,n=this.element,i=this.widget()),e.each(r,function(r,a){function s(){return t||o.options.disabled!==!0&&!e(this).hasClass("ui-state-disabled")?("string"==typeof a?o[a]:a).apply(o,arguments):void 0}"string"!=typeof a&&(s.guid=a.guid=a.guid||s.guid||e.guid++);var u=r.match(/^([\w:-]*)\s*(.*)$/),l=u[1]+o.eventNamespace,c=u[2];c?i.delegate(c,l,s):n.bind(l,s)})},_off:function(t,n){n=(n||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.unbind(n).undelegate(n),this.bindings=e(this.bindings.not(t).get()),this.focusable=e(this.focusable.not(t).get()),this.hoverable=e(this.hoverable.not(t).get())},_delay:function(e,t){function n(){return("string"==typeof e?r[e]:e).apply(r,arguments)}var r=this;return setTimeout(n,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,n,r){var i,o,a=this.options[t];if(r=r||{},n=e.Event(n),n.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),n.target=this.element[0],o=n.originalEvent)for(i in o)i in n||(n[i]=o[i]);return this.element.trigger(n,r),!(e.isFunction(a)&&a.apply(this.element[0],[n].concat(r))===!1||n.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,n){e.Widget.prototype["_"+t]=function(r,i,o){"string"==typeof i&&(i={effect:i});var a,s=i?i===!0||"number"==typeof i?n:i.effect||n:t;i=i||{},"number"==typeof i&&(i={duration:i}),a=!e.isEmptyObject(i),i.complete=o,i.delay&&r.delay(i.delay),a&&e.effects&&e.effects.effect[s]?r[t](i):s!==t&&r[s]?r[s](i.duration,i.easing,o):r.queue(function(n){e(this)[t](),o&&o.call(r[0]),n()})}}),e.widget}),function(e){"function"==typeof define&&define.amd?define("jquery-ui/mouse",["jquery","./widget"],e):e(jQuery)}(function(e){var t=!1;return e(document).mouseup(function(){t=!1}),e.widget("ui.mouse",{version:"1.11.4",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(n){return!0===e.data(n.target,t.widgetName+".preventClickEvent")?(e.removeData(n.target,t.widgetName+".preventClickEvent"),n.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(n){if(!t){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(n),this._mouseDownEvent=n;var r=this,i=1===n.which,o="string"==typeof this.options.cancel&&n.target.nodeName?e(n.target).closest(this.options.cancel).length:!1;return i&&!o&&this._mouseCapture(n)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){r.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(n)&&this._mouseDelayMet(n)&&(this._mouseStarted=this._mouseStart(n)!==!1,!this._mouseStarted)?(n.preventDefault(),!0):(!0===e.data(n.target,this.widgetName+".preventClickEvent")&&e.removeData(n.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return r._mouseMove(e)},this._mouseUpDelegate=function(e){return r._mouseUp(e)},this.document.bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),n.preventDefault(),t=!0,!0)):!0}},_mouseMove:function(t){if(this._mouseMoved){if(e.ui.ie&&(!document.documentMode||document.documentMode<9)&&!t.button)return this._mouseUp(t);if(!t.which)return this._mouseUp(t)}return(t.which||t.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(n){return this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,n.target===this._mouseDownEvent.target&&e.data(n.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(n)),t=!1,!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}),function(e){"function"==typeof define&&define.amd?define("jquery-ui/sortable",["jquery","./core","./mouse","./widget"],e):e(jQuery)}(function(e){return e.widget("ui.sortable",e.ui.mouse,{version:"1.11.4",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(e,t,n){return e>=t&&t+n>e},_isFloating:function(e){return/left|right/.test(e.css("float"))||/inline|table-cell/.test(e.css("display"))},_create:function(){this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.offset=this.element.offset(),this._mouseInit(),this._setHandleClassName(),this.ready=!0},_setOption:function(e,t){this._super(e,t),"handle"===e&&this._setHandleClassName()},_setHandleClassName:function(){this.element.find(".ui-sortable-handle").removeClass("ui-sortable-handle"),e.each(this.items,function(){(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item).addClass("ui-sortable-handle")})},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled").find(".ui-sortable-handle").removeClass("ui-sortable-handle"),this._mouseDestroy();for(var e=this.items.length-1;e>=0;e--)this.items[e].item.removeData(this.widgetName+"-item");return this},_mouseCapture:function(t,n){var r=null,i=!1,o=this;return this.reverting?!1:this.options.disabled||"static"===this.options.type?!1:(this._refreshItems(t),e(t.target).parents().each(function(){return e.data(this,o.widgetName+"-item")===o?(r=e(this),!1):void 0}),e.data(t.target,o.widgetName+"-item")===o&&(r=e(t.target)),r&&(!this.options.handle||n||(e(this.options.handle,r).find("*").addBack().each(function(){this===t.target&&(i=!0)}),i))?(this.currentItem=r,this._removeCurrentsFromItems(),!0):!1)},_mouseStart:function(t,n,r){var i,o,a=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,a.cursorAt&&this._adjustOffsetFromHelper(a.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),a.containment&&this._setContainment(),a.cursor&&"auto"!==a.cursor&&(o=this.document.find("body"),this.storedCursor=o.css("cursor"),o.css("cursor",a.cursor),this.storedStylesheet=e("<style>*{ cursor: "+a.cursor+" !important; }</style>").appendTo(o)),a.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",a.opacity)),a.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",a.zIndex)),this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!r)for(i=this.containers.length-1;i>=0;i--)this.containers[i]._trigger("activate",t,this._uiHash(this));return e.ui.ddmanager&&(e.ui.ddmanager.current=this),e.ui.ddmanager&&!a.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){var n,r,i,o,a=this.options,s=!1;for(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<a.scrollSensitivity?this.scrollParent[0].scrollTop=s=this.scrollParent[0].scrollTop+a.scrollSpeed:t.pageY-this.overflowOffset.top<a.scrollSensitivity&&(this.scrollParent[0].scrollTop=s=this.scrollParent[0].scrollTop-a.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<a.scrollSensitivity?this.scrollParent[0].scrollLeft=s=this.scrollParent[0].scrollLeft+a.scrollSpeed:t.pageX-this.overflowOffset.left<a.scrollSensitivity&&(this.scrollParent[0].scrollLeft=s=this.scrollParent[0].scrollLeft-a.scrollSpeed)):(t.pageY-this.document.scrollTop()<a.scrollSensitivity?s=this.document.scrollTop(this.document.scrollTop()-a.scrollSpeed):this.window.height()-(t.pageY-this.document.scrollTop())<a.scrollSensitivity&&(s=this.document.scrollTop(this.document.scrollTop()+a.scrollSpeed)),t.pageX-this.document.scrollLeft()<a.scrollSensitivity?s=this.document.scrollLeft(this.document.scrollLeft()-a.scrollSpeed):this.window.width()-(t.pageX-this.document.scrollLeft())<a.scrollSensitivity&&(s=this.document.scrollLeft(this.document.scrollLeft()+a.scrollSpeed))),s!==!1&&e.ui.ddmanager&&!a.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),n=this.items.length-1;n>=0;n--)if(r=this.items[n],i=r.item[0],o=this._intersectsWithPointer(r),o&&r.instance===this.currentContainer&&i!==this.currentItem[0]&&this.placeholder[1===o?"next":"prev"]()[0]!==i&&!e.contains(this.placeholder[0],i)&&("semi-dynamic"===this.options.type?!e.contains(this.element[0],i):!0)){if(this.direction=1===o?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(r))break;this._rearrange(t,r),this._trigger("change",t,this._uiHash());break}return this._contactContainers(t),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,n){if(t){if(e.ui.ddmanager&&!this.options.dropBehaviour&&e.ui.ddmanager.drop(this,t),this.options.revert){var r=this,i=this.placeholder.offset(),o=this.options.axis,a={};o&&"x"!==o||(a.left=i.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollLeft)),o&&"y"!==o||(a.top=i.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,e(this.helper).animate(a,parseInt(this.options.revert,10)||500,function(){r._clear(t)})}else this._clear(t,n);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var t=this.containers.length-1;t>=0;t--)this.containers[t]._trigger("deactivate",null,this._uiHash(this)),this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",null,this._uiHash(this)),this.containers[t].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),e.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?e(this.domPosition.prev).after(this.currentItem):e(this.domPosition.parent).prepend(this.currentItem)),
this},serialize:function(t){var n=this._getItemsAsjQuery(t&&t.connected),r=[];return t=t||{},e(n).each(function(){var n=(e(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[\-=_](.+)/);n&&r.push((t.key||n[1]+"[]")+"="+(t.key&&t.expression?n[1]:n[2]))}),!r.length&&t.key&&r.push(t.key+"="),r.join("&")},toArray:function(t){var n=this._getItemsAsjQuery(t&&t.connected),r=[];return t=t||{},n.each(function(){r.push(e(t.item||this).attr(t.attribute||"id")||"")}),r},_intersectsWith:function(e){var t=this.positionAbs.left,n=t+this.helperProportions.width,r=this.positionAbs.top,i=r+this.helperProportions.height,o=e.left,a=o+e.width,s=e.top,u=s+e.height,l=this.offset.click.top,c=this.offset.click.left,h="x"===this.options.axis||r+l>s&&u>r+l,f="y"===this.options.axis||t+c>o&&a>t+c,p=h&&f;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>e[this.floating?"width":"height"]?p:o<t+this.helperProportions.width/2&&n-this.helperProportions.width/2<a&&s<r+this.helperProportions.height/2&&i-this.helperProportions.height/2<u},_intersectsWithPointer:function(e){var t="x"===this.options.axis||this._isOverAxis(this.positionAbs.top+this.offset.click.top,e.top,e.height),n="y"===this.options.axis||this._isOverAxis(this.positionAbs.left+this.offset.click.left,e.left,e.width),r=t&&n,i=this._getDragVerticalDirection(),o=this._getDragHorizontalDirection();return r?this.floating?o&&"right"===o||"down"===i?2:1:i&&("down"===i?2:1):!1},_intersectsWithSides:function(e){var t=this._isOverAxis(this.positionAbs.top+this.offset.click.top,e.top+e.height/2,e.height),n=this._isOverAxis(this.positionAbs.left+this.offset.click.left,e.left+e.width/2,e.width),r=this._getDragVerticalDirection(),i=this._getDragHorizontalDirection();return this.floating&&i?"right"===i&&n||"left"===i&&!n:r&&("down"===r&&t||"up"===r&&!t)},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return 0!==e&&(e>0?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return 0!==e&&(e>0?"right":"left")},refresh:function(e){return this._refreshItems(e),this._setHandleClassName(),this.refreshPositions(),this},_connectWith:function(){var e=this.options;return e.connectWith.constructor===String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(t){function n(){s.push(this)}var r,i,o,a,s=[],u=[],l=this._connectWith();if(l&&t)for(r=l.length-1;r>=0;r--)for(o=e(l[r],this.document[0]),i=o.length-1;i>=0;i--)a=e.data(o[i],this.widgetFullName),a&&a!==this&&!a.options.disabled&&u.push([e.isFunction(a.options.items)?a.options.items.call(a.element):e(a.options.items,a.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),a]);for(u.push([e.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):e(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),r=u.length-1;r>=0;r--)u[r][0].each(n);return e(s)},_removeCurrentsFromItems:function(){var t=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=e.grep(this.items,function(e){for(var n=0;n<t.length;n++)if(t[n]===e.item[0])return!1;return!0})},_refreshItems:function(t){this.items=[],this.containers=[this];var n,r,i,o,a,s,u,l,c=this.items,h=[[e.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):e(this.options.items,this.element),this]],f=this._connectWith();if(f&&this.ready)for(n=f.length-1;n>=0;n--)for(i=e(f[n],this.document[0]),r=i.length-1;r>=0;r--)o=e.data(i[r],this.widgetFullName),o&&o!==this&&!o.options.disabled&&(h.push([e.isFunction(o.options.items)?o.options.items.call(o.element[0],t,{item:this.currentItem}):e(o.options.items,o.element),o]),this.containers.push(o));for(n=h.length-1;n>=0;n--)for(a=h[n][1],s=h[n][0],r=0,l=s.length;l>r;r++)u=e(s[r]),u.data(this.widgetName+"-item",a),c.push({item:u,instance:a,width:0,height:0,left:0,top:0})},refreshPositions:function(t){this.floating=this.items.length?"x"===this.options.axis||this._isFloating(this.items[0].item):!1,this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var n,r,i,o;for(n=this.items.length-1;n>=0;n--)r=this.items[n],r.instance!==this.currentContainer&&this.currentContainer&&r.item[0]!==this.currentItem[0]||(i=this.options.toleranceElement?e(this.options.toleranceElement,r.item):r.item,t||(r.width=i.outerWidth(),r.height=i.outerHeight()),o=i.offset(),r.left=o.left,r.top=o.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(n=this.containers.length-1;n>=0;n--)o=this.containers[n].element.offset(),this.containers[n].containerCache.left=o.left,this.containers[n].containerCache.top=o.top,this.containers[n].containerCache.width=this.containers[n].element.outerWidth(),this.containers[n].containerCache.height=this.containers[n].element.outerHeight();return this},_createPlaceholder:function(t){t=t||this;var n,r=t.options;r.placeholder&&r.placeholder.constructor!==String||(n=r.placeholder,r.placeholder={element:function(){var r=t.currentItem[0].nodeName.toLowerCase(),i=e("<"+r+">",t.document[0]).addClass(n||t.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");return"tbody"===r?t._createTrPlaceholder(t.currentItem.find("tr").eq(0),e("<tr>",t.document[0]).appendTo(i)):"tr"===r?t._createTrPlaceholder(t.currentItem,i):"img"===r&&i.attr("src",t.currentItem.attr("src")),n||i.css("visibility","hidden"),i},update:function(e,i){(!n||r.forcePlaceholderSize)&&(i.height()||i.height(t.currentItem.innerHeight()-parseInt(t.currentItem.css("paddingTop")||0,10)-parseInt(t.currentItem.css("paddingBottom")||0,10)),i.width()||i.width(t.currentItem.innerWidth()-parseInt(t.currentItem.css("paddingLeft")||0,10)-parseInt(t.currentItem.css("paddingRight")||0,10)))}}),t.placeholder=e(r.placeholder.element.call(t.element,t.currentItem)),t.currentItem.after(t.placeholder),r.placeholder.update(t,t.placeholder)},_createTrPlaceholder:function(t,n){var r=this;t.children().each(function(){e("<td>&#160;</td>",r.document[0]).attr("colspan",e(this).attr("colspan")||1).appendTo(n)})},_contactContainers:function(t){var n,r,i,o,a,s,u,l,c,h,f=null,p=null;for(n=this.containers.length-1;n>=0;n--)if(!e.contains(this.currentItem[0],this.containers[n].element[0]))if(this._intersectsWith(this.containers[n].containerCache)){if(f&&e.contains(this.containers[n].element[0],f.element[0]))continue;f=this.containers[n],p=n}else this.containers[n].containerCache.over&&(this.containers[n]._trigger("out",t,this._uiHash(this)),this.containers[n].containerCache.over=0);if(f)if(1===this.containers.length)this.containers[p].containerCache.over||(this.containers[p]._trigger("over",t,this._uiHash(this)),this.containers[p].containerCache.over=1);else{for(i=1e4,o=null,c=f.floating||this._isFloating(this.currentItem),a=c?"left":"top",s=c?"width":"height",h=c?"clientX":"clientY",r=this.items.length-1;r>=0;r--)e.contains(this.containers[p].element[0],this.items[r].item[0])&&this.items[r].item[0]!==this.currentItem[0]&&(u=this.items[r].item.offset()[a],l=!1,t[h]-u>this.items[r][s]/2&&(l=!0),Math.abs(t[h]-u)<i&&(i=Math.abs(t[h]-u),o=this.items[r],this.direction=l?"up":"down"));if(!o&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[p])return void(this.currentContainer.containerCache.over||(this.containers[p]._trigger("over",t,this._uiHash()),this.currentContainer.containerCache.over=1));o?this._rearrange(t,o,null,!0):this._rearrange(t,null,this.containers[p].element,!0),this._trigger("change",t,this._uiHash()),this.containers[p]._trigger("change",t,this._uiHash(this)),this.currentContainer=this.containers[p],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[p]._trigger("over",t,this._uiHash(this)),this.containers[p].containerCache.over=1}},_createHelper:function(t){var n=this.options,r=e.isFunction(n.helper)?e(n.helper.apply(this.element[0],[t,this.currentItem])):"clone"===n.helper?this.currentItem.clone():this.currentItem;return r.parents("body").length||e("parent"!==n.appendTo?n.appendTo:this.currentItem[0].parentNode)[0].appendChild(r[0]),r[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!r[0].style.width||n.forceHelperSize)&&r.width(this.currentItem.width()),(!r[0].style.height||n.forceHelperSize)&&r.height(this.currentItem.height()),r},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==this.document[0]&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===this.document[0].body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&e.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,n,r,i=this.options;"parent"===i.containment&&(i.containment=this.helper[0].parentNode),("document"===i.containment||"window"===i.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,"document"===i.containment?this.document.width():this.window.width()-this.helperProportions.width-this.margins.left,("document"===i.containment?this.document.width():this.window.height()||this.document[0].body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(i.containment)||(t=e(i.containment)[0],n=e(i.containment).offset(),r="hidden"!==e(t).css("overflow"),this.containment=[n.left+(parseInt(e(t).css("borderLeftWidth"),10)||0)+(parseInt(e(t).css("paddingLeft"),10)||0)-this.margins.left,n.top+(parseInt(e(t).css("borderTopWidth"),10)||0)+(parseInt(e(t).css("paddingTop"),10)||0)-this.margins.top,n.left+(r?Math.max(t.scrollWidth,t.offsetWidth):t.offsetWidth)-(parseInt(e(t).css("borderLeftWidth"),10)||0)-(parseInt(e(t).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,n.top+(r?Math.max(t.scrollHeight,t.offsetHeight):t.offsetHeight)-(parseInt(e(t).css("borderTopWidth"),10)||0)-(parseInt(e(t).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(t,n){n||(n=this.position);var r="absolute"===t?1:-1,i="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,o=/(html|body)/i.test(i[0].tagName);return{top:n.top+this.offset.relative.top*r+this.offset.parent.top*r-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():o?0:i.scrollTop())*r,left:n.left+this.offset.relative.left*r+this.offset.parent.left*r-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():o?0:i.scrollLeft())*r}},_generatePosition:function(t){var n,r,i=this.options,o=t.pageX,a=t.pageY,s="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,u=/(html|body)/i.test(s[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(o=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(a=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(o=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(a=this.containment[3]+this.offset.click.top)),i.grid&&(n=this.originalPageY+Math.round((a-this.originalPageY)/i.grid[1])*i.grid[1],a=this.containment?n-this.offset.click.top>=this.containment[1]&&n-this.offset.click.top<=this.containment[3]?n:n-this.offset.click.top>=this.containment[1]?n-i.grid[1]:n+i.grid[1]:n,r=this.originalPageX+Math.round((o-this.originalPageX)/i.grid[0])*i.grid[0],o=this.containment?r-this.offset.click.left>=this.containment[0]&&r-this.offset.click.left<=this.containment[2]?r:r-this.offset.click.left>=this.containment[0]?r-i.grid[0]:r+i.grid[0]:r)),{top:a-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():u?0:s.scrollTop()),left:o-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():u?0:s.scrollLeft())}},_rearrange:function(e,t,n,r){n?n[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?t.item[0]:t.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var i=this.counter;this._delay(function(){i===this.counter&&this.refreshPositions(!r)})},_clear:function(e,t){function n(e,t,n){return function(r){n._trigger(e,r,t._uiHash(t))}}this.reverting=!1;var r,i=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(r in this._storedCSS)("auto"===this._storedCSS[r]||"static"===this._storedCSS[r])&&(this._storedCSS[r]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!t&&i.push(function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||t||i.push(function(e){this._trigger("update",e,this._uiHash())}),this!==this.currentContainer&&(t||(i.push(function(e){this._trigger("remove",e,this._uiHash())}),i.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.currentContainer)),i.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.currentContainer)))),r=this.containers.length-1;r>=0;r--)t||i.push(n("deactivate",this,this.containers[r])),this.containers[r].containerCache.over&&(i.push(n("out",this,this.containers[r])),this.containers[r].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,t||this._trigger("beforeStop",e,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.cancelHelperRemoval||(this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null),!t){for(r=0;r<i.length;r++)i[r].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!this.cancelHelperRemoval},_trigger:function(){e.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(t){var n=t||this;return{helper:n.helper,placeholder:n.placeholder||e([]),position:n.position,originalPosition:n.originalPosition,offset:n.positionAbs,item:n.currentItem,sender:t?t.element:null}}})}),!function(e,t,n){"use strict";t.module("ui.sortable",[]).value("uiSortableConfig",{items:"> [ng-repeat],> [data-ng-repeat],> [x-ng-repeat]"}).directive("uiSortable",["uiSortableConfig","$timeout","$log",function(e,r,i){return{require:"?ngModel",scope:{ngModel:"=",uiSortable:"="},link:function(o,a,s,u){function l(e,t){var n=e&&"function"==typeof e,r=t&&"function"==typeof t;return n&&r?function(){e.apply(this,arguments),t.apply(this,arguments)}:r?t:e}function c(e){var t=e.data("ui-sortable");return t&&"object"==typeof t&&"ui-sortable"===t.widgetFullName?t:null}function h(t,n){return M[t]?("stop"===t&&(n=l(n,function(){o.$apply()}),n=l(n,b)),n=l(M[t],n)):T[t]&&(n=T[t](n)),n||("items"===t?n=e.items:"ui-model-items"===t&&(n=e.items)),n}function f(e,r,i){function o(e,t){t in k||(k[t]=null)}t.forEach(M,o);var a=null;if(r){var s;t.forEach(r,function(r,i){if(!(e&&i in e)){if(i in P)return void("ui-floating"===i?k[i]="auto":k[i]=h(i,n));s||(s=t.element.ui.sortable().options);var o=s[i];o=h(i,o),a||(a={}),a[i]=o,k[i]=o}})}return t.forEach(e,function(e,t){return t in P?("ui-floating"!==t||e!==!1&&e!==!0||!i||(i.floating=e),void(k[t]=h(t,e))):(e=h(t,e),a||(a={}),a[t]=e,void(k[t]=e))}),a}function p(e){var n=e.sortable("option","placeholder");if(n&&n.element&&"function"==typeof n.element){var r=n.element();return r=t.element(r)}return null}function d(e,t){var n=k["ui-model-items"].replace(/[^,]*>/g,""),r=e.find('[class="'+t.attr("class")+'"]:not('+n+")");return r}function m(e,t){var n=e.sortable("option","helper");return"clone"===n||"function"==typeof n&&t.item.sortable.isCustomHelperUsed()}function g(e,t,n){var r=null;return m(e,t)&&"parent"===e.sortable("option","appendTo")&&(r=n.last()),r}function v(e){return/left|right/.test(e.css("float"))||/inline|table-cell/.test(e.css("display"))}function y(e,t){for(var n=null,r=0;r<e.length;r++){var i=e[r];if(i.element[0]===t[0]){n=i.scope;break}}return n}function b(e,t){t.item.sortable._destroy()}function _(e){return e.item.parent().find(k["ui-model-items"]).index(e.item)}function w(){o.$watchCollection("ngModel",function(){r(function(){c(a)&&a.sortable("refresh")},0,!1)}),M.start=function(e,r){if("auto"===k["ui-floating"]){var i=r.item.siblings(),o=c(t.element(e.target));o.floating=v(i)}var a=_(r);r.item.sortable={model:u.$modelValue[a],index:a,source:r.item.parent(),sourceModel:u.$modelValue,cancel:function(){r.item.sortable._isCanceled=!0},isCanceled:function(){return r.item.sortable._isCanceled},isCustomHelperUsed:function(){return!!r.item.sortable._isCustomHelperUsed},_isCanceled:!1,_isCustomHelperUsed:r.item.sortable._isCustomHelperUsed,_destroy:function(){t.forEach(r.item.sortable,function(e,t){r.item.sortable[t]=n})}}},M.activate=function(e,t){C=a.contents();var n=p(a);if(n&&n.length){var r=d(a,n);C=C.not(r)}var i=t.item.sortable._connectedSortables||[];i.push({element:a,scope:o}),t.item.sortable._connectedSortables=i},M.update=function(e,t){if(!t.item.sortable.received){t.item.sortable.dropindex=_(t);var n=t.item.parent();t.item.sortable.droptarget=n;var r=y(t.item.sortable._connectedSortables,n);t.item.sortable.droptargetModel=r.ngModel,a.sortable("cancel")}var i=!t.item.sortable.received&&g(a,t,C);i&&i.length&&(C=C.not(i)),C.appendTo(a),t.item.sortable.received&&(C=null),t.item.sortable.received&&!t.item.sortable.isCanceled()&&o.$apply(function(){u.$modelValue.splice(t.item.sortable.dropindex,0,t.item.sortable.moved)})},M.stop=function(e,n){if(!n.item.sortable.received&&"dropindex"in n.item.sortable&&!n.item.sortable.isCanceled())o.$apply(function(){u.$modelValue.splice(n.item.sortable.dropindex,0,u.$modelValue.splice(n.item.sortable.index,1)[0])});else if((!("dropindex"in n.item.sortable)||n.item.sortable.isCanceled())&&!t.equals(a.contents(),C)){var r=g(a,n,C);r&&r.length&&(C=C.not(r)),C.appendTo(a)}C=null},M.receive=function(e,t){t.item.sortable.received=!0},M.remove=function(e,t){"dropindex"in t.item.sortable||(a.sortable("cancel"),t.item.sortable.cancel()),t.item.sortable.isCanceled()||o.$apply(function(){t.item.sortable.moved=u.$modelValue.splice(t.item.sortable.index,1)[0]})},T.helper=function(e){return e&&"function"==typeof e?function(t,n){var r=e.apply(this,arguments);return n.sortable._isCustomHelperUsed=n!==r,r}:e},o.$watchCollection("uiSortable",function(e,t){var n=c(a);if(n){var r=f(e,t,n);r&&a.sortable("option",r)}},!0),f(k)}function x(){u?w():i.info("ui.sortable: ngModel not provided!",a),a.sortable(k)}function S(){return o.uiSortable&&o.uiSortable.disabled?!1:(x(),S.cancelWatcher(),S.cancelWatcher=t.noop,!0)}var C,k={},P={"ui-floating":n,"ui-model-items":e.items},M={receive:null,remove:null,start:null,stop:null,update:null},T={helper:null};return t.extend(k,P,e,o.uiSortable),t.element.fn&&t.element.fn.jquery?(S.cancelWatcher=t.noop,void(S()||(S.cancelWatcher=o.$watch("uiSortable.disabled",S)))):void i.error("ui.sortable: jQuery should be included before AngularJS!")}}}])}(window,window.angular),define("angular-ui-sortable",["jquery-ui/sortable","angular"],function(){}),define("metapolator/ui/metapolator/master-panel/master-panel",["angular","./master-panel-controller","./master-panel-directive","./master/master","../view-rubberband/view-rubberband","./import/import","angular-ui-sortable"],function(e,t,n,r,i,o,a){"use strict";return e.module("mtk.masterPanel",["ui.sortable",r.name,i.name,o.name]).controller("MasterPanelController",t).directive("mtkMasterPanel",n)}),define("metapolator/ui/metapolator/design-space-panel/design-space-panel-controller",["metapolator/ui/metapolator/ui-tools/dialog","metapolator/ui/metapolator/ui-tools/instanceTools"],function(e,t){"use strict";function n(n,r){function i(e){for(var t=0,n=e.length;n>t;t++){var r=e[t];r.remove()}}this.$scope=n,this.$scope.name="designSpacePanel",n.selectDesignSpace=function(e){e.setCurrent(),e.lastInstance?e.lastInstance.setCurrent():n.model.currentInstance=null},n.addDesignSpace=function(){n.model.createNewDesignSpace(),n.model.currentInstance=null},n.cloneDesignSpace=function(){var e=n.model.currentDesignSpace,i=n.model.instanceSequences[0];e.clone();for(var o=n.model.instanceSequences.length-1;o>=0;o--)for(var a=n.model.instanceSequences[o],s=a.children.length-1;s>=0;s--){var u=a.children[s];if(u.designSpace===e){var l=u.clone(n.model.currentDesignSpace,r);t.registerInstance(r,l),i.addInstance(l)}}},n.removeDesignSpace=function(){var t,r=n.model.currentDesignSpace;if(0===r.axes.length)r.remove();else{var o=n.model.getInstancesInDesignSpace(r),a=o.length;t=1===a?"Delete this design space and its instance?":"Delete this design space and its "+a+" instances?",e.confirm(t,function(e){e&&(i(o),r.remove(),n.$apply())})}}}n.$inject=["$scope","project"];n.prototype;return n}),define("require/text!metapolator/ui/metapolator/design-space-panel/design-space-panel.tpl",[],function(){return'<ul id="design-space-tabs">\n    <li ng-repeat="space in model.designSpaces track by space.id" ng-class="{\'selected\' : space === model.currentDesignSpace}" ng-click="selectDesignSpace(space)">\n        <mtk-local-menu class="localmenu lm-inside lm-align-right" ng-if="space === model.currentDesignSpace">\n            <div class="lm-head" ng-mousedown="localMenuCtrl.toggleMenu(\'designSpace\')">\n                <div class="lm-head-container">\n                    <div mtk-rename="space.name"></div>&nbsp;\n                </div>\n            </div>\n            <div class="lm-body" ng-if="display.localMenu == \'designSpace\'">\n                <div class="lm-button" ng-mouseup="addDesignSpace(); localMenuCtrl.closeMenu()">New</div>\n                <div class="lm-button" ng-mouseup="cloneDesignSpace(); localMenuCtrl.closeMenu()">Duplicate</div>\n                <div class="lm-divider"></div>\n                <div class="lm-button" ng-mouseup="removeDesignSpace(); localMenuCtrl.closeMenu()">Deleteâ¦</div>\n            </div>\n        </mtk-local-menu>\n        <div mtk-rename="space.name" ng-if="space != model.currentDesignSpace"></div>\n    </li>\n    <li class="add-design-space" ng-click="addDesignSpace()" ng-if="model.designSpaces.length < 8">\n        +\n    </li>\n</ul>\n\n<div class="design-space">\n    <mtk-control mtk-model="model.currentDesignSpace" ng-class="{\'logo-bg\': model.currentDesignSpace.axes.length == 0}" class="drop-area" ng-if="model.currentDesignSpace.type == \'Control\'"></mtk-control>\n    <mtk-explore mtk-model="model.currentDesignSpace" class="drop-area" ng-if="model.currentDesignSpace.type == \'Explore\'"></mtk-explore>\n</div>'}),define("metapolator/ui/metapolator/design-space-panel/design-space-panel-directive",["require/text!./design-space-panel.tpl"],function(e){"use strict";function t(){return{restrict:"E",controller:"DesignSpacePanelController",replace:!1,template:e,scope:{model:"=mtkModel"}}}return t.$inject=[],t}),define("metapolator/ui/metapolator/design-space-panel/control/control-controller",["metapolator/ui/metapolator/ui-tools/instanceTools","metapolator/ui/metapolator/ui-tools/dialog"],function(e,t){"use strict";function n(e,n){this.$scope=e,e.setMetapolationValues=function(e){e.setMetapolationValues(n)},e.changeSlackMaster=function(){for(var t=e.model.parent.instanceSequences.length-1;t>=0;t--)for(var n=e.model.parent.instanceSequences[t],r=n.children.length-1;r>=0;r--){var i=n.children[r];i.designSpace===e.model&&i.reDestributeAxes(e.model.slack)}e.redraw()},e.redrawAxesFromInput=function(t,n){function r(e){return isNaN(e)||""===e||0>e?0:e>100?100:e}if("blur"===n||13===n.keyCode){var i=e.model,o=i.slack,a=i.lastInstance,s=a.axes,u=s.length,l=0;s[t].value=r(s[t].value);for(var c=0;u>c;c++)parseFloat(s[c].axisValue)>=l&&c!=o&&(l=parseFloat(s[c].axisValue));if(t!=o)s[o].axisValue=100-l;else{var h,f=100-s[o].axisValue;h=0!==l?f/l:1;for(var p=0;u>p;p++)c!=o&&(s[p].axisValue=(h*s[p].axisValue).toFixed(1))}a.setMetapolationValues(),e.redraw()}},e.removeMaster=function(n,r){var i=e.model.parent.getInstanceAxesWithMaster(n,r),o=i.length,a=r.axes.length,s="";s=1===a?1===o?"Remove master? This will remove an instance as well.":"Remove master? This will remove instances as well.":1===o?"Remove master? It will no longer be part of the instance afterwards.":"Remove master? It will no longer be part of the instances afterwards.",t.confirm(s,function(t){t&&(r.removeAxis(n),e.$apply())})}}n.$inject=["$scope","project"];n.prototype;return n}),define("require/text!metapolator/ui/metapolator/design-space-panel/control/control.tpl",[],function(){return'<div class="slider-input-container" \n     ng-repeat="axis in model.lastInstance.axes" \n     ng-style="{\'top\': ($index * axisDistance + (paddingTop + 46)) + \'px\', \'left\': (axisWidth / 2 - 25 + paddingLeft) + \'px\'}">\n    <input valuefield \n           id="designspace-input-{{$index}}" \n           counter="{{$index}}" \n           ng-model="axis.axisValue" \n           ng-blur="redrawAxesFromInput($index, \'blur\')" \n           ng-keyup="redrawAxesFromInput($index, $event)">\n</div>\n<select class="slack-master-select" \n        ng-if="model.lastInstance.axes.length > 2"\n        ng-change="changeSlackMaster()"\n        ng-model="model.slack"\n        ng-options="model.lastInstance.axes.indexOf(axis) as axis.master.displayName for (index, axis) in model.lastInstance.axes" \n        ng-style="{\'top\': (model.slack * axisDistance + (paddingTop + 50)) + \'px\', \'left\': \'10px\'}">\n</select>'}),define("metapolator/ui/metapolator/design-space-panel/control/control-directive",["require/text!./control.tpl","d3","jquery"],function(e,t,n){"use strict";function r(){return{restrict:"E",controller:"ControlController",scope:{model:"=mtkModel"},replace:!1,template:e,link:function(e,r,i,o){function a(){j.selectAll("*").remove(),s(),$&&l(),N.length>0&&v()}function s(){E=e.model,$=null,N=[];for(var t=e.model.parent.instanceSequences.length-1;t>=0;t--)for(var n=e.model.parent.instanceSequences[t],r=0,i=n.children.length;i>r;r++){var o=n.children[r];if(o.designSpace===E)if(o===e.model.parent.currentInstance)$=o;else for(var a=0,s=o.axes.length;s>a;a++){var u;u=a===E.slack?!0:!1;var l=o.axes[a];N[a]||(N[a]=[]);var c={};c.value=l.axisValue,c.color=o.color,c.slack=u,c.name=o.name,N[a].push(c)}}}function u(){1===$.axes.length&&g(),q=c(),h(q),f(q,!1),p(q,!1),d(q,!1),m(q)}function l(){for(var e=0,n=$.axes.length;n>e;e++){var r=$.axes[e];t.select("#axis-active"+e).attr("d",function(){return E.slack===e?"M"+((100-r.axisValue)*L.axisStep+L.indentLeft)+" 0 L"+L.axisRightPoint+" 0":"M"+L.indentLeft+" 0  L"+(r.axisValue*L.axisStep+L.indentLeft)+" 0"}),t.select("#slider"+e).attr("cx",function(){return E.slack===e?(100-r.axisValue)*L.axisStep+L.indentLeft:r.axisValue*L.axisStep+L.indentLeft}),t.select("#diamond"+e).attr("transform",function(){return E.slack===e?"translate("+((100-r.axisValue)*L.axisStep+L.indentPlusDiamond)+", -28)":"translate("+(r.axisValue*L.axisStep+L.indentPlusDiamond)+", -28)"}),t.select("#diamond"+e+" polygon").attr("fill",$.color).attr("stroke",$.color).attr("class","design-space-diamond instance-"+$.name).style("opacity",1)}}function c(){var e=$.axes;return F.selectAll("g").data(e).enter().append("g").attr("transform",function(e,t){var n=L.leftOffset,r=t*L.axisDistance+L.paddingTop;return"translate("+n+","+r+")"}).attr("class",function(e,t){return"slider-container-"+t+" not-dragging"})}function h(e){e.append("path").attr("d",function(e,t){return E.slack===t?L.reverseAxesString:L.axesString}).attr("class","slider-axis")}function f(e,t){t&&F.selectAll(".slider-axis-active").remove(),e.append("path").attr("d",function(e,t){return E.slack===t?"M"+((100-e.axisValue)*L.axisStep+L.indentLeft)+" 0 L"+L.axisRightPoint+" 0":"M"+L.indentLeft+" 0  L"+(e.axisValue*L.axisStep+L.indentLeft)+" 0"}).attr("class","slider-axis-active").attr("id",function(e,t){return"axis-active"+t})}function p(e,t){t&&F.selectAll(".slider-handle").remove(),e.append("circle").attr("r",8).attr("cx",function(e,t){return E.slack===t?(100-e.axisValue)*L.axisStep+L.indentLeft:e.axisValue*L.axisStep+L.indentLeft}).attr("cy","0").attr("index",function(e,t){return t}).attr("class","slider-handle").attr("id",function(e,t){return"slider"+t}).call(z)}function d(e,t){t&&F.selectAll(".design-space-diamond").remove(),e.append("g").attr("id",function(e,t){return"diamond"+t}).attr("transform",function(e,t){return E.slack===t?"translate("+((100-e.axisValue)*L.axisStep+L.indentPlusDiamond)+", -28)":"translate("+(e.axisValue*L.axisStep+L.indentPlusDiamond)+", -28)"}).append("polygon").attr("points",L.diamondShape).attr("fill",$.color).attr("stroke",$.color).attr("class","design-space-diamond instance-"+$.name).attr("stroke-width",2)}function m(t){var n,r=t.append("g").attr("transform",function(e,t){n=t===E.slack?L.leftOffset-10:L.rightTextLeftPoint;var r=L.paddingLabel;return"translate("+n+","+r+")"}).attr("class","slider-label-container").style("display",function(e,t){return t!=E.slack||E.axes.length<3?"block":"none"});r.append("rect").attr("x","0").attr("y","-15").attr("width","100").attr("height","20").attr("class","slider-hover-square"),r.append("text").text(function(e,t){return e.master.displayName}).attr("id",function(e,t){return"slider-label-"+t}).attr("x",4);var i=r.append("g").attr("transform",function(e,t){var n=document.getElementById("slider-label-"+t).getBoundingClientRect().width;return n+=L.paddingRemoveButton+10,"translate("+n+",0)"}).attr("class","remove-master-g");
i.append("circle").attr("cx",3).attr("cy",-2).attr("r",7).attr("class","remove-master-bg"),i.append("text").attr("x",0).attr("y","2").text("Ã").attr("class","remove-master-text").on("click",function(t,n){e.removeMaster(t.master,E)})}function g(){var e=D.append("g").attr("transform",function(e,t){var n=L.leftOffset,r=L.axisDistance+L.paddingTop;return"translate("+n+","+r+")"}).attr("class","slider-container");e.append("path").attr("d",function(e,t){return L.axesString}).attr("class","slider-axis"),e.append("text").attr("x",L.rightTextLeftPoint).attr("y",L.paddingLabel).text("Just one more...").attr("class","label-right-inactive slider-label")}function v(){var e;j.selectAll("g").data(N).enter().append("g").attr("transform",function(e,t){var n=t*L.axisDistance+L.paddingTop-28;return"translate(0, "+n+")"}).attr("class",function(e,t){return"inactive-axis-"+t}).selectAll("g").data(function(e,t){return e}).enter().append("g").attr("transform",function(t,n){return e=t.slack?L.paddingLeft-L.diamondsize+L.axisWidth/100*(100-t.value):L.paddingLeft-L.diamondsize+L.axisWidth/100*t.value,"translate("+e+", 0)"}).attr("class",function(e,t){return"inactive-instance-"+t}).append("polygon").attr("points",L.diamondShape).attr("class",function(e,t){return"design-space-diamond instance-"+e.name}).attr("stroke",function(e,t){return e.color}).attr("fill","none").attr("stroke-width",2)}function y(){b(),_()}function b(){L.elementWidth=n(r).outerWidth(),L.axisWidth=L.elementWidth-200,e.axisWidth=L.axisWidth,e.paddingTop=L.paddingTop,e.axisDistance=L.axisDistance,e.paddingLeft=L.paddingLeft}function _(){L.leftOffset=L.paddingLeft-L.indentLeft,L.axisRightPoint=L.indentLeft+L.axisWidth,L.rightTextLeftPoint=L.paddingLeft+L.axisWidth-L.indentRight,L.axisStep=L.axisWidth/100,L.indentPlusDiamond=L.indentLeft-L.diamondsize,L.axesString="M"+L.indentLeft+" 0  L"+L.axisRightPoint+" 0 L"+L.axisRightPoint+" "+L.axisTab,L.reverseAxesString="M"+L.indentLeft+" "+L.axisTab+" L"+L.indentLeft+" 0  L"+L.axisRightPoint+" 0"}function w(){D.selectAll("*").remove(),F.selectAll("*").remove(),j.selectAll("*").remove()}function x(e){if($.axes.length>1){for(var t=[],n=S(e),r=$.axes[n].axisValue,i=0;i<$.axes.length;i++)0!==r?t.push($.axes[i].axisValue/r):t.push(1);return t}}function S(e){for(var t,n=0,r=0;r<$.axes.length;r++)parseFloat($.axes[r].axisValue)>=n&&r!=e&&(t=r,n=parseFloat($.axes[r].axisValue));return t}function C(e,n){t.select("circle#slider"+e).attr("cx",n),t.select("path#axis-active"+e).attr("d","M"+L.indentLeft+" 0  L"+n+" 0"),t.select("g#diamond"+e).attr("transform","translate("+(n-L.diamondsize)+", -28)")}function k(e,n){t.select("circle#slider"+e).attr("cx",n),t.select("path#axis-active"+e).attr("d","M"+n+" 0 L"+L.axisRightPoint+" 0"),t.select("g#diamond"+e).attr("transform","translate("+(n-L.diamondsize)+", -28)")}function P(e,t){$.axes[e].axisValue=T(t)}function M(e){return e<L.indentLeft&&(e=L.indentLeft),e>L.axisWidth+L.indentLeft&&(e=L.axisWidth+L.indentLeft),e}function T(e){var t=Math.round(10*e)/10;return t.toFixed(1)}function A(e,t,n,r){for(var i=!0,o=0;o<e.axes.length;o++)e.axes[o].axisValue>n&&o!=t&&o!=r&&(i=!1);return i}n(window).resize(function(){y(),e.redraw()});var O=!1,E=null,$=null,N=[],I=t.select(r[0]).append("svg"),D=I.append("g").attr("class","single-layer"),j=I.append("g").attr("class","inactive-axes"),F=I.append("g").attr("class","active-axes"),L={elementWidth:null,axisWidth:null,paddingLeft:50,paddingTop:30,paddingLabel:25,axisDistance:60,axisTab:10,axisTabLeft:60,indentRight:20,indentLeft:40,diamondsize:7,diamondPadding:12,paddingRemoveButton:6,diamondShape:"10,2 4,2 2,6 7,15 12,6",axesString:null,reverseAxesString:null};y(),e.$watch("model.parent.currentInstance",function(){return a()}),e.$watchCollection("[model.parent.currentDesignSpace, model.axes.length]",function(){return e.redraw()}),e.redraw=function(){w(),s(),$&&u(),N.length>0&&v()};var R,U,V,q=null,z=t.behavior.drag().on("dragstart",function(){var e=E.slack,r=parseInt(t.select(this).attr("index"));n(".slider-container-"+r).attr("class","slider-container-"+r+" dragging"),e===r&&(R=x(e)),U=parseInt(t.select(this).attr("cx")),V=t.event.sourceEvent.clientX,O=!0}).on("drag",function(){var n=E.slack,r=t.event.sourceEvent.clientX,i=r-V,o=M(U+i),a=parseInt(t.select(this).attr("index")),s=(o-L.indentLeft)/L.axisStep;t.select(this).attr("type");if(a===n){k(n,o),P(a,100-s);for(var u=0;u<$.axes.length;u++)if(u!==n){var l=s*R[u],c=l*L.axisStep+L.indentLeft;C(u,c),P(u,l)}}else C(a,o),P(a,s),$.axes.length>1&&A($,a,s,n)&&(k(n,o),P(n,100-s));e.$apply()}).on("dragend",function(){var r=E.slack,i=t.event.sourceEvent.clientX,o=i-V,a=M(U+o),s=parseInt(t.select(this).attr("index")),u=(a-L.indentLeft)/L.axisStep;n(".slider-container-"+s).attr("class","slider-container-"+s+" not-dragging"),s===r&&(u=100-u),P(s,u),e.setMetapolationValues($),e.$apply(),O=!1})}}}return r.$inject=[],r}),define("metapolator/ui/metapolator/design-space-panel/control/control",["angular","./control-controller","./control-directive"],function(e,t,n){"use strict";return e.module("mtk.control",[]).controller("ControlController",t).directive("mtkControl",n)}),define("metapolator/ui/metapolator/design-space-panel/design-space-panel",["angular","./design-space-panel-controller","./design-space-panel-directive","./control/control","../rename/rename"],function(e,t,n,r,i){"use strict";return e.module("mtk.designSpacePanel",[r.name,i.name]).controller("DesignSpacePanelController",t).directive("mtkDesignSpacePanel",n)}),function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define("jszip",[],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.JSZip=e()}}(function(){var e;return function t(e,n,r){function i(a,s){if(!n[a]){if(!e[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(o)return o(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[a]={exports:{}};e[a][0].call(c.exports,function(t){var n=e[a][1][t];return i(n?n:t)},c,c.exports,t,e,n,r)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(e,t,n){"use strict";var r=e("./utils"),i=e("./support"),o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";n.encode=function(e){for(var t,n,i,a,s,u,l,c=[],h=0,f=e.length,p=f,d="string"!==r.getTypeOf(e);h<e.length;)p=f-h,d?(t=e[h++],n=f>h?e[h++]:0,i=f>h?e[h++]:0):(t=e.charCodeAt(h++),n=f>h?e.charCodeAt(h++):0,i=f>h?e.charCodeAt(h++):0),a=t>>2,s=(3&t)<<4|n>>4,u=p>1?(15&n)<<2|i>>6:64,l=p>2?63&i:64,c.push(o.charAt(a)+o.charAt(s)+o.charAt(u)+o.charAt(l));return c.join("")},n.decode=function(e){var t,n,r,a,s,u,l,c=0,h=0;e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");var f=3*e.length/4;e.charAt(e.length-1)===o.charAt(64)&&f--,e.charAt(e.length-2)===o.charAt(64)&&f--;var p;for(p=i.uint8array?new Uint8Array(f):new Array(f);c<e.length;)a=o.indexOf(e.charAt(c++)),s=o.indexOf(e.charAt(c++)),u=o.indexOf(e.charAt(c++)),l=o.indexOf(e.charAt(c++)),t=a<<2|s>>4,n=(15&s)<<4|u>>2,r=(3&u)<<6|l,p[h++]=t,64!==u&&(p[h++]=n),64!==l&&(p[h++]=r);return p}},{"./support":27,"./utils":29}],2:[function(e,t,n){"use strict";function r(e,t,n,r,i){this.compressedSize=e,this.uncompressedSize=t,this.crc32=n,this.compression=r,this.compressedContent=i}var i=e("./external"),o=e("./stream/DataWorker"),a=e("./stream/DataLengthProbe"),s=e("./stream/Crc32Probe"),a=e("./stream/DataLengthProbe");r.prototype={getContentWorker:function(){var e=new o(i.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new a("data_length")),t=this;return e.on("end",function(){if(this.streamInfo.data_length!==t.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),e},getCompressedWorker:function(){return new o(i.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},r.createWorkerFrom=function(e,t,n){return e.pipe(new s).pipe(new a("uncompressedSize")).pipe(t.compressWorker(n)).pipe(new a("compressedSize")).withStreamInfo("compression",t)},t.exports=r},{"./external":6,"./stream/Crc32Probe":22,"./stream/DataLengthProbe":23,"./stream/DataWorker":24}],3:[function(e,t,n){"use strict";var r=e("./stream/GenericWorker");n.STORE={magic:"\x00\x00",compressWorker:function(e){return new r("STORE compression")},uncompressWorker:function(){return new r("STORE decompression")}},n.DEFLATE=e("./flate")},{"./flate":7,"./stream/GenericWorker":25}],4:[function(e,t,n){"use strict";function r(){for(var e,t=[],n=0;256>n;n++){e=n;for(var r=0;8>r;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}function i(e,t,n,r){var i=s,o=r+n;e=-1^e;for(var a=r;o>a;a++)e=e>>>8^i[255&(e^t[a])];return-1^e}function o(e,t,n,r){var i=s,o=r+n;e=-1^e;for(var a=r;o>a;a++)e=e>>>8^i[255&(e^t.charCodeAt(a))];return-1^e}var a=e("./utils"),s=r();t.exports=function(e,t){if("undefined"==typeof e||!e.length)return 0;var n="string"!==a.getTypeOf(e);return n?i(0|t,e,e.length,0):o(0|t,e,e.length,0)}},{"./utils":29}],5:[function(e,t,n){"use strict";n.base64=!1,n.binary=!1,n.dir=!1,n.createFolders=!0,n.date=null,n.compression=null,n.compressionOptions=null,n.comment=null,n.unixPermissions=null,n.dosPermissions=null},{}],6:[function(e,t,n){"use strict";var r=e("es6-promise").Promise;t.exports={Promise:r}},{"es6-promise":37}],7:[function(e,t,n){"use strict";function r(e,t){s.call(this,"FlateWorker/"+e),this._pako=new o[e]({raw:!0,level:t.level||-1}),this.meta={};var n=this;this._pako.onData=function(e){n.push({data:e,meta:n.meta})}}var i="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,o=e("pako"),a=e("./utils"),s=e("./stream/GenericWorker"),u=i?"uint8array":"array";n.magic="\b\x00",a.inherits(r,s),r.prototype.processChunk=function(e){this.meta=e.meta,this._pako.push(a.transformTo(u,e.data),!1)},r.prototype.flush=function(){s.prototype.flush.call(this),this._pako.push([],!0)},r.prototype.cleanUp=function(){s.prototype.cleanUp.call(this),this._pako=null},n.compressWorker=function(e){return new r("Deflate",e)},n.uncompressWorker=function(){return new r("Inflate",{})}},{"./stream/GenericWorker":25,"./utils":29,pako:38}],8:[function(e,t,n){"use strict";function r(e,t,n,r){o.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=t,this.zipPlatform=n,this.encodeFileName=r,this.streamFiles=e,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}var i=e("../utils"),o=e("../stream/GenericWorker"),a=e("../utf8"),s=e("../crc32"),u=e("../signature"),l=function(e,t){var n,r="";for(n=0;t>n;n++)r+=String.fromCharCode(255&e),e>>>=8;return r},c=function(e,t){var n=e;return e||(n=t?16893:33204),(65535&n)<<16},h=function(e,t){return 63&(e||0)},f=function(e,t,n,r,o,f){var p,d,m=e.file,g=e.compression,v=f!==a.utf8encode,y=i.transformTo("string",f(m.name)),b=i.transformTo("string",a.utf8encode(m.name)),_=m.comment,w=i.transformTo("string",f(_)),x=i.transformTo("string",a.utf8encode(_)),S=b.length!==m.name.length,C=x.length!==_.length,k="",P="",M="",T=m.dir,A=m.date,O={crc32:0,compressedSize:0,uncompressedSize:0};(!t||n)&&(O.crc32=e.crc32,O.compressedSize=e.compressedSize,O.uncompressedSize=e.uncompressedSize);var E=0;t&&(E|=8),v||!S&&!C||(E|=2048);var $=0,N=0;T&&($|=16),"UNIX"===o?(N=798,$|=c(m.unixPermissions,T)):(N=20,$|=h(m.dosPermissions,T)),p=A.getUTCHours(),p<<=6,p|=A.getUTCMinutes(),p<<=5,p|=A.getUTCSeconds()/2,d=A.getUTCFullYear()-1980,d<<=4,d|=A.getUTCMonth()+1,d<<=5,d|=A.getUTCDate(),S&&(P=l(1,1)+l(s(y),4)+b,k+="up"+l(P.length,2)+P),C&&(M=l(1,1)+l(s(w),4)+x,k+="uc"+l(M.length,2)+M);var I="";I+="\n\x00",I+=l(E,2),I+=g.magic,I+=l(p,2),I+=l(d,2),I+=l(O.crc32,4),I+=l(O.compressedSize,4),I+=l(O.uncompressedSize,4),I+=l(y.length,2),I+=l(k.length,2);var D=u.LOCAL_FILE_HEADER+I+y+k,j=u.CENTRAL_FILE_HEADER+l(N,2)+I+l(w.length,2)+"\x00\x00\x00\x00"+l($,4)+l(r,4)+y+k+w;return{fileRecord:D,dirRecord:j}},p=function(e,t,n,r,o){var a="",s=i.transformTo("string",o(r));return a=u.CENTRAL_DIRECTORY_END+"\x00\x00\x00\x00"+l(e,2)+l(e,2)+l(t,4)+l(n,4)+l(s.length,2)+s},d=function(e){var t="";return t=u.DATA_DESCRIPTOR+l(e.crc32,4)+l(e.compressedSize,4)+l(e.uncompressedSize,4)};i.inherits(r,o),r.prototype.push=function(e){var t=e.meta.percent||0,n=this.entriesCount,r=this._sources.length;this.accumulate?this.contentBuffer.push(e):(this.bytesWritten+=e.data.length,o.prototype.push.call(this,{data:e.data,meta:{currentFile:this.currentFile,percent:n?(t+100*(n-r-1))/n:100}}))},r.prototype.openedSource=function(e){if(this.currentSourceOffset=this.bytesWritten,this.currentFile=e.file.name,this.streamFiles&&!e.file.dir){var t=f(e,this.streamFiles,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:t.fileRecord,meta:{percent:0}})}else this.accumulate=!0},r.prototype.closedSource=function(e){this.accumulate=!1;var t=f(e,this.streamFiles,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(t.dirRecord),this.streamFiles&&!e.file.dir)this.push({data:d(e),meta:{percent:100}});else for(this.push({data:t.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},r.prototype.flush=function(){for(var e=this.bytesWritten,t=0;t<this.dirRecords.length;t++)this.push({data:this.dirRecords[t],meta:{percent:100}});var n=this.bytesWritten-e,r=p(this.dirRecords.length,n,e,this.zipComment,this.encodeFileName);this.push({data:r,meta:{percent:100}})},r.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},r.prototype.registerPrevious=function(e){this._sources.push(e);var t=this;return e.on("data",function(e){t.processChunk(e)}),e.on("end",function(){t.closedSource(t.previous.streamInfo),t._sources.length?t.prepareNextSource():t.end()}),e.on("error",function(e){t.error(e)}),this},r.prototype.resume=function(){return o.prototype.resume.call(this)?!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0):!1},r.prototype.error=function(e){var t=this._sources;if(!o.prototype.error.call(this,e))return!1;for(var n=0;n<t.length;n++)try{t[n].error(e)}catch(e){}return!0},r.prototype.lock=function(){o.prototype.lock.call(this);for(var e=this._sources,t=0;t<e.length;t++)e[t].lock()},t.exports=r},{"../crc32":4,"../signature":20,"../stream/GenericWorker":25,"../utf8":28,"../utils":29}],9:[function(e,t,n){"use strict";var r=e("../compressions"),i=e("./ZipFileWorker"),o=function(e,t){var n=e||t,i=r[n];if(!i)throw new Error(n+" is not a valid compression method !");return i};n.generateWorker=function(e,t,n){var r=new i(t.streamFiles,n,t.platform,t.encodeFileName),a=0;try{e.forEach(function(e,n){a++;var i=o(n.options.compression,t.compression),s=n.options.compressionOptions||t.compressionOptions||{},u=n.dir,l=n.date;n._compressWorker(i,s).withStreamInfo("file",{name:e,dir:u,date:l,comment:n.comment||"",unixPermissions:n.unixPermissions,dosPermissions:n.dosPermissions}).pipe(r)}),r.entriesCount=a}catch(s){r.error(s)}return r}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(e,t,n){"use strict";function r(){if(!(this instanceof r))return new r;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files={},this.comment=null,this.root="",this.clone=function(){var e=new r;for(var t in this)"function"!=typeof this[t]&&(e[t]=this[t]);return e}}r.prototype=e("./object"),r.prototype.loadAsync=e("./load"),r.support=e("./support"),r.defaults=e("./defaults"),r.loadAsync=function(e,t){return(new r).loadAsync(e,t)},r.external=e("./external"),t.exports=r},{"./defaults":5,"./external":6,"./load":11,"./object":13,"./support":27}],11:[function(e,t,n){"use strict";function r(e){return new o.Promise(function(t,n){var r=e.decompressed.getContentWorker().pipe(new u);r.on("error",function(e){n(e)}).on("end",function(){r.streamInfo.crc32!==e.decompressed.crc32?n(new Error("Corrupted zip : CRC32 mismatch")):t()}).resume()})}var i=e("./utils"),o=e("./external"),a=e("./utf8"),i=e("./utils"),s=e("./zipEntries"),u=e("./stream/Crc32Probe"),l=e("./nodejsUtils");t.exports=function(e,t){var n=this;return t=i.extend(t||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:a.utf8decode}),l.isNode&&l.isStream(e)?o.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):i.prepareContent("the loaded zip file",e,!0,t.optimizedBinaryString,t.base64).then(function(e){var n=new s(t);return n.load(e),n}).then(function(e){var n=[o.Promise.resolve(e)],i=e.files;if(t.checkCRC32)for(var a=0;a<i.length;a++)n.push(r(i[a]));return o.Promise.all(n)}).then(function(e){for(var r=e.shift(),i=r.files,o=0;o<i.length;o++){var a=i[o];n.file(a.fileNameStr,a.decompressed,{binary:!0,optimizedBinaryString:!0,date:a.date,dir:a.dir,comment:a.fileCommentStr.length?a.fileCommentStr:null,unixPermissions:a.unixPermissions,dosPermissions:a.dosPermissions,createFolders:t.createFolders})}return r.zipComment.length&&(n.comment=r.zipComment),n})}},{"./external":6,"./nodejsUtils":12,"./stream/Crc32Probe":22,"./utf8":28,"./utils":29,"./zipEntries":30}],12:[function(e,t,n){(function(e){"use strict";t.exports={isNode:"undefined"!=typeof e,newBuffer:function(t,n){return new e(t,n)},isBuffer:function(t){return e.isBuffer(t)},isStream:function(e){return e&&"function"==typeof e.on&&"function"==typeof e.pause&&"function"==typeof e.resume}}}).call(this,"undefined"!=typeof Buffer?Buffer:void 0)},{}],13:[function(e,t,n){"use strict";function r(e){return"[object RegExp]"===Object.prototype.toString.call(e)}var i=e("./utf8"),o=e("./utils"),a=e("./stream/GenericWorker"),s=e("./stream/StreamHelper"),u=e("./defaults"),l=e("./compressedObject"),c=e("./zipObject"),h=e("./generate"),f=e("./nodejsUtils"),p=e("./nodejs/NodejsStreamInputAdapter"),d=function(e,t,n){var r,i=o.getTypeOf(t);n=o.extend(n||{},u),n.date=n.date||new Date,null!==n.compression&&(n.compression=n.compression.toUpperCase()),"string"==typeof n.unixPermissions&&(n.unixPermissions=parseInt(n.unixPermissions,8)),n.unixPermissions&&16384&n.unixPermissions&&(n.dir=!0),n.dosPermissions&&16&n.dosPermissions&&(n.dir=!0),n.dir&&(e=g(e)),n.createFolders&&(r=m(e))&&v.call(this,r,!0);var s="string"===i&&n.binary===!1&&n.base64===!1;n.binary=!s;var h=t instanceof l&&0===t.uncompressedSize;(h||n.dir||!t||0===t.length)&&(n.base64=!1,n.binary=!0,t="",n.compression="STORE",i="string");var d=null;d=t instanceof l||t instanceof a?t:f.isNode&&f.isStream(t)?new p(e,t):o.prepareContent(e,t,n.binary,n.optimizedBinaryString,n.base64);var y=new c(e,d,n);this.files[e]=y},m=function(e){"/"===e.slice(-1)&&(e=e.substring(0,e.length-1));var t=e.lastIndexOf("/");return t>0?e.substring(0,t):""},g=function(e){return"/"!==e.slice(-1)&&(e+="/"),e},v=function(e,t){return t="undefined"!=typeof t?t:u.createFolders,e=g(e),this.files[e]||d.call(this,e,null,{dir:!0,createFolders:t}),this.files[e]},y={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(e){var t,n,r;for(t in this.files)this.files.hasOwnProperty(t)&&(r=this.files[t],n=t.slice(this.root.length,t.length),n&&t.slice(0,this.root.length)===this.root&&e(n,r))},filter:function(e){var t=[];return this.forEach(function(n,r){e(n,r)&&t.push(r)}),t},file:function(e,t,n){if(1===arguments.length){if(r(e)){var i=e;return this.filter(function(e,t){return!t.dir&&i.test(e)})}var o=this.files[this.root+e];return o&&!o.dir?o:null}return e=this.root+e,d.call(this,e,t,n),this},folder:function(e){if(!e)return this;if(r(e))return this.filter(function(t,n){return n.dir&&e.test(t)});var t=this.root+e,n=v.call(this,t),i=this.clone();return i.root=n.name,i},remove:function(e){e=this.root+e;var t=this.files[e];if(t||("/"!==e.slice(-1)&&(e+="/"),t=this.files[e]),t&&!t.dir)delete this.files[e];else for(var n=this.filter(function(t,n){return n.name.slice(0,e.length)===e}),r=0;r<n.length;r++)delete this.files[n[r].name];return this},generate:function(e){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(e){var t,n={};try{if(n=o.extend(e||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:i.utf8encode}),n.type=n.type.toLowerCase(),n.compression=n.compression.toUpperCase(),"binarystring"===n.type&&(n.type="string"),!n.type)throw new Error("No output type specified.");o.checkSupport(n.type),("darwin"===e.platform||"freebsd"===e.platform||"linux"===e.platform||"sunos"===e.platform)&&(e.platform="UNIX"),"win32"===e.platform&&(e.platform="DOS");var r=n.comment||this.comment||"";t=h.generateWorker(this,n,r)}catch(u){t=new a("error"),t.error(u)}return new s(t,n.type||"string",n.mimeType)},generateAsync:function(e,t){return this.generateInternalStream(e).accumulate(t)},generateNodeStream:function(e,t){return e=e||{},e.type||(e.type="nodebuffer"),this.generateInternalStream(e).toNodejsStream(t)}};t.exports=y},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":35,"./nodejsUtils":12,"./stream/GenericWorker":25,"./stream/StreamHelper":26,"./utf8":28,"./utils":29,"./zipObject":32}],14:[function(e,t,n){"use strict";function r(e){i.call(this,e);for(var t=0;t<this.data.length;t++)e[t]=255&e[t]}var i=e("./DataReader"),o=e("../utils");o.inherits(r,i),r.prototype.byteAt=function(e){return this.data[this.zero+e]},r.prototype.lastIndexOfSignature=function(e){for(var t=e.charCodeAt(0),n=e.charCodeAt(1),r=e.charCodeAt(2),i=e.charCodeAt(3),o=this.length-4;o>=0;--o)if(this.data[o]===t&&this.data[o+1]===n&&this.data[o+2]===r&&this.data[o+3]===i)return o-this.zero;return-1},r.prototype.readAndCheckSignature=function(e){var t=e.charCodeAt(0),n=e.charCodeAt(1),r=e.charCodeAt(2),i=e.charCodeAt(3),o=this.readData(4);return t===o[0]&&n===o[1]&&r===o[2]&&i===o[3]},r.prototype.readData=function(e){if(this.checkOffset(e),0===e)return[];var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=r},{"../utils":29,"./DataReader":15}],15:[function(e,t,n){"use strict";function r(e){this.data=e,this.length=e.length,this.index=0,this.zero=0}var i=e("../utils");r.prototype={checkOffset:function(e){this.checkIndex(this.index+e)},checkIndex:function(e){if(this.length<this.zero+e||0>e)throw new Error("End of data reached (data length = "+this.length+", asked index = "+e+"). Corrupted zip ?")},setIndex:function(e){this.checkIndex(e),this.index=e},skip:function(e){this.setIndex(this.index+e)},byteAt:function(e){},readInt:function(e){var t,n=0;for(this.checkOffset(e),t=this.index+e-1;t>=this.index;t--)n=(n<<8)+this.byteAt(t);return this.index+=e,n},readString:function(e){return i.transformTo("string",this.readData(e))},readData:function(e){},lastIndexOfSignature:function(e){},readAndCheckSignature:function(e){},readDate:function(){var e=this.readInt(4);return new Date(Date.UTC((e>>25&127)+1980,(e>>21&15)-1,e>>16&31,e>>11&31,e>>5&63,(31&e)<<1))}},t.exports=r},{"../utils":29}],16:[function(e,t,n){"use strict";function r(e){i.call(this,e)}var i=e("./Uint8ArrayReader"),o=e("../utils");o.inherits(r,i),r.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=r},{"../utils":29,"./Uint8ArrayReader":18}],17:[function(e,t,n){"use strict";function r(e){i.call(this,e)}var i=e("./DataReader"),o=e("../utils");o.inherits(r,i),r.prototype.byteAt=function(e){return this.data.charCodeAt(this.zero+e)},r.prototype.lastIndexOfSignature=function(e){return this.data.lastIndexOf(e)-this.zero},r.prototype.readAndCheckSignature=function(e){var t=this.readData(4);return e===t},r.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=r},{"../utils":29,"./DataReader":15}],18:[function(e,t,n){"use strict";function r(e){i.call(this,e)}var i=e("./ArrayReader"),o=e("../utils");o.inherits(r,i),r.prototype.readData=function(e){if(this.checkOffset(e),0===e)return new Uint8Array(0);var t=this.data.subarray(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=r},{"../utils":29,"./ArrayReader":14}],19:[function(e,t,n){"use strict";var r=e("../utils"),i=e("../support"),o=e("./ArrayReader"),a=e("./StringReader"),s=e("./NodeBufferReader"),u=e("./Uint8ArrayReader");t.exports=function(e){var t=r.getTypeOf(e);return r.checkSupport(t),"string"!==t||i.uint8array?"nodebuffer"===t?new s(e):i.uint8array?new u(r.transformTo("uint8array",e)):new o(r.transformTo("array",e)):new a(e)}},{"../support":27,"../utils":29,"./ArrayReader":14,"./NodeBufferReader":16,"./StringReader":17,"./Uint8ArrayReader":18}],20:[function(e,t,n){"use strict";n.LOCAL_FILE_HEADER="PK",n.CENTRAL_FILE_HEADER="PK",n.CENTRAL_DIRECTORY_END="PK",n.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK",n.ZIP64_CENTRAL_DIRECTORY_END="PK",n.DATA_DESCRIPTOR="PK\b"},{}],21:[function(e,t,n){"use strict";function r(e){i.call(this,"ConvertWorker to "+e),this.destType=e}var i=e("./GenericWorker"),o=e("../utils");o.inherits(r,i),r.prototype.processChunk=function(e){this.push({data:o.transformTo(this.destType,e.data),meta:e.meta})},t.exports=r},{"../utils":29,"./GenericWorker":25}],22:[function(e,t,n){"use strict";function r(){i.call(this,"Crc32Probe")}var i=e("./GenericWorker"),o=e("../crc32"),a=e("../utils");a.inherits(r,i),r.prototype.processChunk=function(e){this.streamInfo.crc32=o(e.data,this.streamInfo.crc32||0),this.push(e)},t.exports=r},{"../crc32":4,"../utils":29,"./GenericWorker":25}],23:[function(e,t,n){"use strict";function r(e){o.call(this,"DataLengthProbe for "+e),this.propName=e,this.withStreamInfo(e,0)}var i=e("../utils"),o=e("./GenericWorker");i.inherits(r,o),r.prototype.processChunk=function(e){if(e){var t=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=t+e.data.length}o.prototype.processChunk.call(this,e)},t.exports=r},{"../utils":29,"./GenericWorker":25}],24:[function(e,t,n){"use strict";function r(e){o.call(this,"DataWorker");var t=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,e.then(function(e){t.dataIsReady=!0,t.data=e,t.max=e&&e.length||0,t.type=i.getTypeOf(e),t.isPaused||t._tickAndRepeat()},function(e){t.error(e)})}var i=e("../utils"),o=e("./GenericWorker"),a=16384;i.inherits(r,o),r.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this.data=null},r.prototype.resume=function(){return o.prototype.resume.call(this)?(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,i.delay(this._tickAndRepeat,[],this)),!0):!1},r.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(i.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},r.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var e=a,t=null,n=Math.min(this.max,this.index+e);if(this.index>=this.max)return this.end();switch(this.type){case"string":t=this.data.substring(this.index,n);break;case"uint8array":t=this.data.subarray(this.index,n);break;case"array":case"nodebuffer":t=this.data.slice(this.index,n)}return this.index=n,this.push({data:t,meta:{percent:this.max?this.index/this.max*100:0}})},t.exports=r},{"../utils":29,"./GenericWorker":25}],25:[function(e,t,n){"use strict";function r(e){this.name=e||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}r.prototype={push:function(e){this.emit("data",e)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(e){this.emit("error",e)}return!0},error:function(e){return this.isFinished?!1:(this.isPaused?this.generatedError=e:(this.isFinished=!0,this.emit("error",e),this.previous&&this.previous.error(e),this.cleanUp()),!0)},on:function(e,t){return this._listeners[e].push(t),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(e,t){if(this._listeners[e])for(var n=0;n<this._listeners[e].length;n++)this._listeners[e][n].call(this,t)},pipe:function(e){return e.registerPrevious(this)},registerPrevious:function(e){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=e.streamInfo,this.mergeStreamInfo(),this.previous=e;var t=this;return e.on("data",function(e){t.processChunk(e)}),e.on("end",function(){t.end()}),e.on("error",function(e){t.error(e)}),this},pause:function(){return this.isPaused||this.isFinished?!1:(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;this.isPaused=!1;var e=!1;return this.generatedError&&(this.error(this.generatedError),e=!0),this.previous&&this.previous.resume(),!e},flush:function(){},processChunk:function(e){this.push(e)},withStreamInfo:function(e,t){return this.extraStreamInfo[e]=t,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var e in this.extraStreamInfo)this.extraStreamInfo.hasOwnProperty(e)&&(this.streamInfo[e]=this.extraStreamInfo[e])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var e="Worker "+this.name;return this.previous?this.previous+" -> "+e:e}},t.exports=r},{}],26:[function(e,t,n){(function(n){"use strict";function r(e,t,n){switch(e){case"blob":return s.newBlob(s.transformTo("arraybuffer",t),n);case"base64":return c.encode(t);default:return s.transformTo(e,t)}}function i(e,t){var r,i=0,o=null,a=0;for(r=0;r<t.length;r++)a+=t[r].length;switch(e){case"string":return t.join("");case"array":return Array.prototype.concat.apply([],t);case"uint8array":for(o=new Uint8Array(a),r=0;r<t.length;r++)o.set(t[r],i),i+=t[r].length;return o;case"nodebuffer":return n.concat(t);default:throw new Error("concat : unsupported type '"+e+"'")}}function o(e,t){return new f.Promise(function(n,o){var a=[],s=e._internalType,u=e._outputType,l=e._mimeType;e.on("data",function(e,n){a.push(e),t&&t(n)}).on("error",function(e){a=[],o(e)}).on("end",function(){try{var e=r(u,i(s,a),l);n(e)}catch(t){o(t)}a=[]}).resume()})}function a(e,t,n){var r=t;switch(t){case"blob":case"arraybuffer":r="uint8array";break;case"base64":r="string"}try{this._internalType=r,this._outputType=t,this._mimeType=n,s.checkSupport(r),this._worker=e.pipe(new u(r)),e.lock()}catch(i){this._worker=new l("error"),this._worker.error(i)}}var s=e("../utils"),u=e("./ConvertWorker"),l=e("./GenericWorker"),c=e("../base64"),h=e("../nodejs/NodejsStreamOutputAdapter"),f=e("../external");a.prototype={accumulate:function(e){return o(this,e)},on:function(e,t){var n=this;return"data"===e?this._worker.on(e,function(e){t.call(n,e.data,e.meta)}):this._worker.on(e,function(){s.delay(t,arguments,n)}),this},resume:function(){return s.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(e){if(s.checkSupport("nodestream"),"nodebuffer"!==this._outputType)throw new Error(this._outputType+" is not supported by this method");return new h(this,{objectMode:"nodebuffer"!==this._outputType},e)}},t.exports=a}).call(this,"undefined"!=typeof Buffer?Buffer:void 0)},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":35,
"../utils":29,"./ConvertWorker":21,"./GenericWorker":25}],27:[function(e,t,n){(function(t){"use strict";if(n.base64=!0,n.array=!0,n.string=!0,n.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,n.nodebuffer="undefined"!=typeof t,n.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)n.blob=!1;else{var r=new ArrayBuffer(0);try{n.blob=0===new Blob([r],{type:"application/zip"}).size}catch(i){try{var o=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,a=new o;a.append(r),n.blob=0===a.getBlob("application/zip").size}catch(i){n.blob=!1}}}n.nodestream=!!e("./nodejs/NodejsStreamOutputAdapter").prototype}).call(this,"undefined"!=typeof Buffer?Buffer:void 0)},{"./nodejs/NodejsStreamOutputAdapter":35}],28:[function(e,t,n){"use strict";function r(){u.call(this,"utf-8 decode"),this.leftOver=null}function i(){u.call(this,"utf-8 encode")}for(var o=e("./utils"),a=e("./support"),s=e("./nodejsUtils"),u=e("./stream/GenericWorker"),l=new Array(256),c=0;256>c;c++)l[c]=c>=252?6:c>=248?5:c>=240?4:c>=224?3:c>=192?2:1;l[254]=l[254]=1;var h=function(e){var t,n,r,i,o,s=e.length,u=0;for(i=0;s>i;i++)n=e.charCodeAt(i),55296===(64512&n)&&s>i+1&&(r=e.charCodeAt(i+1),56320===(64512&r)&&(n=65536+(n-55296<<10)+(r-56320),i++)),u+=128>n?1:2048>n?2:65536>n?3:4;for(t=a.uint8array?new Uint8Array(u):new Array(u),o=0,i=0;u>o;i++)n=e.charCodeAt(i),55296===(64512&n)&&s>i+1&&(r=e.charCodeAt(i+1),56320===(64512&r)&&(n=65536+(n-55296<<10)+(r-56320),i++)),128>n?t[o++]=n:2048>n?(t[o++]=192|n>>>6,t[o++]=128|63&n):65536>n?(t[o++]=224|n>>>12,t[o++]=128|n>>>6&63,t[o++]=128|63&n):(t[o++]=240|n>>>18,t[o++]=128|n>>>12&63,t[o++]=128|n>>>6&63,t[o++]=128|63&n);return t},f=function(e,t){var n;for(t=t||e.length,t>e.length&&(t=e.length),n=t-1;n>=0&&128===(192&e[n]);)n--;return 0>n?t:0===n?t:n+l[e[n]]>t?n:t},p=function(e){var t,n,r,i,a=e.length,s=new Array(2*a);for(n=0,t=0;a>t;)if(r=e[t++],128>r)s[n++]=r;else if(i=l[r],i>4)s[n++]=65533,t+=i-1;else{for(r&=2===i?31:3===i?15:7;i>1&&a>t;)r=r<<6|63&e[t++],i--;i>1?s[n++]=65533:65536>r?s[n++]=r:(r-=65536,s[n++]=55296|r>>10&1023,s[n++]=56320|1023&r)}return s.length!==n&&(s.subarray?s=s.subarray(0,n):s.length=n),o.applyFromCharCode(s)};n.utf8encode=function(e){return a.nodebuffer?s.newBuffer(e,"utf-8"):h(e)},n.utf8decode=function(e){return a.nodebuffer?o.transformTo("nodebuffer",e).toString("utf-8"):(e=o.transformTo(a.uint8array?"uint8array":"array",e),p(e))},o.inherits(r,u),r.prototype.processChunk=function(e){var t=o.transformTo(a.uint8array?"uint8array":"array",e.data);if(this.leftOver&&this.leftOver.length){if(a.uint8array){var r=t;t=new Uint8Array(r.length+this.leftOver.length),t.set(this.leftOver,0),t.set(r,this.leftOver.length)}else t=this.leftOver.concat(t);this.leftOver=null}var i=f(t),s=t;i!==t.length&&(a.uint8array?(s=t.subarray(0,i),this.leftOver=t.subarray(i,t.length)):(s=t.slice(0,i),this.leftOver=t.slice(i,t.length))),this.push({data:n.utf8decode(s),meta:e.meta})},r.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:n.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},n.Utf8DecodeWorker=r,o.inherits(i,u),i.prototype.processChunk=function(e){this.push({data:n.utf8encode(e.data),meta:e.meta})},n.Utf8EncodeWorker=i},{"./nodejsUtils":12,"./stream/GenericWorker":25,"./support":27,"./utils":29}],29:[function(e,t,n){"use strict";function r(e){var t=null;return t=u.uint8array?new Uint8Array(e.length):new Array(e.length),o(e,t)}function i(e){return e}function o(e,t){for(var n=0;n<e.length;++n)t[n]=255&e.charCodeAt(n);return t}function a(e){var t=65536,r=n.getTypeOf(e),i=!0;if("uint8array"===r?i=p.applyCanBeUsed.uint8array:"nodebuffer"===r&&(i=p.applyCanBeUsed.nodebuffer),i)for(;t>1;)try{return p.stringifyByChunk(e,r,t)}catch(o){t=Math.floor(t/2)}return p.stringifyByChar(e)}function s(e,t){for(var n=0;n<e.length;n++)t[n]=e[n];return t}var u=e("./support"),l=e("./base64"),c=e("./nodejsUtils"),h=e("asap"),f=e("./external");n.newBlob=function(e,t){n.checkSupport("blob");try{return new Blob([e],{type:t})}catch(r){try{var i=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,o=new i;return o.append(e),o.getBlob(t)}catch(r){throw new Error("Bug : can't construct the Blob.")}}};var p={stringifyByChunk:function(e,t,n){var r=[],i=0,o=e.length;if(n>=o)return String.fromCharCode.apply(null,e);for(;o>i;)"array"===t||"nodebuffer"===t?r.push(String.fromCharCode.apply(null,e.slice(i,Math.min(i+n,o)))):r.push(String.fromCharCode.apply(null,e.subarray(i,Math.min(i+n,o)))),i+=n;return r.join("")},stringifyByChar:function(e){for(var t="",n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return t},applyCanBeUsed:{uint8array:function(){try{return u.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch(e){return!1}}(),nodebuffer:function(){try{return u.nodebuffer&&1===String.fromCharCode.apply(null,c.newBuffer(1)).length}catch(e){return!1}}()}};n.applyFromCharCode=a;var d={};d.string={string:i,array:function(e){return o(e,new Array(e.length))},arraybuffer:function(e){return d.string.uint8array(e).buffer},uint8array:function(e){return o(e,new Uint8Array(e.length))},nodebuffer:function(e){return o(e,c.newBuffer(e.length))}},d.array={string:a,array:i,arraybuffer:function(e){return new Uint8Array(e).buffer},uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return c.newBuffer(e)}},d.arraybuffer={string:function(e){return a(new Uint8Array(e))},array:function(e){return s(new Uint8Array(e),new Array(e.byteLength))},arraybuffer:i,uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return c.newBuffer(new Uint8Array(e))}},d.uint8array={string:a,array:function(e){return s(e,new Array(e.length))},arraybuffer:function(e){return e.buffer},uint8array:i,nodebuffer:function(e){return c.newBuffer(e)}},d.nodebuffer={string:a,array:function(e){return s(e,new Array(e.length))},arraybuffer:function(e){return d.nodebuffer.uint8array(e).buffer},uint8array:function(e){return s(e,new Uint8Array(e.length))},nodebuffer:i},n.transformTo=function(e,t){if(t||(t=""),!e)return t;n.checkSupport(e);var r=n.getTypeOf(t),i=d[r][e](t);return i},n.getTypeOf=function(e){return"string"==typeof e?"string":"[object Array]"===Object.prototype.toString.call(e)?"array":u.nodebuffer&&c.isBuffer(e)?"nodebuffer":u.uint8array&&e instanceof Uint8Array?"uint8array":u.arraybuffer&&e instanceof ArrayBuffer?"arraybuffer":void 0},n.checkSupport=function(e){var t=u[e.toLowerCase()];if(!t)throw new Error(e+" is not supported by this platform")},n.MAX_VALUE_16BITS=65535,n.MAX_VALUE_32BITS=-1,n.pretty=function(e){var t,n,r="";for(n=0;n<(e||"").length;n++)t=e.charCodeAt(n),r+="\\x"+(16>t?"0":"")+t.toString(16).toUpperCase();return r},n.delay=function(e,t,n){h(function(){e.apply(n||null,t||[])})},n.inherits=function(e,t){var n=function(){};n.prototype=t.prototype,e.prototype=new n},n.extend=function(){var e,t,n={};for(e=0;e<arguments.length;e++)for(t in arguments[e])arguments[e].hasOwnProperty(t)&&"undefined"==typeof n[t]&&(n[t]=arguments[e][t]);return n},n.prepareContent=function(e,t,i,o,a){var s=null;return s=u.blob&&t instanceof Blob&&"undefined"!=typeof FileReader?new f.Promise(function(e,n){var r=new FileReader;r.onload=function(t){e(t.target.result)},r.onerror=function(e){n(e.target.error)},r.readAsArrayBuffer(t)}):f.Promise.resolve(t),s.then(function(t){var s=n.getTypeOf(t);return s?("arraybuffer"===s?t=n.transformTo("uint8array",t):"string"===s&&(a?t=l.decode(t):i&&o!==!0&&(t=r(t))),t):f.Promise.reject(new Error("The data of '"+e+"' is in an unsupported format !"))})}},{"./base64":1,"./external":6,"./nodejsUtils":12,"./support":27,asap:33}],30:[function(e,t,n){"use strict";function r(e){this.files=[],this.loadOptions=e}var i=e("./reader/readerFor"),o=e("./utils"),a=e("./signature"),s=e("./zipEntry"),u=(e("./utf8"),e("./support"));r.prototype={checkSignature:function(e){if(!this.reader.readAndCheckSignature(e)){this.reader.index-=4;var t=this.reader.readString(4);throw new Error("Corrupted zip or bug : unexpected signature ("+o.pretty(t)+", expected "+o.pretty(e)+")")}},isSignature:function(e,t){var n=this.reader.index;this.reader.setIndex(e);var r=this.reader.readString(4),i=r===t;return this.reader.setIndex(n),i},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var e=this.reader.readData(this.zipCommentLength),t=u.uint8array?"uint8array":"array",n=o.transformTo(t,e);this.zipComment=this.loadOptions.decodeFileName(n)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var e,t,n,r=this.zip64EndOfCentralSize-44,i=0;r>i;)e=this.reader.readInt(2),t=this.reader.readInt(4),n=this.reader.readData(t),this.zip64ExtensibleData[e]={id:e,length:t,value:n}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),this.disksCount>1)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var e,t;for(e=0;e<this.files.length;e++)t=this.files[e],this.reader.setIndex(t.localHeaderOffset),this.checkSignature(a.LOCAL_FILE_HEADER),t.readLocalPart(this.reader),t.handleUTF8(),t.processAttributes()},readCentralDir:function(){var e;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(a.CENTRAL_FILE_HEADER);)e=new s({zip64:this.zip64},this.loadOptions),e.readCentralPart(this.reader),this.files.push(e);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var e=this.reader.lastIndexOfSignature(a.CENTRAL_DIRECTORY_END);if(0>e){var t=!this.isSignature(0,a.LOCAL_FILE_HEADER);throw t?new Error("Can't find end of central directory : is this a zip file ? If it is, see http://stuk.github.io/jszip/documentation/howto/read_zip.html"):new Error("Corrupted zip : can't find end of central directory")}this.reader.setIndex(e);var n=e;if(this.checkSignature(a.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===o.MAX_VALUE_16BITS||this.diskWithCentralDirStart===o.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===o.MAX_VALUE_16BITS||this.centralDirRecords===o.MAX_VALUE_16BITS||this.centralDirSize===o.MAX_VALUE_32BITS||this.centralDirOffset===o.MAX_VALUE_32BITS){if(this.zip64=!0,e=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR),0>e)throw new Error("Corrupted zip : can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(e),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,a.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip : can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var r=this.centralDirOffset+this.centralDirSize;this.zip64&&(r+=20,r+=12+this.zip64EndOfCentralSize);var i=n-r;if(i>0)this.isSignature(n,a.CENTRAL_FILE_HEADER)||(this.reader.zero=i);else if(0>i)throw new Error("Corrupted zip: missing "+Math.abs(i)+" bytes.")},prepareReader:function(e){this.reader=i(e)},load:function(e){this.prepareReader(e),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},t.exports=r},{"./reader/readerFor":19,"./signature":20,"./support":27,"./utf8":28,"./utils":29,"./zipEntry":31}],31:[function(e,t,n){"use strict";function r(e,t){this.options=e,this.loadOptions=t}var i=e("./reader/readerFor"),o=e("./utils"),a=e("./compressedObject"),s=e("./crc32"),u=e("./utf8"),l=e("./compressions"),c=e("./support"),h=0,f=3,p=function(e){for(var t in l)if(l.hasOwnProperty(t)&&l[t].magic===e)return l[t];return null};r.prototype={isEncrypted:function(){return 1===(1&this.bitFlag)},useUTF8:function(){return 2048===(2048&this.bitFlag)},readLocalPart:function(e){var t,n;if(e.skip(22),this.fileNameLength=e.readInt(2),n=e.readInt(2),this.fileName=e.readData(this.fileNameLength),e.skip(n),-1===this.compressedSize||-1===this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough informations from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(t=p(this.compressionMethod),null===t)throw new Error("Corrupted zip : compression "+o.pretty(this.compressionMethod)+" unknown (inner file : "+o.transformTo("string",this.fileName)+")");this.decompressed=new a(this.compressedSize,this.uncompressedSize,this.crc32,t,e.readData(this.compressedSize))},readCentralPart:function(e){this.versionMadeBy=e.readInt(2),e.skip(2),this.bitFlag=e.readInt(2),this.compressionMethod=e.readString(2),this.date=e.readDate(),this.crc32=e.readInt(4),this.compressedSize=e.readInt(4),this.uncompressedSize=e.readInt(4);var t=e.readInt(2);if(this.extraFieldsLength=e.readInt(2),this.fileCommentLength=e.readInt(2),this.diskNumberStart=e.readInt(2),this.internalFileAttributes=e.readInt(2),this.externalFileAttributes=e.readInt(4),this.localHeaderOffset=e.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");e.skip(t),this.readExtraFields(e),this.parseZIP64ExtraField(e),this.fileComment=e.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var e=this.versionMadeBy>>8;this.dir=16&this.externalFileAttributes?!0:!1,e===h&&(this.dosPermissions=63&this.externalFileAttributes),e===f&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(e){if(this.extraFields[1]){var t=i(this.extraFields[1].value);this.uncompressedSize===o.MAX_VALUE_32BITS&&(this.uncompressedSize=t.readInt(8)),this.compressedSize===o.MAX_VALUE_32BITS&&(this.compressedSize=t.readInt(8)),this.localHeaderOffset===o.MAX_VALUE_32BITS&&(this.localHeaderOffset=t.readInt(8)),this.diskNumberStart===o.MAX_VALUE_32BITS&&(this.diskNumberStart=t.readInt(4))}},readExtraFields:function(e){var t,n,r,i=e.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});e.index<i;)t=e.readInt(2),n=e.readInt(2),r=e.readData(n),this.extraFields[t]={id:t,length:n,value:r}},handleUTF8:function(){var e=c.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=u.utf8decode(this.fileName),this.fileCommentStr=u.utf8decode(this.fileComment);else{var t=this.findExtraFieldUnicodePath();if(null!==t)this.fileNameStr=t;else{var n=o.transformTo(e,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(n)}var r=this.findExtraFieldUnicodeComment();if(null!==r)this.fileCommentStr=r;else{var i=o.transformTo(e,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(i)}}},findExtraFieldUnicodePath:function(){var e=this.extraFields[28789];if(e){var t=i(e.value);return 1!==t.readInt(1)?null:s(this.fileName)!==t.readInt(4)?null:u.utf8decode(t.readData(e.length-5))}return null},findExtraFieldUnicodeComment:function(){var e=this.extraFields[25461];if(e){var t=i(e.value);return 1!==t.readInt(1)?null:s(this.fileComment)!==t.readInt(4)?null:u.utf8decode(t.readData(e.length-5))}return null}},t.exports=r},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":19,"./support":27,"./utf8":28,"./utils":29}],32:[function(e,t,n){"use strict";var r=e("./stream/StreamHelper"),i=e("./stream/DataWorker"),o=e("./utf8"),a=e("./compressedObject"),s=e("./stream/GenericWorker"),u=function(e,t,n){this.name=e,this.dir=n.dir,this.date=n.date,this.comment=n.comment,this.unixPermissions=n.unixPermissions,this.dosPermissions=n.dosPermissions,this._data=t,this._dataBinary=n.binary,this.options={compression:n.compression,compressionOptions:n.compressionOptions}};u.prototype={internalStream:function(e){var t=e.toLowerCase(),n="string"===t||"text"===t;("binarystring"===t||"text"===t)&&(t="string");var i=this._decompressWorker(),a=!this._dataBinary;return a&&!n&&(i=i.pipe(new o.Utf8EncodeWorker)),!a&&n&&(i=i.pipe(new o.Utf8DecodeWorker)),new r(i,t,"")},async:function(e,t){return this.internalStream(e).accumulate(t)},nodeStream:function(e,t){return this.internalStream(e||"nodebuffer").toNodejsStream(t)},_compressWorker:function(e,t){if(this._data instanceof a&&this._data.compression.magic===e.magic)return this._data.getCompressedWorker();var n=this._decompressWorker();return this._dataBinary||(n=n.pipe(new o.Utf8EncodeWorker)),a.createWorkerFrom(n,e,t)},_decompressWorker:function(){return this._data instanceof a?this._data.getContentWorker():this._data instanceof s?this._data:new i(this._data)}};for(var l=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],c=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},h=0;h<l.length;h++)u.prototype[l[h]]=c;t.exports=u},{"./compressedObject":2,"./stream/DataWorker":24,"./stream/GenericWorker":25,"./stream/StreamHelper":26,"./utf8":28}],33:[function(e,t,n){"use strict";function r(){if(u.length)throw u.shift()}function i(e){var t;t=s.length?s.pop():new o,t.task=e,a(t)}function o(){this.task=null}var a=e("./raw"),s=[],u=[],l=a.makeRequestCallFromTimer(r);t.exports=i,o.prototype.call=function(){try{this.task.call()}catch(e){i.onerror?i.onerror(e):(u.push(e),l())}finally{this.task=null,s[s.length]=this}}},{"./raw":34}],34:[function(e,t,n){(function(e){"use strict";function n(e){s.length||(a(),u=!0),s[s.length]=e}function r(){for(;l<s.length;){var e=l;if(l+=1,s[e].call(),l>c){for(var t=0,n=s.length-l;n>t;t++)s[t]=s[t+l];s.length-=l,l=0}}s.length=0,l=0,u=!1}function i(e){var t=1,n=new h(e),r=document.createTextNode("");return n.observe(r,{characterData:!0}),function(){t=-t,r.data=t}}function o(e){return function(){function t(){clearTimeout(n),clearInterval(r),e()}var n=setTimeout(t,0),r=setInterval(t,50)}}t.exports=n;var a,s=[],u=!1,l=0,c=1024,h=e.MutationObserver||e.WebKitMutationObserver;a="function"==typeof h?i(r):o(r),n.requestFlush=a,n.makeRequestCallFromTimer=o}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],35:[function(e,t,n){},{}],36:[function(e,t,n){function r(){c=!1,s.length?l=s.concat(l):h=-1,l.length&&i()}function i(){if(!c){var e=setTimeout(r);c=!0;for(var t=l.length;t;){for(s=l,l=[];++h<t;)s&&s[h].run();h=-1,t=l.length}s=null,c=!1,clearTimeout(e)}}function o(e,t){this.fun=e,this.array=t}function a(){}var s,u=t.exports={},l=[],c=!1,h=-1;u.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new o(e,t)),1!==l.length||c||setTimeout(i,0)},o.prototype.run=function(){this.fun.apply(null,this.array)},u.title="browser",u.browser=!0,u.env={},u.argv=[],u.version="",u.versions={},u.on=a,u.addListener=a,u.once=a,u.off=a,u.removeListener=a,u.removeAllListeners=a,u.emit=a,u.binding=function(e){throw new Error("process.binding is not supported")},u.cwd=function(){return"/"},u.chdir=function(e){throw new Error("process.chdir is not supported")},u.umask=function(){return 0}},{}],37:[function(t,n,r){(function(r,i){(function(){"use strict";function o(e){return"function"==typeof e||"object"==typeof e&&null!==e}function a(e){return"function"==typeof e}function s(e){return"object"==typeof e&&null!==e}function u(e){G=e}function l(e){K=e}function c(){return function(){r.nextTick(m)}}function h(){return function(){H(m)}}function f(){var e=0,t=new J(m),n=document.createTextNode("");return t.observe(n,{characterData:!0}),function(){n.data=e=++e%2}}function p(){var e=new MessageChannel;return e.port1.onmessage=m,function(){e.port2.postMessage(0)}}function d(){return function(){setTimeout(m,1)}}function m(){for(var e=0;X>e;e+=2){var t=ne[e],n=ne[e+1];t(n),ne[e]=void 0,ne[e+1]=void 0}X=0}function g(){try{var e=t,n=e("vertx");return H=n.runOnLoop||n.runOnContext,h()}catch(r){return d()}}function v(){}function y(){return new TypeError("You cannot resolve a promise with itself")}function b(){return new TypeError("A promises callback cannot return that same promise.")}function _(e){try{return e.then}catch(t){return ae.error=t,ae}}function w(e,t,n,r){try{e.call(t,n,r)}catch(i){return i}}function x(e,t,n){K(function(e){var r=!1,i=w(n,t,function(n){r||(r=!0,t!==n?k(e,n):M(e,n))},function(t){r||(r=!0,T(e,t))},"Settle: "+(e._label||" unknown promise"));!r&&i&&(r=!0,T(e,i))},e)}function S(e,t){t._state===ie?M(e,t._result):t._state===oe?T(e,t._result):A(t,void 0,function(t){k(e,t)},function(t){T(e,t)})}function C(e,t){if(t.constructor===e.constructor)S(e,t);else{var n=_(t);n===ae?T(e,ae.error):void 0===n?M(e,t):a(n)?x(e,t,n):M(e,t)}}function k(e,t){e===t?T(e,y()):o(t)?C(e,t):M(e,t)}function P(e){e._onerror&&e._onerror(e._result),O(e)}function M(e,t){e._state===re&&(e._result=t,e._state=ie,0!==e._subscribers.length&&K(O,e))}function T(e,t){e._state===re&&(e._state=oe,e._result=t,K(P,e))}function A(e,t,n,r){var i=e._subscribers,o=i.length;e._onerror=null,i[o]=t,i[o+ie]=n,i[o+oe]=r,0===o&&e._state&&K(O,e)}function O(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var r,i,o=e._result,a=0;a<t.length;a+=3)r=t[a],i=t[a+n],r?N(n,r,i,o):i(o);e._subscribers.length=0}}function E(){this.error=null}function $(e,t){try{return e(t)}catch(n){return se.error=n,se}}function N(e,t,n,r){var i,o,s,u,l=a(n);if(l){if(i=$(n,r),i===se?(u=!0,o=i.error,i=null):s=!0,t===i)return void T(t,b())}else i=r,s=!0;t._state!==re||(l&&s?k(t,i):u?T(t,o):e===ie?M(t,i):e===oe&&T(t,i))}function I(e,t){try{t(function(t){k(e,t)},function(t){T(e,t)})}catch(n){T(e,n)}}function D(e,t){var n=this;n._instanceConstructor=e,n.promise=new e(v),n._validateInput(t)?(n._input=t,n.length=t.length,n._remaining=t.length,n._init(),0===n.length?M(n.promise,n._result):(n.length=n.length||0,n._enumerate(),0===n._remaining&&M(n.promise,n._result))):T(n.promise,n._validationError())}function j(e){return new ue(this,e).promise}function F(e){function t(e){k(i,e)}function n(e){T(i,e)}var r=this,i=new r(v);if(!Y(e))return T(i,new TypeError("You must pass an array to race.")),i;for(var o=e.length,a=0;i._state===re&&o>a;a++)A(r.resolve(e[a]),void 0,t,n);return i}function L(e){var t=this;if(e&&"object"==typeof e&&e.constructor===t)return e;var n=new t(v);return k(n,e),n}function R(e){var t=this,n=new t(v);return T(n,e),n}function U(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function V(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function q(e){this._id=pe++,this._state=void 0,this._result=void 0,this._subscribers=[],v!==e&&(a(e)||U(),this instanceof q||V(),I(this,e))}function z(){var e;if("undefined"!=typeof i)e=i;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var n=e.Promise;(!n||"[object Promise]"!==Object.prototype.toString.call(n.resolve())||n.cast)&&(e.Promise=de)}var B;B=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)};var H,G,W,Y=B,X=0,K=({}.toString,function(e,t){ne[X]=e,ne[X+1]=t,X+=2,2===X&&(G?G(m):W())}),Z="undefined"!=typeof window?window:void 0,Q=Z||{},J=Q.MutationObserver||Q.WebKitMutationObserver,ee="undefined"!=typeof r&&"[object process]"==={}.toString.call(r),te="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,ne=new Array(1e3);W=ee?c():J?f():te?p():void 0===Z&&"function"==typeof t?g():d();var re=void 0,ie=1,oe=2,ae=new E,se=new E;D.prototype._validateInput=function(e){return Y(e)},D.prototype._validationError=function(){return new Error("Array Methods must be provided an Array")},D.prototype._init=function(){this._result=new Array(this.length)};var ue=D;D.prototype._enumerate=function(){for(var e=this,t=e.length,n=e.promise,r=e._input,i=0;n._state===re&&t>i;i++)e._eachEntry(r[i],i)},D.prototype._eachEntry=function(e,t){var n=this,r=n._instanceConstructor;s(e)?e.constructor===r&&e._state!==re?(e._onerror=null,n._settledAt(e._state,t,e._result)):n._willSettleAt(r.resolve(e),t):(n._remaining--,n._result[t]=e)},D.prototype._settledAt=function(e,t,n){var r=this,i=r.promise;i._state===re&&(r._remaining--,e===oe?T(i,n):r._result[t]=n),0===r._remaining&&M(i,r._result)},D.prototype._willSettleAt=function(e,t){var n=this;A(e,void 0,function(e){n._settledAt(ie,t,e)},function(e){n._settledAt(oe,t,e)})};var le=j,ce=F,he=L,fe=R,pe=0,de=q;q.all=le,q.race=ce,q.resolve=he,q.reject=fe,q._setScheduler=u,q._setAsap=l,q._asap=K,q.prototype={constructor:q,then:function(e,t){var n=this,r=n._state;if(r===ie&&!e||r===oe&&!t)return this;var i=new this.constructor(v),o=n._result;if(r){var a=arguments[r-1];K(function(){N(r,i,a,o)})}else A(n,i,e,t);return i},"catch":function(e){return this.then(null,e)}};var me=z,ge={Promise:de,polyfill:me};"function"==typeof e&&e.amd?e(function(){return ge}):"undefined"!=typeof n&&n.exports?n.exports=ge:"undefined"!=typeof this&&(this.ES6Promise=ge),me()}).call(this)}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:36}],38:[function(e,t,n){var r=e("./lib/utils/common").assign,i=e("./lib/deflate"),o=e("./lib/inflate"),a=e("./lib/zlib/constants"),s={};r(s,i,o,a),t.exports=s},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(e,t,n){"use strict";function r(e){if(!(this instanceof r))return new r(e);this.options=u.assign({level:y,method:_,chunkSize:16384,windowBits:15,memLevel:8,strategy:b,to:""},e||{});var t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new h,this.strm.avail_out=0;var n=s.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==m)throw new Error(c[n]);if(t.header&&s.deflateSetHeader(this.strm,t.header),t.dictionary){var i;if(i="string"==typeof t.dictionary?l.string2buf(t.dictionary):"[object ArrayBuffer]"===f.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,n=s.deflateSetDictionary(this.strm,i),n!==m)throw new Error(c[n]);this._dict_set=!0}}function i(e,t){var n=new r(t);if(n.push(e,!0),n.err)throw n.msg;return n.result}function o(e,t){return t=t||{},t.raw=!0,i(e,t)}function a(e,t){return t=t||{},t.gzip=!0,i(e,t)}var s=e("./zlib/deflate"),u=e("./utils/common"),l=e("./utils/strings"),c=e("./zlib/messages"),h=e("./zlib/zstream"),f=Object.prototype.toString,p=0,d=4,m=0,g=1,v=2,y=-1,b=0,_=8;r.prototype.push=function(e,t){var n,r,i=this.strm,o=this.options.chunkSize;if(this.ended)return!1;r=t===~~t?t:t===!0?d:p,"string"==typeof e?i.input=l.string2buf(e):"[object ArrayBuffer]"===f.call(e)?i.input=new Uint8Array(e):i.input=e,i.next_in=0,i.avail_in=i.input.length;do{if(0===i.avail_out&&(i.output=new u.Buf8(o),i.next_out=0,i.avail_out=o),n=s.deflate(i,r),n!==g&&n!==m)return this.onEnd(n),this.ended=!0,!1;(0===i.avail_out||0===i.avail_in&&(r===d||r===v))&&("string"===this.options.to?this.onData(l.buf2binstring(u.shrinkBuf(i.output,i.next_out))):this.onData(u.shrinkBuf(i.output,i.next_out)))}while((i.avail_in>0||0===i.avail_out)&&n!==g);return r===d?(n=s.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===m):r===v?(this.onEnd(m),i.avail_out=0,!0):!0},r.prototype.onData=function(e){this.chunks.push(e)},r.prototype.onEnd=function(e){e===m&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=u.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},n.Deflate=r,n.deflate=i,n.deflateRaw=o,n.gzip=a},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(e,t,n){"use strict";function r(e){if(!(this instanceof r))return new r(e);this.options=s.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0===(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new h,this.strm.avail_out=0;var n=a.inflateInit2(this.strm,t.windowBits);if(n!==l.Z_OK)throw new Error(c[n]);this.header=new f,a.inflateGetHeader(this.strm,this.header)}function i(e,t){var n=new r(t);if(n.push(e,!0),n.err)throw n.msg;return n.result}function o(e,t){return t=t||{},t.raw=!0,i(e,t)}var a=e("./zlib/inflate"),s=e("./utils/common"),u=e("./utils/strings"),l=e("./zlib/constants"),c=e("./zlib/messages"),h=e("./zlib/zstream"),f=e("./zlib/gzheader"),p=Object.prototype.toString;r.prototype.push=function(e,t){var n,r,i,o,c,h,f=this.strm,d=this.options.chunkSize,m=this.options.dictionary,g=!1;if(this.ended)return!1;r=t===~~t?t:t===!0?l.Z_FINISH:l.Z_NO_FLUSH,"string"==typeof e?f.input=u.binstring2buf(e):"[object ArrayBuffer]"===p.call(e)?f.input=new Uint8Array(e):f.input=e,f.next_in=0,f.avail_in=f.input.length;do{if(0===f.avail_out&&(f.output=new s.Buf8(d),f.next_out=0,f.avail_out=d),n=a.inflate(f,l.Z_NO_FLUSH),n===l.Z_NEED_DICT&&m&&(h="string"==typeof m?u.string2buf(m):"[object ArrayBuffer]"===p.call(m)?new Uint8Array(m):m,n=a.inflateSetDictionary(this.strm,h)),n===l.Z_BUF_ERROR&&g===!0&&(n=l.Z_OK,g=!1),n!==l.Z_STREAM_END&&n!==l.Z_OK)return this.onEnd(n),this.ended=!0,!1;f.next_out&&(0===f.avail_out||n===l.Z_STREAM_END||0===f.avail_in&&(r===l.Z_FINISH||r===l.Z_SYNC_FLUSH))&&("string"===this.options.to?(i=u.utf8border(f.output,f.next_out),o=f.next_out-i,c=u.buf2string(f.output,i),f.next_out=o,f.avail_out=d-o,o&&s.arraySet(f.output,f.output,i,o,0),this.onData(c)):this.onData(s.shrinkBuf(f.output,f.next_out))),0===f.avail_in&&0===f.avail_out&&(g=!0)}while((f.avail_in>0||0===f.avail_out)&&n!==l.Z_STREAM_END);return n===l.Z_STREAM_END&&(r=l.Z_FINISH),r===l.Z_FINISH?(n=a.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===l.Z_OK):r===l.Z_SYNC_FLUSH?(this.onEnd(l.Z_OK),f.avail_out=0,!0):!0},r.prototype.onData=function(e){this.chunks.push(e)},r.prototype.onEnd=function(e){e===l.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},n.Inflate=r,n.inflate=i,n.inflateRaw=o,n.ungzip=i},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(e,t,n){"use strict";var r="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;n.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var n=t.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(var r in n)n.hasOwnProperty(r)&&(e[r]=n[r])}}return e},n.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,
e)};var i={arraySet:function(e,t,n,r,i){if(t.subarray&&e.subarray)return void e.set(t.subarray(n,n+r),i);for(var o=0;r>o;o++)e[i+o]=t[n+o]},flattenChunks:function(e){var t,n,r,i,o,a;for(r=0,t=0,n=e.length;n>t;t++)r+=e[t].length;for(a=new Uint8Array(r),i=0,t=0,n=e.length;n>t;t++)o=e[t],a.set(o,i),i+=o.length;return a}},o={arraySet:function(e,t,n,r,i){for(var o=0;r>o;o++)e[i+o]=t[n+o]},flattenChunks:function(e){return[].concat.apply([],e)}};n.setTyped=function(e){e?(n.Buf8=Uint8Array,n.Buf16=Uint16Array,n.Buf32=Int32Array,n.assign(n,i)):(n.Buf8=Array,n.Buf16=Array,n.Buf32=Array,n.assign(n,o))},n.setTyped(r)},{}],42:[function(e,t,n){function r(e,t){if(65537>t&&(e.subarray&&a||!e.subarray&&o))return String.fromCharCode.apply(null,i.shrinkBuf(e,t));for(var n="",r=0;t>r;r++)n+=String.fromCharCode(e[r]);return n}var i=e("./common"),o=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch(s){o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(s){a=!1}for(var u=new i.Buf8(256),l=0;256>l;l++)u[l]=l>=252?6:l>=248?5:l>=240?4:l>=224?3:l>=192?2:1;u[254]=u[254]=1,n.string2buf=function(e){var t,n,r,o,a,s=e.length,u=0;for(o=0;s>o;o++)n=e.charCodeAt(o),55296===(64512&n)&&s>o+1&&(r=e.charCodeAt(o+1),56320===(64512&r)&&(n=65536+(n-55296<<10)+(r-56320),o++)),u+=128>n?1:2048>n?2:65536>n?3:4;for(t=new i.Buf8(u),a=0,o=0;u>a;o++)n=e.charCodeAt(o),55296===(64512&n)&&s>o+1&&(r=e.charCodeAt(o+1),56320===(64512&r)&&(n=65536+(n-55296<<10)+(r-56320),o++)),128>n?t[a++]=n:2048>n?(t[a++]=192|n>>>6,t[a++]=128|63&n):65536>n?(t[a++]=224|n>>>12,t[a++]=128|n>>>6&63,t[a++]=128|63&n):(t[a++]=240|n>>>18,t[a++]=128|n>>>12&63,t[a++]=128|n>>>6&63,t[a++]=128|63&n);return t},n.buf2binstring=function(e){return r(e,e.length)},n.binstring2buf=function(e){for(var t=new i.Buf8(e.length),n=0,r=t.length;r>n;n++)t[n]=e.charCodeAt(n);return t},n.buf2string=function(e,t){var n,i,o,a,s=t||e.length,l=new Array(2*s);for(i=0,n=0;s>n;)if(o=e[n++],128>o)l[i++]=o;else if(a=u[o],a>4)l[i++]=65533,n+=a-1;else{for(o&=2===a?31:3===a?15:7;a>1&&s>n;)o=o<<6|63&e[n++],a--;a>1?l[i++]=65533:65536>o?l[i++]=o:(o-=65536,l[i++]=55296|o>>10&1023,l[i++]=56320|1023&o)}return r(l,i)},n.utf8border=function(e,t){var n;for(t=t||e.length,t>e.length&&(t=e.length),n=t-1;n>=0&&128===(192&e[n]);)n--;return 0>n?t:0===n?t:n+u[e[n]]>t?n:t}},{"./common":41}],43:[function(e,t,n){"use strict";function r(e,t,n,r){for(var i=65535&e|0,o=e>>>16&65535|0,a=0;0!==n;){a=n>2e3?2e3:n,n-=a;do i=i+t[r++]|0,o=o+i|0;while(--a);i%=65521,o%=65521}return i|o<<16|0}t.exports=r},{}],44:[function(e,t,n){"use strict";t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(e,t,n){"use strict";function r(){for(var e,t=[],n=0;256>n;n++){e=n;for(var r=0;8>r;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}function i(e,t,n,r){var i=o,a=r+n;e^=-1;for(var s=r;a>s;s++)e=e>>>8^i[255&(e^t[s])];return-1^e}var o=r();t.exports=i},{}],46:[function(e,t,n){"use strict";function r(e,t){return e.msg=I[t],t}function i(e){return(e<<1)-(e>4?9:0)}function o(e){for(var t=e.length;--t>=0;)e[t]=0}function a(e){var t=e.state,n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(O.arraySet(e.output,t.pending_buf,t.pending_out,n,e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))}function s(e,t){E._tr_flush_block(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,a(e.strm)}function u(e,t){e.pending_buf[e.pending++]=t}function l(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function c(e,t,n,r){var i=e.avail_in;return i>r&&(i=r),0===i?0:(e.avail_in-=i,O.arraySet(t,e.input,e.next_in,i,n),1===e.state.wrap?e.adler=$(e.adler,t,i,n):2===e.state.wrap&&(e.adler=N(e.adler,t,i,n)),e.next_in+=i,e.total_in+=i,i)}function h(e,t){var n,r,i=e.max_chain_length,o=e.strstart,a=e.prev_length,s=e.nice_match,u=e.strstart>e.w_size-he?e.strstart-(e.w_size-he):0,l=e.window,c=e.w_mask,h=e.prev,f=e.strstart+ce,p=l[o+a-1],d=l[o+a];e.prev_length>=e.good_match&&(i>>=2),s>e.lookahead&&(s=e.lookahead);do if(n=t,l[n+a]===d&&l[n+a-1]===p&&l[n]===l[o]&&l[++n]===l[o+1]){o+=2,n++;do;while(l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&f>o);if(r=ce-(f-o),o=f-ce,r>a){if(e.match_start=t,a=r,r>=s)break;p=l[o+a-1],d=l[o+a]}}while((t=h[t&c])>u&&0!==--i);return a<=e.lookahead?a:e.lookahead}function f(e){var t,n,r,i,o,a=e.w_size;do{if(i=e.window_size-e.lookahead-e.strstart,e.strstart>=a+(a-he)){O.arraySet(e.window,e.window,a,a,0),e.match_start-=a,e.strstart-=a,e.block_start-=a,n=e.hash_size,t=n;do r=e.head[--t],e.head[t]=r>=a?r-a:0;while(--n);n=a,t=n;do r=e.prev[--t],e.prev[t]=r>=a?r-a:0;while(--n);i+=a}if(0===e.strm.avail_in)break;if(n=c(e.strm,e.window,e.strstart+e.lookahead,i),e.lookahead+=n,e.lookahead+e.insert>=le)for(o=e.strstart-e.insert,e.ins_h=e.window[o],e.ins_h=(e.ins_h<<e.hash_shift^e.window[o+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[o+le-1])&e.hash_mask,e.prev[o&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=o,o++,e.insert--,!(e.lookahead+e.insert<le)););}while(e.lookahead<he&&0!==e.strm.avail_in)}function p(e,t){var n=65535;for(n>e.pending_buf_size-5&&(n=e.pending_buf_size-5);;){if(e.lookahead<=1){if(f(e),0===e.lookahead&&t===D)return _e;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var r=e.block_start+n;if((0===e.strstart||e.strstart>=r)&&(e.lookahead=e.strstart-r,e.strstart=r,s(e,!1),0===e.strm.avail_out))return _e;if(e.strstart-e.block_start>=e.w_size-he&&(s(e,!1),0===e.strm.avail_out))return _e}return e.insert=0,t===L?(s(e,!0),0===e.strm.avail_out?xe:Se):e.strstart>e.block_start&&(s(e,!1),0===e.strm.avail_out)?_e:_e}function d(e,t){for(var n,r;;){if(e.lookahead<he){if(f(e),e.lookahead<he&&t===D)return _e;if(0===e.lookahead)break}if(n=0,e.lookahead>=le&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+le-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-he&&(e.match_length=h(e,n)),e.match_length>=le)if(r=E._tr_tally(e,e.strstart-e.match_start,e.match_length-le),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=le){e.match_length--;do e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+le-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(0!==--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else r=E._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(s(e,!1),0===e.strm.avail_out))return _e}return e.insert=e.strstart<le-1?e.strstart:le-1,t===L?(s(e,!0),0===e.strm.avail_out?xe:Se):e.last_lit&&(s(e,!1),0===e.strm.avail_out)?_e:we}function m(e,t){for(var n,r,i;;){if(e.lookahead<he){if(f(e),e.lookahead<he&&t===D)return _e;if(0===e.lookahead)break}if(n=0,e.lookahead>=le&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+le-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=le-1,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-he&&(e.match_length=h(e,n),e.match_length<=5&&(e.strategy===G||e.match_length===le&&e.strstart-e.match_start>4096)&&(e.match_length=le-1)),e.prev_length>=le&&e.match_length<=e.prev_length){i=e.strstart+e.lookahead-le,r=E._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-le),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=i&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+le-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(0!==--e.prev_length);if(e.match_available=0,e.match_length=le-1,e.strstart++,r&&(s(e,!1),0===e.strm.avail_out))return _e}else if(e.match_available){if(r=E._tr_tally(e,0,e.window[e.strstart-1]),r&&s(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return _e}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=E._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<le-1?e.strstart:le-1,t===L?(s(e,!0),0===e.strm.avail_out?xe:Se):e.last_lit&&(s(e,!1),0===e.strm.avail_out)?_e:we}function g(e,t){for(var n,r,i,o,a=e.window;;){if(e.lookahead<=ce){if(f(e),e.lookahead<=ce&&t===D)return _e;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=le&&e.strstart>0&&(i=e.strstart-1,r=a[i],r===a[++i]&&r===a[++i]&&r===a[++i])){o=e.strstart+ce;do;while(r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&o>i);e.match_length=ce-(o-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=le?(n=E._tr_tally(e,1,e.match_length-le),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=E._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(s(e,!1),0===e.strm.avail_out))return _e}return e.insert=0,t===L?(s(e,!0),0===e.strm.avail_out?xe:Se):e.last_lit&&(s(e,!1),0===e.strm.avail_out)?_e:we}function v(e,t){for(var n;;){if(0===e.lookahead&&(f(e),0===e.lookahead)){if(t===D)return _e;break}if(e.match_length=0,n=E._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(s(e,!1),0===e.strm.avail_out))return _e}return e.insert=0,t===L?(s(e,!0),0===e.strm.avail_out?xe:Se):e.last_lit&&(s(e,!1),0===e.strm.avail_out)?_e:we}function y(e,t,n,r,i){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=i}function b(e){e.window_size=2*e.w_size,o(e.head),e.max_lazy_match=A[e.level].max_lazy,e.good_match=A[e.level].good_length,e.nice_match=A[e.level].nice_length,e.max_chain_length=A[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=le-1,e.match_available=0,e.ins_h=0}function _(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Q,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new O.Buf16(2*se),this.dyn_dtree=new O.Buf16(2*(2*oe+1)),this.bl_tree=new O.Buf16(2*(2*ae+1)),o(this.dyn_ltree),o(this.dyn_dtree),o(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new O.Buf16(ue+1),this.heap=new O.Buf16(2*ie+1),o(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new O.Buf16(2*ie+1),o(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function w(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=Z,t=e.state,t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?pe:ye,e.adler=2===t.wrap?0:1,t.last_flush=D,E._tr_init(t),U):r(e,q)}function x(e){var t=w(e);return t===U&&b(e.state),t}function S(e,t){return e&&e.state?2!==e.state.wrap?q:(e.state.gzhead=t,U):q}function C(e,t,n,i,o,a){if(!e)return q;var s=1;if(t===H&&(t=6),0>i?(s=0,i=-i):i>15&&(s=2,i-=16),1>o||o>J||n!==Q||8>i||i>15||0>t||t>9||0>a||a>X)return r(e,q);8===i&&(i=9);var u=new _;return e.state=u,u.strm=e,u.wrap=s,u.gzhead=null,u.w_bits=i,u.w_size=1<<u.w_bits,u.w_mask=u.w_size-1,u.hash_bits=o+7,u.hash_size=1<<u.hash_bits,u.hash_mask=u.hash_size-1,u.hash_shift=~~((u.hash_bits+le-1)/le),u.window=new O.Buf8(2*u.w_size),u.head=new O.Buf16(u.hash_size),u.prev=new O.Buf16(u.w_size),u.lit_bufsize=1<<o+6,u.pending_buf_size=4*u.lit_bufsize,u.pending_buf=new O.Buf8(u.pending_buf_size),u.d_buf=u.lit_bufsize>>1,u.l_buf=3*u.lit_bufsize,u.level=t,u.strategy=a,u.method=n,x(e)}function k(e,t){return C(e,t,Q,ee,te,K)}function P(e,t){var n,s,c,h;if(!e||!e.state||t>R||0>t)return e?r(e,q):q;if(s=e.state,!e.output||!e.input&&0!==e.avail_in||s.status===be&&t!==L)return r(e,0===e.avail_out?B:q);if(s.strm=e,n=s.last_flush,s.last_flush=t,s.status===pe)if(2===s.wrap)e.adler=0,u(s,31),u(s,139),u(s,8),s.gzhead?(u(s,(s.gzhead.text?1:0)+(s.gzhead.hcrc?2:0)+(s.gzhead.extra?4:0)+(s.gzhead.name?8:0)+(s.gzhead.comment?16:0)),u(s,255&s.gzhead.time),u(s,s.gzhead.time>>8&255),u(s,s.gzhead.time>>16&255),u(s,s.gzhead.time>>24&255),u(s,9===s.level?2:s.strategy>=W||s.level<2?4:0),u(s,255&s.gzhead.os),s.gzhead.extra&&s.gzhead.extra.length&&(u(s,255&s.gzhead.extra.length),u(s,s.gzhead.extra.length>>8&255)),s.gzhead.hcrc&&(e.adler=N(e.adler,s.pending_buf,s.pending,0)),s.gzindex=0,s.status=de):(u(s,0),u(s,0),u(s,0),u(s,0),u(s,0),u(s,9===s.level?2:s.strategy>=W||s.level<2?4:0),u(s,Ce),s.status=ye);else{var f=Q+(s.w_bits-8<<4)<<8,p=-1;p=s.strategy>=W||s.level<2?0:s.level<6?1:6===s.level?2:3,f|=p<<6,0!==s.strstart&&(f|=fe),f+=31-f%31,s.status=ye,l(s,f),0!==s.strstart&&(l(s,e.adler>>>16),l(s,65535&e.adler)),e.adler=1}if(s.status===de)if(s.gzhead.extra){for(c=s.pending;s.gzindex<(65535&s.gzhead.extra.length)&&(s.pending!==s.pending_buf_size||(s.gzhead.hcrc&&s.pending>c&&(e.adler=N(e.adler,s.pending_buf,s.pending-c,c)),a(e),c=s.pending,s.pending!==s.pending_buf_size));)u(s,255&s.gzhead.extra[s.gzindex]),s.gzindex++;s.gzhead.hcrc&&s.pending>c&&(e.adler=N(e.adler,s.pending_buf,s.pending-c,c)),s.gzindex===s.gzhead.extra.length&&(s.gzindex=0,s.status=me)}else s.status=me;if(s.status===me)if(s.gzhead.name){c=s.pending;do{if(s.pending===s.pending_buf_size&&(s.gzhead.hcrc&&s.pending>c&&(e.adler=N(e.adler,s.pending_buf,s.pending-c,c)),a(e),c=s.pending,s.pending===s.pending_buf_size)){h=1;break}h=s.gzindex<s.gzhead.name.length?255&s.gzhead.name.charCodeAt(s.gzindex++):0,u(s,h)}while(0!==h);s.gzhead.hcrc&&s.pending>c&&(e.adler=N(e.adler,s.pending_buf,s.pending-c,c)),0===h&&(s.gzindex=0,s.status=ge)}else s.status=ge;if(s.status===ge)if(s.gzhead.comment){c=s.pending;do{if(s.pending===s.pending_buf_size&&(s.gzhead.hcrc&&s.pending>c&&(e.adler=N(e.adler,s.pending_buf,s.pending-c,c)),a(e),c=s.pending,s.pending===s.pending_buf_size)){h=1;break}h=s.gzindex<s.gzhead.comment.length?255&s.gzhead.comment.charCodeAt(s.gzindex++):0,u(s,h)}while(0!==h);s.gzhead.hcrc&&s.pending>c&&(e.adler=N(e.adler,s.pending_buf,s.pending-c,c)),0===h&&(s.status=ve)}else s.status=ve;if(s.status===ve&&(s.gzhead.hcrc?(s.pending+2>s.pending_buf_size&&a(e),s.pending+2<=s.pending_buf_size&&(u(s,255&e.adler),u(s,e.adler>>8&255),e.adler=0,s.status=ye)):s.status=ye),0!==s.pending){if(a(e),0===e.avail_out)return s.last_flush=-1,U}else if(0===e.avail_in&&i(t)<=i(n)&&t!==L)return r(e,B);if(s.status===be&&0!==e.avail_in)return r(e,B);if(0!==e.avail_in||0!==s.lookahead||t!==D&&s.status!==be){var d=s.strategy===W?v(s,t):s.strategy===Y?g(s,t):A[s.level].func(s,t);if((d===xe||d===Se)&&(s.status=be),d===_e||d===xe)return 0===e.avail_out&&(s.last_flush=-1),U;if(d===we&&(t===j?E._tr_align(s):t!==R&&(E._tr_stored_block(s,0,0,!1),t===F&&(o(s.head),0===s.lookahead&&(s.strstart=0,s.block_start=0,s.insert=0))),a(e),0===e.avail_out))return s.last_flush=-1,U}return t!==L?U:s.wrap<=0?V:(2===s.wrap?(u(s,255&e.adler),u(s,e.adler>>8&255),u(s,e.adler>>16&255),u(s,e.adler>>24&255),u(s,255&e.total_in),u(s,e.total_in>>8&255),u(s,e.total_in>>16&255),u(s,e.total_in>>24&255)):(l(s,e.adler>>>16),l(s,65535&e.adler)),a(e),s.wrap>0&&(s.wrap=-s.wrap),0!==s.pending?U:V)}function M(e){var t;return e&&e.state?(t=e.state.status,t!==pe&&t!==de&&t!==me&&t!==ge&&t!==ve&&t!==ye&&t!==be?r(e,q):(e.state=null,t===ye?r(e,z):U)):q}function T(e,t){var n,r,i,a,s,u,l,c,h=t.length;if(!e||!e.state)return q;if(n=e.state,a=n.wrap,2===a||1===a&&n.status!==pe||n.lookahead)return q;for(1===a&&(e.adler=$(e.adler,t,h,0)),n.wrap=0,h>=n.w_size&&(0===a&&(o(n.head),n.strstart=0,n.block_start=0,n.insert=0),c=new O.Buf8(n.w_size),O.arraySet(c,t,h-n.w_size,n.w_size,0),t=c,h=n.w_size),s=e.avail_in,u=e.next_in,l=e.input,e.avail_in=h,e.next_in=0,e.input=t,f(n);n.lookahead>=le;){r=n.strstart,i=n.lookahead-(le-1);do n.ins_h=(n.ins_h<<n.hash_shift^n.window[r+le-1])&n.hash_mask,n.prev[r&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=r,r++;while(--i);n.strstart=r,n.lookahead=le-1,f(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=le-1,n.match_available=0,e.next_in=u,e.input=l,e.avail_in=s,n.wrap=a,U}var A,O=e("../utils/common"),E=e("./trees"),$=e("./adler32"),N=e("./crc32"),I=e("./messages"),D=0,j=1,F=3,L=4,R=5,U=0,V=1,q=-2,z=-3,B=-5,H=-1,G=1,W=2,Y=3,X=4,K=0,Z=2,Q=8,J=9,ee=15,te=8,ne=29,re=256,ie=re+1+ne,oe=30,ae=19,se=2*ie+1,ue=15,le=3,ce=258,he=ce+le+1,fe=32,pe=42,de=69,me=73,ge=91,ve=103,ye=113,be=666,_e=1,we=2,xe=3,Se=4,Ce=3;A=[new y(0,0,0,0,p),new y(4,4,8,4,d),new y(4,5,16,8,d),new y(4,6,32,32,d),new y(4,4,16,16,m),new y(8,16,32,32,m),new y(8,16,128,128,m),new y(8,32,128,256,m),new y(32,128,258,1024,m),new y(32,258,258,4096,m)],n.deflateInit=k,n.deflateInit2=C,n.deflateReset=x,n.deflateResetKeep=w,n.deflateSetHeader=S,n.deflate=P,n.deflateEnd=M,n.deflateSetDictionary=T,n.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(e,t,n){"use strict";function r(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}t.exports=r},{}],48:[function(e,t,n){"use strict";var r=30,i=12;t.exports=function(e,t){var n,o,a,s,u,l,c,h,f,p,d,m,g,v,y,b,_,w,x,S,C,k,P,M,T;n=e.state,o=e.next_in,M=e.input,a=o+(e.avail_in-5),s=e.next_out,T=e.output,u=s-(t-e.avail_out),l=s+(e.avail_out-257),c=n.dmax,h=n.wsize,f=n.whave,p=n.wnext,d=n.window,m=n.hold,g=n.bits,v=n.lencode,y=n.distcode,b=(1<<n.lenbits)-1,_=(1<<n.distbits)-1;e:do{15>g&&(m+=M[o++]<<g,g+=8,m+=M[o++]<<g,g+=8),w=v[m&b];t:for(;;){if(x=w>>>24,m>>>=x,g-=x,x=w>>>16&255,0===x)T[s++]=65535&w;else{if(!(16&x)){if(0===(64&x)){w=v[(65535&w)+(m&(1<<x)-1)];continue t}if(32&x){n.mode=i;break e}e.msg="invalid literal/length code",n.mode=r;break e}S=65535&w,x&=15,x&&(x>g&&(m+=M[o++]<<g,g+=8),S+=m&(1<<x)-1,m>>>=x,g-=x),15>g&&(m+=M[o++]<<g,g+=8,m+=M[o++]<<g,g+=8),w=y[m&_];n:for(;;){if(x=w>>>24,m>>>=x,g-=x,x=w>>>16&255,!(16&x)){if(0===(64&x)){w=y[(65535&w)+(m&(1<<x)-1)];continue n}e.msg="invalid distance code",n.mode=r;break e}if(C=65535&w,x&=15,x>g&&(m+=M[o++]<<g,g+=8,x>g&&(m+=M[o++]<<g,g+=8)),C+=m&(1<<x)-1,C>c){e.msg="invalid distance too far back",n.mode=r;break e}if(m>>>=x,g-=x,x=s-u,C>x){if(x=C-x,x>f&&n.sane){e.msg="invalid distance too far back",n.mode=r;break e}if(k=0,P=d,0===p){if(k+=h-x,S>x){S-=x;do T[s++]=d[k++];while(--x);k=s-C,P=T}}else if(x>p){if(k+=h+p-x,x-=p,S>x){S-=x;do T[s++]=d[k++];while(--x);if(k=0,S>p){x=p,S-=x;do T[s++]=d[k++];while(--x);k=s-C,P=T}}}else if(k+=p-x,S>x){S-=x;do T[s++]=d[k++];while(--x);k=s-C,P=T}for(;S>2;)T[s++]=P[k++],T[s++]=P[k++],T[s++]=P[k++],S-=3;S&&(T[s++]=P[k++],S>1&&(T[s++]=P[k++]))}else{k=s-C;do T[s++]=T[k++],T[s++]=T[k++],T[s++]=T[k++],S-=3;while(S>2);S&&(T[s++]=T[k++],S>1&&(T[s++]=T[k++]))}break}}break}}while(a>o&&l>s);S=g>>3,o-=S,g-=S<<3,m&=(1<<g)-1,e.next_in=o,e.next_out=s,e.avail_in=a>o?5+(a-o):5-(o-a),e.avail_out=l>s?257+(l-s):257-(s-l),n.hold=m,n.bits=g}},{}],49:[function(e,t,n){"use strict";function r(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function i(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new y.Buf16(320),this.work=new y.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function o(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=F,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new y.Buf32(me),t.distcode=t.distdyn=new y.Buf32(ge),t.sane=1,t.back=-1,A):$}function a(e){var t;return e&&e.state?(t=e.state,t.wsize=0,t.whave=0,t.wnext=0,o(e)):$}function s(e,t){var n,r;return e&&e.state?(r=e.state,0>t?(n=0,t=-t):(n=(t>>4)+1,48>t&&(t&=15)),t&&(8>t||t>15)?$:(null!==r.window&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,a(e))):$}function u(e,t){var n,r;return e?(r=new i,e.state=r,r.window=null,n=s(e,t),n!==A&&(e.state=null),n):$}function l(e){return u(e,ye)}function c(e){if(be){var t;for(g=new y.Buf32(512),v=new y.Buf32(32),t=0;144>t;)e.lens[t++]=8;for(;256>t;)e.lens[t++]=9;for(;280>t;)e.lens[t++]=7;for(;288>t;)e.lens[t++]=8;for(x(C,e.lens,0,288,g,0,e.work,{bits:9}),t=0;32>t;)e.lens[t++]=5;x(k,e.lens,0,32,v,0,e.work,{bits:5}),be=!1}e.lencode=g,e.lenbits=9,e.distcode=v,e.distbits=5}function h(e,t,n,r){var i,o=e.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new y.Buf8(o.wsize)),r>=o.wsize?(y.arraySet(o.window,t,n-o.wsize,o.wsize,0),o.wnext=0,o.whave=o.wsize):(i=o.wsize-o.wnext,i>r&&(i=r),y.arraySet(o.window,t,n-r,i,o.wnext),r-=i,r?(y.arraySet(o.window,t,n-r,r,0),o.wnext=r,o.whave=o.wsize):(o.wnext+=i,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=i))),0}function f(e,t){var n,i,o,a,s,u,l,f,p,d,m,g,v,me,ge,ve,ye,be,_e,we,xe,Se,Ce,ke,Pe=0,Me=new y.Buf8(4),Te=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return $;n=e.state,n.mode===Y&&(n.mode=X),s=e.next_out,o=e.output,l=e.avail_out,a=e.next_in,i=e.input,u=e.avail_in,f=n.hold,p=n.bits,d=u,m=l,Se=A;e:for(;;)switch(n.mode){case F:if(0===n.wrap){n.mode=X;break}for(;16>p;){if(0===u)break e;u--,f+=i[a++]<<p,p+=8}if(2&n.wrap&&35615===f){n.check=0,Me[0]=255&f,Me[1]=f>>>8&255,n.check=_(n.check,Me,2,0),f=0,p=0,n.mode=L;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&f)<<8)+(f>>8))%31){e.msg="incorrect header check",n.mode=fe;break}if((15&f)!==j){e.msg="unknown compression method",n.mode=fe;break}if(f>>>=4,p-=4,xe=(15&f)+8,0===n.wbits)n.wbits=xe;else if(xe>n.wbits){e.msg="invalid window size",n.mode=fe;break}n.dmax=1<<xe,e.adler=n.check=1,n.mode=512&f?G:Y,f=0,p=0;break;case L:for(;16>p;){if(0===u)break e;u--,f+=i[a++]<<p,p+=8}if(n.flags=f,(255&n.flags)!==j){e.msg="unknown compression method",n.mode=fe;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=fe;break}n.head&&(n.head.text=f>>8&1),512&n.flags&&(Me[0]=255&f,Me[1]=f>>>8&255,n.check=_(n.check,Me,2,0)),f=0,p=0,n.mode=R;case R:for(;32>p;){if(0===u)break e;u--,f+=i[a++]<<p,p+=8}n.head&&(n.head.time=f),512&n.flags&&(Me[0]=255&f,Me[1]=f>>>8&255,Me[2]=f>>>16&255,Me[3]=f>>>24&255,n.check=_(n.check,Me,4,0)),f=0,p=0,n.mode=U;case U:for(;16>p;){if(0===u)break e;u--,f+=i[a++]<<p,p+=8}n.head&&(n.head.xflags=255&f,n.head.os=f>>8),512&n.flags&&(Me[0]=255&f,Me[1]=f>>>8&255,n.check=_(n.check,Me,2,0)),f=0,p=0,n.mode=V;case V:if(1024&n.flags){for(;16>p;){if(0===u)break e;u--,f+=i[a++]<<p,p+=8}n.length=f,n.head&&(n.head.extra_len=f),512&n.flags&&(Me[0]=255&f,Me[1]=f>>>8&255,n.check=_(n.check,Me,2,0)),f=0,p=0}else n.head&&(n.head.extra=null);n.mode=q;case q:if(1024&n.flags&&(g=n.length,g>u&&(g=u),g&&(n.head&&(xe=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),y.arraySet(n.head.extra,i,a,g,xe)),512&n.flags&&(n.check=_(n.check,i,g,a)),u-=g,a+=g,n.length-=g),n.length))break e;n.length=0,n.mode=z;case z:if(2048&n.flags){if(0===u)break e;g=0;do xe=i[a+g++],n.head&&xe&&n.length<65536&&(n.head.name+=String.fromCharCode(xe));while(xe&&u>g);if(512&n.flags&&(n.check=_(n.check,i,g,a)),u-=g,a+=g,xe)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=B;case B:if(4096&n.flags){if(0===u)break e;g=0;do xe=i[a+g++],n.head&&xe&&n.length<65536&&(n.head.comment+=String.fromCharCode(xe));while(xe&&u>g);if(512&n.flags&&(n.check=_(n.check,i,g,a)),u-=g,a+=g,xe)break e}else n.head&&(n.head.comment=null);n.mode=H;case H:if(512&n.flags){for(;16>p;){if(0===u)break e;u--,f+=i[a++]<<p,p+=8}if(f!==(65535&n.check)){e.msg="header crc mismatch",n.mode=fe;break}f=0,p=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=Y;break;case G:for(;32>p;){if(0===u)break e;u--,f+=i[a++]<<p,p+=8}e.adler=n.check=r(f),f=0,p=0,n.mode=W;case W:if(0===n.havedict)return e.next_out=s,e.avail_out=l,e.next_in=a,e.avail_in=u,n.hold=f,n.bits=p,E;e.adler=n.check=1,n.mode=Y;case Y:if(t===M||t===T)break e;case X:if(n.last){f>>>=7&p,p-=7&p,n.mode=le;break}for(;3>p;){if(0===u)break e;u--,f+=i[a++]<<p,p+=8}switch(n.last=1&f,f>>>=1,p-=1,3&f){case 0:n.mode=K;break;case 1:if(c(n),n.mode=ne,t===T){f>>>=2,p-=2;break e}break;case 2:n.mode=J;break;case 3:e.msg="invalid block type",n.mode=fe}f>>>=2,p-=2;break;case K:for(f>>>=7&p,p-=7&p;32>p;){if(0===u)break e;u--,f+=i[a++]<<p,p+=8}if((65535&f)!==(f>>>16^65535)){e.msg="invalid stored block lengths",n.mode=fe;break}if(n.length=65535&f,f=0,p=0,n.mode=Z,t===T)break e;case Z:n.mode=Q;case Q:if(g=n.length){if(g>u&&(g=u),g>l&&(g=l),0===g)break e;y.arraySet(o,i,a,g,s),u-=g,a+=g,l-=g,s+=g,n.length-=g;break}n.mode=Y;break;case J:for(;14>p;){if(0===u)break e;u--,f+=i[a++]<<p,p+=8}if(n.nlen=(31&f)+257,f>>>=5,p-=5,n.ndist=(31&f)+1,f>>>=5,p-=5,n.ncode=(15&f)+4,f>>>=4,p-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=fe;break}n.have=0,n.mode=ee;case ee:for(;n.have<n.ncode;){for(;3>p;){if(0===u)break e;u--,f+=i[a++]<<p,p+=8}n.lens[Te[n.have++]]=7&f,f>>>=3,p-=3}for(;n.have<19;)n.lens[Te[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,Ce={bits:n.lenbits},Se=x(S,n.lens,0,19,n.lencode,0,n.work,Ce),n.lenbits=Ce.bits,Se){e.msg="invalid code lengths set",n.mode=fe;break}n.have=0,n.mode=te;case te:for(;n.have<n.nlen+n.ndist;){for(;Pe=n.lencode[f&(1<<n.lenbits)-1],ge=Pe>>>24,ve=Pe>>>16&255,ye=65535&Pe,!(p>=ge);){if(0===u)break e;u--,f+=i[a++]<<p,p+=8}if(16>ye)f>>>=ge,p-=ge,n.lens[n.have++]=ye;else{if(16===ye){for(ke=ge+2;ke>p;){if(0===u)break e;u--,f+=i[a++]<<p,p+=8}if(f>>>=ge,p-=ge,0===n.have){e.msg="invalid bit length repeat",n.mode=fe;break}xe=n.lens[n.have-1],g=3+(3&f),f>>>=2,p-=2}else if(17===ye){for(ke=ge+3;ke>p;){if(0===u)break e;u--,f+=i[a++]<<p,p+=8}f>>>=ge,p-=ge,xe=0,g=3+(7&f),f>>>=3,p-=3}else{for(ke=ge+7;ke>p;){if(0===u)break e;u--,f+=i[a++]<<p,p+=8}f>>>=ge,p-=ge,xe=0,g=11+(127&f),f>>>=7,p-=7}if(n.have+g>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=fe;break}for(;g--;)n.lens[n.have++]=xe}}if(n.mode===fe)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=fe;break}if(n.lenbits=9,Ce={bits:n.lenbits},Se=x(C,n.lens,0,n.nlen,n.lencode,0,n.work,Ce),n.lenbits=Ce.bits,Se){e.msg="invalid literal/lengths set",n.mode=fe;break}if(n.distbits=6,n.distcode=n.distdyn,Ce={bits:n.distbits},Se=x(k,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,Ce),n.distbits=Ce.bits,Se){e.msg="invalid distances set",n.mode=fe;break}if(n.mode=ne,t===T)break e;case ne:n.mode=re;case re:if(u>=6&&l>=258){e.next_out=s,e.avail_out=l,e.next_in=a,e.avail_in=u,n.hold=f,n.bits=p,w(e,m),s=e.next_out,o=e.output,l=e.avail_out,a=e.next_in,i=e.input,u=e.avail_in,f=n.hold,p=n.bits,n.mode===Y&&(n.back=-1);break}for(n.back=0;Pe=n.lencode[f&(1<<n.lenbits)-1],ge=Pe>>>24,ve=Pe>>>16&255,ye=65535&Pe,!(p>=ge);){if(0===u)break e;u--,f+=i[a++]<<p,p+=8}if(ve&&0===(240&ve)){for(be=ge,_e=ve,we=ye;Pe=n.lencode[we+((f&(1<<be+_e)-1)>>be)],ge=Pe>>>24,ve=Pe>>>16&255,ye=65535&Pe,!(p>=be+ge);){if(0===u)break e;u--,f+=i[a++]<<p,p+=8}f>>>=be,p-=be,n.back+=be}if(f>>>=ge,p-=ge,n.back+=ge,n.length=ye,0===ve){n.mode=ue;break}if(32&ve){n.back=-1,n.mode=Y;break}if(64&ve){e.msg="invalid literal/length code",n.mode=fe;break}n.extra=15&ve,n.mode=ie;case ie:if(n.extra){for(ke=n.extra;ke>p;){if(0===u)break e;u--,f+=i[a++]<<p,p+=8}n.length+=f&(1<<n.extra)-1,f>>>=n.extra,p-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=oe;case oe:for(;Pe=n.distcode[f&(1<<n.distbits)-1],ge=Pe>>>24,ve=Pe>>>16&255,ye=65535&Pe,!(p>=ge);){if(0===u)break e;u--,f+=i[a++]<<p,p+=8}if(0===(240&ve)){for(be=ge,_e=ve,we=ye;Pe=n.distcode[we+((f&(1<<be+_e)-1)>>be)],ge=Pe>>>24,ve=Pe>>>16&255,ye=65535&Pe,!(p>=be+ge);){if(0===u)break e;u--,f+=i[a++]<<p,p+=8}f>>>=be,p-=be,n.back+=be}if(f>>>=ge,p-=ge,n.back+=ge,64&ve){e.msg="invalid distance code",n.mode=fe;break}n.offset=ye,n.extra=15&ve,n.mode=ae;case ae:if(n.extra){for(ke=n.extra;ke>p;){if(0===u)break e;u--,f+=i[a++]<<p,p+=8}n.offset+=f&(1<<n.extra)-1,f>>>=n.extra,p-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=fe;break}n.mode=se;case se:if(0===l)break e;if(g=m-l,n.offset>g){if(g=n.offset-g,g>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=fe;break}g>n.wnext?(g-=n.wnext,v=n.wsize-g):v=n.wnext-g,g>n.length&&(g=n.length),me=n.window}else me=o,v=s-n.offset,g=n.length;g>l&&(g=l),l-=g,n.length-=g;do o[s++]=me[v++];while(--g);0===n.length&&(n.mode=re);break;case ue:if(0===l)break e;o[s++]=n.length,l--,n.mode=re;break;case le:if(n.wrap){for(;32>p;){if(0===u)break e;u--,f|=i[a++]<<p,p+=8}if(m-=l,e.total_out+=m,n.total+=m,m&&(e.adler=n.check=n.flags?_(n.check,o,m,s-m):b(n.check,o,m,s-m)),m=l,(n.flags?f:r(f))!==n.check){e.msg="incorrect data check",n.mode=fe;break}f=0,p=0}n.mode=ce;case ce:if(n.wrap&&n.flags){for(;32>p;){if(0===u)break e;u--,f+=i[a++]<<p,p+=8}if(f!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=fe;break}f=0,p=0}n.mode=he;case he:Se=O;break e;case fe:Se=N;break e;case pe:return I;case de:default:return $}return e.next_out=s,e.avail_out=l,e.next_in=a,e.avail_in=u,n.hold=f,n.bits=p,(n.wsize||m!==e.avail_out&&n.mode<fe&&(n.mode<le||t!==P))&&h(e,e.output,e.next_out,m-e.avail_out)?(n.mode=pe,I):(d-=e.avail_in,m-=e.avail_out,e.total_in+=d,e.total_out+=m,n.total+=m,n.wrap&&m&&(e.adler=n.check=n.flags?_(n.check,o,m,e.next_out-m):b(n.check,o,m,e.next_out-m)),e.data_type=n.bits+(n.last?64:0)+(n.mode===Y?128:0)+(n.mode===ne||n.mode===Z?256:0),(0===d&&0===m||t===P)&&Se===A&&(Se=D),Se)}function p(e){if(!e||!e.state)return $;var t=e.state;return t.window&&(t.window=null),e.state=null,A}function d(e,t){var n;return e&&e.state?(n=e.state,0===(2&n.wrap)?$:(n.head=t,t.done=!1,A)):$}function m(e,t){var n,r,i,o=t.length;return e&&e.state?(n=e.state,0!==n.wrap&&n.mode!==W?$:n.mode===W&&(r=1,r=b(r,t,o,0),r!==n.check)?N:(i=h(e,t,o,o))?(n.mode=pe,I):(n.havedict=1,A)):$}var g,v,y=e("../utils/common"),b=e("./adler32"),_=e("./crc32"),w=e("./inffast"),x=e("./inftrees"),S=0,C=1,k=2,P=4,M=5,T=6,A=0,O=1,E=2,$=-2,N=-3,I=-4,D=-5,j=8,F=1,L=2,R=3,U=4,V=5,q=6,z=7,B=8,H=9,G=10,W=11,Y=12,X=13,K=14,Z=15,Q=16,J=17,ee=18,te=19,ne=20,re=21,ie=22,oe=23,ae=24,se=25,ue=26,le=27,ce=28,he=29,fe=30,pe=31,de=32,me=852,ge=592,ve=15,ye=ve,be=!0;n.inflateReset=a,n.inflateReset2=s,n.inflateResetKeep=o,n.inflateInit=l,n.inflateInit2=u,n.inflate=f,n.inflateEnd=p,n.inflateGetHeader=d,n.inflateSetDictionary=m,n.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(e,t,n){"use strict";var r=e("../utils/common"),i=15,o=852,a=592,s=0,u=1,l=2,c=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],h=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],f=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],p=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];
t.exports=function(e,t,n,d,m,g,v,y){var b,_,w,x,S,C,k,P,M,T=y.bits,A=0,O=0,E=0,$=0,N=0,I=0,D=0,j=0,F=0,L=0,R=null,U=0,V=new r.Buf16(i+1),q=new r.Buf16(i+1),z=null,B=0;for(A=0;i>=A;A++)V[A]=0;for(O=0;d>O;O++)V[t[n+O]]++;for(N=T,$=i;$>=1&&0===V[$];$--);if(N>$&&(N=$),0===$)return m[g++]=20971520,m[g++]=20971520,y.bits=1,0;for(E=1;$>E&&0===V[E];E++);for(E>N&&(N=E),j=1,A=1;i>=A;A++)if(j<<=1,j-=V[A],0>j)return-1;if(j>0&&(e===s||1!==$))return-1;for(q[1]=0,A=1;i>A;A++)q[A+1]=q[A]+V[A];for(O=0;d>O;O++)0!==t[n+O]&&(v[q[t[n+O]]++]=O);if(e===s?(R=z=v,C=19):e===u?(R=c,U-=257,z=h,B-=257,C=256):(R=f,z=p,C=-1),L=0,O=0,A=E,S=g,I=N,D=0,w=-1,F=1<<N,x=F-1,e===u&&F>o||e===l&&F>a)return 1;for(var H=0;;){H++,k=A-D,v[O]<C?(P=0,M=v[O]):v[O]>C?(P=z[B+v[O]],M=R[U+v[O]]):(P=96,M=0),b=1<<A-D,_=1<<I,E=_;do _-=b,m[S+(L>>D)+_]=k<<24|P<<16|M|0;while(0!==_);for(b=1<<A-1;L&b;)b>>=1;if(0!==b?(L&=b-1,L+=b):L=0,O++,0===--V[A]){if(A===$)break;A=t[n+v[O]]}if(A>N&&(L&x)!==w){for(0===D&&(D=N),S+=E,I=A-D,j=1<<I;$>I+D&&(j-=V[I+D],!(0>=j));)I++,j<<=1;if(F+=1<<I,e===u&&F>o||e===l&&F>a)return 1;w=L&x,m[w]=N<<24|I<<16|S-g|0}}return 0!==L&&(m[S+L]=A-D<<24|64<<16|0),y.bits=N,0}},{"../utils/common":41}],51:[function(e,t,n){"use strict";t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(e,t,n){"use strict";function r(e){for(var t=e.length;--t>=0;)e[t]=0}function i(e,t,n,r,i){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=i,this.has_stree=e&&e.length}function o(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function a(e){return 256>e?ue[e]:ue[256+(e>>>7)]}function s(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function u(e,t,n){e.bi_valid>X-n?(e.bi_buf|=t<<e.bi_valid&65535,s(e,e.bi_buf),e.bi_buf=t>>X-e.bi_valid,e.bi_valid+=n-X):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)}function l(e,t,n){u(e,n[2*t],n[2*t+1])}function c(e,t){var n=0;do n|=1&e,e>>>=1,n<<=1;while(--t>0);return n>>>1}function h(e){16===e.bi_valid?(s(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}function f(e,t){var n,r,i,o,a,s,u=t.dyn_tree,l=t.max_code,c=t.stat_desc.static_tree,h=t.stat_desc.has_stree,f=t.stat_desc.extra_bits,p=t.stat_desc.extra_base,d=t.stat_desc.max_length,m=0;for(o=0;Y>=o;o++)e.bl_count[o]=0;for(u[2*e.heap[e.heap_max]+1]=0,n=e.heap_max+1;W>n;n++)r=e.heap[n],o=u[2*u[2*r+1]+1]+1,o>d&&(o=d,m++),u[2*r+1]=o,r>l||(e.bl_count[o]++,a=0,r>=p&&(a=f[r-p]),s=u[2*r],e.opt_len+=s*(o+a),h&&(e.static_len+=s*(c[2*r+1]+a)));if(0!==m){do{for(o=d-1;0===e.bl_count[o];)o--;e.bl_count[o]--,e.bl_count[o+1]+=2,e.bl_count[d]--,m-=2}while(m>0);for(o=d;0!==o;o--)for(r=e.bl_count[o];0!==r;)i=e.heap[--n],i>l||(u[2*i+1]!==o&&(e.opt_len+=(o-u[2*i+1])*u[2*i],u[2*i+1]=o),r--)}}function p(e,t,n){var r,i,o=new Array(Y+1),a=0;for(r=1;Y>=r;r++)o[r]=a=a+n[r-1]<<1;for(i=0;t>=i;i++){var s=e[2*i+1];0!==s&&(e[2*i]=c(o[s]++,s))}}function d(){var e,t,n,r,o,a=new Array(Y+1);for(n=0,r=0;q-1>r;r++)for(ce[r]=n,e=0;e<1<<te[r];e++)le[n++]=r;for(le[n-1]=r,o=0,r=0;16>r;r++)for(he[r]=o,e=0;e<1<<ne[r];e++)ue[o++]=r;for(o>>=7;H>r;r++)for(he[r]=o<<7,e=0;e<1<<ne[r]-7;e++)ue[256+o++]=r;for(t=0;Y>=t;t++)a[t]=0;for(e=0;143>=e;)ae[2*e+1]=8,e++,a[8]++;for(;255>=e;)ae[2*e+1]=9,e++,a[9]++;for(;279>=e;)ae[2*e+1]=7,e++,a[7]++;for(;287>=e;)ae[2*e+1]=8,e++,a[8]++;for(p(ae,B+1,a),e=0;H>e;e++)se[2*e+1]=5,se[2*e]=c(e,5);fe=new i(ae,te,z+1,B,Y),pe=new i(se,ne,0,H,Y),de=new i(new Array(0),re,0,G,K)}function m(e){var t;for(t=0;B>t;t++)e.dyn_ltree[2*t]=0;for(t=0;H>t;t++)e.dyn_dtree[2*t]=0;for(t=0;G>t;t++)e.bl_tree[2*t]=0;e.dyn_ltree[2*Z]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function g(e){e.bi_valid>8?s(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function v(e,t,n,r){g(e),r&&(s(e,n),s(e,~n)),$.arraySet(e.pending_buf,e.window,t,n,e.pending),e.pending+=n}function y(e,t,n,r){var i=2*t,o=2*n;return e[i]<e[o]||e[i]===e[o]&&r[t]<=r[n]}function b(e,t,n){for(var r=e.heap[n],i=n<<1;i<=e.heap_len&&(i<e.heap_len&&y(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!y(t,r,e.heap[i],e.depth));)e.heap[n]=e.heap[i],n=i,i<<=1;e.heap[n]=r}function _(e,t,n){var r,i,o,s,c=0;if(0!==e.last_lit)do r=e.pending_buf[e.d_buf+2*c]<<8|e.pending_buf[e.d_buf+2*c+1],i=e.pending_buf[e.l_buf+c],c++,0===r?l(e,i,t):(o=le[i],l(e,o+z+1,t),s=te[o],0!==s&&(i-=ce[o],u(e,i,s)),r--,o=a(r),l(e,o,n),s=ne[o],0!==s&&(r-=he[o],u(e,r,s)));while(c<e.last_lit);l(e,Z,t)}function w(e,t){var n,r,i,o=t.dyn_tree,a=t.stat_desc.static_tree,s=t.stat_desc.has_stree,u=t.stat_desc.elems,l=-1;for(e.heap_len=0,e.heap_max=W,n=0;u>n;n++)0!==o[2*n]?(e.heap[++e.heap_len]=l=n,e.depth[n]=0):o[2*n+1]=0;for(;e.heap_len<2;)i=e.heap[++e.heap_len]=2>l?++l:0,o[2*i]=1,e.depth[i]=0,e.opt_len--,s&&(e.static_len-=a[2*i+1]);for(t.max_code=l,n=e.heap_len>>1;n>=1;n--)b(e,o,n);i=u;do n=e.heap[1],e.heap[1]=e.heap[e.heap_len--],b(e,o,1),r=e.heap[1],e.heap[--e.heap_max]=n,e.heap[--e.heap_max]=r,o[2*i]=o[2*n]+o[2*r],e.depth[i]=(e.depth[n]>=e.depth[r]?e.depth[n]:e.depth[r])+1,o[2*n+1]=o[2*r+1]=i,e.heap[1]=i++,b(e,o,1);while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],f(e,t),p(o,l,e.bl_count)}function x(e,t,n){var r,i,o=-1,a=t[1],s=0,u=7,l=4;for(0===a&&(u=138,l=3),t[2*(n+1)+1]=65535,r=0;n>=r;r++)i=a,a=t[2*(r+1)+1],++s<u&&i===a||(l>s?e.bl_tree[2*i]+=s:0!==i?(i!==o&&e.bl_tree[2*i]++,e.bl_tree[2*Q]++):10>=s?e.bl_tree[2*J]++:e.bl_tree[2*ee]++,s=0,o=i,0===a?(u=138,l=3):i===a?(u=6,l=3):(u=7,l=4))}function S(e,t,n){var r,i,o=-1,a=t[1],s=0,c=7,h=4;for(0===a&&(c=138,h=3),r=0;n>=r;r++)if(i=a,a=t[2*(r+1)+1],!(++s<c&&i===a)){if(h>s){do l(e,i,e.bl_tree);while(0!==--s)}else 0!==i?(i!==o&&(l(e,i,e.bl_tree),s--),l(e,Q,e.bl_tree),u(e,s-3,2)):10>=s?(l(e,J,e.bl_tree),u(e,s-3,3)):(l(e,ee,e.bl_tree),u(e,s-11,7));s=0,o=i,0===a?(c=138,h=3):i===a?(c=6,h=3):(c=7,h=4)}}function C(e){var t;for(x(e,e.dyn_ltree,e.l_desc.max_code),x(e,e.dyn_dtree,e.d_desc.max_code),w(e,e.bl_desc),t=G-1;t>=3&&0===e.bl_tree[2*ie[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}function k(e,t,n,r){var i;for(u(e,t-257,5),u(e,n-1,5),u(e,r-4,4),i=0;r>i;i++)u(e,e.bl_tree[2*ie[i]+1],3);S(e,e.dyn_ltree,t-1),S(e,e.dyn_dtree,n-1)}function P(e){var t,n=4093624447;for(t=0;31>=t;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return I;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return D;for(t=32;z>t;t++)if(0!==e.dyn_ltree[2*t])return D;return I}function M(e){me||(d(),me=!0),e.l_desc=new o(e.dyn_ltree,fe),e.d_desc=new o(e.dyn_dtree,pe),e.bl_desc=new o(e.bl_tree,de),e.bi_buf=0,e.bi_valid=0,m(e)}function T(e,t,n,r){u(e,(F<<1)+(r?1:0),3),v(e,t,n,!0)}function A(e){u(e,L<<1,3),l(e,Z,ae),h(e)}function O(e,t,n,r){var i,o,a=0;e.level>0?(e.strm.data_type===j&&(e.strm.data_type=P(e)),w(e,e.l_desc),w(e,e.d_desc),a=C(e),i=e.opt_len+3+7>>>3,o=e.static_len+3+7>>>3,i>=o&&(i=o)):i=o=n+5,i>=n+4&&-1!==t?T(e,t,n,r):e.strategy===N||o===i?(u(e,(L<<1)+(r?1:0),3),_(e,ae,se)):(u(e,(R<<1)+(r?1:0),3),k(e,e.l_desc.max_code+1,e.d_desc.max_code+1,a+1),_(e,e.dyn_ltree,e.dyn_dtree)),m(e),r&&g(e)}function E(e,t,n){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&n,e.last_lit++,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(le[n]+z+1)]++,e.dyn_dtree[2*a(t)]++),e.last_lit===e.lit_bufsize-1}var $=e("../utils/common"),N=4,I=0,D=1,j=2,F=0,L=1,R=2,U=3,V=258,q=29,z=256,B=z+1+q,H=30,G=19,W=2*B+1,Y=15,X=16,K=7,Z=256,Q=16,J=17,ee=18,te=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],ne=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],re=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],ie=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],oe=512,ae=new Array(2*(B+2));r(ae);var se=new Array(2*H);r(se);var ue=new Array(oe);r(ue);var le=new Array(V-U+1);r(le);var ce=new Array(q);r(ce);var he=new Array(H);r(he);var fe,pe,de,me=!1;n._tr_init=M,n._tr_stored_block=T,n._tr_flush_block=O,n._tr_tally=E,n._tr_align=A},{"../utils/common":41}],53:[function(e,t,n){"use strict";function r(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}t.exports=r},{}]},{},[10])(10)});var saveAs=saveAs||function(e){"use strict";if("undefined"==typeof navigator||!/MSIE [1-9]\./.test(navigator.userAgent)){var t=e.document,n=function(){return e.URL||e.webkitURL||e},r=t.createElementNS("http://www.w3.org/1999/xhtml","a"),i="download"in r,o=function(n){var r=t.createEvent("MouseEvents");r.initMouseEvent("click",!0,!1,e,0,0,0,0,0,!1,!1,!1,!1,0,null),n.dispatchEvent(r)},a=e.webkitRequestFileSystem,s=e.requestFileSystem||a||e.mozRequestFileSystem,u=function(t){(e.setImmediate||e.setTimeout)(function(){throw t},0)},l="application/octet-stream",c=0,h=500,f=function(t){var r=function(){"string"==typeof t?n().revokeObjectURL(t):t.remove()};e.chrome?r():setTimeout(r,h)},p=function(e,t,n){t=[].concat(t);for(var r=t.length;r--;){var i=e["on"+t[r]];if("function"==typeof i)try{i.call(e,n||e)}catch(o){u(o)}}},d=function(e){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\ufeff",e],{type:e.type}):e},m=function(t,u){t=d(t);var h,m,g,v=this,y=t.type,b=!1,_=function(){p(v,"writestart progress write writeend".split(" "))},w=function(){if((b||!h)&&(h=n().createObjectURL(t)),m)m.location.href=h;else{var r=e.open(h,"_blank");void 0==r&&"undefined"!=typeof safari&&(e.location.href=h)}v.readyState=v.DONE,_(),f(h)},x=function(e){return function(){return v.readyState!==v.DONE?e.apply(this,arguments):void 0}},S={create:!0,exclusive:!1};return v.readyState=v.INIT,u||(u="download"),i?(h=n().createObjectURL(t),r.href=h,r.download=u,o(r),v.readyState=v.DONE,_(),void f(h)):(e.chrome&&y&&y!==l&&(g=t.slice||t.webkitSlice,t=g.call(t,0,t.size,l),b=!0),a&&"download"!==u&&(u+=".download"),(y===l||a)&&(m=e),s?(c+=t.size,void s(e.TEMPORARY,c,x(function(e){e.root.getDirectory("saved",S,x(function(e){var n=function(){e.getFile(u,S,x(function(e){e.createWriter(x(function(n){n.onwriteend=function(t){m.location.href=e.toURL(),v.readyState=v.DONE,p(v,"writeend",t),f(e)},n.onerror=function(){var e=n.error;e.code!==e.ABORT_ERR&&w()},"writestart progress write abort".split(" ").forEach(function(e){n["on"+e]=v["on"+e]}),n.write(t),v.abort=function(){n.abort(),v.readyState=v.DONE},v.readyState=v.WRITING}),w)}),w)};e.getFile(u,{create:!1},x(function(e){e.remove(),n()}),x(function(e){e.code===e.NOT_FOUND_ERR?n():w()}))}),w)}),w)):void w())},g=m.prototype,v=function(e,t){return new m(e,t)};return"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(e,t){return navigator.msSaveOrOpenBlob(d(e),t)}:(g.abort=function(){var e=this;e.readyState=e.DONE,p(e,"abort")},g.readyState=g.INIT=0,g.WRITING=1,g.DONE=2,g.error=g.onwritestart=g.onprogress=g.onwrite=g.onabort=g.onerror=g.onwriteend=null,v)}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);"undefined"!=typeof module&&module.exports?module.exports.saveAs=saveAs:"undefined"!=typeof define&&null!==define&&null!=define.amd&&define("filesaver",[],function(){return saveAs}),define("metapolator/ui/metapolator/instance-panel/instance-panel-controller",["metapolator/errors","jquery","jszip","filesaver","metapolator/ui/metapolator/ui-tools/instanceTools","metapolator/ui/metapolator/ui-tools/dialog"],function(e,t,n,r,i,o){"use strict";function a(e,a,u){function l(){function e(e){return 10>e?"0"+String(e):String(e)}var t,n,r,i,o,a,s=new Date;return t=e(s.getFullYear()),n=e(s.getMonth()+1),r=e(s.getDate()),i=e(s.getHours()),o=e(s.getMinutes()),a=e(s.getSeconds()),[t,n,r].join("")+"-"+[i,o,a].join("")}function c(e,n,i,o){var a=t("#blob_download");o&&o.complete(),a.css("display","block"),a.children("a").html(e).click(function(){r(n,i),o&&o.reset(),a.css("display","none").children("a").unbind("click")})}function h(e,t){this.file(e,t,{binary:!0})}function f(e,t,n,r){var i,o,a=t-e.length,s=e[e.length-1],l=s.generator.next();return l.done?(e.pop(),"UFO"==s.fileFormat?(i=u.getZipFromIo(!0,s.io,s.getFileName(),"uint8array"),o=s.getFileName()+".zip"):(i=s.io.readFile(!0,s.getFileName()),o=s.getFileName()),i.then(h.bind(n,o))):(r&&r.setData(a,t,s.name,l.value),null)}function p(e,t,n,r){if(e())return!0;var i=t();return null!==i?i.then(r):a(r,n)}function d(e,t,n,r,i){var o=function(){return 0===e.length},a=f.bind(null,e,t,n,i),s=function(){return p(o,a,r,s)};return s()}function m(e,t,r){var i=new n,o="metapolator-export-"+l(),a=o+".zip",s=i.folder(o),u=e.length,c=i.generateAsync.bind(i,{type:"blob"},void 0),h=d(e,u,s,t,r);return h=h===!0?c():h.then(c),h.then(function(e){return[a,e]})}this.$scope=e,this.$scope.name="masterPanel",e.addInstance=function(){for(var t,n=e.model.currentInstance.designSpace,r=[],o=n.axes.length,a=0;o>a;a++){var s=n.axes[a];r.push({master:s,axisValue:50,metapolationValue:1/o})}t=e.model.instanceSequences[0].createNewInstance(r,n,u),i.registerInstance(u,t),e.model.instanceSequences[0].addInstance(t)},e.cloneInstance=function(){var t=e.model.currentInstance.clone(e.model.currentDesignSpace,u);i.registerInstance(u,t),e.model.currentInstance.parent.addInstance(t)},e.removeInstance=function(t){for(var n=t.designSpace,r=0,i=e.model.instanceSequences.length-1;i>=0;i--)for(var a=e.model.instanceSequences[i],s=a.children.length-1;s>=0;s--){var u=a.children[s];u.designSpace===n&&r++}if(1===r){var l="Delete instance? This also deletes the design space "+n.name+".";o.confirm(l,function(r){r&&(t.remove(),n.remove(),e.$apply())})}else t.remove()},e.canAddInstance=function(){var t=e.model.currentDesignSpace;return t&&t.axes.length>0?!0:!1};var g=function(){function e(e,t,n){var r;this.fileFormat=n||"UFO",this.instance=t,"UFO"==this.fileFormat?r=e.getUFOExportGenerator(!1,t.name,this.getFileName(),2,-1):"OTF"==this.fileFormat&&(r=e.getOTFExportGenerator(!1,t.name,this.getFileName(),-1)),this.generator=r[0],this.io=r[1],this.name=this.instance.displayName}var t=e.prototype;return t.constructor=e,t.getFileName=function(){switch(this.fileFormat){case"UFO":return this.instance.displayName+".ufo";case"OTF":return this.instance.displayName+".otf"}},t.pruneGenerator=function(){this.generator&&delete this.generator},e}(),v=function(){function e(e,t,n){this.bar=e,this.label=t,this.updateDelay=n,this.reset()}var t=e.prototype;return t.constructor=e,t.set=function(e,t){this.bar.animate({opacity:1,width:e+"%"},this.updateDelay),t&&this.label.html(t)},t.reset=function(){this.bar.animate({opacity:0,width:0},0),this.label.html("")},t.complete=function(){this.bar.animate({width:"100%",opacity:1},this.updateDelay),this.label.html("")},e}(),y=function(e){function t(t,n,r){e.call(this,t,n,r)}function n(e,t,n,r){var i,o=e.current_glyph+1,a=e.total_glyphs,s=e.glyph_id;return i="Calculating "+s+" ("+o+" of "+a+")",i+=" of "+n+" ("+(t+1)+" of "+r+")"}function r(e,t,n){var r,i=e.current_glyph,o=e.total_glyphs;return r=100*(t+i/o)/n}var i=t.prototype=Object.create(e.prototype);return i.constructor=t,i.setData=function(e,t,i,o){var a=n(o,e,i,t),s=r(o,e,t);this.set(s,a)},t}(v);e.instancesForExport=function(){for(var t=e.model.instanceSequences.length-1;t>=0;t--)for(var n=e.model.instanceSequences[t],r=n.children.length-1;r>=0;r--){var i=n.children[r];if(i.exportFont)return!0}return!1},e.exportIsRunning=!1,e.exportFonts=function(){function n(t){c(t[0],t[1],t[0],f),e.exportIsRunning=!1}if(e.instancesForExport()&&!e.exportIsRunning){for(var r=[],i=0;i<e.model.instanceSequences.length;i++)for(var o=e.model.instanceSequences[i],a=0;a<o.children.length;a++){var l=o.children[a];l.exportFont&&(l.measureAllGlyphs(),r.push(new g(u,l,"OTF")),r.push(new g(u,l,"UFO")))}e.exportIsRunning=!0;var h=50,f=new y(t("#progressbar"),t("#progresslabel"),h);m(r,h,f).then(n,s)}},e.sortableOptions={handle:".list-edit",helper:"clone"},e.mouseoverInstance=function(n){var r=t(".design-space-diamond.instance-"+n.name);if(t(".design-space-diamond").not(r).each(function(){t(this).css({opacity:.1})}),n.display||n===e.model.currentInstance){var i=t(".specimen-field-instance ul li.master-"+n.name);t(".specimen-field-instance ul li").not(i).each(function(){t(this).addClass("dimmed")})}},e.mouseleaveInstance=function(){t(".design-space-diamond").css("opacity",""),t(".specimen-field-instance ul li").removeClass("dimmed")}}var s=e.unhandledPromise;return a.$inject=["$scope","$timeout","project"],a}),define("require/text!metapolator/ui/metapolator/instance-panel/instance-panel.tpl",[],function(){return'<mtk-local-menu class="localmenu">\n    <div class="lm-head" ng-mousedown="localMenuCtrl.toggleMenu(\'instances\')">\n        Instances\n    </div>\n    <div class="lm-body" ng-if="display.localMenu == \'instances\'">\n        <div class="lm-button" ng-class="{\'inactive\': !canAddInstance()}" ng-mouseup="addInstance()">New</div>\n        <div class="lm-button" ng-class="{\'inactive\': !model.currentInstance}" ng-mouseup="cloneInstance(model.currentInstance)">Duplicate</div>\n        <div class="lm-divider"></div>\n        <div class="lm-button" ng-class="{\'inactive\': !model.currentInstance}" ng-mouseup="removeInstance(model.currentInstance)">Delete</div>\n    </div>\n</mtk-local-menu>\n\n<div class="list-container" mtk-view-rubberband="instances">\n    <div class="list-stretcher">\n    <div class="fake-instance-panel">&nbsp;</div>\n    <div class="fake-export-panel">&nbsp;</div>\n        <ul class="ul-sequence">\n            <li class="li-sequence" ng-repeat="sequence in model.instanceSequences">\n                <ul class="ul-master" ui-sortable="sortableOptions" ng-model="sequence.children">\n                    <li class="li-master"\n                        ng-repeat="instance in sequence.children"\n                        ng-mouseover="mouseoverInstance(instance)"\n                        ng-mouseleave="mouseleaveInstance()">\n                        <mtk-instance class="mtk-master"\n                                      mtk-model="instance"\n                                      ng-class="{\'selected\': instance == model.currentInstance}"></mtk-instance>\n                    </li>\n                </ul>\n            </li>\n        </ul>\n\n        <div class="list-buttons">\n            <div title="Add Instance" ng-click="addInstance();" class="list-button">\n                <img src="lib/ui/metapolator/assets/img/addInstance.png" ng-class="{\'inactive\': !canAddInstance()}">\n            </div>\n            <div title="Duplicate Instance" ng-click="cloneInstance(model.currentInstance);" class="list-button">\n                <img src="lib/ui/metapolator/assets/img/duplicateInstance.png" ng-class="{\'inactive\': !model.currentInstance}">\n            </div>\n            <div title="Delete" ng-click="removeInstance(model.currentInstance);" class="list-button">\n                <img src="lib/ui/metapolator/assets/img/deleteInstance.png" ng-class="{\'inactive\': !model.currentInstance}">\n            </div>\n            <div class="list-button export-button" ng-click="exportFonts()" ng-class="{\'inactive\': !instancesForExport() || export_is_running}">\n                Exportâ¦\n            </div>\n        </div>\n    </div>\n</div>\n'}),define("metapolator/ui/metapolator/instance-panel/instance-panel-directive",["require/text!./instance-panel.tpl"],function(e){"use strict";function t(){return{restrict:"E",controller:"InstancePanelController",scope:{model:"=mtkModel"},replace:!1,template:e}}return t.$inject=[],t}),define("metapolator/ui/metapolator/instance-panel/instance/instance-controller",[],function(){"use strict";function e(e){this.$scope=e,e.getDiamondColor=function(e){return e.isCurrent()?e.color:"none"},e.selectInstance=function(e){e.setCurrent(),e.designSpace.setCurrent()},e.getGlyph=function(t){for(var n=e.model.children.length-1;n>=0;n--){var r=e.model.children[n];if(r.name===t)return r}}}e.$inject=["$scope"];e.prototype;return e}),define("require/text!metapolator/ui/metapolator/instance-panel/instance/instance.tpl",[],function(){return'<div class="list-sequence">\n    <svg height="17" width="13">\n        <polygon points="10,2 4,2 2,6 7,15 12,6" stroke="{{model.color}}" stroke-width="2" fill="{{getDiamondColor(model)}}">\n    </svg> \n</div>\n\n<div class="list-view" ng-class="{\'selected\': model.display}">\n    <ul>\n        <li ng-repeat="character in model.ag"><!--\n            --><mtk-glyph ng-if="getGlyph(character)" mtk-model="getGlyph(character)" class="list-mtk-glyph"></mtk-glyph><!--\n        --></li>\n    </ul> \n</div>\n\n<div mtk-rename="model.displayName" class="list-edit" ng-click="selectInstance(model)"></div>\n\n<div class="export-col">\n    <div class="instance-spacer">&nbsp;</div>\n    <div class="instance-chechmark-container">\n        <div class="instance-checkmark-export" ng-click="model.exportFont = !model.exportFont">\n            <div ng-if="model.exportFont">H</div>\n        </div>\n        <div class="instance-checkmark-otf" ng-click="model.openTypeFeatures = !model.openTypeFeatures">\n            <div ng-if="model.openTypeFeatures">ot.fea</div>\n        </div>\n    </div>\n</div>\n'}),define("metapolator/ui/metapolator/instance-panel/instance/instance-directive",["require/text!./instance.tpl"],function(e){"use strict";function t(){return{restrict:"E",controller:"InstanceController",scope:{model:"=mtkModel"},replace:!1,template:e}}return t.$inject=[],t}),define("metapolator/ui/metapolator/instance-panel/instance/instance",["angular","./instance-controller","./instance-directive","../../glyph/glyph"],function(e,t,n,r){"use strict";return e.module("mtk.instance",[r.name]).controller("InstanceController",t).directive("mtkInstance",n)}),define("metapolator/ui/metapolator/instance-panel/instance-panel",["angular","./instance-panel-controller","./instance-panel-directive","./instance/instance","../view-rubberband/view-rubberband","../local-menu/local-menu","angular-ui-sortable"],function(e,t,n,r,i,o,a){"use strict";return e.module("mtk.instancePanel",["ui.sortable",r.name,i.name,o.name]).controller("InstancePanelController",t).directive("mtkInstancePanel",n)}),define("metapolator/ui/metapolator/font-export-panel/font-export-panel-controller",[],function(){"use strict";function e(e){this.$scope=e,this.$scope.name="fontExport",e.checkAll=function(t){for(var n=e.model.length-1;n>=0;n--)for(var r=e.model[n],i=r.children.length-1;i>=0;i--){var o=r.children[i];o.exportFont=t}}}e.$inject=["$scope"];e.prototype;return e}),define("require/text!metapolator/ui/metapolator/font-export-panel/font-export-panel.tpl",[],function(){return'<mtk-local-menu class="localmenu">\n    <div class="lm-head" ng-mousedown="localMenuCtrl.toggleMenu(\'font-export\')">\n        Fonts\n    </div>\n    <div class="lm-body" ng-if="display.localMenu == \'font-export\'">\n        <div class="lm-button" ng-class="{\'inactive\': model.sequences[0].children.length == 0}" ng-mouseup="checkAll(true)">Check All</div>\n        <div class="lm-button" ng-class="{\'inactive\': model.sequences[0].children.length == 0}" ng-mouseup="checkAll(false)">Uncheck All</div>\n    </div>\n</mtk-local-menu>\n'}),define("metapolator/ui/metapolator/font-export-panel/font-export-panel-directive",["require/text!./font-export-panel.tpl"],function(e){"use strict";function t(t){return{restrict:"E",controller:"FontExportPanelController",replace:!1,template:e,scope:{model:"=mtkModel"}}}return t.$inject=[],t}),define("metapolator/ui/metapolator/font-export-panel/font-export-panel",["angular","./font-export-panel-controller","./font-export-panel-directive","../local-menu/local-menu"],function(e,t,n,r){"use strict";return e.module("mtk.fontExportPanel",[r.name]).controller("FontExportPanelController",t).directive("mtkFontExportPanel",n)}),define("metapolator/ui/metapolator/metadata-panel/metadata-panel-controller",[],function(){"use strict";function e(e){this.$scope=e,this.$scope.name="metadataPanel"}e.$inject=["$scope"];e.prototype;return e}),define("require/text!metapolator/ui/metapolator/metadata-panel/metadata-panel.tpl",[],function(){return'<div class="under-construction">\n    <div class="bottom-text">\n        <form id="export-paypal" action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_blank">Want new features?<br> <a title="Give financial support via Paypal" href="javascript:{}" onclick="document.getElementById(\'export-paypal\').submit(); return false;">Donate</a> and we\'ll make it happen<input type="hidden" name="cmd" value="_s-xclick"><input type="hidden" name="hosted_button_id" value="CMQZM2FJDP4VA"></form><br><br>\n        Coming Soon:<br>Edit Metadata\n    </div>\n\n</div>\n<div id="progress-bar-container">\n    <div id="progressbar">&nbsp;</div>\n    <div id="progresslabel">&nbsp;</div>\n    <div id="blob_download" style="display:none">Export Complete:&nbsp;<a href="#"></a></div>\n</div>'}),define("metapolator/ui/metapolator/metadata-panel/metadata-panel-directive",["require/text!./metadata-panel.tpl"],function(e){"use strict";function t(t){return{restrict:"E",controller:"MetadataPanelController",replace:!1,template:e,scope:{model:"=mtkModel"}}}return t.$inject=[],t}),define("metapolator/ui/metapolator/metadata-panel/metadata-panel",["angular","./metadata-panel-controller","./metadata-panel-directive"],function(e,t,n){"use strict";return e.module("mtk.metadataPanel",[]).controller("MetadataPanelController",t).directive("mtkMetadataPanel",n)}),define("metapolator/ui/metapolator/menubar/menubar-controller",["jquery"],function(e){"use strict";function t(t){function n(e){var t,n,r=document;r.body.createTextRange?(t=document.body.createTextRange(),t.moveToElementText(e),t.select()):window.getSelection&&(n=window.getSelection(),t=document.createRange(),t.selectNodeContents(e),n.removeAllRanges(),n.addRange(t))}this.$scope=t,t.menuItems=["Form","Mix","Export"],t.renameProject=function(){e("#project-name").attr("contenteditable","true").addClass("renaming").focus(),n(document.getElementById("project-name"))},t.newDocument=function(){window.open(""+self.location,"New Metapolator window")},t.closeDocument=function(){var e="Close this window?<br><br>WARNING: This is a demo,\neverything will be lost";t.data.confirm(e,function(e){e&&window.close()})}}t.$inject=["$scope"];t.prototype;return t}),define("require/text!metapolator/ui/metapolator/menubar/menubar.tpl",[],function(){return'<div id="project">\n    <mtk-local-menu class="localmenu">\n        <div class="lm-head" ng-mousedown="localMenuCtrl.toggleMenu(\'project\')">\n            <b>Project</b> <span id="project-name" mtk-rename="model.projectName"></span>\n        </div>\n        <div class="lm-body" ng-if="display.localMenu == \'project\'">\n            <div class="lm-button" ng-mouseup="newDocument()">New</div>\n            <div class="lm-divider"></div>\n            <div class="lm-button" ng-mouseup="renameProject()">Rename Project</div>\n            <div class="lm-divider"></div>\n            <div class="lm-button" ng-mouseup="closeDocument()">Close</div>\n        </div>\n    </mtk-local-menu>\n</div>\n\n<div class="view-buttons">\n    <div ng-repeat="menuItem in menuItems"\n         ng-click="model.viewState = $index"\n         class="menu-item"\n         ng-class="{\'menu-item-current\': $index === model.viewState }">\n        {{menuItem}}\n    </div>\n</div>\n\n<div id="help">\n    <mtk-local-menu class="localmenu lm-align-right">\n        <div class="lm-head" ng-mousedown="localMenuCtrl.toggleMenu(\'help\')">\n            <b>Help</b>\n        </div>\n        <div class="lm-body" ng-if="display.localMenu === \'help\'">\n            <div style="text-align:center">Each opens in a new tab</div>\n            <div class="lm-divider"></div>\n            <div class="lm-button"><a title="Github is a great project collaboration system" href="https://github.com/metapolator/metapolator" target="_blank">Github Project</a></div>\n            <div class="lm-button"><a title="Frequently Asked Questions answered on the project wiki" href="https://github.com/metapolator/metapolator/wiki/faq" target="_blank">FAQ</a></div>\n            <div class="lm-button"><a title="Browse existing feature requests and bug reports on Github" href="https://github.com/metapolator/metapolator/issues" target="_blank">Github Issues</a></div>\n            <div class="lm-button"><a title="Report a bug or request a feature by creating a new issue on Github" href="https://github.com/metapolator/metapolator/issues/new" target="_blank">New Issue</a></div>\n            <div class="lm-divider"></div>\n            <div class="lm-button"><a title="Homepage" href="https://metapolator.com" target="_blank">metapolator.com</a></div>\n            <div class="lm-button"><a title="Follow us on Twitter" href="https://twitter.com/metapolator" target="_blank">@metapolator</a></div>\n            <div class="lm-button"><a title="To ask questions about usage or anything in general, post on our G+ Community page" href="https://plus.google.com/communities/110027004108709154749" target="_blank">+Metapolator</a></b></div>\n            <div class="lm-divider"></div>\n            <div class="lm-button"><form id="help-paypal" action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_blank"><a title="Give financial support via Paypal" href="javascript:{}" onclick="document.getElementById(\'help-paypal\').submit(); return false;">Donate</a><input type="hidden" name="cmd" value="_s-xclick"><input type="hidden" name="hosted_button_id" value="CMQZM2FJDP4VA"></form></div>\n            <div class="lm-button"><a title="Support the project with a T shirt (USA)" href="http://teespring.com/metapolator-beta-0-3-0" target="_blank">Buy T Shirts (USA)</a></div>\n            <div class="lm-button"><a title="Support the project with a T shirt (EU)" href="http://metapolator.spreadshirt.com" target="_blank">Buy T Shirts (EU)</a></div>\n            <div class="lm-divider"></div>\n            <div class="lm-button"><a title="To look behind the curtain and see the true underlying reality, take the red pill" href="http://metapolator.com/red-pill-demo/" target="_blank">Technology Demo</a></b></div>\n        </div>\n    </mtk-local-menu>\n</div>\n\n<div id="name-and-version">\n    Metapolator Alpha v0.4.0\n</div>\n'}),define("metapolator/ui/metapolator/menubar/menubar-directive",["require/text!./menubar.tpl"],function(e){"use strict";function t(){return{restrict:"E",controller:"MenubarController",replace:!1,template:e,scope:{model:"=mtkModel"}}}return t.$inject=[],t}),define("metapolator/ui/metapolator/menubar/menubar",["angular","./menubar-controller","./menubar-directive","../rename/rename"],function(e,t,n,r){"use strict";return e.module("mtk.menubar",[r.name]).controller("MenubarController",t).directive("mtkMenubar",n)}),define("metapolator/ui/metapolator/divider/horizontal-divider/horizontal-divider-controller",[],function(){"use strict";function e(e){this.$scope=e,this.$scope.name="horizontalDivider"}e.$inject=["$scope"];e.prototype;return e}),function(e){"function"==typeof define&&define.amd?define("jquery-ui/draggable",["jquery","./core","./mouse","./widget"],e):e(jQuery)}(function(e){return e.widget("ui.draggable",e.ui.mouse,{version:"1.11.4",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&this._setPositionRelative(),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._setHandleClassName(),
this._mouseInit()},_setOption:function(e,t){this._super(e,t),"handle"===e&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){return(this.helper||this.element).is(".ui-draggable-dragging")?void(this.destroyOnClear=!0):(this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._removeHandleClassName(),void this._mouseDestroy())},_mouseCapture:function(t){var n=this.options;return this._blurActiveElement(t),this.helper||n.disabled||e(t.target).closest(".ui-resizable-handle").length>0?!1:(this.handle=this._getHandle(t),this.handle?(this._blockFrames(n.iframeFix===!0?"iframe":n.iframeFix),!0):!1)},_blockFrames:function(t){this.iframeBlocks=this.document.find(t).map(function(){var t=e(this);return e("<div>").css("position","absolute").appendTo(t.parent()).outerWidth(t.outerWidth()).outerHeight(t.outerHeight()).offset(t.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(t){var n=this.document[0];if(this.handleElement.is(t.target))try{n.activeElement&&"body"!==n.activeElement.nodeName.toLowerCase()&&e(n.activeElement).blur()}catch(r){}},_mouseStart:function(t){var n=this.options;return this.helper=this._createHelper(t),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=this.helper.parents().filter(function(){return"fixed"===e(this).css("position")}).length>0,this.positionAbs=this.element.offset(),this._refreshOffsets(t),this.originalPosition=this.position=this._generatePosition(t,!1),this.originalPageX=t.pageX,this.originalPageY=t.pageY,n.cursorAt&&this._adjustOffsetFromHelper(n.cursorAt),this._setContainment(),this._trigger("start",t)===!1?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!n.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this._normalizeRightBottom(),this._mouseDrag(t,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,t),!0)},_refreshOffsets:function(e){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()},this.offset.click={left:e.pageX-this.offset.left,top:e.pageY-this.offset.top}},_mouseDrag:function(t,n){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(t,!0),this.positionAbs=this._convertPositionTo("absolute"),!n){var r=this._uiHash();if(this._trigger("drag",t,r)===!1)return this._mouseUp({}),!1;this.position=r.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var n=this,r=!1;return e.ui.ddmanager&&!this.options.dropBehaviour&&(r=e.ui.ddmanager.drop(this,t)),this.dropped&&(r=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!r||"valid"===this.options.revert&&r||this.options.revert===!0||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,r)?e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){n._trigger("stop",t)!==!1&&n._clear()}):this._trigger("stop",t)!==!1&&this._clear(),!1},_mouseUp:function(t){return this._unblockFrames(),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,t),this.handleElement.is(t.target)&&this.element.focus(),e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(t){return this.options.handle?!!e(t.target).closest(this.element.find(this.options.handle)).length:!0},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this.handleElement.addClass("ui-draggable-handle")},_removeHandleClassName:function(){this.handleElement.removeClass("ui-draggable-handle")},_createHelper:function(t){var n=this.options,r=e.isFunction(n.helper),i=r?e(n.helper.apply(this.element[0],[t])):"clone"===n.helper?this.element.clone().removeAttr("id"):this.element;return i.parents("body").length||i.appendTo("parent"===n.appendTo?this.element[0].parentNode:n.appendTo),r&&i[0]===this.element[0]&&this._setPositionRelative(),i[0]===this.element[0]||/(fixed|absolute)/.test(i.css("position"))||i.css("position","absolute"),i},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_isRootNode:function(e){return/(html|body)/i.test(e.tagName)||e===this.document[0]},_getParentOffset:function(){var t=this.offsetParent.offset(),n=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==n&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var e=this.element.position(),t=this._isRootNode(this.scrollParent[0]);return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+(t?0:this.scrollParent.scrollTop()),left:e.left-(parseInt(this.helper.css("left"),10)||0)+(t?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,n,r,i=this.options,o=this.document[0];return this.relativeContainer=null,i.containment?"window"===i.containment?void(this.containment=[e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,e(window).scrollLeft()+e(window).width()-this.helperProportions.width-this.margins.left,e(window).scrollTop()+(e(window).height()||o.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):"document"===i.containment?void(this.containment=[0,0,e(o).width()-this.helperProportions.width-this.margins.left,(e(o).height()||o.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):i.containment.constructor===Array?void(this.containment=i.containment):("parent"===i.containment&&(i.containment=this.helper[0].parentNode),n=e(i.containment),r=n[0],void(r&&(t=/(scroll|auto)/.test(n.css("overflow")),this.containment=[(parseInt(n.css("borderLeftWidth"),10)||0)+(parseInt(n.css("paddingLeft"),10)||0),(parseInt(n.css("borderTopWidth"),10)||0)+(parseInt(n.css("paddingTop"),10)||0),(t?Math.max(r.scrollWidth,r.offsetWidth):r.offsetWidth)-(parseInt(n.css("borderRightWidth"),10)||0)-(parseInt(n.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(t?Math.max(r.scrollHeight,r.offsetHeight):r.offsetHeight)-(parseInt(n.css("borderBottomWidth"),10)||0)-(parseInt(n.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=n))):void(this.containment=null)},_convertPositionTo:function(e,t){t||(t=this.position);var n="absolute"===e?1:-1,r=this._isRootNode(this.scrollParent[0]);return{top:t.top+this.offset.relative.top*n+this.offset.parent.top*n-("fixed"===this.cssPosition?-this.offset.scroll.top:r?0:this.offset.scroll.top)*n,left:t.left+this.offset.relative.left*n+this.offset.parent.left*n-("fixed"===this.cssPosition?-this.offset.scroll.left:r?0:this.offset.scroll.left)*n}},_generatePosition:function(e,t){var n,r,i,o,a=this.options,s=this._isRootNode(this.scrollParent[0]),u=e.pageX,l=e.pageY;return s&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),t&&(this.containment&&(this.relativeContainer?(r=this.relativeContainer.offset(),n=[this.containment[0]+r.left,this.containment[1]+r.top,this.containment[2]+r.left,this.containment[3]+r.top]):n=this.containment,e.pageX-this.offset.click.left<n[0]&&(u=n[0]+this.offset.click.left),e.pageY-this.offset.click.top<n[1]&&(l=n[1]+this.offset.click.top),e.pageX-this.offset.click.left>n[2]&&(u=n[2]+this.offset.click.left),e.pageY-this.offset.click.top>n[3]&&(l=n[3]+this.offset.click.top)),a.grid&&(i=a.grid[1]?this.originalPageY+Math.round((l-this.originalPageY)/a.grid[1])*a.grid[1]:this.originalPageY,l=n?i-this.offset.click.top>=n[1]||i-this.offset.click.top>n[3]?i:i-this.offset.click.top>=n[1]?i-a.grid[1]:i+a.grid[1]:i,o=a.grid[0]?this.originalPageX+Math.round((u-this.originalPageX)/a.grid[0])*a.grid[0]:this.originalPageX,u=n?o-this.offset.click.left>=n[0]||o-this.offset.click.left>n[2]?o:o-this.offset.click.left>=n[0]?o-a.grid[0]:o+a.grid[0]:o),"y"===a.axis&&(u=this.originalPageX),"x"===a.axis&&(l=this.originalPageY)),{top:l-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:s?0:this.offset.scroll.top),left:u-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:s?0:this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_normalizeRightBottom:function(){"y"!==this.options.axis&&"auto"!==this.helper.css("right")&&(this.helper.width(this.helper.width()),this.helper.css("right","auto")),"x"!==this.options.axis&&"auto"!==this.helper.css("bottom")&&(this.helper.height(this.helper.height()),this.helper.css("bottom","auto"))},_trigger:function(t,n,r){return r=r||this._uiHash(),e.ui.plugin.call(this,t,[n,r,this],!0),/^(drag|start|stop)/.test(t)&&(this.positionAbs=this._convertPositionTo("absolute"),r.offset=this.positionAbs),e.Widget.prototype._trigger.call(this,t,n,r)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.ui.plugin.add("draggable","connectToSortable",{start:function(t,n,r){var i=e.extend({},n,{item:r.element});r.sortables=[],e(r.options.connectToSortable).each(function(){var n=e(this).sortable("instance");n&&!n.options.disabled&&(r.sortables.push(n),n.refreshPositions(),n._trigger("activate",t,i))})},stop:function(t,n,r){var i=e.extend({},n,{item:r.element});r.cancelHelperRemoval=!1,e.each(r.sortables,function(){var e=this;e.isOver?(e.isOver=0,r.cancelHelperRemoval=!0,e.cancelHelperRemoval=!1,e._storedCSS={position:e.placeholder.css("position"),top:e.placeholder.css("top"),left:e.placeholder.css("left")},e._mouseStop(t),e.options.helper=e.options._helper):(e.cancelHelperRemoval=!0,e._trigger("deactivate",t,i))})},drag:function(t,n,r){e.each(r.sortables,function(){var i=!1,o=this;o.positionAbs=r.positionAbs,o.helperProportions=r.helperProportions,o.offset.click=r.offset.click,o._intersectsWith(o.containerCache)&&(i=!0,e.each(r.sortables,function(){return this.positionAbs=r.positionAbs,this.helperProportions=r.helperProportions,this.offset.click=r.offset.click,this!==o&&this._intersectsWith(this.containerCache)&&e.contains(o.element[0],this.element[0])&&(i=!1),i})),i?(o.isOver||(o.isOver=1,r._parent=n.helper.parent(),o.currentItem=n.helper.appendTo(o.element).data("ui-sortable-item",!0),o.options._helper=o.options.helper,o.options.helper=function(){return n.helper[0]},t.target=o.currentItem[0],o._mouseCapture(t,!0),o._mouseStart(t,!0,!0),o.offset.click.top=r.offset.click.top,o.offset.click.left=r.offset.click.left,o.offset.parent.left-=r.offset.parent.left-o.offset.parent.left,o.offset.parent.top-=r.offset.parent.top-o.offset.parent.top,r._trigger("toSortable",t),r.dropped=o.element,e.each(r.sortables,function(){this.refreshPositions()}),r.currentItem=r.element,o.fromOutside=r),o.currentItem&&(o._mouseDrag(t),n.position=o.position)):o.isOver&&(o.isOver=0,o.cancelHelperRemoval=!0,o.options._revert=o.options.revert,o.options.revert=!1,o._trigger("out",t,o._uiHash(o)),o._mouseStop(t,!0),o.options.revert=o.options._revert,o.options.helper=o.options._helper,o.placeholder&&o.placeholder.remove(),n.helper.appendTo(r._parent),r._refreshOffsets(t),n.position=r._generatePosition(t,!0),r._trigger("fromSortable",t),r.dropped=!1,e.each(r.sortables,function(){this.refreshPositions()}))})}}),e.ui.plugin.add("draggable","cursor",{start:function(t,n,r){var i=e("body"),o=r.options;i.css("cursor")&&(o._cursor=i.css("cursor")),i.css("cursor",o.cursor)},stop:function(t,n,r){var i=r.options;i._cursor&&e("body").css("cursor",i._cursor)}}),e.ui.plugin.add("draggable","opacity",{start:function(t,n,r){var i=e(n.helper),o=r.options;i.css("opacity")&&(o._opacity=i.css("opacity")),i.css("opacity",o.opacity)},stop:function(t,n,r){var i=r.options;i._opacity&&e(n.helper).css("opacity",i._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(e,t,n){n.scrollParentNotHidden||(n.scrollParentNotHidden=n.helper.scrollParent(!1)),n.scrollParentNotHidden[0]!==n.document[0]&&"HTML"!==n.scrollParentNotHidden[0].tagName&&(n.overflowOffset=n.scrollParentNotHidden.offset())},drag:function(t,n,r){var i=r.options,o=!1,a=r.scrollParentNotHidden[0],s=r.document[0];a!==s&&"HTML"!==a.tagName?(i.axis&&"x"===i.axis||(r.overflowOffset.top+a.offsetHeight-t.pageY<i.scrollSensitivity?a.scrollTop=o=a.scrollTop+i.scrollSpeed:t.pageY-r.overflowOffset.top<i.scrollSensitivity&&(a.scrollTop=o=a.scrollTop-i.scrollSpeed)),i.axis&&"y"===i.axis||(r.overflowOffset.left+a.offsetWidth-t.pageX<i.scrollSensitivity?a.scrollLeft=o=a.scrollLeft+i.scrollSpeed:t.pageX-r.overflowOffset.left<i.scrollSensitivity&&(a.scrollLeft=o=a.scrollLeft-i.scrollSpeed))):(i.axis&&"x"===i.axis||(t.pageY-e(s).scrollTop()<i.scrollSensitivity?o=e(s).scrollTop(e(s).scrollTop()-i.scrollSpeed):e(window).height()-(t.pageY-e(s).scrollTop())<i.scrollSensitivity&&(o=e(s).scrollTop(e(s).scrollTop()+i.scrollSpeed))),i.axis&&"y"===i.axis||(t.pageX-e(s).scrollLeft()<i.scrollSensitivity?o=e(s).scrollLeft(e(s).scrollLeft()-i.scrollSpeed):e(window).width()-(t.pageX-e(s).scrollLeft())<i.scrollSensitivity&&(o=e(s).scrollLeft(e(s).scrollLeft()+i.scrollSpeed)))),o!==!1&&e.ui.ddmanager&&!i.dropBehaviour&&e.ui.ddmanager.prepareOffsets(r,t)}}),e.ui.plugin.add("draggable","snap",{start:function(t,n,r){var i=r.options;r.snapElements=[],e(i.snap.constructor!==String?i.snap.items||":data(ui-draggable)":i.snap).each(function(){var t=e(this),n=t.offset();this!==r.element[0]&&r.snapElements.push({item:this,width:t.outerWidth(),height:t.outerHeight(),top:n.top,left:n.left})})},drag:function(t,n,r){var i,o,a,s,u,l,c,h,f,p,d=r.options,m=d.snapTolerance,g=n.offset.left,v=g+r.helperProportions.width,y=n.offset.top,b=y+r.helperProportions.height;for(f=r.snapElements.length-1;f>=0;f--)u=r.snapElements[f].left-r.margins.left,l=u+r.snapElements[f].width,c=r.snapElements[f].top-r.margins.top,h=c+r.snapElements[f].height,u-m>v||g>l+m||c-m>b||y>h+m||!e.contains(r.snapElements[f].item.ownerDocument,r.snapElements[f].item)?(r.snapElements[f].snapping&&r.options.snap.release&&r.options.snap.release.call(r.element,t,e.extend(r._uiHash(),{snapItem:r.snapElements[f].item})),r.snapElements[f].snapping=!1):("inner"!==d.snapMode&&(i=Math.abs(c-b)<=m,o=Math.abs(h-y)<=m,a=Math.abs(u-v)<=m,s=Math.abs(l-g)<=m,i&&(n.position.top=r._convertPositionTo("relative",{top:c-r.helperProportions.height,left:0}).top),o&&(n.position.top=r._convertPositionTo("relative",{top:h,left:0}).top),a&&(n.position.left=r._convertPositionTo("relative",{top:0,left:u-r.helperProportions.width}).left),s&&(n.position.left=r._convertPositionTo("relative",{top:0,left:l}).left)),p=i||o||a||s,"outer"!==d.snapMode&&(i=Math.abs(c-y)<=m,o=Math.abs(h-b)<=m,a=Math.abs(u-g)<=m,s=Math.abs(l-v)<=m,i&&(n.position.top=r._convertPositionTo("relative",{top:c,left:0}).top),o&&(n.position.top=r._convertPositionTo("relative",{top:h-r.helperProportions.height,left:0}).top),a&&(n.position.left=r._convertPositionTo("relative",{top:0,left:u}).left),s&&(n.position.left=r._convertPositionTo("relative",{top:0,left:l-r.helperProportions.width}).left)),!r.snapElements[f].snapping&&(i||o||a||s||p)&&r.options.snap.snap&&r.options.snap.snap.call(r.element,t,e.extend(r._uiHash(),{snapItem:r.snapElements[f].item})),r.snapElements[f].snapping=i||o||a||s||p)}}),e.ui.plugin.add("draggable","stack",{start:function(t,n,r){var i,o=r.options,a=e.makeArray(e(o.stack)).sort(function(t,n){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(n).css("zIndex"),10)||0)});a.length&&(i=parseInt(e(a[0]).css("zIndex"),10)||0,e(a).each(function(t){e(this).css("zIndex",i+t)}),this.css("zIndex",i+a.length))}}),e.ui.plugin.add("draggable","zIndex",{start:function(t,n,r){var i=e(n.helper),o=r.options;i.css("zIndex")&&(o._zIndex=i.css("zIndex")),i.css("zIndex",o.zIndex)},stop:function(t,n,r){var i=r.options;i._zIndex&&e(n.helper).css("zIndex",i._zIndex)}}),e.ui.draggable}),define("metapolator/ui/metapolator/divider/horizontal-divider/horizontal-divider-directive",["jquery","jquery-ui/draggable"],function(e,t){"use strict";function n(){return{restrict:"E",controller:"HorizontalDividerController",replace:!1,link:function(t,n,r,i){function o(){h=e(n).parent(),f=e(n).prev(),p=e(n).next()}function a(){var t=e("mtk-menubar").outerHeight();l=c+t,u=e("metapolator").outerHeight()-c,d=h.outerHeight()}function s(t){var n=e(t).position().top;f.outerHeight("calc("+n/d+" * 100% + 5px)"),e(t).css("top","calc("+n/d+" * 100%)"),p.outerHeight("calc("+(1-n/d)+" * 100% - 5px)")}var u=null,l=null,c=60,h=null,f=null,p=null,d=null;o(),a(),e(n[0]).draggable({axis:"y",containment:[0,l,0,u],start:function(){a()},drag:function(){s(n[0])},stop:function(){s(n[0])}})}}}return n.$inject=[],n}),define("metapolator/ui/metapolator/divider/horizontal-divider/horizontal-divider",["angular","./horizontal-divider-controller","./horizontal-divider-directive"],function(e,t,n){"use strict";return e.module("mtk.horizontalDivider",[]).controller("HorizontalDividerController",t).directive("mtkHorizontalDivider",n)}),define("metapolator/ui/metapolator/divider/vertical-divider/vertical-divider-controller",[],function(){"use strict";function e(e){this.$scope=e}e.$inject=["$scope"];e.prototype;return e}),define("metapolator/ui/metapolator/divider/vertical-divider/vertical-divider-directive",["jquery","jquery-ui/draggable"],function(e,t){"use strict";function n(){return{restrict:"E",controller:"VerticalDividerController",replace:!1,scope:{dividers:"=mtkDividers",panels:"=mtkPanels",totalParts:"=mtkTotalParts"},link:function(t,n,r,i){function o(){"left"===h.contain?(v=h.limitMin,y=h.limitMax):(v=f-h.limitMax,y=f-h.limitMin)}function a(){f=e(window).outerWidth(),p=l(),e(n[0]).css("left",s())}function s(){for(var e=0,n=h.position.length-1;n>=0;n--){var r=h.position[n];e+=t.panels[r].share/p*f}return e}function u(){for(var e=0,n=t.panels.length-1;n>=0;n--){var r=t.panels[n];e+=r.share}return e}function l(){return t.panels[0].share+t.panels[1].share+t.panels[2].share}var c=r.divider,h=t.dividers[c],f=0,p=0,d=0,m=null,g=null,v=0,y=0;e(window).resize(function(){a(),o()}),t.$watch("model.dividerTrigger",function(){return a()},!0),a(),o(),e(n).draggable({axis:"x",containment:[v,0,y,0],start:function(){e("mtk-landscape").removeClass("transition"),d="left"===h.side?e(this).offset().left:f-e(this).offset().left,m=d/f*p,h.mirror&&(g=t.panels[h.mirror].share)},drag:function(){d="left"===h.side?e(this).offset().left:f-e(this).offset().left;var n=d/f*p,r=p-t.panels[h.dead].share-n;t.panels[h.add].share=n,t.panels[h.subtract].share=r,h.mirror&&(t.panels[h.mirror].share=g-(n-m)),t.totalPanelParts=u(),t.$apply()},stop:function(){e("mtk-landscape").addClass("transition")}})}}}return n.$inject=[],n}),define("metapolator/ui/metapolator/divider/vertical-divider/vertical-divider",["angular","./vertical-divider-controller","./vertical-divider-directive"],function(e,t,n){"use strict";return e.module("mtk.verticalDivider",[]).controller("VerticalDividerController",t).directive("mtkVerticalDivider",n)}),define("metapolator/ui/metapolator/app",["angular","./app-controller","./app-directive","./parameter-panel/parameter-panel","./specimen-panel/specimen-panel","./master-panel/master-panel","./design-space-panel/design-space-panel","./instance-panel/instance-panel","./font-export-panel/font-export-panel","./metadata-panel/metadata-panel","./menubar/menubar","./divider/horizontal-divider/horizontal-divider","./divider/vertical-divider/vertical-divider"],function(e,t,n,r,i,o,a,s,u,l,c,h,f){"use strict";return e.module("mtk.metapolator",[r.name,i.name,o.name,a.name,s.name,u.name,c.name,l.name,h.name,f.name]).controller("AppController",t).directive("metapolator",n)}),define("Atem-IO/errors",["Atem-Errors/errors"],function(e){var t=Object.create(e),n=e.makeError.bind(null,t);return n("IO",void 0,t.Error),n("IONoEntry",void 0,t.IO),n("IOEntryExists",void 0,t.IO),n("IONotDir",void 0,t.IO),n("IOIsDir",void 0,t.IO),n("IONotEmpty",void 0,t.IO),n("IOMaxRecursion",void 0,t.IOMaxRecursion),t}),define("ufojs/ufoLib/constants",[],function(){"use strict";return{DEFAULT_GLYPHS_DIRNAME:"glyphs",DATA_DIRNAME:"data",IMAGES_DIRNAME:"images",METAINFO_FILENAME:"metainfo.plist",FONTINFO_FILENAME:"fontinfo.plist",LIB_FILENAME:"lib.plist",GROUPS_FILENAME:"groups.plist",KERNING_FILENAME:"kerning.plist",FEATURES_FILENAME:"features.fea",LAYERCONTENTS_FILENAME:"layercontents.plist",LAYERINFO_FILENAME:"layerinfo.plist",DEFAULT_LAYER_NAME:"public.default",supportedUFOFormatVersions:{1:!0,2:!0,3:!0},supportedGLIFFormatVersions:{1:!0,2:!0},transformationInfo:[["xScale",1],["xyScale",0],["yxScale",0],["yScale",1],["xOffset",0],["yOffset",0]]}}),define("ufojs/errors",["Atem-Errors/errors"],function(e){"use strict";var t=Object.create(e),n=e.makeError.bind(null,t);return n("UFO",void 0,t.Error),n("Dependency",void 0,t.UFO),n("Parser",void 0,t.UFO),n("NameTranslation",void 0,t.UFO),n("UFOLib",void 0,t.UFO),n("GlifLib",void 0,t.UFO),t}),define("ufojs/main",["./errors"],function(e){"use strict";function t(e){return"number"==typeof e&&isFinite(e)}function n(e){return"number"==typeof e&&e===e&&e===(0|e)}function r(e){return"number"==typeof e&&isFinite(e)&&e!==(0|e)}function i(e){return"string"!=typeof e?!1:d.test(e)}function o(e){return"string"!=typeof e?!1:m.test(e)}function a(e){return"string"!=typeof e?!1:g.test(e)}function s(e,t,n){return"undefined"==typeof n||0===+n?Math[e](t):(t=+t,n=+n,isNaN(t)||"number"!=typeof n||n%1!==0?NaN:(t=t.toString().split("e"),t=Math[e](+(t[0]+"e"+(t[1]?+t[1]-n:-n))),t=t.toString().split("e"),+(t[0]+"e"+(t[1]?+t[1]+n:n))))}function u(e,t){return s("round",e,"number"==typeof t?-t:t)}function l(e,t){t=t||0;var n,r,i=e.charCodeAt(t);if(i>=55296&&56319>=i){if(n=i,r=e.charCodeAt(t+1),isNaN(r))throw"High surrogate not followed by low surrogate in fixedCharCodeAt()";return 1024*(n-55296)+(r-56320)+65536}return i>=56320&&57343>=i?!1:i}function c(e,t){void 0===t&&(t=!0);for(var n=Object.create(null),r=0;r<e.length;r++)n[e[r]]=t;return n}var h=e.Value,f=e.Type,p=function(e,t){for(var n in t){var r=t.__lookupGetter__(n),i=t.__lookupSetter__(n);r||i?(r&&e.prototype.__defineGetter__(n,r),i&&e.prototype.__defineSetter__(n,i)):e.prototype[n]=t[n]}},d=/^[0-9]+$/,m=/^[+-]?[0-9]+$/,g=/^([+-]?(((\d+(\.)?)|(\d*\.\d+))([eE][+-]?\d+)?))$/,v=function(){var e,t,r=0,i=1;if(arguments.length<1)throw new f("range() expected at least 1 arguments, got 0 "+arguments.length);if(arguments.length>3)throw new f("range() expected at most 3 arguments, got "+arguments.length);1==arguments.length?e=arguments[0]:arguments.length>=2&&(r=arguments[0],e=arguments[1],3==arguments.length&&(i=arguments[2]));var o=[["start",r],["stop",e],["step",i]];for(var a in o){var s=o[a];if(!n(s[1])){var u=typeof s[1];throw"number"===u&&(u="float"),new f("range() integer "+s[0]+" argument expected, got "+u)}}if(0===i)throw new h("range() step argument must not be zero");t=i>0?function(t){return e>t}:function(t){return t>e};for(var l={},a=r;t(a);a+=i)l[a]=a;return l},y=function(e){var t=function(n){return n instanceof Array?n.map(t):"number"==typeof n?u(n,e):n};return t},b=function(e,t){var n=y(t);return n(e)},_=Date.parse,w=[1,4,5,6,7,10,11],x=function(e){var t,n,r=0;if(n=/^(\d{4}|[+\-]\d{6})(?:-(\d{2})(?:-(\d{2}))?)?(?:T(\d{2}):(\d{2})(?::(\d{2})(?:\.(\d{3}))?)?(?:(Z)|([+\-])(\d{2})(?::(\d{2}))?)?)?$/.exec(e)){for(var i,o=0;i=w[o];++o)n[i]=+n[i]||0;n[2]=(+n[2]||1)-1,n[3]=+n[3]||1,"Z"!==n[8]&&void 0!==n[9]&&(r=60*n[10]+n[11],"+"===n[9]&&(r=0-r)),t=Date.UTC(n[1],n[2],n[3],n[4],n[5]+r,n[6],n[7])}else t=_?_(e):NaN;return t},S=function(e,t){if(arguments.length<2)throw new f("isInstance() expects 2 arguments, got "+arguments.length);var i,o,t=t instanceof Array?t:[t];for(o=0;o<t.length;o++)if(i=typeof t[o],"function"===i&&e instanceof t[o]||"int"===t[o]&&n(e)||"float"===t[o]&&r(e)||"NaN"===t[o]&&e!==e||"null"===t[o]&&null===e||"Infinity"===t[o]&&e===Number.POSITIVE_INFINITY||"-Infinity"===t[o]&&e===Number.NEGATIVE_INFINITY||"string"===i&&typeof e===t[o]&&e===e)return!0;return!1};return{enhance:p,range:v,round:u,roundRecursiveFunc:y,roundRecursive:b,isNumber:t,isInt:n,isFloat:r,isDigits:i,isIntString:o,isFloatString:a,parseDate:x,isInstance:S,fixedCharCodeAt:l,setLike:c}}),define("ufojs/xml/main",["ufojs/errors"],function(e){"use strict";function t(e,t){for(var r,i=new n.XPathEvaluator,o=i.createNSResolver(e.ownerDocument?e.ownerDocument.documentElement:e.documentElement),a=i.evaluate(t,e,o,0,null),s=[];r=a.iterateNext();)s.push(r);return s}var n,r,i,o=e.Dependency,a=e.Type,s=e.NotImplemented,u=e.Parser,l='<?xml version="1.0" encoding="UTF-8"?>';if("undefined"!=typeof DOMParser){var c=function(){this._parser=new DOMParser},h=function(){this._serializer=new XMLSerializer};r="w3c",i=window.Node,n={xmlDeclaration:l,get implementation(){return r},Parser:c,Serializer:h,XPathEvaluator:XPathEvaluator,XPathResult:XPathResult,XSLTProcessor:XSLTProcessor,Node:i,createDocument:function(){var e=[].slice.call(arguments),t=[null,null,null];return e.length!==t.length&&e.push.apply(e,t.slice(e.length)),document.implementation.createDocument.apply(document.implementation,e)},createDocumentType:function(){var e=[].slice.call(arguments);return document.implementation.createDocumentType.apply(document.implementation,e)},parseXMLString:function(e){var t=new c;return t.parseFromString(e,"text/xml")},toString:function(e){return(new h).serializeToString(e)},evaluateXPath:t},c.prototype.parseFromString=function(e,t){var n=this._parser.parseFromString(e,t);if("parsererror"===n.documentElement.tagName)throw new u("XML DOMParser: "+n.documentElement.textContent);var r=function(e){return"x"==e?"http://www.w3.org/1999/xhtml":null},i="//x:parsererror//x:div",o=(new XPathEvaluator).evaluate(i,n,r,0,null).iterateNext();if(o)throw new u("XML DOMParser: "+o.textContent);return n},h.prototype.serializeToString=function(e){var t=this._serializer.serializeToString(e);return i.DOCUMENT_NODE===e.nodeType&&0!==t.indexOf("<?xml")&&(t=[l,t].join("\n")),t}}else{var f=require.nodeRequire,p=f("path"),d=f("jsdom"),m=p.dirname(f.resolve("jsdom"))+"/jsdom/",g=f(m+"living"),v=/&/g,y=/\u00a0/g,b=/"/g,_=/</g,w=/>/g,x=function(e,t){return e=e.replace(v,"&amp;").replace(y,"&nbsp;"),e=t?e.replace(b,"&quot;"):e.replace(_,"&lt;").replace(w,"&gt;")},S=f("libxmljs"),c=function(){},h=function(){};if(!g)throw new o("No XML api available.");r="jsdom",i=g.Node,n={xmlDeclaration:l,Parser:c,Serializer:h,XPathEvaluator:g.XPathEvaluator,XPathResult:g.XPathResult,Node:i,createDocument:function(){var e=[].slice.call(arguments),t=d.jsdom().implementation;return t.createDocument.apply(t,e)},createDocumentType:function(){var e=[].slice.call(arguments),t=d.jsdom().implementation;return t.createDocumentType.apply(t,e)},get implementation(){return r},parseXMLString:function(e){var t=new c;return t.parseFromString(e,"text/xml")},toString:function(e){return(new n.Serializer).serializeToString(e)},evaluateXPath:t},c.prototype.parseFromString=function(t,n){if(!(n in{"text/xml":!0,"application/xml":!0}))throw new a('MIME-Type must be an XML type like "text/xml" or "application/xml".');var r,i,o={parsingMode:"xml",contentType:n},s=new g.Document(o),l=s,c=0;if(r=new S.SaxParser({endDocument:function(){s.getElementsByTagName("*").length},startElementNS:function(e,t,n,r,i){c++;var o;o=r?s.createElementNS(r,n+":"+e):s.createElement(e),t.map(function(e){var t=e[0],n=e[1],r=e[2],i=e[3];r?o.setAttributeNS(r,n?n+":"+t:t,i):o.setAttribute(t,i)}),i.map(function(e){var t=e[0],n=e[1];o.setAttribute("xmlns:"+t,n||"")}),l.appendChild(o),l=o},endElementNS:function(e,t,n){l=l.parentNode},characters:function(e){var t=s.createTextNode(e);l.appendChild(t)},cdata:function(e){var t=s.createCDATASection(e);l.appendChild(t)},comment:function(e){var t=s.createComment(e);l.appendChild(t)},warning:function(t){e.warn("XML SAX2 Parser: "+t)},error:function(e){i=new u("XML SAX2 Parser: "+e)}}),r.parseString(t),i)throw i;return s};var C={dispatch:function(e){C.renderer[e.nodeType].call(this,e)},renderer:{}};C.renderer[g.Node.ELEMENT_NODE]=function(e){var t=0===e.childNodes.length;t?["/>"]:["</",e.tagName,">"];this.push("<",e.tagName),Array.prototype.slice.call(e.attributes).map(C.dispatch,this),e.childNodes.length?(this.push(">"),Array.prototype.slice.call(e.childNodes).map(C.dispatch,this),this.push("</",e.tagName,">")):this.push("/>")},C.renderer[g.Node.ATTRIBUTE_NODE]=function(e){this.push(" ",e.name,'="',x(e.nodeValue,!0),'"')},C.renderer[g.Node.TEXT_NODE]=function(e){this.push(x(e.nodeValue))},C.renderer[g.Node.CDATA_SECTION_NODE]=function(e){this.push("<![CDATA[",e.nodeValue,"]]>")},C.renderer[g.Node.ENTITY_REFERENCE_NODE]=function(e){throw new s("Rendering the node type ENTITY_REFERENCE_NODE.")},C.renderer[g.Node.ENTITY_NODE]=function(e){throw new s("Rendering the node type ENTITY_NODE.")},C.renderer[g.Node.PROCESSING_INSTRUCTION_NODE]=function(e){this.push("<?",e.target," ",e.nodeValue,"?>")},C.renderer[g.Node.COMMENT_NODE]=function(e){this.push("<!--",e.nodeValue,"-->")},C.renderer[g.Node.DOCUMENT_NODE]=function(e){Array.prototype.slice.call(e.childNodes).map(C.dispatch,this)},C.renderer[g.Node.DOCUMENT_TYPE_NODE]=function(e){var t;this.push("<!DOCTYPE ",e.name),e.publicId&&this.push(' PUBLIC "',e.publicId,'" '),e.systemId&&(e.publicId||this.push(" SYSTEM "),t=e.systemId.indexOf('"')>-1?"'":'"',this.push(t,e.systemId,t)),this.push(">")},C.renderer[g.Node.DOCUMENT_FRAGMENT_NODE]=function(e){return Array.prototype.slice.call(e.childNodes).map(C.dispatch,this)},C.renderer[g.Node.NOTATION_NODE]=function(e){throw new s("Rendering the node type NOTATION_NODE.")},h.prototype.serializeToString=function(e){var t=[];return i.DOCUMENT_NODE===e.nodeType&&t.push(l,"\n"),C.dispatch.call(t,e),t.join("")}}return n}),define("ufojs/plistLib/DataObject",[],function(){"use strict";function e(e){this._data=e}return e.prototype.valueOf=e.prototype.toString=function(){return this._data},e}),define("ufojs/plistLib/IntObject",[],function(){"use strict";function e(e){this.value=parseInt(e,10)}return e.prototype=new Number,
e.prototype.valueOf=function(){return parseInt(this.value,10)},e.prototype.toString=function(){return this-0},e.constructor=e,e}),define("ufojs/plistLib/main",["ufojs/main","ufojs/errors","ufojs/xml/main","./DataObject","./IntObject"],function(e,t,n,r,i){"use strict";var o=t.Type,a=t.Value,s=e.parseDate,u="plist",l="-//Apple//DTD PLIST 1.0//EN",c="http://www.apple.com/DTDs/PropertyList-1.0.dtd",h={types:{Data:r,Int:i},readPlistFromString:function(e){var t=n.parseXMLString(e);return h.readPlistFromDocument(t)},readPlistFromDocument:function(e){var t=e.documentElement;if("plist"!==t.nodeName)throw new o('The documentElement is expected to be "plist", but it is "'+t.nodeName+'"');return t.firstElementChild||t.children.length?h.readPlistElement(t.firstElementChild||t.children[0]):null},createPlistDocument:function(e){var t=h._createPlistDOMDocument(),n=this.createPlistElement(t,e);return n?(t.documentElement.appendChild(n),t):!1},createPlistElement:function(e,t){return h._createElement(e,t)||!1},createPlistString:function(e){var t=h.createPlistDocument(e);return n.toString(t)},_createPlistDOMDocument:function(){var e=null,t=n.createDocumentType(u,l,c),r=n.createDocument(e,u,t);return r.documentElement.setAttribute("version","1.0"),r},getType:function(e){if(e instanceof i||"number"==typeof e&&e===(0|e))return"integer";if(e instanceof Number||"number"==typeof e)return"real";if(e instanceof Date)return"date";if(e instanceof r)return"data";if(e instanceof Array)return"array";if(e instanceof Boolean||"boolean"==typeof e)return e?"true":"false";if(e instanceof String||"string"==typeof e)return"string";if("object"==typeof e)return"dict";throw new a("Can't figure out the PLIST type of "+typeof e)},_createElement:function(e,t){var n,r,i;return(n=h.getType(t))?(r=e.createElement(n),i=h._plistElementWriters[n](e,t),null!==i&&r.appendChild(i),r):!1},readPlistElement:function(e){var t=e.nodeName;if(!(t in h._plistElementReaders))throw new o(['A PlistElement of type "',t,'" is not supported.'].join(""));return h._plistElementReaders[t](e)},_getChildElements:function(e){var t=[].slice.call(e.childNodes).filter(function(e){return e.nodeType===e.ELEMENT_NODE});return t},_getText:function(e){return e.textContent},_plistElementReaders:{array:function(e){return h._getChildElements(e).map(h.readPlistElement)},data:function(e){return new r(h._getText(e))},date:function(e){return new Date(s(h._getText(e)))},dict:function(e){for(var t,n={},r=h._getChildElements(e),i=0;i<r.length;i++)if("key"===r[i].nodeName)t=h._getText(r[i]);else{if(void 0===t||null===t)throw new a("Dict has a value without a key.");n[t]=h.readPlistElement(r[i]),t=void 0}return n},real:function(e){return parseFloat(h._getText(e))},integer:function(e){return parseInt(h._getText(e),10)},string:function(e){return h._getText(e)},"true":function(e){return!0},"false":function(e){return!1}},_plistElementWriters:{array:function(e,t){for(var n,r=e.createDocumentFragment(),i=0;i<t.length;i++)n=h._createElement(e,t[i]),n&&r.appendChild(n);return r},data:function(e,t){return e.createTextNode(t)},date:function(e,t){return e.createTextNode(t.toISOString())},dict:function(e,t){var n,r,i,o=e.createDocumentFragment();for(n in t)t instanceof Object&&!t.hasOwnProperty(n)||void 0!==t[n]&&null!==t[n]&&(r=h._createElement(e,t[n]),r&&(i=e.createElement("key"),i.appendChild(e.createTextNode(n)),o.appendChild(i),o.appendChild(r)));return o},real:function(e,t){return e.createTextNode(t.toString())},integer:function(e,t){return e.createTextNode(t)},string:function(e,t){return e.createTextNode(t)},"true":function(e,t){return null},"false":function(e,t){return null}},_comparePlists:function(e,t,n){var r=function(e,t,n,i){var o,s,u;if(e===t)return!0;if("object"!=typeof e)return!1;if(e instanceof Date)return t instanceof Date&&e.getTime()===t.getTime();for(o=0,s=i.length;s>o;o++)if(i[o]===e)throw new a([n.join("."),"async recursion detected"].join(" "));i.push(e);for(u in e){if(n.push(u),!(u in t))return!1;if(!Object.prototype.hasOwnProperty.call(e,u)){if(t.hasOwnProperty(u))return!1;if(e[u]===t[u])continue;return!1}if(!r(e[u],t[u],n,i))return!1;n.pop()}for(u in t)if(!(u in e))return!1;return i.pop(),!0},i=["root>>"],o=[];return r(e,t,i,o)?!0:(n&&console.warn(i.join("."),"looks not the same "),!1)}};return h}),define("ufojs/ufoLib/validators",["ufojs/main","ufojs/errors","ufojs/plistLib/main","obtain/obtain"],function(e,t,n,r){"use strict";function i(e){return"object"==typeof e}function o(e,t){if(!(t instanceof Array))throw new TypeError("genericIntListValidator expects validValues to be an Array");if(!(e instanceof Array))return!1;var n,r={};for(n=0;n<t.length;n++)"number"==typeof t[n]&&(r[t[n]]=!0);for(n=0;n<e.length;n++){if(!re(e[n]))return!1;if(!(e[n]in r))return!1}return!0}function a(e){return!re(e)||0>e?!1:!0}function s(e){return"number"!=typeof e||0>e?!1:!0}function u(e,t){var n,r,i,o;if("object"!=typeof t)throw new TypeError("genericDictValidator expects  prototype to be type of object");if("object"!=typeof e)return!1;for(n in t)if(t[n][1]&&!(n in e))return!1;for(n in e)if(!(n in t))return!1;for(n in e)if(r=e[n],i=t[n][0],o=t[n][1],(void 0!==r&&null!==r||o)&&!ne(r,i))return!1;return!0}function l(e){var t={regular:!0,italic:!0,bold:!0,"bold italic":!0};return e in t}function c(e){if(!(e instanceof Array))return!1;if(0===e.length)return!0;var t,n,r,i,s,l,c,h,f=[0,1,2,3],p={rangeMaxPPEM:["int",!0],rangeGaspBehavior:[Array,!0]},d=[];for(c in e){if(l=e[c],!u(l,p))return!1;if(n=l.rangeMaxPPEM,r=l.rangeGaspBehavior,i=a(n),!i)return!1;if(s=o(r,f),!s)return!1;d.push(n)}t=[].slice.call(d).sort();for(var h=0;h<d.length;h++)if(d[h]!==t[h])return!1;return!0}function h(e){var t,n,r,i,o,a,s,u,l;if("string"!=typeof e)return!1;if(19!==e.length)return!1;if(t=e.split(" "),2!==t.length)return!1;if(n=t[0].split("/"),3!==n.length)return!1;if(r=t[1].split(":"),3!==r.length)return!1;if(i=n[0],o=n[1],a=n[2],4!=i.length)return!1;if(2!=o.length)return!1;if(2!=a.length)return!1;if(!ie(i))return!1;if(i=parseInt(i,10),!isFinite(i))return!1;if(!ie(o))return!1;if(o=parseInt(o,10),!isFinite(o))return!1;if(!ie(a))return!1;if(a=parseInt(a,10),!isFinite(a))return!1;if(1>o||o>12)return!1;var c=new Date(i,o,0).getDate();return 1>a||a>c?!1:(s=r[0],u=r[1],l=r[2],2!=s.length?!1:2!=u.length?!1:2!=l.length?!1:ie(s)?(s=parseInt(s,10),isFinite(s)&&ie(u)?(u=parseInt(u,10),isFinite(u)&&ie(l)?(l=parseInt(l,10),isFinite(l)?0>s||s>23?!1:0>u||u>59?!1:0>l||l>59?!1:!0:!1):!1):!1):!1)}function f(e){if(!(e instanceof Array))return!1;for(var t={nameID:["int",!0],platformID:["int",!0],encodingID:["int",!0],languageID:["int",!0],string:["string",!0]},n=0;n<e.length;n++)if(!u(e[n],t))return!1;return!0}function p(e){return re(e)?0>e?!1:!0:!1}function d(e){return re(e)?1>e?!1:e>9?!1:!0:!1}function m(e){if(!(e instanceof Array))return!1;if(10!==e.length)return!1;for(var t=0;t<e.length;t++)if(!re(e[t]))return!1;return!0}function g(e){if(!(e instanceof Array))return!1;if(10!==e.length)return!1;for(var t=0;t<e.length;t++){if(!re(e[t]))return!1;if(e[t]<0)return!1}return!0}function v(e){if(!(e instanceof Array))return!1;if(2!==e.length)return!1;for(var t=0;t<e.length;t++)if(!re(e[t]))return!1;var n=e[0],r=e[1];return 0>n||n>14?!1:0>r||r>15?!1:!0}function y(e){if(!(e instanceof Array))return!1;if(e.length>14)return!1;if(e.length%2)return!1;for(var t=0;t<e.length;t++)if(!ne(e[t],"number"))return!1;return!0}function b(e){if(!(e instanceof Array))return!1;if(e.length>10)return!1;if(e.length%2)return!1;for(var t=0;t<e.length;t++)if(!ne(e[t],"number"))return!1;return!0}function _(e){if(!(e instanceof Array))return!1;if(e.length>12)return!1;for(var t=0;t<e.length;t++)if(!ne(e[t],"number"))return!1;return!0}function w(e){return re(e)?1>e||e>20?!1:!0:!1}function x(e){var t={id:["string",!0]};return u(e,t)?!0:!1}function S(e){var t={name:["string",!0],url:["string",!1],dir:["string",!1],"class":["string",!1]};return u(e,t)?"dir"in e&&!(e.dir in{ltr:!0,rtl:!0})?!1:!0:!1}function C(e){var t,n,r={credits:[Array,!0]};if(!u(e,r))return!1;if(!e.credits.length)return!1;for(r={name:["string",!0],url:["string",!1],role:["string",!1],dir:["string",!1],"class":["string",!1]},t=0;t<e.credits.length;t++){if(n=e.credits[t],!u(n,r))return!1;if("dir"in n&&!(n.dir in{ltr:!0,rtl:!0}))return!1}return!0}function k(e){var t={url:["string",!1],text:[Array,!0]};if(!u(e,t))return!1;for(var n=0;n<e.text.length;n++)if(!O(e.text[n]))return!1;return!0}function P(e){var t={url:["string",!1],text:[Array,!1],id:["string",!1]};if(!u(e,t))return!1;if("text"in e)for(var n=0;n<e.text.length;n++)if(!O(e.text[n]))return!1;return!0}function M(e){var t={text:[Array,!0]};if(!u(e,t))return!1;for(var n=0;n<e.text.length;n++)if(!O(e.text[n]))return!1;return!0}function T(e){var t={text:[Array,!0]};if(!u(e,t))return!1;for(var n=0;n<e.text.length;n++)if(!O(e.text[n]))return!1;return!0}function A(e){var t={name:["string",!0],dir:["string",!1],"class":["string",!1]};return u(e,t)?"dir"in e&&!(e.dir in{ltr:!0,rtl:!0})?!1:!0:!1}function O(e){var t={text:["string",!0],language:["string",!1],dir:["string",!1],"class":["string",!1]};return u(e,t)?"dir"in e&&!(e.dir in{ltr:!0,rtl:!0})?!1:!0:!1}function E(e){if(!(e instanceof Array))return!1;if(!e.length)return!1;for(var t=0;t<e.length;t++)if(!$(e[t]))return!1;return!0}function $(e){var t={names:[Array,!1],items:[Array,!0],id:["string",!1]};if(!u(e,t))return!1;if("names"in e)for(var n=0;n<e.names.length;n++)if(!I(e.names[n]))return!1;for(var n=0;n<e.items.length;n++)if(!N(e.items[n]))return!1;return!0}function N(e){var t={id:["string",!1],names:[Array,!0],values:[Array,!0]};if(!u(e,t))return!1;for(var n=0;n<e.names.length;n++)if(!I(e.names[n]))return!1;for(var n=0;n<e.values.length;n++)if(!D(e.values[n]))return!1;return!0}function I(e){var t={text:["string",!0],language:["string",!1],dir:["string",!1],"class":["string",!1]};return u(e,t)?"dir"in e&&!(e.dir in{ltr:!0,rtl:!0})?!1:!0:!1}function D(e){var t={text:["string",!0],language:["string",!1],dir:["string",!1],"class":["string",!1]};return u(e,t)?"dir"in e&&!(e.dir in{ltr:!0,rtl:!0})?!1:!0:!1}function j(e,t){if(!(e instanceof Array))return!1;void 0===t&&(t={});for(var n=0;n<e.length;n++){var r=e[n];if(!F(r))return!1;var i=r.identifier;if(void 0!==i){if(i in t)return!1;t[i]=!0}}return!0}function F(e){var t,n,r,i,o,a={x:["number",!1],y:["number",!1],angle:["number",!1],name:["string",!1],color:["string",!1],identifier:["string",!1]};return u(e,a)?(t=e.x,n=e.y,r=e.angle,void 0===t&&void 0===n?!1:void 0!==t&&void 0!==n||void 0===r?void 0!==t&&void 0!==n&&void 0===r?!1:void 0!==r&&(0>r||r>360)?!1:(i=e.identifier,void 0===i||U(i)?(o=e.color,void 0===o||V(o)?!0:!1):!1):!1):!1}function L(e,t){if(!(e instanceof Array))return!1;void 0===t&&(t={});for(var n,r=0;r<e.length;r++){if(n=e[r],!R(n))return!1;var i=n.identifier;if(void 0!==i){if(i in t)return!1;t[i]=!0}}return!0}function R(e){var t,n,r={x:["number",!0],y:["number",!0],name:["string",!1],color:["string",!1],identifier:["string",!1]};return u(e,r)?(t=e.identifier,void 0===t||U(t)?(n=e.color,void 0===n||V(n)?!0:!1):!1):!1}function U(e){var t,n=32,r=126;if("string"!=typeof e)return!1;if(0===e.length||e.length>100)return!1;for(var i=0;i<e.length;i++)if(t=oe(e,i),t!==!1&&(n>t||t>r))return!1;return!0}function V(e){if("string"!=typeof e)return!1;var t,n,r,i=e.split(","),o=/^[0-9]*[.]?[0-9]*$/;if(4!=i.length)return!1;for(t=0;t<i.length;t++){if(n=i[t].trim(),!o.test(n))return!1;if(!isFinite(r=parseFloat(n))&&!isFinite(r=parseInt(n,10)))return!1;if(0>r)return!1;if(r>1)return!1}return!0}function q(e){var t={fileName:["string",!0],xScale:["number",!1],xyScale:["number",!1],yxScale:["number",!1],yScale:["number",!1],xOffset:["number",!1],yOffset:["number",!1],color:["string",!1]};return u(e,t)&&e.fileName.length&&(void 0===e.color||V(e.color))?!0:!1}function z(e){return"ÂPNG\r\n\n"!==e?[!1,"Image does not begin with the PNG signature."]:[!0,void 0]}function B(e,t,n,r){return t.readBytes(e,n,r)}function H(e,t){return le(!1,e,t)}function G(e,t,n){return le({unified:n},e,t)}function W(e){var t,n,r,i,o,a,s,u="layercontents.plist in not in the correct format.",l=!1;if(!(e instanceof Array))return[!1,u];for(t={},n={},i=0;i<e.length;i++){if(r=e[i],!(r instanceof Array))return[!1,u];if(2!==r.length)return[!1,u];for(o=0;o<r.length;o++)if("string"!=typeof r[o])return[!1,u];if(a=r[0],s=r[1],"glyphs"!==s){if(0!==s.indexOf("glyphs."))return[!1,["Invalid directory name (",s,") in layercontents.plist."].join("")]}else l=!0;if(0===a.length)return[!1,"Empty layer name in layercontents.plist."];if("public.default"===a&&"glyphs"!==s)return[!1,"The name public.default is being used by a layer that is not the default."];if(a in t)return[!1,["The layer name ",a," is used by more than one layer."].join("")];if(t[a]=!0,s in n)return[!1,["The directory ",s," is used by more than one layer."].join("")];n[s]=!0}return l?[!0,void 0]:[!1,"The required default glyph set is not in the UFO."]}function Y(e,t,n){return ce(!1,e,t,n)}function X(e,t,n,r){return ce({unified:r},e,t,n)}function K(e){var t,n,r,i,o,a,s,u="The group data is not in the correct format.";if("object"!=typeof e)return[!1,u];t={},n={};for(r in e){if(i=e[r],!(i instanceof Array))return[!1,u];if(0===r.length)return[!1,"A group has an empty name."];if(0===r.indexOf("public.")){if(0!==r.indexOf("public.kern1.")&&0!==r.indexOf("public.kern2."))continue;if("public.kernN.".length===r.length)return[!1,"The group data contains a kerning group with an incomplete name."];for(o=0===r.indexOf("public.kern1.")?t:n,a=0;a<i.length;a++){if(s=i[a],"string"!=typeof s)return[!1,["The group data ",r,"contains an invalid member."].join("")];if(s in o)return[!1,['The glyph "',s,'" occurs in too many kerning groups.'].join("")];o[s]=r}}}return[!0,void 0]}function Z(e){return e.replace(he,"\\\\").replace(fe,"\\,")}function Q(e,n){if("string"!=typeof e||"string"!=typeof n)throw new t.Type("Both arguments of _kerningNamesHash must be string");return[e,n].map(Z).join(",")}function J(e,n){if(!(e instanceof Array))throw new t.Type("kerningValidator expects kerning to be an Array");if("object"!=typeof n)throw new t.Type("kerningValidator expects groups to be typeof object");var r,i,o,a,s,u,l,c,h,f,p,d,m,g,p,v,y,b={},_={},w={};for(a=0;a<e.length;a++)u=e[a][0][0],l=e[a][0][1],w[Q(u,l)]=!0;for(r in n)if(i=n[r],0===r.indexOf("public.kern1.")||0===r.indexOf("public.kern2."))for(0===r.indexOf("public.kern1.")?o=b:0===r.indexOf("public.kern2.")&&(o=_),a=0;a<i.length;a++)s=i[a],o[s]=r;for(a=0;a<e.length;a++)if(u=e[a][0][0],l=e[a][0][1],c=0===u.indexOf("public.kern1."),h=0===l.indexOf("public.kern2."),(!c||!h)&&(c||h)&&(c||u in b)&&(h||l in _)&&(!c||u in n)&&(!c||l in _)&&(!h||l in n)&&(!h||u in b)){if(c)for(f=n[u],y=_[l],m=0;m<f.length;m++)if(d=f[m],v=Q(d,y),v in w)return!1;if(h)for(g=n[l],p=b[u],m=0;m<g.length;m++)if(d=g[m],v=Q(p,d),v in w)return!1}return!0}function ee(e){var t,r,i,o,a="The lib data is not in the correct format.",s="public.glyphOrder is not properly formatted.";if("dict"!==n.getType(e))return[!1,a];for(t in e)if(r=e[t],"public.glyphOrder"===t){if(!(r instanceof Array))return[!1,s];for(i=0;i<r.length;i++)if(o=r[i],"string"!=typeof o)return[!1,s]}return[!0,void 0]}function te(e){var t="The lib data is not in the correct format.",r="public.markColor is not properly formatted.";return"dict"!==n.getType(e)?[!1,t]:void 0===e["public.markColor"]||V(e["public.markColor"])?[!0,void 0]:[!1,r]}var ne=(e.enhance,e.isInstance),re=e.isInt,ie=(e.range,e.isIntString),oe=(e.isDigits,e.fixedCharCodeAt),ae=t.assert,se=t.NotImplemented,ue=(t.Value,{});ue.isDictEnough=i,ue.genericTypeValidator=ne,ue.genericIntListValidator=o,ue.genericNonNegativeIntValidator=a,ue.genericNonNegativeNumberValidator=s,ue.genericDictValidator=u,ue.fontInfoStyleMapStyleNameValidator=l,ue.fontInfoOpenTypeGaspRangeRecordsValidator=c,ue.fontInfoOpenTypeHeadCreatedValidator=h,ue.fontInfoOpenTypeNameRecordsValidator=f,ue.fontInfoOpenTypeOS2WeightClassValidator=p,ue.fontInfoOpenTypeOS2WidthClassValidator=d,ue.fontInfoVersion2OpenTypeOS2PanoseValidator=m,ue.fontInfoVersion3OpenTypeOS2PanoseValidator=g,ue.fontInfoOpenTypeOS2FamilyClassValidator=v,ue.fontInfoPostscriptBluesValidator=y,ue.fontInfoPostscriptOtherBluesValidator=b,ue.fontInfoPostscriptStemsValidator=_,ue.fontInfoPostscriptWindowsCharacterSetValidator=w,ue.fontInfoWOFFMetadataUniqueIDValidator=x,ue.fontInfoWOFFMetadataVendorValidator=S,ue.fontInfoWOFFMetadataCreditsValidator=C,ue.fontInfoWOFFMetadataDescriptionValidator=k,ue.fontInfoWOFFMetadataLicenseValidator=P,ue.fontInfoWOFFMetadataTrademarkValidator=M,ue.fontInfoWOFFMetadataCopyrightValidator=T,ue.fontInfoWOFFMetadataLicenseeValidator=A,ue.fontInfoWOFFMetadataTextValue=O,ue.fontInfoWOFFMetadataExtensionsValidator=E,ue.fontInfoWOFFMetadataExtensionValidator=$,ue.fontInfoWOFFMetadataExtensionItemValidator=N,ue.fontInfoWOFFMetadataExtensionNameValidator=I,ue.fontInfoWOFFMetadataExtensionValueValidator=D,ue.guidelinesValidator=j,ue.guidelineValidator=F,ue.anchorsValidator=L,ue.anchorValidator=R,ue.identifierValidator=U,ue.colorValidator=V,ue.imageValidator=q;var le=r.factory({signature:[!1,"io","argPath",8,B],argPath:["arg",function(e){return ae(void 0!==e.path,"arg.path must be defined"),e.path}]},{signature:[!0,"io","argPath",8,B]},["io","arg"],function(e,t,n){var r;if(ae(void 0!==n&&(void 0!==n.path||void 0!==n.data||void 0!==n.fileObj),'Either "path" or "data" or "fileObj" must be defined.'),void 0!==n.path)r=e("signature");else if(void 0!==n.data)r=n.data.slice(0,8);else if(void 0!==n.fileObj){throw new se("There's no FileObject available yet")}return z(r)});ue.pngValidator=le,ue.pngValidatorSync=H,ue.pngValidatorAsync=G;var ce=r.factory({listOfPathsExists:["io","directoryNames","ufoPath",function(e,t,n){var r,i,o=0;for(o=0;o<t.length;o++)if(r=t[o],i=[n,r].join("/"),!e.pathExists(!1,i))return[!1,"A glyphset does not exist at "+r];return[!0,void 0]}],directoryNames:["value",function(e){return e.map(function(e){return e[1]})}]},{listOfPathsExists:["io","directoryNames","ufoPath","_callback","_errback",function(e,t,n,r,i){var o,a,s=0,u=0,l=!1,c=[!0,void 0],h=function(e,t){return u-=1,l?void 0:t?void(0===u&&r(c)):(l=!0,void r([!1,"A glyphset does not exist at "+e]))};if(0===t.length)return void setTimeout(function(){r(c)},0);for(;s<t.length;s++)o=t[s],a=[n,o].join("/"),u+=1,e.pathExists(!0,a).then(h.bind(null,o))}]},["io","value","ufoPath"],function(e,t,n,r){var i=W(n);return i[0]?e("listOfPathsExists"):i});ue.layerContentsValidator=ce,ue.layerContentsValidatorSync=Y,ue.layerContentsValidatorAsync=X,ue.groupsValidator=K;var he=/\\/g,fe=/,/g;return ue.kerningValidator=J,ue.fontLibValidator=ee,ue.glyphLibValidator=te,ue}),define("ufojs/ufoLib/_UFOBase",["ufojs/errors","Atem-IO/errors","obtain/obtain","ufojs/plistLib/main","./constants","./validators"],function(e,t,n,r,i,o){"use strict";function a(e,t){this._io=e,this._path=t}var s=e.UFOLib,u=t.IONoEntry,l=i.LAYERCONTENTS_FILENAME,c=o.layerContentsValidator,h=a.prototype;return h._getPlist=n.factory({path:["fileName",function(e){return[this._path,e].join("/")}],data:["path","default",function(e,t){try{return this._io.readFile(!1,e)}catch(n){if(n instanceof u){if(t)return!1;throw new s('The file "'+e+'" is missing. This file is required.')}throw new s('The file "'+e+'" could not be read. '+n,n.stack)}}],plist:["data","path","default",function(e,t,n){if(e===!1)return n;try{return r.readPlistFromString(e)}catch(i){throw new s('The file "'+t+'" could not be read. '+i,i.stack)}}]},{data:["path","default",function(e,t){function n(n){if(n instanceof u){if(t)return!1;throw new s('The file "'+e+'" is missing. This file is required.')}throw new s('The file "'+e+'" could not be read. '+n,n.stack)}return this._io.readFile(!0,e).then(null,n)}]},["fileName","default"],function(e){return e("plist")}),h._readRawLayerContents=n.factory({contents:[!1,new n.Argument(l),h._getPlist],validation:["contents",function(e){return c(!1,this._io,e,this._path)}],data:["validation","contents",function(e,t){if(!e[0])throw new s(e[1]);return t}]},{contents:[!0,new n.Argument(l),h._getPlist],validation:["contents",function(e){return c(!0,this._io,e,this._path)}]},[],function(e){return e("data")}),a}),define("ufojs/ufoLib/converters",["ufojs/errors","ufojs/main","./validators"],function(e,t,n){"use strict";function r(e){var t,n,r,i,o,a,s={first:["@MMK_L_"],second:["@MMK_R_"]},u={first:new Set,second:new Set};e:for(t in e)for(n in s)for(r=s[n],i=0,o=r.length;o>i;i++)if(a=r[i],0===t.indexOf(a)){u[n].add(t);continue e}return[u.first,u.second]}function i(e,t){for(var n=t,r=0;e.has(n);)r+=1,n+=r;return n}function o(e,t,n){var r=i(e,t+n);e.add(r),this[n]=r}function a(e,t){var n,i,a,s,u,l,c,h,f,p=r(t),d=p[0],m=p[1],g=Object.create(null),v=Object.create(null),y=Object.create(null);for(n in e){i=e[n],n in t&&0!==n.indexOf("public.kern1.")&&d.add(n);for(a in i)a in t&&0!==a.indexOf("public.kern2.")&&m.add(a)}s=new Set(Object.keys(t)),d.forEach(o.bind(g,s,"public.kern1.")),s=new Set(Object.keys(t)),m.forEach(o.bind(v,s,"public.kern2."));for(n in e){i=e[n],n=g[n]||n,u=Object.create(null);for(a in i)l=i[a],a=v[a]||a,u[a]=l;y[n]=u}h=Object.create(null);for(f in t)h[f]=Array.prototype.slice.call(t[f]);for(c in g)h[g[c]]=Array.prototype.slice.call(t[c]);for(c in v)h[v[c]]=Array.prototype.slice.call(t[c]);return[y,h,{side1:g,side2:v}]}function s(e,t,n){var r=e[t],i=r.type,o=r.valueValidator||w,a=r.valueOptions;return a?o(n,a):o===w?o(n,i):o(n)}function u(e,t){var n,r,i=Object.create(null);for(n in t){if(r=t[n],!e(n,r))throw new b('Invalid value for attribute "'+n+'" ('+r+")");i[n]=r}return i}function l(e,t){for(var n=[];t>e;e++)n.push(e);return n}function c(e,t){var n,r=Object.create(null);for(n in e)r[e[n]]=t?parseInt(n,10):n;return r}function h(e,t){var n,r=t,i={fontStyle:ue,widthName:he,msCharSet:le}[t];if(void 0!==i&&(r=i[t],void 0===r))throw new b("Cannot convert value ("+t+") for attribute "+e+".");return n=ie[e]||e,[n,r]}function f(e,t){var n,r=t;return void 0!==t&&("styleMapStyleName"===e?r=se[t]:"openTypeOS2WidthClass"===e?r=fe[t]:"postscriptWindowsCharacterSet"===e&&(r=ce[t])),n=oe[e]||e,[n,r]}function p(e){var t,n,r,i,o=Object.create(null);for(t in e)if(n=e[t],("weightValue"!==t||-1!==n)&&(r=h(t,n),i=r[0],i in te)){if(void 0===n)throw new b("Cannot convert value ("+n+") for attribute "+i+".");o[i]=r[1]}return o}function d(e){var t,n,r,i,o=Object.create(null);for(t in e)if(n=e[t],r=f(t,n),i=r[0],i in J){if(void 0===n)throw new b("Cannot convert value ("+n+") for attribute "+i+".");o[i]=r[1]}return o}function m(e,t){var n=t;return e in me&&(n=Math.round(t)),e in pe?n=Math.round(Math.abs(t)):e in de&&(n=Math.abs(t)),[e,n]}function g(e,t){return[e,t]}function v(e){var t,n,r,i,o=Object.create(null);for(t in e)n=e[t],r=g(t,n),i=r[0],i in te&&(o[i]=r[1]);return o}function y(e){var t,n,r,i=Object.create(null);for(t in e)n=e[t],r=m(t,n),i[r[0]]=r[1];return i}var b=e.UFOLib,_=t.setLike,w=n.genericTypeValidator,x=n.fontInfoStyleMapStyleNameValidator,S=n.fontInfoOpenTypeHeadCreatedValidator,C=n.genericIntListValidator,k=n.fontInfoOpenTypeOS2WidthClassValidator,P=n.fontInfoOpenTypeOS2WeightClassValidator,M=n.fontInfoVersion2OpenTypeOS2PanoseValidator,T=n.fontInfoOpenTypeOS2FamilyClassValidator,A=n.fontInfoPostscriptBluesValidator,O=n.fontInfoPostscriptOtherBluesValidator,E=n.fontInfoPostscriptStemsValidator,$=n.fontInfoPostscriptWindowsCharacterSetValidator,N=n.genericNonNegativeIntValidator,I=n.genericNonNegativeNumberValidator,D=n.fontInfoVersion3OpenTypeOS2PanoseValidator,j=n.fontInfoOpenTypeGaspRangeRecordsValidator,F=n.fontInfoOpenTypeNameRecordsValidator,L=n.fontInfoWOFFMetadataUniqueIDValidator,R=n.fontInfoWOFFMetadataVendorValidator,U=n.fontInfoWOFFMetadataCreditsValidator,V=n.fontInfoWOFFMetadataDescriptionValidator,q=n.fontInfoWOFFMetadataLicenseValidator,z=n.fontInfoWOFFMetadataCopyrightValidator,B=n.fontInfoWOFFMetadataTrademarkValidator,H=n.fontInfoWOFFMetadataLicenseeValidator,G=n.fontInfoWOFFMetadataExtensionsValidator,W=n.guidelinesValidator,Y=l(0,15),X=l(1,10),K=l(0,128),Z=l(0,64),Q=l(0,10),J=_(["familyName","styleName","fullName","fontName","menuName","fontStyle","note","versionMajor","versionMinor","year","copyright","notice","trademark","license","licenseURL","createdBy","designer","designerURL","vendorURL","unitsPerEm","ascender","descender","capHeight","xHeight","defaultWidth","slantAngle","italicAngle","widthName","weightName","weightValue","fondName","otFamilyName","otStyleName","otMacName","msCharSet","fondID","uniqueID","ttVendor","ttUniqueID","ttVersion"]),ee={familyName:{type:"string"},styleName:{type:"string"},styleMapFamilyName:{type:"string"},styleMapStyleName:{type:"string",valueValidator:x},versionMajor:{type:"int"},versionMinor:{type:"int"},year:{type:"int"},copyright:{type:"string"},trademark:{type:"string"},unitsPerEm:{type:["int","float"]},descender:{type:["int","float"]},xHeight:{type:["int","float"]},capHeight:{type:["int","float"]},ascender:{type:["int","float"]},italicAngle:{type:["float","int"]},note:{type:"string"},openTypeHeadCreated:{type:"string",valueValidator:S},openTypeHeadLowestRecPPEM:{type:["int","float"]},openTypeHeadFlags:{type:"integerList",valueValidator:C,valueOptions:Y},openTypeHheaAscender:{type:["int","float"]},openTypeHheaDescender:{type:["int","float"]},openTypeHheaLineGap:{type:["int","float"]},openTypeHheaCaretSlopeRise:{type:"int"},openTypeHheaCaretSlopeRun:{type:"int"},openTypeHheaCaretOffset:{type:["int","float"]},openTypeNameDesigner:{type:"string"},openTypeNameDesignerURL:{type:"string"},openTypeNameManufacturer:{type:"string"},openTypeNameManufacturerURL:{type:"string"},openTypeNameLicense:{type:"string"},openTypeNameLicenseURL:{type:"string"},openTypeNameVersion:{type:"string"},openTypeNameUniqueID:{type:"string"},openTypeNameDescription:{type:"string"},openTypeNamePreferredFamilyName:{type:"string"},openTypeNamePreferredSubfamilyName:{type:"string"},openTypeNameCompatibleFullName:{type:"string"},openTypeNameSampleText:{type:"string"},openTypeNameWWSFamilyName:{type:"string"},openTypeNameWWSSubfamilyName:{type:"string"},openTypeOS2WidthClass:{type:"int",valueValidator:k},openTypeOS2WeightClass:{type:"int",valueValidator:P},openTypeOS2Selection:{type:"integerList",valueValidator:C,valueOptions:X},openTypeOS2VendorID:{type:"string"},openTypeOS2Panose:{type:"integerList",valueValidator:M},openTypeOS2FamilyClass:{type:"integerList",valueValidator:T},openTypeOS2UnicodeRanges:{type:"integerList",valueValidator:C,valueOptions:K},openTypeOS2CodePageRanges:{type:"integerList",valueValidator:C,valueOptions:Z},openTypeOS2TypoAscender:{type:["int","float"]},openTypeOS2TypoDescender:{type:["int","float"]},openTypeOS2TypoLineGap:{type:["int","float"]},openTypeOS2WinAscent:{type:["int","float"]},openTypeOS2WinDescent:{type:["int","float"]},openTypeOS2Type:{type:"integerList",valueValidator:C,valueOptions:Q},openTypeOS2SubscriptXSize:{type:["int","float"]},openTypeOS2SubscriptYSize:{type:["int","float"]},openTypeOS2SubscriptXOffset:{type:["int","float"]},openTypeOS2SubscriptYOffset:{type:["int","float"]},openTypeOS2SuperscriptXSize:{type:["int","float"]},openTypeOS2SuperscriptYSize:{type:["int","float"]},openTypeOS2SuperscriptXOffset:{type:["int","float"]},openTypeOS2SuperscriptYOffset:{type:["int","float"]},openTypeOS2StrikeoutSize:{type:["int","float"]},openTypeOS2StrikeoutPosition:{type:["int","float"]},openTypeVheaVertTypoAscender:{type:["int","float"]},openTypeVheaVertTypoDescender:{type:["int","float"]},openTypeVheaVertTypoLineGap:{type:["int","float"]},openTypeVheaCaretSlopeRise:{type:"int"},openTypeVheaCaretSlopeRun:{type:"int"},openTypeVheaCaretOffset:{type:["int","float"]},postscriptFontName:{type:"string"},postscriptFullName:{type:"string"},postscriptSlantAngle:{type:["float","int"]},postscriptUniqueID:{type:"int"},postscriptUnderlineThickness:{type:["int","float"]},postscriptUnderlinePosition:{type:["int","float"]},postscriptIsFixedPitch:{type:"boolean"},postscriptBlueValues:{type:"integerList",valueValidator:A},postscriptOtherBlues:{type:"integerList",valueValidator:O},postscriptFamilyBlues:{type:"integerList",valueValidator:A},postscriptFamilyOtherBlues:{type:"integerList",valueValidator:O},postscriptStemSnapH:{type:"integerList",valueValidator:E},postscriptStemSnapV:{type:"integerList",valueValidator:E},postscriptBlueFuzz:{type:["int","float"]},postscriptBlueShift:{type:["int","float"]},postscriptBlueScale:{type:["float","int"]},postscriptForceBold:{type:"boolean"},postscriptDefaultWidthX:{type:["int","float"]},postscriptNominalWidthX:{type:["int","float"]},postscriptWeightName:{type:"string"},postscriptDefaultCharacter:{type:"string"},postscriptWindowsCharacterSet:{type:"int",valueValidator:$},macintoshFONDFamilyID:{type:"int"},macintoshFONDName:{type:"string"}},te=_(Object.keys(ee)),ne=function(){var e,t,n,r,i=Object.create(null);for(n=0,r=arguments.length;r>n;n++){e=arguments[n];for(t in e)i[t]=e[t]}return i}(ee,{versionMinor:{type:"int",valueValidator:N},unitsPerEm:{type:["int","float"],valueValidator:I},openTypeHeadLowestRecPPEM:{type:"int",valueValidator:I},openTypeHheaAscender:{type:"int"},openTypeHheaDescender:{type:"int"},openTypeHheaLineGap:{type:"int"},openTypeHheaCaretOffset:{type:"int"},openTypeOS2Panose:{type:"integerList",valueValidator:D},openTypeOS2TypoAscender:{type:"int"},openTypeOS2TypoDescender:{type:"int"},openTypeOS2TypoLineGap:{type:"int"},openTypeOS2WinAscent:{type:"int",valueValidator:I},openTypeOS2WinDescent:{type:"int",valueValidator:I},openTypeOS2SubscriptXSize:{type:"int"},openTypeOS2SubscriptYSize:{type:"int"},openTypeOS2SubscriptXOffset:{type:"int"},openTypeOS2SubscriptYOffset:{type:"int"},openTypeOS2SuperscriptXSize:{type:"int"},openTypeOS2SuperscriptYSize:{type:"int"},openTypeOS2SuperscriptXOffset:{type:"int"},openTypeOS2SuperscriptYOffset:{type:"int"},openTypeOS2StrikeoutSize:{type:"int"},openTypeOS2StrikeoutPosition:{type:"int"},openTypeGaspRangeRecords:{type:"dictList",valueValidator:j},openTypeNameRecords:{type:"dictList",valueValidator:F},openTypeVheaVertTypoAscender:{type:"int"},openTypeVheaVertTypoDescender:{type:"int"},openTypeVheaVertTypoLineGap:{type:"int"},openTypeVheaCaretOffset:{type:"int"},woffMajorVersion:{type:"int",valueValidator:N},woffMinorVersion:{type:"int",valueValidator:N},woffMetadataUniqueID:{type:"object",valueValidator:L},woffMetadataVendor:{type:"object",valueValidator:R},woffMetadataCredits:{type:"object",valueValidator:U},woffMetadataDescription:{type:"object",valueValidator:V},woffMetadataLicense:{type:"object",valueValidator:q},woffMetadataCopyright:{type:"object",valueValidator:z},woffMetadataTrademark:{type:"object",valueValidator:B},woffMetadataLicensee:{type:"object",valueValidator:H},woffMetadataExtensions:{type:Array,valueValidator:G},guidelines:{type:Array,valueValidator:W}}),re=_(Object.keys(ne)),ie={menuName:"styleMapFamilyName",designer:"openTypeNameDesigner",designerURL:"openTypeNameDesignerURL",createdBy:"openTypeNameManufacturer",vendorURL:"openTypeNameManufacturerURL",license:"openTypeNameLicense",licenseURL:"openTypeNameLicenseURL",ttVersion:"openTypeNameVersion",ttUniqueID:"openTypeNameUniqueID",notice:"openTypeNameDescription",otFamilyName:"openTypeNamePreferredFamilyName",otStyleName:"openTypeNamePreferredSubfamilyName",otMacName:"openTypeNameCompatibleFullName",weightName:"postscriptWeightName",weightValue:"openTypeOS2WeightClass",ttVendor:"openTypeOS2VendorID",uniqueID:"postscriptUniqueID",fontName:"postscriptFontName",fondID:"macintoshFONDFamilyID",fondName:"macintoshFONDName",defaultWidth:"postscriptDefaultWidthX",slantAngle:"postscriptSlantAngle",fullName:"postscriptFullName",fontStyle:"styleMapStyleName",widthName:"openTypeOS2WidthClass",msCharSet:"postscriptWindowsCharacterSet"},oe=c(ie),ae=_(Object.keys(ie)),se={regular:64,italic:1,bold:32,"bold italic":33},ue=(ue=c(se),ue[0]="regular",ue),le={0:1,1:2,2:3,77:4,128:5,129:6,130:7,134:8,136:9,161:10,162:11,163:12,177:13,178:14,186:15,200:16,204:17,222:18,238:19,255:20},ce=c(le,!0),he={
"Ultra-condensed":1,"Extra-condensed":2,Condensed:3,"Semi-condensed":4,"Medium (normal)":5,"Semi-expanded":6,Expanded:7,"Extra-expanded":8,"Ultra-expanded":9},fe=c(he);he.Normal=5,he.All=5,he.medium=5,he.Medium=5;var pe=_(["versionMinor","openTypeHeadLowestRecPPEM","openTypeOS2WinAscent","openTypeOS2WinDescent"]),de=_(["unitsPerEm"]),me=_(["openTypeHeadLowestRecPPEM","openTypeHheaAscender","openTypeHheaDescender","openTypeHheaLineGap","openTypeHheaCaretOffset","openTypeOS2TypoAscender","openTypeOS2TypoDescender","openTypeOS2TypoLineGap","openTypeOS2WinAscent","openTypeOS2WinDescent","openTypeOS2SubscriptXSize","openTypeOS2SubscriptYSize","openTypeOS2SubscriptXOffset","openTypeOS2SubscriptYOffset","openTypeOS2SuperscriptXSize","openTypeOS2SuperscriptYSize","openTypeOS2SuperscriptXOffset","openTypeOS2SuperscriptYOffset","openTypeOS2StrikeoutSize","openTypeOS2StrikeoutPosition","openTypeVheaVertTypoAscender","openTypeVheaVertTypoDescender","openTypeVheaVertTypoLineGap","openTypeVheaCaretOffset"]),ge=s.bind(null,ee),ve=u.bind(null,ge),ye=s.bind(null,ne),be=u.bind(null,ye);return{findKnownKerningGroups:r,makeUniqueGroupName:i,convertUFO1OrUFO2KerningToUFO3Kerning:a,validateInfoVersion2Data:ve,validateInfoVersion3Data:be,convertFontInfoDataVersion1ToVersion2:p,convertFontInfoDataVersion2ToVersion1:d,convertFontInfoDataVersion3ToVersion2:v,convertFontInfoDataVersion2ToVersion3:y,fontInfoAttributesVersion1:J,fontInfoAttributesVersion2:te,fontInfoAttributesVersion3:re,deprecatedFontInfoAttributesVersion2:ae}}),define("Atem-IO/tools/readDirRecursive",["Atem-IO/errors","obtain/obtain"],function(e,t){"use strict";function n(e){return"/"===e.slice(-1)}function r(e,t,n,r){var i=void 0===r?100:r;return o(e,t,n,0,i)}var i=e.IOMaxRecursion,o=t.factory({names:["io","path",function(e,t){return e.readDir(!1,t)}],readDir:["io","names","path","depth","maxDepth",function(e,t,r,i,a){var s,u,l,c,h=[];for(s=0;s<t.length;s++)u=t[s],l=[r,u].join("/"===r.slice(-1)?"":"/"),n(u)?(c=o(!1,e,l,i+1,a),Array.prototype.push.apply(h,c)):h.push(l);return h}]},{names:["io","path",function(e,t){return e.readDir(!0,t)}],readDir:["io","names","path","depth","maxDepth","_callback",function(e,t,r,i,a,s){function u(e){g||(Array.prototype.push.apply(v,e),d++,d===m&&s(null,v))}function l(e){g=!0,s(e,null)}var c,h,f,p,d=0,m=0,g=!1,v=[];for(c=0;c<t.length;c++)h=t[c],f=[r,h].join("/"===r.slice(-1)?"":"/"),n(h)?(m++,p=o(!0,e,f,i+1,a).then(u,l)):v.push(f);m||setTimeout(s,0,null,v)}]},["io","path","depth","maxDepth"],function(e,t,n,r){if(n>r)throw new i("Maximum recusion depth ("+r+") reached.");return e("readDir")});return r}),define("ufojs/ufoLib/filenames",["ufojs/main","ufojs/errors"],function(e,t){"use strict";function n(e,t,n,i){void 0===t&&(t={}),void 0===n&&(n=""),void 0===i&&(i=""),s("string"==typeof e,"The value for userName must be a string.");var u=n.length,l=i.length;""===n&&"."===e[0]&&(e="_"+e.slice(1));for(var h,f=[],p=0;p<e.length;p++)h=e[p],h in o?h="_":h!=h.toLowerCase()&&(h+="_"),f.push(h);e=f.join("");var d=c-u-l;e=e.slice(0,d);for(var m,g,v=[],y=e.split("."),p=0;p<y.length;p++)g=y[p],g.toLowerCase()in a&&(g="_"+g),v.push(g);return e=v.join("."),m=n+e+i,m.toLowerCase()in t&&(m=r(e,t,n,i)),m}function r(e,t,n,r){void 0===t&&(t={}),void 0===n&&(n=""),void 0===r&&(r="");var o=n.length,a=r.length;if(o+e.length+a+15>c){var s=o+e.length+a+15,u=c-s;e=e.slice(0,u)}for(var l,h,f,p,d=1,m="000000000000000";void 0===l;){if(h=""+d,f=e+m.slice(0,-h.length)+h,p=n+f+r,!(p.toLowerCase()in t)){l=p;break}if(d+=1,d>=999999999999999)break}return void 0===l&&(l=i(t,n,r)),l}function i(e,t,n){void 0===e&&(e={}),void 0===t&&(t=""),void 0===n&&(n="");for(var r,i=c-t.length-n.length,o=[],a=void 0,s=1,l=0;i>l;l++)o.push("9");for(o=o.join("");void 0===a;){if(r=t+s+n,!(r.toLowerCase()in e)){a=r;break}if(s+=1,s>=o)break}if(void 0===a)throw new u("No unique name could be found.");return a}var o,a,s=t.assert,u=t.NameTranslation,l=e.setLike,c=255;return o=l(function(){for(var e='" * + / : < > ? [  ] | \x00'.split(" "),t=1;32>t;t++)e.push(String.fromCharCode(t));return e.push(String.fromCharCode(127)),e}()),a=l(["CON PRN AUX CLOCK$ NUL A:-Z: COM1","LPT1 LPT2 LPT3 COM2 COM3 COM4"].join(" ").toLowerCase().split(" ")),{illegalCharacters:o,reservedFileNames:a,maxFileNameLength:c,userNameToFileName:n,handleClash1:r,handleClash2:i}}),define("ufojs/ufoLib/glifLib/misc",["ufojs/main","ufojs/errors","ufojs/ufoLib/filenames","ufojs/ufoLib/validators"],function(e,t,n,r){"use strict";function i(e,t){var n={};for(var r in t.contents)n[r.toLowerCase()]=!0;return s(e,n,"",".glif")}function o(e,t){if(!(e in h))return!1;var n,r=h[e],i=r.type,o=r.valueValidator,a=r.valueOptions;return n=void 0!==a?o(t,a):o===l?o(t,i):o(t)}function a(e){var t,n,r,i={};for(t in e){if(n=e[t],!(t in h))throw new c("Unknown attribute "+t+".");if(r=o(t,n),!r)throw new c("Invalid value for attribute "+t+" ("+typeof n+": "+n+").");i[t]=n}return i}var s=(e.setLike,n.userNameToFileName),u=r.colorValidator,l=r.genericTypeValidator,c=t.GlifLib,h={color:{type:"string",valueValidator:u},lib:{type:"object",valueValidator:l}};return{glyphNameToFileName:i,layerInfoVersion3ValueData:h,validateLayerInfoVersion3ValueForAttribute:o,validateLayerInfoVersion3Data:a}}),define("Atem-Pen-Case/pens/AbstractPointPen",["Atem-Errors/errors"],function(e){"use strict";function t(){}var n=e.NotImplemented,r=t.prototype;return r.beginPath=function(e){throw new n("AbstractPointPen has not implemented beginPath")},r.endPath=function(){throw new n("AbstractPointPen has not implemented endPath")},r.addPoint=function(e,t,r,i,o){throw t=void 0===t?null:t,r=r||!1,i=void 0===i?null:i,o=o||{},new n("AbstractPointPen has not implemented addPoint")},r.addComponent=function(e,t){throw new n("AbstractPointPen has not implemented addComponent")},t}),define("Atem-Pen-Case/pens/BasePointToSegmentPen",["Atem-Errors/errors","./AbstractPointPen"],function(e,t){"use strict";function n(){this.currentPath=null}var r=e.NotImplemented,i=e.assert,o=n.prototype=Object.create(t.prototype);return o.constructor=n,o.beginPath=function(e){i(null===this.currentPath,"currentPath is not null, call endPath"),this.currentPath=[],this.currentPath.kwargs=e},o._flushContour=function(e,t){throw new r("BasePointToSegmentPen has not _flushContour endPath")},o.endPath=function(){i(null!==this.currentPath,"currentPath is null, call beginPath");var e,t,n,r,o,a,s,u,l,c,h=this.currentPath,f=this.currentPath.kwargs;if(this.currentPath=null,h.length){if(1===h.length)return e=h[0][0],t=h[0][2],n=h[0][3],r=h[0][4],o=[["move",[[e,t,n,r]]]],void this._flushContour(o,f);if(o=[],"move"==h[0][1])e=h[0][0],t=h[0][2],n=h[0][3],r=h[0][4],o.push(["move",[[e,t,n,r]]]),h.splice(0,1);else{for(a=null,u=0,l=h.length;l>u;u++)if(c=h[u][1],null!==c){a=u;break}null===a?h.push([null,"qcurve",null,null,null]):h=h.concat(h.splice(0,a+1))}for(s=[],u=0,l=h.length;l>u;u++)e=h[u][0],c=h[u][1],t=h[u][2],n=h[u][3],r=h[u][4],s.push([e,t,n,r]),null!==c&&(o.push([c,s]),s=[]);this._flushContour(o,f)}},o.addPoint=function(e,t,n,r,i){t=void 0===t?null:t,n=n||!1,r=void 0===r?null:r,i=i||{},this.currentPath.push([e,t,n,r,i])},n}),define("Atem-Pen-Case/pens/PointToSegmentPen",["Atem-Errors/errors","./BasePointToSegmentPen"],function(e,t){"use strict";function n(e,n){t.call(this),this.pen=e,this.outputImpliedClosingLine=n||!1}var r=e.assert,i=n.prototype=Object.create(t.prototype);return i.constructor=n,i._flushContour=function(t){r(t.length>=1,"Less than one segment");var n,i,o,a,s,u,l,c,h,f,p,d,m,g,v,y=this.pen;for("move"==t[0][0]?(n=!1,a=t[0][1],r(1===a.length,"Points length is not 1"),u=a[0][0],l=a[0][1],c=a[0][2],h=a[0][3],t.splice(0,1)):(n=!0,i=t[t.length-1],o=i[0],a=i[1],s=a[a.length-1],u=s[0],l=s[1],c=s[2],h=s[3]),null===u||y.moveTo(u),m=this.outputImpliedClosingLine,g=t.length,f=0;g>f;f++){for(o=t[f][0],a=[],p=0,d=t[f][1].length;d>p;p++)a.push(t[f][1][p][0]);if("line"==o)r(1===a.length,"Points length is not 1"),v=a[0],(f+1!=g||m||!n)&&y.lineTo(v);else if("curve"==o)y.curveTo.apply(y,a);else{if("qcurve"!=o)throw new e.Type("illegal segmentType: "+o);y.qCurveTo.apply(y,a)}}n?y.closePath():y.endPath()},i.addComponent=function(e,t){this.pen.addComponent(e,t)},n}),define("ufojs/ufoLib/glifLib/Glyph",["ufojs/errors","obtain/obtain","Atem-Pen-Case/pens/PointToSegmentPen"],function(e,t,n){"use strict";function r(e,t){Object.defineProperty(this,"glyphName",{enumerable:!1,value:e}),Object.defineProperty(this,"glyphSet",{enumerable:!1,value:t})}var i=r.prototype;return Object.defineProperty(i,"draw",{enumerable:!1,value:function(e,t){var r=new n(t);return this.drawPoints(e,r)}}),Object.defineProperty(i,"_readGlyph",{enumerable:!1,value:function(e,t){var n=Array.prototype.slice.call(arguments);return n.splice(1,0,this.glyphName,this),this.glyphSet.readGlyph.apply(this.glyphSet,n)}}),Object.defineProperty(i,"drawPoints",{enumerable:!1,value:t.factory({readGlyph:[!1,"pen",i._readGlyph]},{readGlyph:[!0,"pen",i._readGlyph]},["pen"],function(e){return e("readGlyph")})}),r}),define("ufojs/ufoLib/glifLib/readGlyph",["ufojs/main","ufojs/errors","ufojs/xml/main","ufojs/plistLib/main","ufojs/ufoLib/validators","ufojs/ufoLib/constants"],function(e,t,n,r,i,o){"use strict";function a(e){e&&(this._errorCallback=e),this._resetErrorCallbackData()}var s=t.GlifLib,u=i.glyphLibValidator,l=i.guidelinesValidator,c=i.anchorsValidator,h=i.imageValidator,f=i.identifierValidator,p=o.transformationInfo,d=a.prototype;d.constructor=a,d._resetErrorCallbackData=function(){this._errorCallbackData={glyphName:""}},d._executeErrorCallback=function(e,t){var n;if(this._errorCallbackData.message=t,this._errorCallbackData.recoverable=e,n=this._errorCallback?this._errorCallback(this._errorCallbackData):!1,!n||!e)throw new s(t)},d.fromString=function(e,t,r,i){var o=n.parseXMLString(e);this.fromDOM(o,t,r,i)},d.fromDOM=function(t,n,r,i){try{var o,a=t.documentElement,s=!1;("undefined"==typeof a||"string"!=typeof a.tagName||"glyph"!==a.tagName)&&(s=!0),s&&this._executeErrorCallback(!1,"GLIF data is not properly formatted."),o=a.getAttribute("format"),o=e.isIntString(o)?parseInt(o,10):o,1===o?this._readGlyphFromTreeFormat1(t,n,r):2===o?this._readGlyphFromTreeFormat2(t,n,r):this._executeErrorCallback(!1,"Unsupported GLIF format version: "+o+".")}finally{this._resetErrorCallbackData()}},d._relaxedSetattr=function(e,t,n){try{return e[t]=n,!0}catch(r){if(!(r instanceof TypeError))throw r}return!1},d._relaxedSetattrDict=function(e,t){for(var n in t)this._relaxedSetattr(e,n,t[n])},d._isDOMElement=function(e){return e instanceof n.Node&&e.nodeType===n.Node.ELEMENT_NODE},d._toNumber=function(t){var n;if(e.isNumber(t))return parseFloat(t);if(!e.isFloatString(t))throw new s('Could not convert "'+t+'" to an int or float.');if(n=parseFloat(t),!isFinite(n))throw new s('Could not convert "'+t+'" to an int or float.');return n},d._getAttribute=function(e,t){return arguments.length<2&&(t=null),this.hasAttribute(e)?this.getAttribute(e):t},d._getArrayInterface=function(e){return function(t){return e.apply(this,t)}},d._listOfChildren=function(e){return[].slice.call(e.children)},d._attributesDict=function(e){for(var t={},n=0;n<e.attributes.length;n++)t[e.attributes.item(n).name]=e.attributes.item(n).value;return t},d._checkAttributesWhitelist=function(e,t){for(var n,r=0;r<e.attributes.length;r++)if(n=e.attributes.item(r).name,!(n in t))throw new s("Unknown attribute ("+n+") in "+e.tagName+" element.")},d._readGlyphFromTreeFormat1=function(e,t,n){var r=e.documentElement;this._relaxedSetattr(t,"name",this._readName(r)),this._errorCallbackData.glyphName=t.name;var i,o,a,u,l={list:[],dict:{}},c=!1,h=!1,f=!1,p=!1,d=this._listOfChildren(r);for(i=0;i<d.length;i++)if(o=d[i],a=o.tagName,"outline"===a){if(h)throw new s("The outline element occurs more than once.");if(o.attributes.length)throw new s("The outline element contains unknown attributes.");h=!0,void 0!==n&&this._buildOutlineFormat1(t,n,this._listOfChildren(o))}else if("advance"===a){if(c)throw new s("The advance element occurs more than once.");c=!0,this._relaxedSetattrDict(t,this._readAdvance(o))}else if("unicode"===a){if(u=o.getAttribute("hex"),u=parseInt(u,16),!isFinite(u))throw new s("Illegal value for hex attribute of unicode element.");u in l.dict||(l.dict[u]=!0,l.list.push(u))}else if("note"===a){if(p)throw new s("The note element occurs more than once.");p=!0,this._relaxedSetattr(t,"note",this._readNote(o))}else{if("lib"!==a)throw new s("Unknown element in GLIF: "+a+".");if(f)throw new s("The lib element occurs more than once.");f=!0,this._relaxedSetattr(t,"lib",this._readLib(o))}l.list.length&&this._relaxedSetattr(t,"unicodes",l.list)},d._readGlyphFromTreeFormat2=function(e,t,n){var r=e.documentElement;this._relaxedSetattr(t,"name",this._readName(r)),this._errorCallbackData.glyphName=t.name;var i,o,a,u,h,f,p={list:[],dict:{}},d=[],m=[],g=!1,v=!1,y=!1,b=!1,_=!1,w={},x=this._listOfChildren(r);for(i=0;i<x.length;i++)if(o=x[i],a=o.tagName,"outline"===a){if(y)throw new s("The outline element occurs more than once.");if(o.attributes.length)throw new s("The outline element contains unknown attributes.");y=!0,void 0!==n&&this._buildOutlineFormat2(n,this._listOfChildren(o),w)}else if("advance"===a){if(g)throw new s("The advance element occurs more than once.");g=!0,this._relaxedSetattrDict(t,this._readAdvance(o))}else if("unicode"===a){if(f=o.getAttribute("hex"),f=parseInt(f,16),!isFinite(f))throw new s("Illegal value for hex attribute of unicode element.");f in p.dict||(p.dict[f]=!0,p.list.push(f))}else if("guideline"===a){if(o.childNodes.length)throw new s("Unknown children in guideline element.");u=this._attributesDict(o);for(h in{x:null,y:null,angle:null})h in u&&(u[h]=this._toNumber(u[h]));d.push(u)}else if("anchor"===a){if(o.childNodes.length)throw new s("Unknown children in anchor element.");u=this._attributesDict(o);for(h in{x:null,y:null})h in u&&(u[h]=this._toNumber(u[h]));m.push(u)}else if("image"===a){if(v)throw new s("The image element occurs more than once.");if(o.childNodes.length)throw new s("Unknown children in image element.");v=!0,this._relaxedSetattr(t,"image",this._readImage(o))}else if("note"===a){if(_)throw new s("The note element occurs more than once.");_=!0,this._relaxedSetattr(t,"note",this._readNote(o))}else{if("lib"!==a)throw new s("Unknown element in GLIF: "+a+".");if(b)throw new s("The lib element occurs more than once.");b=!0,this._relaxedSetattr(t,"lib",this._readLib(o))}if(d.length){if(!l(d,w))throw new s("The guidelines are improperly formatted.");this._relaxedSetattr(t,"guidelines",d)}if(m.length){if(!c(m,w))throw new s("The anchors are improperly formatted.");this._relaxedSetattr(t,"anchors",m)}p.list.length&&this._relaxedSetattr(t,"unicodes",p.list)},d._readName=function(e){var t=e.getAttribute("name");if("string"!=typeof t||""===t)throw new s("Empty glyph name in GLIF.");return t},d._readAdvance=function(e){var t=["width","height"].map(e.getAttribute,e).map(function(e){return null===e?0:e}).map(this._toNumber);return{width:t[0],height:t[1]}},d._readNote=function(e){return this._listOfChildren(e).map(function(e){return e.textContent}).join("\n").split("\n").map(function(e){return e.trim()}).join("\n")},d._readLib=function(e){if(1!==e.children.length)throw new s("lib node may have only one child, but has "+e.children.length+".");var t,n,i=e.firstElementChild||e.children[0];if("dict"!==i.tagName)throw new s('The child node of lib must be "dict"but is '+i.tagName+".");if(t=r.readPlistElement(i),n=u(t),!n[0])throw new s(n[1]);return t},d._readImage=function(e){for(var t,n,r=this._attributesDict(e),i=0;i<p.length;i++)t=p[i][0],n=p[i][1],t in r&&(n=r[t]),r[t]=this._toNumber(n);if(!h(r))throw new s("The image element is not properly formatted.");return r};var m=e.setLike(["identifier"]),g=["base","xScale","xyScale","yxScale","yScale","xOffset","yOffset"],v=e.setLike(g),y=e.setLike(g.concat(["identifier"])),b=["x","y","type","smooth","name"],_=e.setLike(b),w=e.setLike(b.concat(["identifier"])),x=e.setLike(["no","yes"]),S=e.setLike(["move","line","offcurve","curve","qcurve"]);return d._buildOutlineFormat1=function(e,t,n){for(var r,i,o,a=0,u=[];a<n.length;a++){if(r=n[a],!this._isDOMElement(r))throw new s("The outline element is not properly structured.");if("contour"==r.tagName)1==r.children.length?(i=r.children[0],"point"==i.tagName&&(o=this._buildAnchorFormat1(i),o&&u.push(o))):this._buildOutlineContourFormat1(t,r);else{if("component"!=r.tagName)throw new s("Unknown element in outline element "+r.tagName);this._buildOutlineComponentFormat1(t,r)}}if(u.length){if(!c(u))throw new s("GLIF 1 anchors are not properly formatted.");this._relaxedSetattr(e,"anchors",u)}},d._buildAnchorFormat1=function(e){if("move"===e.getAttribute("type")){if(!e.hasAttribute("x"))throw new s("Required x attribute is missing in point element.");if(!e.hasAttribute("y"))throw new s("Required y attribute is missing in point element.");return{x:this._toNumber(e.getAttribute("x")),y:this._toNumber(e.getAttribute("y")),name:e.getAttribute("name")}}},d._buildOutlineContourFormat1=function(e,t){var n;if(t.attributes.length)throw new s("Unknown attributes in contour element.");e.beginPath(),t.children.length&&(n=this._validateAndMassagePointStructures(this._listOfChildren(t),_,!0),this._buildOutlinePointsFormat1(e,n)),e.endPath()},d._buildOutlinePointsFormat1=function(e,t){for(var n,r=0;r<t.length;r++)n=t[r],e.addPoint([n.x,n.y],n.segmentType,n.smooth,n.name)},d._buildOutlineComponentFormat1=function(e,t){var n,r;if(t.children.length)throw new s("Unknown child elements of component element.");if(this._checkAttributesWhitelist(t,v),!t.hasAttribute("base"))throw new s("The base attribute is not defined in the component.");n=t.getAttribute("base"),r=p.map(this._getArrayInterface(this._getAttribute),t).map(this._toNumber),e.addComponent(n,r)},d._processIdentifier=function(e,t){if(e in t)throw new s('The identifier "'+e+'" is used more than once.');if(!f(e))throw new s('The identifier "'+e+'" is not valid.');t[e]=!0},d._buildOutlineFormat2=function(e,t,n){for(var r,i=0;i<t.length;i++){if(r=t[i],!this._isDOMElement(r))throw new s("The outline element is not properly structured.");if("contour"===r.tagName)this._buildOutlineContourFormat2(e,r,n);else{if("component"!=r.tagName)throw new s("Unknown element in outline element: "+r.tagName);this._buildOutlineComponentFormat2(e,r,n)}}},d._buildOutlineContourFormat2=function(e,t,n){var r,i;this._checkAttributesWhitelist(t,m),t.hasAttribute("identifier")&&(r=t.getAttribute("identifier"),this._processIdentifier(r,n)),e.beginPath({identifier:r}),t.children.length&&(i=this._validateAndMassagePointStructures(this._listOfChildren(t),w,!1),this._buildOutlinePointsFormat2(e,i,n)),e.endPath()},d._buildOutlinePointsFormat2=function(e,t,n){for(var r,i,o=0;o<t.length;o++)r=t[o],void 0!==r.identifier&&(i=r.identifier,this._processIdentifier(i,n)),e.addPoint([r.x,r.y],r.segmentType,r.smooth,r.name,{identifier:r.identifier})},d._buildOutlineComponentFormat2=function(e,n,r){var i,o,a;if(n.children.length)throw new s("Unknown child elements of component element.");if(this._checkAttributesWhitelist(n,y),!n.hasAttribute("base"))throw new s("The base attribute is not defined in the component.");i=n.getAttribute("base"),o=p.map(this._getArrayInterface(this._getAttribute),n).map(this._toNumber),n.hasAttribute("identifier")&&(a=n.getAttribute("identifier"),this._processIdentifier(a,r));try{e.addComponent(i,o,{identifier:a})}catch(u){if(!(u instanceof TypeError))throw u;e.addComponent(i,o),t.warn("DEPRECATED: The addComponent method needs an identifier kwarg. The component's identifier value has been discarded.")}},d._validateAndMassagePointStructures=function(e,t,n){var r,i,o,a,u,l,c,h,f,p=[],d=[],m=!1,g=!1;if(!e.length)return d;for(r=0;r<e.length;r++){if(i=e[r],"point"!=i.tagName)throw new s("Unknown child element ("+child.tagName+") of contour element.");if(this._checkAttributesWhitelist(i,t),o=this._attributesDict(i),d.push(o),i.children.length)throw new s("Unknown child elements in point element.");for(h in{x:void 0,y:void 0}){if(void 0===o[h])throw new s("Required "+h+" attribute is missing in point element.");o[h]=this._toNumber(o[h])}if(a=o.type,("offcurve"===a||void 0===a)&&(a=null),null!==a&&!(a in S))throw new s("Unknown point type: "+a);if(o.segmentType=a,null===a?g=!0:m=!0,p.push(a),"move"===a&&0!==r)throw new s("A move point occurs after the first point in the contour.");if(f=o.smooth,void 0!==f&&!(f in x))throw new s("Unknown point smooth value: "+f);if(o.smooth="yes"===f,o.smooth&&null===a)throw new s("smooth attribute set in an offcurve point.");"name"in o||(o.name=null)}if(n&&"move"==d[0].segmentType){for(d.reverse(),r=0;r<d.length;r++){if(null!==d[r].segmentType){d=d.slice(r);break}null===d[r].segmentType&&p.pop()}d.reverse()}if(g&&m){for(;null===p[p.length-1];)p.unshift(p.pop());for(u=[],r=0;r<p.length;r++)if(a=p[r],u.push(a),null!==a){if(u.length>1){if(l=u[u.length-1],c=u.slice(0,-1),"move"===l)throw new s("move can not have an offcurve.");if("line"===l)return this._executeErrorCallback(!0,"line can not have an offcurve."),d=[];if("curve"===l&&c.length>2)return this._executeErrorCallback(!0,"Too many offcurves defined for curve."),d=[]}u=[]}}return d},{fromString:d.fromString.bind(new a),fromDOM:d.fromDOM.bind(new a),ReadGlyph:a}}),define("ufojs/ufoLib/glifLib/GLIFPointPen",["ufojs/main","ufojs/errors","ufojs/xml/main","Atem-Pen-Case/pens/AbstractPointPen","ufojs/ufoLib/validators","ufojs/ufoLib/constants"],function(e,t,n,r,i,o){"use strict";function a(e,t,r,i){if(!(e instanceof n.Node))throw new c("Element must be an instance of xml.Node.");this._element=e,this._formatVersion=void 0===r?2:r,this._identifiers=t||{},this._options=i||{},this._document=e.ownerDocument,this._prevPointTypes=[],this._prevOffCurveCount=0,this._currentPath=null}var s=e.enhance,u=e.isNumber,l=t.assert,c=t.GlifLib,h=i.identifierValidator,f=o.transformationInfo;return a.prototype=Object.create(r.prototype),s(a,{_getPrecision:function(){return void 0!==this._options.precision&&-1!==this._options.precision?this._options.precision:!1},get element(){return this._element},get identifiers(){return this._identifiers},get formatVersion(){return this._formatVersion},beginPath:function(e){e=e||{},l(null===this._currentPath,"currentPath is not null, call endPath"),this._currentPath=this._document.createElement("contour"),this._checkIdentifier(e.identifier)&&this._currentPath.setAttribute("identifier",e.identifier),this._prevOffCurveCount=0},endPath:function(){if(l(null!==this._currentPath,"currentPath is null, call beginPath"),this._prevPointTypes.length&&"move"===this._prevPointTypes[0]&&"offcurve"==this._prevPointTypes.slice(-1)[0])throw new c("open contour has loose offcurve point");this._element.appendChild(this._currentPath),this._currentPath=null,this._prevOffCurveCount=0,this._prevPointTypes=[]},addPoint:function(t,n,r,i,o){l(null!==this._currentPath,"currentPath is null, call beginPath"),n=void 0===n?null:n,r=r||!1,i=void 0===i?null:i,o=o||{};var a=this._document.createElement("point"),s=this._getPrecision();if(void 0===t)throw new c("Missing point argument");if(t.filter(u).length<2)throw new c("coordinates must be int or float");if(s!==!1&&(t=e.roundRecursive(t,s)),a.setAttribute("x",t[0]),a.setAttribute("y",t[1]),"offcurve"===n)n=null;else{if("move"==n&&this._prevPointTypes.length)throw new c("move occurs after a point has already been added to the contour.");if("line"==n&&this._prevPointTypes.length&&"offcurve"===this._prevPointTypes.slice(-1)[0])throw new c("offcurve occurs before line point.");if("curve"===n&&this._prevOffCurveCount>2)throw new c("too many offcurve points before curve point.")}if(null!==n?a.setAttribute("type",n):n="offcurve","offcurve"===n?this._prevOffCurveCount+=1:this._prevOffCurveCount=0,this._prevPointTypes.push(n),r){if("offcurve"===n)throw new c("can't set smooth in an offcurve point.");a.setAttribute("smooth","yes")}null!==i&&a.setAttribute("name",i),this._checkIdentifier(o.identifier)&&a.setAttribute("identifier",o.identifier),this._currentPath.appendChild(a)},addComponent:function(t,n,r){var i,o,a,s=this._document.createElement("component"),r=r||{},l=0,h=this._getPrecision();for(s.setAttribute("base",t);l<f.length&&l<n.length;l++){if(i=f[l][0],o=f[l][1],!u(n[l]))throw new c("transformation values must be int or float");a=h!==!1?e.round(n[l],h):n[l],a!==o&&s.setAttribute(i,a)}this._checkIdentifier(r.identifier)&&s.setAttribute("identifier",r.identifier),this._element.appendChild(s)},_checkIdentifier:function(e){if(void 0===e||this._formatVersion<2)return!1;if(e in this._identifiers)throw new c("identifier used more than once: "+e);if(!h(e))throw new c("identifier not formatted properly: "+e);return this._identifiers[e]=!0,!0}}),a}),define("ufojs/ufoLib/glifLib/writeGlyph",["ufojs/main","ufojs/errors","ufojs/xml/main","ufojs/plistLib/main","ufojs/ufoLib/validators","ufojs/ufoLib/constants","./GLIFPointPen"],function(e,t,n,r,i,o,a){"use strict";function s(e,t,r,i,o){var a=Array.prototype.slice.call(arguments),s=u.apply(void 0,a);return n.toString(s)}function u(e,t,r,i,o){var s,u,l,d,v,w={};if(t=t||{},o=o||{},"string"!=typeof e&&!(e instanceof String))throw new _("The glyph name is not properly formatted.");if(0===e.length)throw new _("The glyph name is empty.");return void 0===i&&(i=2),s=n.createDocument(null,"glyph",null),u=s.documentElement,u.setAttribute("name",e),u.setAttribute("format",i),u.appendChild(c(t,s,o)),void 0!==t.unicodes&&u.appendChild(h(t.unicodes,s)),void 0!==t.note&&u.appendChild(f(t.note,s)),i>=2&&void 0!==t.image&&u.appendChild(p(t.image,s,o)),i>=2&&void 0!==t.guidelines&&u.appendChild(m(t.guidelines,s,w,o)),i>=2&&void 0!==t.anchors&&u.appendChild(y(t.anchors,s,w,o)),l=r||1==i&&void 0!==t.anchors,l&&(d=s.createElement("outline"),v=new a(d,w,i,o),r&&r(v),1==i&&void 0!==t.anchors&&g(v,t.anchors),u.appendChild(d)),void 0!==t.lib&&u.appendChild(b(t.lib,s)),s}function l(t,n){return void 0===t||-1===t?n:e.round(n,t)}function c(e,t,n){var r,i,o={width:void 0,height:void 0},a=t.createDocumentFragment(),s=t.createElement("advance");for(r in o)if(i=e[r],void 0!==i&&0!==i){if(!w(i))throw new _(r+" attribute must be int or float");i=l(n.precision,i),s.setAttribute(r,i)}return s.attributes.length&&a.appendChild(s),a}function h(e,t){var n,r,i,o={},a=0,s=t.createDocumentFragment();for(x(e)&&(e=[e]);a<e.length;a++){if(n=e[a],!x(n))throw new _("unicode values must be int");n in o||(o[n]=null,i=n.toString(16).toUpperCase(),i.length<4&&(i=["0","0","0","0",i].slice(i.length).join("")),r=t.createElement("unicode"),r.setAttribute("hex",i),s.appendChild(r))}return s}function f(e,t){var n;if("string"!=typeof e)throw new _("note attribute must be string");return e=e.split("\n").map(function(e){return e.trim()}).join("\n"),n=t.createElement("note"),n.appendChild(t.createTextNode(e)),n}function p(e,t,n){var r,i,o,a,s=0;if(!S(e))throw new _("image attribute must be a dict or dict-like object with the proper structure.");for(o=t.createElement("image"),o.setAttribute("fileName",e.fileName);s<M.length;s++)r=M[s][0],i=M[s][1],a=e[r],void 0!==a&&(a=l(n.precision,a),a!==i&&o.setAttribute(r,a));return void 0!==e.color&&o.setAttribute("color",e.color),o}function d(e,t,n){var r,i,o=t.createElement("guideline"),a={x:null,y:null,angle:null};for(r in e)i=e[r],r in a&&(i=l(n.precision,i)),o.setAttribute(r,i);return o}function m(e,t,n,r){var i,o=0;if(!C(e,n))throw new _("guidelines attribute does not have the proper structure.");for(i=t.createDocumentFragment();o<e.length;o++)i.appendChild(d(e[o],t,r));return i}function g(e,t){var n,r=0;if(!k(t))throw new _("anchors attribute does not have the proper structure.");for(;r<t.length;r++)n=t[r],e.beginPath(),e.addPoint([n.x,n.y],"move",!1,n.name),e.endPath()}function v(e,t,n){var r,i,o=t.createElement("anchor"),a={x:null,y:null};for(r in e)i=e[r],r in a&&(i=l(n.preciosion,i)),o.setAttribute(r,i);return o}function y(e,t,n,r){var i,o=0;if(!k(e,n))throw new _("anchors attribute does not have the proper structure.");for(i=t.createDocumentFragment();o<e.length;o++)i.appendChild(v(e[o],t,r));return i}function b(e,t){var n,i;if(n=P(e),!n[0])throw new _(n[1]);return i=t.createElement("lib"),i.appendChild(r.createPlistElement(t,e)),i}var _=t.GlifLib,w=e.isNumber,x=e.isInt,S=i.imageValidator,C=i.guidelinesValidator,k=i.anchorsValidator,P=i.glyphLibValidator,M=o.transformationInfo;return{toString:s,toDOM:u}}),define("ufojs/ufoLib/glifLib/rapidValueFetching",["ufojs/main","ufojs/xml/main"],function(e,t){"use strict";function n(e){return e.value}function r(e){for(var t,r=a(e,s).map(n),i={dict:{},list:[]},o=0;o<r.length;o++)t=parseInt(r[o],16),!isFinite(t)||t in i.dict||(i.dict[t]=!0,i.list.push(t));return i.list}function i(e){return a(e,l).filter(function(e){return e.hasAttribute("fileName")}).map(function(e){return e.getAttribute("fileName")})}function o(e){return a(e,u).map(n)}var a=t.evaluateXPath,s="/glyph/unicode/@hex",u="/glyph/outline[1]/component/@base",l="/glyph/image[1]";return{fetchUnicodes:r,fetchImageFileName:i,fetchComponentBases:o}}),define("ufojs/ufoLib/glifLib/GlyphSet",["ufojs/main","ufojs/errors","Atem-IO/errors","obtain/obtain","ufojs/xml/main","ufojs/plistLib/main","ufojs/ufoLib/constants","./misc","./Glyph","./readGlyph","./writeGlyph","./rapidValueFetching"],function(e,t,n,r,i,o,a,s,u,l,c,h){"use strict";function f(e,t,n,r,i){if(void 0===e)throw new p("GlyphSet I/O module missing");if(this._io=e,this._options=i||{},this._glyphReader=new l.ReadGlyph(this._options.readErrorCallback),void 0===t)throw new p("GlyphSet: dirName is missing");if(this.dirName=t,r=void 0!==r?r:3,!(r in a.supportedUFOFormatVersions))throw new p("Unsupported UFO format version: "+r);this.ufoFormatVersion=r,this.glyphNameToFileName=void 0!==n?n:g,this.contents=void 0,this._reverseContents=void 0,this._glifCache={}}var p=t.GlifLib,d=t.Key,m=n.IONoEntry,g=s.glyphNameToFileName,v=s.layerInfoVersion3ValueData,y=s.validateLayerInfoVersion3Data,b=o.readPlistFromString,_=o.createPlistString,w=h.fetchUnicodes,x=h.fetchImageFileName,S=h.fetchComponentBases,C=r.factory({write:["path","data",function(e,t){return this._io.writeFile(!1,e,t)}]},{write:["path","data",function(e,t){return this._io.writeFile(!0,e,t)}]},["path","data"],function(e){return e("write")}),k=r.factory({unlink:["path",function(e){return this._io.unlink(!1,e)}]},{unlink:["path",function(e){return this._io.unlink(!0,e)}]},["path"],function(e){return e("unlink")}),P=r.factory({lib:[function(){return{makeError:function(e,t){return e instanceof m?e:new p(['The file "',t,'" could not be read.(',e.message,")"].join(""),e.stack)}}}],plist:["plistString","path","lib",function(e,t,n){try{return b(e)}catch(r){throw n.makeError(r,t)}}],plistString:["path","lib",function(e,t){try{return this._io.readFile(!1,e)}catch(n){throw t.makeError(n,e)}}]},{plistString:["path","lib","_callback","_errback",function(e,t,n,r){this._io.readFile(!0,e).then(n,function(n){r(t.makeError(n,e))})}]},["path"],function(e){return e("plist")});f.factory=r.factory({instance:["io","dirName","glyphNameToFileNameFunc","ufoFormatVersion","options",function(e,t,n,r,i){return new f(e,t,n,r,i)}],init:["instance",function(e){e.rebuildContents(!1)}]},{init:["instance",function(e){return e.rebuildContents(!0)}]},["io","dirName","glyphNameToFileNameFunc","ufoFormatVersion","options"],function(e){return e("init"),e("instance")});var M=f.prototype;return M.constructor=f,M.GlyphClass=u,M._writeFile=C,M._unlink=k,M._readPlist=P,M.rebuildContents=r.factory({contentsPath:[function(){return[this.dirName,"contents.plist"].join("/")}],contentsPlist:["contentsPath",function(e){try{return this._readPlist(!1,e)}catch(t){if(t instanceof m)return{};throw t}}],filePaths:["contentsPlist",function(e){if("dict"!==o.getType(e))throw new p("contents.plist is not properly formatted");var t,n,r=[];for(t in e){if(n=e[t],"string"!=typeof n)throw new p('contents.plist is not properly formatted the value at "'+t+'" is not string but:'+typeof n);
r.push([this.dirName,n].join("/"))}return r}],validContents:["contentsPlist","filePaths",function(e,t){for(var n=0;n<t.length;n++)if(!this._io.pathExists(!1,t[n]))throw new p("contents.plist references a file that does not exist: "+t[n]);return e}]},{contentsPlist:["contentsPath",function(e){function t(e){if(e instanceof m)return{};throw e}return this._readPlist(!0,e).then(null,t)}],validContents:["contentsPlist","filePaths","_callback","_errback",function(e,t,n,r){var i=0,o=0,a=!1,s=function(t,i){return o-=1,a?void 0:i?void(0===o&&n(e)):(a=!0,void r(new p("contents.plist references a file that does not exist: "+t)))};if(0===t.length)return void setTimeout(function(){n(e)},0);for(;i<t.length;i++)o+=1,this._io.pathExists(!0,t[i]).then(s.bind(null,t[i]))}]},[],function(e){this.contents=e("validContents"),this._reverseContents=void 0}),M.getReverseContents=function(){if(void 0===this._reverseContents){var e,t={};for(e in this.contents)t[this.contents[e].toLowerCase()]=e;this._reverseContents=t}return this._reverseContents},M.writeContents=r.factory({path:[function(){return[this.dirName,"contents.plist"].join("/")}],data:[function(){return _(this.contents)}],write:[!1,"path","data",M._writeFile]},{write:[!0,"path","data",M._writeFile]},[],function(e){return e("write")}),M.readLayerInfo=r.factory({path:[function(){return[this.dirName,a.LAYERINFO_FILENAME].join("/")}],infoDict:["path",function(e){var t;try{t=this._readPlist(!1,e)}catch(n){if(n instanceof m)return[!1,void 0];throw n}return[!0,t]}]},{infoDict:["path","_callback","_errback",function(e,t,n){this._readPlist(!0,e).then(function(e){t([!0,e])},function(e){e instanceof m?t([!1,void 0]):n(e)})}]},["info"],function(e,t){var n,r=e("infoDict");if(r[0]===!1)return t;if("dict"!==o.getType(r[1]))throw new p("layerinfo.plist is not properly formatted.");r=y(r[1]);for(n in r)t[n]=r[n];return t}),M.writeLayerInfoToString=function(e){if(this.ufoFormatVersion<3)throw new p("layerinfo.plist is not allowed in UFO "+this.ufoFormatVersion+".");var t,n={};for(t in v)t in e&&void 0!==e[t]&&(n[t]=e[t]);return n=y(n),_(n)},M.writeLayerInfo=r.factory({data:["info",M.writeLayerInfoToString],path:[function(){return[this.dirName,a.LAYERINFO_FILENAME].join("/")}],write:[!1,"path","data",M._writeFile]},{write:[!0,"path","data",M._writeFile]},["info"],function(e){return e("write")}),M._getGLIFcache=r.factory({fileName:["glyphName",function(e){if(!(e in this.contents)||void 0===this.contents[e])throw new d(e);return this.contents[e]}],glyphNameInCache:["glyphName",function(e){return e in this._glifCache}],path:["fileName",function(e){return[this.dirName,e].join("/")}],mtime:["path","glyphName",function(e,t){try{return this._io.getMtime(!1,e)}catch(n){if(n instanceof m)throw new d(t,n.stack);throw n}}],text:["path","glyphName",function(e,t){try{return this._io.readFile(!1,e)}catch(n){if(n instanceof m)throw new d(t,n.stack);throw n}}],refreshedCache:["glyphName","text","mtime",function(e,t,n){return this._glifCache[e]=[t,n]}]},{mtime:["path","glyphName","_callback",function(e,t,n){var r=function(e,r){e instanceof m&&(e=new d(t,e.stack)),n(e,r)};this._io.getMtime({unified:r},e)}],text:["path","glyphName","_callback",function(e,t,n){var r=function(e,r){e instanceof m&&(e=new d(t,e.stack)),n(e,r)};this._io.readFile({unified:r},e)}]},["glyphName"],function(e,t){return e("glyphNameInCache")&&e("mtime").getTime()===this._glifCache[t][1].getTime()?this._glifCache[t]:(e("refreshedCache"),this._glifCache[t])}),M.getGLIF=r.factory({cache:[!1,"glyphName",M._getGLIFcache]},{cache:[!0,"glyphName",M._getGLIFcache]},["glyphName"],function(e){return e("cache")[0]}),M.getGLIFDocument=r.factory({cache:[!1,"glyphName",M._getGLIFcache]},{cache:[!0,"glyphName",M._getGLIFcache]},["glyphName"],function(e){var t=e("cache");return void 0===t[2]&&(t[2]=i.parseXMLString(t[0])),t[2]}),M._getGLIFDocuments=r.factory({glyphNames:["requested",function(t){return void 0!==t?e.setLike(t):this.contents}],docs:["glyphNames",function(e){var t,n={};for(t in e)n[t]=this.getGLIFDocument(!1,t);return n}]},{docs:["glyphNames","_callback","_errback",function(e,t,n){var r,i={},o=!1,a=0,s=function(e,r,s){if(a-=1,!o){if(r)return o=!0,void n(r);i[e]=s,0===a&&t(i)}};for(r in e)a+=1,this.getGLIFDocument({unified:s.bind(null,r)},r);0===a&&setTimeout(function(){t(i)},0)}]},["requested"],function(e){return e("docs")}),M.getGLIFModificationTime=r.factory({cache:[!1,"glyphName",M._getGLIFcache]},{cache:[!0,"glyphName",M._getGLIFcache]},["glyphName"],function(e){return e("cache")[1]}),M._purgeCachedGLIF=function(e){e in this._glifCache&&delete this._glifCache[e]},M.readGlyph=r.factory({glifDoc:[!1,"glyphName",M.getGLIFDocument]},{glifDoc:[!0,"glyphName",M.getGLIFDocument]},["glyphName","glyphObject","pointPen"],function(e,t,n,r){var i,o;return i=e("glifDoc"),this._purgeCachedGLIF(t),o=this.ufoFormatVersion<3?[1]:[1,2],this._glyphReader.fromDOM(i,n,r,o),n}),M.writeGlyph=r.factory({checkedFormatVersion:["formatVersion",function(e){if(void 0===e)return this.ufoFormatVersion>=3?2:1;if(!(e in a.supportedGLIFFormatVersions))throw new p("Unsupported GLIF format version: "+e);if(2==e&&this.ufoFormatVersion<3)throw new p("Unsupported GLIF format version ("+e+") for UFO format version "+this.ufoFormatVersion+".");return e}],data:["glyphName","glyphObject","drawPointsFunc","checkedFormatVersion","options",c.toString],fileName:["glyphName",function(e){var t=this.contents[e];return void 0===t&&(t=this.glyphNameToFileName(e,this),this.contents[e]=t,void 0!==this._reverseContents&&(this._reverseContents[t.toLowerCase()]=e)),t}],path:["fileName",function(e){return[this.dirName,e].join("/")}],oldData:["path",function(e){try{return this._io.readFile(!1,e)}catch(t){if(t instanceof m)return null;throw t}}],dataHasChanged:["data","oldData",function(e,t){return e!==t}],write:[!1,"path","data",M._writeFile]},{oldData:["path","_callback",function(e,t){var n=function(e,n){e instanceof m&&(e=void 0,n=null),t(e,n)};this._io.readFile({unified:n},e)}],write:[!0,"path","data",M._writeFile]},["glyphName","glyphObject","drawPointsFunc","formatVersion","options"],function(e,t,n,r,i,o){return this._purgeCachedGLIF(t),e("dataHasChanged")?e("write"):void 0}),M.deleteGlyph=r.factory({path:["glyphName",function(e){var t=this.contents[e];return[this.dirName,t].join("/")}],"delete":[!1,"path",M._unlink]},{"delete":[!0,"path",M._unlink]},["glyphName"],function(e,t){this._purgeCachedGLIF(t),e("delete"),void 0!==this._reverseContents&&delete this._reverseContents[this.contents[t].toLowerCase()],delete this.contents[t]}),M.keys=function(){return Object.keys(this.contents)},M.has_key=function(e){return e in this.contents},M.getLength=function(){var e,t=0;for(e in this.contents)t+=1;return t},M.get=function(e){if(!(e in this.contents))throw new d(e);return new this.GlyphClass(e,this)},M._mapGLIFDocuments=r.factory({docs:[!1,"glyphNames",M._getGLIFDocuments]},{docs:[!0,"glyphNames",M._getGLIFDocuments]},["glyphNames","mapper"],function(e,t,n){var r,i,o={};i=e("docs");for(r in i)o[r]=n(i[r]);return o}),M.getUnicodes=function(e,t){return this._mapGLIFDocuments(e,t,w)},M.getComponentReferences=function(e,t){return this._mapGLIFDocuments(e,t,S)},M.getImageReferences=function(e,t){return this._mapGLIFDocuments(e,t,x)},f}),define("ufojs/ufoLib/UFOReader",["ufojs/errors","Atem-IO/errors","obtain/obtain","./_UFOBase","./constants","./validators","./converters","Atem-IO/tools/readDirRecursive","./glifLib/GlyphSet"],function(e,t,n,r,i,o,a,s,u){"use strict";function l(e,t){var n,r,i,o,a;for(n in e)if(!(n in t))return!1;for(n in t){if(!(n in e))return!1;if(o=e[n],a=t[n],o.length!==a.length)return!1;for(r=0,i=o.length;i>r;r++)if(o[r]!==a[r])return!1}return!0}function c(e,t){var n,r,i,o;for(n in e)if(!(n in t))return!1;for(n in t){if(!(n in e))return!1;i=e[n],o=t[n];for(r in i)if(!(r in o))return!1;for(r in o){if(!(r in i))return!1;if(i[r]!==o[r])return!1}}return!0}function h(e,t){r.call(this,e,t),this._upConvertedKerningData=null,this._formatVersion=null}function f(e){var t,n,r,i,o,a=[!1,"groups.plist is not properly formatted."];if("object"!=typeof e)return a;for(t in e){if(n=e[t],!(n instanceof Array))return a;for(r=0,i=n.length;i>r;r++)if(o=n[r],"string"!=typeof o)return a}return[!0,null]}var p=e.UFOLib,d=e.NotImplemented,m=t.IONoEntry,g=i.supportedUFOFormatVersions,v=i.METAINFO_FILENAME,y=i.GROUPS_FILENAME,b=i.FONTINFO_FILENAME,_=i.KERNING_FILENAME,w=i.LIB_FILENAME,x=i.FEATURES_FILENAME,S=i.DEFAULT_LAYER_NAME,C=i.DEFAULT_GLYPHS_DIRNAME,k=i.DATA_DIRNAME,P=i.IMAGES_DIRNAME,M=o.groupsValidator,T=o.fontLibValidator,A=o.pngValidator,O=a.fontInfoAttributesVersion1,E=a.fontInfoAttributesVersion2,$=a.fontInfoAttributesVersion3,N=a.convertUFO1OrUFO2KerningToUFO3Kerning,I=a.convertFontInfoDataVersion1ToVersion2,D=a.convertFontInfoDataVersion2ToVersion3,j=a.validateInfoVersion3Data,F=h.prototype=Object.create(r.prototype);return F.constructor=h,h.factory=n.factory({instance:["io","path",function(e,t){return new h(e,t)}],init:["instance",function(e){return e._readMetaInfo(!1),e}]},{init:["instance",function(e){return e._readMetaInfo(!0).then(function(){return e})}]},["io","path"],function(e){return e("init")}),Object.defineProperty(F,"formatVersion",{get:function(){if(null===this._formatVersion)throw new p("No UFO version! Always create UFOReader via UFOReader.factory, then all initially needed io will be perfomed.");return this._formatVersion}}),F._readGroups=function(e){return this._getPlist(e,y,{})},F._readBytesFromPath=n.factory({path:["fileName",function(e){return[this._path,e].join("/")}],bytes:["path",function(e){try{return this._io.readBytes(!1,e)}catch(t){if(t instanceof m)return null;throw new p("Can't read bytes from \""+e+'". '+t,t.stack)}}]},{bytes:["path",function(e){function t(t){if(t instanceof m)return null;throw new p("Can't read bytes from \""+e+'". '+t,t.stack)}return this._io.readBytes(!0,e).then(null,t)}]},["fileName"],function(e){return e("bytes")}),F._readMetaInfo=function(e){function t(e){if("object"!=typeof e)throw new p("metainfo.plist is not properly formatted.");if(!(e.formatVersion in g))throw new p("Unsupported UFO format ("+e.formatVersion+") in "+this._path);this._formatVersion=e.formatVersion}var n=this._getPlist(e,v);return e?n.then(t.bind(this)):t.call(this,n)},F.getKerningGroupConversionRenameMaps=n.factory({groups:[!1,F.readGroups]},{groups:[!0,F.readGroups]},[],function(e){return this.formatVersion>=3?{side1:Object.create(null),side2:Object.create(null)}:(e("groups"),this._upConvertedKerningData.groupRenameMaps)}),F._readInfo=function(e){function t(e){if("object"!=typeof e)throw new p("fontinfo.plist is not properly formatted.");return e}var n=this._getPlist(e,b,{});return e?n.then(t):t(n)},F.readInfo=function(e,t){function n(e){var t,n,r,o,a,s={},u=[];switch(this.formatVersion){case 1:r=O,u.push(I,D);break;case 2:r=E,u.push(D);break;case 3:r=$;break;default:throw new d("readInfo formatVersion "+this.formatVersion)}for(t in r)for(n=e[t],void 0!==n&&(s[t]=n),o=0,a=u.length;a>o;o++)s=u[o](s);s=j(s);for(t in s)i[t]=s[t];return i}var r=this._readInfo(e),i=t||Object.create(null);return e?r.then(n.bind(this)):n.call(this,r)},F._readKerning=function(e){function t(e){var t,n,r,i,o="kerning.plist is not properly formatted.";if("object"!=typeof e)throw new p(o);for(t in e){if(n=e[t],"object"!=typeof n)throw new p(o);for(r in n)if(i=n[r],"number"!=typeof i)throw new p(o+" Value is not a number: typeof "+typeof i)}return e}var n=this._getPlist(e,_,{});return e?n.then(e):t(n)},F._upConvertKerning=n.factory({testKerning:["kerning",function(e){if(!c(e,this._upConvertedKerningData.originalKerning))throw new p("The data in kerning.plist has been modified since it was converted to UFO 3 format.")}],testGroups:["groups",function(e){if(!l(e,this._upConvertedKerningData.originalGroups))throw new p("The data in groups.plist has been modified since it was converted to UFO 3 format.")}],test:["testKerning","testGroups",function(){}],kerning:[!1,F._readKerning],groups:[!1,F._readGroups],convertedKerning:["groups","kerning",function(e,t){var n,r=f(e),i=this._upConvertedKerningData={kerning:{},originalKerning:t,groups:{},originalGroups:e};if(!r[0])throw new p(r[1]);n=N(t,e),i.kerning=n[0],i.groups=n[1],i.groupRenameMaps=n[2]}]},{kerning:[!0,F._readKerning],groups:[!0,F._readGroups]},[],function(e){return e(this._upConvertedKerningData?"test":"convertedKerning")}),F.readGroups=n.factory({upConvertKerning:[!1,F._upConvertKerning],data:[!1,F._readGroups],groups:["data",function(e){var t=M(e);if(!t[0])throw new p(t[1]);return e}]},{upConvertKerning:[!0,F._upConvertKerning],data:[!0,F._readGroups]},[],function(e){return this.formatVersion<3?(e("upConvertKerning"),this._upConvertedKerningData.groups):e("groups")}),F.readKerning=n.factory({upConvertKerning:[!1,F._upConvertKerning],kerning:[!1,F._readKerning]},{upConvertKerning:[!0,F._upConvertKerning],kerning:[!0,F._readKerning]},[],function(e){var t;return this.formatVersion<3?(e("upConvertKerning"),t=this._upConvertedKerningData.kerning):t=e("kerning"),t}),F.readLib=function(e){function t(e){var t=T(e);if(!t[0])throw new p(t[1]);return e}var n=this._getPlist(e,w,{});return e?n.then(t):t(n)},F.readFeatures=n.factory({path:[function(){return[this._path,x].join("/")}],features:["path",function(e){try{return this._io.readFile(!1,e)}catch(t){if(t instanceof m)return"";throw t}}]},{features:["path",function(e){function t(e){if(e instanceof m)return"";throw e}return this._io.readFile(!0,e).then(null,t)}]},[],function(e){return e("features")}),F._readLayerContents=n.factory({layerContents:[!1,F._readRawLayerContents]},{layerContents:[!0,F._readRawLayerContents]},[],function(e){return this.formatVersion<3?[[S,C]]:e("layerContents")}),F.getLayerNames=function(e){function t(e){var t,n,r=[];for(t=0,n=e.length;n>t;t++)r.push(e[t][0]);return r}var n=this._readLayerContents(e);return e?n.then(t):t(n)},F.getDefaultLayerName=function(e){function t(e){var t,n;for(t=0,n=e.length;n>t;t++)if(e[t][1]===C)return e[t][0];throw new p("The default layer is not defined in layercontents.plist.")}var n=this._readLayerContents(e);return e?n.then(t):t(n)},F.getGlyphSet=n.factory({layerContents:[!1,F._readLayerContents],layerDir:["layerName",function(e){return e?e:this.getDefaultLayerName(!1)}],directory:["layerDir","layerContents",function(e,t){var n,r,i,o,a;for(r=0,i=t.length;i>r;r++)if(n=t[r],o=n[0],a=n[1],e===o)return a;throw new p('No glyphs directory is mapped to "'+e+'".')}],glyphsPath:["directory",function(e){return[this._path,e].join("/")}],glyphSet:["glyphsPath","glyphNameToFileNameFunc","options",function(e,t,n){return u.factory(!1,this._io,e,void 0,this.formatVersion,n)}]},{layerContents:[!0,F._readLayerContents],layerDir:["layerName","_callback","_errback",function(e,t,n){e?setTimeout(t.bind(null,e)):this.getDefaultLayerName(!0).then(t,n)}],glyphSet:["glyphsPath","glyphNameToFileNameFunc","options",function(e,t,n){return u.factory(!0,this._io,e,void 0,this.formatVersion,n)}]},["layerName","glyphNameToFileNameFunc","options"],function(e){return e("glyphSet")}),F.getCharacterMapping=n.factory({glyphSet:[!1,"layerName",F.getGlyphSet],allUnicodes:["glyphSet",function(e){return e.getUnicodes(!1)}],cmap:["allUnicodes",function(e){var t,n,r,i,o,a,s=Object.create(null);for(t in e)for(n=e[t],r=0,i=n.length;i>r;r++)o=n[r],a=s[o],a||(s[o]=a=[]),a.push(t);return s}]},{glyphSet:[!0,"layerName",F.getGlyphSet],allUnicodes:["glyphSet",function(e){return e.getUnicodes(!0)}]},["layerName"],function(e){return e("cmap")}),F.getDataDirectoryListing=n.factory({path:[function(){return[this._path,k].join("/")}],md:["maxDepth",function(e){return void 0===e?100:e}],listing:["path","md",function(e,t){return this._io.pathExists(!1,e)?s(!1,this._io,e,t):[]}]},{pathExists:["path",function(e){return this._io.pathExists(!0,e)}],listing:["path","md","pathExists","_callback",function(e,t,n,r){return n?void setTimeout(r,0,[]):s(!0,this._io,e,t)}]},["maxDepth"],function(e){return e("listing")}),F.getImageDirectoryListing=n.factory({path:[function(){return[this._path,P].join("/")}],listing:["path",function(e){try{return this._io.readDir(!1,e)}catch(t){if(t instanceof m)return[];throw t}}],files:["listing",function(e){function t(e){return"/"!==e.slice(-1)}return e.map(t)}],pngs:["files",function(e){var t,n,r,i=[];for(n=0,r=e.length;r>n;n++)t=A(!1,this._io,{path:e[n]}),t[0]&&i.push(e[n]);return i}]},{listing:["path",function(e){function t(e){if(e instanceof m)return[];throw e}return this._io.readDir(!0,e).then(null,t)}],pngs:["files","_callback","_errback",function(e,t,n){function r(e){l||(l=!0,n(e))}function i(e,n){l||(n[0]&&s.push(e),u-=1,u>0||(l=!0,t(s)))}var o,a,s=[],u=0,l=!1;for(o=0,a=e.length;a>o;o++)A(!0,this._io,{path:e[o]}).then(i.bind(null,e[o]),r),u+=1}]},[],function(e){return this.formatVersion<3?[]:e("pngs")}),F.readImage=function(e,t){function n(e){if(null===e)throw new p('No image file named "'+t+'".');var n=A(!1,void 0,{data:e});if(!n[0])throw new p(n[1]);return e}if(this.formatVersion<3)throw new p("Reading images is not allowed in UFO "+this.formatVersion+".");var r=[this._path,P,t].join("/"),i=this.readBytesFromPath(e,r);return e?i.then(n):n(i)},h}),define("ufojs/ufoLib/UFOWriter",["ufojs/errors","Atem-IO/errors","obtain/obtain","ufojs/plistLib/main","path","./_UFOBase","./constants","./validators","./converters","./filenames","./glifLib/GlyphSet"],function(e,t,n,r,i,o,a,s,u,l,c){"use strict";function h(e,t,n,r){o.call(this,e,t);var i=n||3;if(!(i in g))throw new p("Unsupported UFO format ("+i+").");this._formatVersion=parseInt(i,10),this._fileCreator=r||"org.ufojs.lib",this._downConversionKerningData=null,this.layerContents={}}function f(e,t){function n(e){e&&(this.layerContents={DEFAULT_LAYER_NAME:C})}if(null!==t&&t>=3)return this._readLayerContents(e);var r=[this._path,C].join("/"),i=this._io.pathExists(e,r);return e?i.then(n.bind(this)):n.call(this,i)}var p=e.UFOLib,d=t.IONoEntry,m=t.IO,g=a.supportedUFOFormatVersions,v=a.METAINFO_FILENAME,y=a.GROUPS_FILENAME,b=a.FONTINFO_FILENAME,_=a.KERNING_FILENAME,w=a.LIB_FILENAME,x=a.FEATURES_FILENAME,S=a.DEFAULT_LAYER_NAME,C=a.DEFAULT_GLYPHS_DIRNAME,k=a.DATA_DIRNAME,P=a.IMAGES_DIRNAME,M=a.LAYERCONTENTS_FILENAME,T=s.groupsValidator,A=s.fontLibValidator,O=s.pngValidator,E=u.fontInfoAttributesVersion3,$=u.convertFontInfoDataVersion3ToVersion2,N=u.convertFontInfoDataVersion2ToVersion1,I=u.validateInfoVersion3Data,D=u.validateInfoVersion2Data,j=l.userNameToFileName,F=h.prototype=Object.create(o.prototype);return F.constructor=h,h.factory=n.factory({instance:["io","path","formatVersion","fileCreator",function(e,t,n,r){return new h(e,t,n,r)}],init:["instance",function(e){if(e._initLayerContents(!1),e._writeMetaInfo(!1),!(S in e.layerContents)){var t=e.getGlyphSet(!1);t.writeContents(!1)}e.writeLayerContents(!1)}]},{init:["instance",function(e){function t(e){return e.writeContents(!0)}function n(){return S in e.layerContents?void 0:e.getGlyphSet(!0).then(t)}return e._writeMetaInfo(!0).then(e._initLayerContents.bind(e,!0)).then(n).then(e.writeLayerContents.bind(e,!0))}]},["io","path","formatVersion","fileCreator"],function(e){return e("init"),e("instance")}),F._initLayerContents=n.factory({noEntryMarker:[function(){return new d}],metaInfo:[!1,new n.Argument(v),"noEntryMarker",F._getPlist],previousVersion:["metaInfo","noEntryMarker",function(e,t){if(e===t)return null;var n=parseInt(e.formatVersion,10);if(n!==n)throw new p("The existing metainfo.plist is not  properly formatted. Couldn't interpret formatVersion as an integer: "+e.formatVersion);if(!(n in g))throw new p("Unsupported UFO format ("+n+") in existing metainfo.plist.");return n}],initLayerContents:[!1,"previousVersion",f]},{metaInfo:[!0,new n.Argument(v),"noEntryMarker",F._getPlist],initLayerContents:[!0,"previousVersion",f]},[],function(e){e("initLayerContents")}),F._writeMetaInfo=function(e){var t={creator:this._fileCreator,formatVersion:this._formatVersion};return this._writePlist(e,v,t)},Object.defineProperty(F,"path",{get:function(){return this._path}}),Object.defineProperty(F,"formatVersion",{get:function(){return this._formatVersion}}),Object.defineProperty(F,"fileCreator",{get:function(){return this._fileCreator}}),F._makeDirectory=function(e,t){var n=t?[this._path,t].join("/"):this._path,r=this._io.ensureDir(e,n);return e?r.then(function(){return n}):n},F._writePlist=n.factory({ensureDir:[!1,F._makeDirectory],path:["fileName",function(e){return[this._path,e].join("/")}],plist:["data","fileName",function(e,t){try{return r.createPlistString(e)}catch(n){throw new p('The data for the file "'+t+'" could not be written: '+n,n.stack)}}],write:["path","plist",function(e,t){this._io.writeFile(!1,e,t)}]},{ensureDir:[!0,F._makeDirectory],write:["path","plist","ensureDir",function(e,t){return this._io.writeFile(!0,e,t)}]},["fileName","data"],function(e){e("ensureDir"),e("write")}),F._deleteFile=n.factory({path:["fileName",function(e){return[this._path,e].join("/")}],unlink:["path",function(e){try{this._io.unlink(!1,e)}catch(t){if(!(t instanceof d))throw t}}]},{unlink:["path",function(e){function t(e){if(!(e instanceof d))throw e}return this._io.unlink(!0,e).then(null,t)}]},["fileName"],function(e){e("unlink")}),F._removeEmptyDirectories=n.factory({basePath:[function(){return i.normalize(this._path)}],absDir:["directory",function(e){return i.normalize(e)}],removeDirs:["basePath","absDir",function(e,t){var n=t;do{try{this._io.rmDir(!1,n)}catch(r){if(r instanceof d)continue;if(!(r instanceof m))throw r;break}n=i.dirname(n)}while(n&&n!==e)}]},{removeDirs:["basePath","absDir","_callback","_errback",function(e,t,n,r){function o(e){e instanceof d?a():e instanceof m?n():r(e)}var a,s=t;(a=function(){s&&s!==e?(this._io.rmDir(!0,s).then(a,o),s=i.dirname(s)):n()}.bind(this))()}]},["directory"],function(e,t){var n=e("absDir"),r=e("basePath");if(r===n)throw new p("Can't delete UFO path");if(0!==n.indexOf(r))throw new p('The directory must be contained within the UFO path: "'+t+'".');e("removeDirs")}),F._getPathType=function(e,t){function n(e){var t,n,r;for(t=0,n=e.length;n>t;t++)if(r=s[e[t]])return r;return null}function r(e){if(e instanceof d)return null;throw e}var o=i.dirname(t),a=i.basename(t),s=Object.create(null);if(s[a]="file",s[a+"/"]="directory",e)return this._io.readDir(e,o).then(n,r);try{return n(this._io.readDir(e,o))}catch(u){return r(u)}},F._removeAndCleanup=n.factory({basePath:[function(){return i.normalize(this._path)}],absPath:["path","basePath",function(e,t){var n=i.normalize(e);if(t===n)throw new p("Can't delete UFO path");if(0!==n.indexOf(t))throw new p('The path "'+e+'" must be contained within the UFO path.');return n}],parent:["path",i.dirname],type:[!1,"path",F._getPathType],rmDir:["absPath",function(e){return this._io.rmDirRecursive(!1,e)}],unlink:["absPath",function(e){return this._io.unlink(!1,e)}],cleanup:[!1,"parent",F._removeEmptyDirectories]},{type:[!0,"path",F._getPathType],rmDir:["absPath",function(e){return this._io.rmDirRecursive(!0,e)}],unlink:["absPath",function(e){return this._io.unlink(!0,e)}],cleanup:[!0,"parent",F._removeEmptyDirectories]},["path"],function(e){e("absPath");var t=e("type");"directory"===t?e("rmDir"):"file"===t&&e("unlink"),e("cleanup")}),F.setModificationTime=function(e){return this._io.setMtime(e,this._path)},F.setKerningGroupConversionRenameMaps=function(e){if(this._formatVersion>=3)throw new p("Not supported in UFO "+this._formatVersion+".");var t,n,r,i={};for(t in{side1:!0,side2:!0})for(n in e[t])r=e[t][n],i[r]=n;this._downConversionKerningData={groupRenameMap:i}},F.writeGroups=n.factory({checkedGroups:["groups",function(e){var t,n,r,i,o=T(e);if(!o[0])throw new p(o[1]);if(this._formatVersion<3&&null!==this._downConversionKerningData){t=this._downConversionKerningData.groupRenameMap||{},n={};for(r in e)i=e[r],r in t&&(r=t[r]),n[r]=i;e=n}return e}],write:["checkedGroups",function(e){var t;for(t in e)return this._writePlist(!1,y,e);return this._deleteFile(!1,y)}]},{write:["checkedGroups",function(e){var t;for(t in e)return this._writePlist(!0,y,e);return this._deleteFile(!0,y)}]},["groups"],function(e){e("write")}),F.writeInfo=n.factory({data:["info",function(e){var t,n,r={};for(t in E)if(t in e){if(n=e[t],void 0===n||null===n)continue;r[t]=n}switch(this._formatVersion){case 3:r=I(r);break;case 2:r=$(r),r=D(r);break;case 1:r=$(r),r=D(r),r=N(r)}return r}],write:[!1,new n.Argument(b),"data",F._writePlist]},{write:[!0,new n.Argument(b),"data",F._writePlist]},["info"],function(e){return e("write")}),F.writeKerning=n.factory({data:["kerning",function(e){var t,n,r,i,o,a;for(t in e){n=e[t];for(r in n)i=n[r];if("number"!=typeof i)throw new p("The kerning is not properly formatted.")}if(this._formatVersion<3&&null!==this._downConversionKerningData){o=this._downConversionKerningData.groupRenameMap,a={};for(t in e){n=e[t];for(r in n)i=n[r],t=o[t]||t,r=o[r]||r,a[t]||(a[t]={}),a[t][r]=i}return a}return e}],write:["data",function(e){var t;for(t in e)return this._writePlist(!1,_,e);return this._deleteFile(!1,_)}]},{write:["data",function(e){var t;for(t in e)return this._writePlist(!0,_,e);return this._deleteFile(!0,_)}]},["kerning"],function(e){return e("write")}),F.writeLib=n.factory({data:["libDict",function(e){var t=A(e);if(!t[0])throw new p(t[1]);return e}],write:["data",function(e){var t;for(t in e)return this._writePlist(!1,w,e);return this._deleteFile(!1,w)}]},{write:["data",function(e){var t;for(t in e)return this._writePlist(!0,w,e);return this._deleteFile(!0,w)}]},["libDict"],function(e){return e("write")}),F.writeFeatures=n.factory({path:[function(){return[this._path,x].join("/")}],dir:[!1,F._makeDirectory],check:["features",function(e){if(1===this._formatVersion)throw new p("features.fea is not allowed in UFO 1.");if("string"!=typeof e)throw new p("The features must be string, but are: "+typeof e+".");return!0}],write:["path","features","dir",function(e,t){return this._io.writeFile(!1,e,t)}]},{dir:[!0,F._makeDirectory],write:["path","features","dir",function(e,t){return this._io.writeFile(!0,e,t)}]},["features"],function(e){e("check"),e("write")}),F._readLayerContents=function(e){function t(e){var t,n,r={};for(t=0,n=e.length;n>t;t++)r[e[t][0]]=e[t][1];this.layerContents=r}var n=this._readRawLayerContents(e);return e?n.then(t.bind(this)):t.call(this,n)},F.writeLayerContents=n.factory({data:["layerOrder",function(e){var t,n,r,i,o,a=Object.keys(this.layerContents);if(e){for(t=[],r=0,i=e.length;i>r;r++)n=e[r],null===n&&(n=S),t.append(n);e=t}else e=a;if(e===a);else if(e.length!==a.length)throw new p("layerOrder does not match the glyph sets that have been created.");for(o=[],r=0,i=e.length;i>r;r++){if(n=e[r],!(n in this.layerContents))throw new p("layerOrder does not match the glyph sets that have been created.");o.push([n,this.layerContents[n]])}return o}],write:[!1,new n.Argument(M),"data",F._writePlist]},{write:[!0,new n.Argument(M),"data",F._writePlist]},["layerOrder"],function(e){return this._formatVersion<3?void 0:e("write")}),F._findDirectoryForLayerName=function(e){var t,n;for(t in this.layerContents){if(n=this.layerContents[t],!e&&n===C)return n;if(t===e)return n}throw new p("Could not locate a glyph set directory for the layer named "+e+".")},F._getGlyphSet=n.factory({directoryName:["layerName","defaultLayer",function(e,t){var n,r,o,a,s=void 0===t?!0:!!t;if(this._formatVersion<3)return C;if(s)for(n in this.layerContents)if(r=this.layerContents[n],r===C){if(n!==e)throw new p("Another layer is already mapped to the default directory.")}else if(n===e)throw new p("The layer name is already mapped to a non-default layer.");if(e in this.layerContents)r=this.layerContents[e];else if(s)r=C;else{a=Object.create(null);for(o in this.layerContents)a[this.layerContents[o].toLowerCase()]=!0;r=j(i.basename(e),a,"glyphs.")}return r}],io:[function(){return this._io}],path:["layerName","directoryName",function(e,t){var n=this._makeDirectory(!1,t);return this._formatVersion>=3&&(this.layerContents[e]=t),n}],formatVersion:[function(){return this._formatVersion}],GlyphSet:[!1,"io","path","glyphNameToFileNameFunc","formatVersion",c.factory]},{path:["layerName","directoryName",function(e,t){return this._makeDirectory(!0,t).then(function(n){return this._formatVersion>=3&&(this.layerContents[e]=t),n}.bind(this))}],GlyphSet:[!0,"io","path","glyphNameToFileNameFunc","formatVersion",c.factory]},["layerName","defaultLayer","glyphNameToFileNameFunc"],function(e){return e("GlyphSet")}),F.getGlyphSet=n.factory({dfltLayer:["defaultLayer",function(e){return void 0===e?!0:!!e}],layer:["layerName","dfltLayer",function(e,t){var n;if(this._formatVersion<3&&(!t||e))throw new p("Only the default layer can be writen in UFO "+this._formatVersion+".");if(!e&&t){for(n in this.layerContents)if(this.layerContents[n]===C){e=n;break}e||(e=S)}else if(!e&&!t)throw new p("A layer name must be provided for non-default layers.");return e}],GlyphSet:[!1,"layer","dfltLayer","glyphNameToFileNameFunc",F._getGlyphSet]},{GlyphSet:[!0,"layer","dfltLayer","glyphNameToFileNameFunc",F._getGlyphSet]},["layerName","defaultLayer","glyphNameToFileNameFunc"],function(e){return e("GlyphSet")}),F.renameGlyphSet=n.factory({dirs:["layerName","newLayerName","defaultLayer",function(e,t,n){var r,o,a,s;if(this._formatVersion<3)throw new p("Renaming a glyph set is not supported in UFO "+this._formatVersion+".");if(e===t){if(this.layerContents[e]!==C&&!n)return;if(this.layerContents[e]===C&&n)return}else{if(t||(t=S),t in this.layerContents)throw new p('A layer named "'+t+'" already exists.');if(n)for(r in this.layerContents)if(C===this.layerContents[r])throw new p("A default layer already exists.")}if(o=this._findDirectoryForLayerName(e),n)a=C;else{s=Object.create(null);for(r in this.layerContents)s[this.layerContents[r].toLowerCase()]=!0;a=j(i.basename(t),s,"glyphs.")}return delete this.layerContents[e],this.layerContents[t]=a,{from:[this._path,o],to:[this._path,a]}}],rename:["dirs",function(e){return this._io.rename(!1,e.from,e.to)}]},{rename:["dirs",function(e){return this._io.rename(!0,e.from,e.to)}]},["layerName","newLayerName","defaultLayer"],function(e){return e.rename}),F.deleteGlyphSet=n.factory({path:["layerName",function(e){if(this._formatVersion<3)throw new p("Deleting a glyph set is not allowed in UFO "+this._formatVersion+".");return this._findDirectoryForLayerName(e)}],"delete":["layerName","remove",function(e){delete this.layerContents[e]}],remove:[!1,"path",F._removeAndCleanup]},{remove:[!0,"path",F._removeAndCleanup]},["layerName"],function(e){return e("delete")}),F._ensureDirs=function(e,t){return this._io.ensureDirs(e,t)},F.writeImage=n.factory({path:["fileName",function(e){var t=i.normalize([this._path,P].join("/")),n=i.normalize([this._path,P,e].join("/"));if(t===n)throw new p("Image can't be directly at the \""+P+'" path: "'+e+'"');if(0!==n.indexOf(t))throw new p('Image must be contained within the "'+P+'" path: "'+e+'"');return n}],parentDir:["path",i.dirname],validData:["data",function(e){var t=O(!1,void 0,{data:e});if(!t[0])throw new p(t[1]);return!0}],ensureDirs:[!0,"parentDir",F._ensureDirs],write:["path","data","ensureDirs",function(e,t){return this._io.writeFile(!0,e,t)}]},{ensureDirs:[!0,"parentDir",F._ensureDirs],write:["path","data","ensureDirs",function(e,t){return this._io.writeFile(!0,e,t)}]},["fileName","data"],function(e){if(this._formatVersion<3)throw new p("Images are not supported in UFO "+this._formatVersion+".");return e("validData"),e("write")}),F._removePath=n.factory({absPath:["dir","relPath",function(e,t){if(this._formatVersion<3)throw new p('The "'+e+'" directory is not supported in UFO '+this._formatVersion+".");var n=i.normalize([this._path,e].join("/")),r=i.normalize([n,t].join("/"));if(0!==r.indexOf(n))throw new p('Path must be contained in the "'+e+'" but: "'+t+'" is not.');return r}],remove:[!1,"absPath",F._removeAndCleanup]},{remove:[!0,"absPath",F._removeAndCleanup]},["dir","relPath"],function(e){return e("remove")}),F.removeImage=function(e,t){return this._removePath(e,P,t);
},F.removeDataPath=function(e,t){return this._removePath(e,k,t)},h}),!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define("yaml",[],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.jsyaml=e()}}(function(){return function e(t,n,r){function i(a,s){if(!n[a]){if(!t[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(o)return o(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[a]={exports:{}};t[a][0].call(c.exports,function(e){var n=t[a][1][e];return i(n?n:e)},c,c.exports,e,t,n,r)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(e,t,n){"use strict";function r(e){return function(){throw new Error("Function "+e+" is deprecated and cannot be used.")}}var i=e("./js-yaml/loader"),o=e("./js-yaml/dumper");t.exports.Type=e("./js-yaml/type"),t.exports.Schema=e("./js-yaml/schema"),t.exports.FAILSAFE_SCHEMA=e("./js-yaml/schema/failsafe"),t.exports.JSON_SCHEMA=e("./js-yaml/schema/json"),t.exports.CORE_SCHEMA=e("./js-yaml/schema/core"),t.exports.DEFAULT_SAFE_SCHEMA=e("./js-yaml/schema/default_safe"),t.exports.DEFAULT_FULL_SCHEMA=e("./js-yaml/schema/default_full"),t.exports.load=i.load,t.exports.loadAll=i.loadAll,t.exports.safeLoad=i.safeLoad,t.exports.safeLoadAll=i.safeLoadAll,t.exports.dump=o.dump,t.exports.safeDump=o.safeDump,t.exports.YAMLException=e("./js-yaml/exception"),t.exports.MINIMAL_SCHEMA=e("./js-yaml/schema/failsafe"),t.exports.SAFE_SCHEMA=e("./js-yaml/schema/default_safe"),t.exports.DEFAULT_SCHEMA=e("./js-yaml/schema/default_full"),t.exports.scan=r("scan"),t.exports.parse=r("parse"),t.exports.compose=r("compose"),t.exports.addConstructor=r("addConstructor")},{"./js-yaml/dumper":3,"./js-yaml/exception":4,"./js-yaml/loader":5,"./js-yaml/schema":7,"./js-yaml/schema/core":8,"./js-yaml/schema/default_full":9,"./js-yaml/schema/default_safe":10,"./js-yaml/schema/failsafe":11,"./js-yaml/schema/json":12,"./js-yaml/type":13}],2:[function(e,t,n){"use strict";function r(e){return"undefined"==typeof e||null===e}function i(e){return"object"==typeof e&&null!==e}function o(e){return Array.isArray(e)?e:r(e)?[]:[e]}function a(e,t){var n,r,i,o;if(t)for(o=Object.keys(t),n=0,r=o.length;r>n;n+=1)i=o[n],e[i]=t[i];return e}function s(e,t){var n,r="";for(n=0;t>n;n+=1)r+=e;return r}function u(e){return 0===e&&Number.NEGATIVE_INFINITY===1/e}t.exports.isNothing=r,t.exports.isObject=i,t.exports.toArray=o,t.exports.repeat=s,t.exports.isNegativeZero=u,t.exports.extend=a},{}],3:[function(e,t,n){"use strict";function r(e,t){var n,r,i,o,a,s,u;if(null===t)return{};for(n={},r=Object.keys(t),i=0,o=r.length;o>i;i+=1)a=r[i],s=String(t[a]),"!!"===a.slice(0,2)&&(a="tag:yaml.org,2002:"+a.slice(2)),u=e.compiledTypeMap[a],u&&D.call(u.styleAliases,s)&&(s=u.styleAliases[s]),n[a]=s;return n}function i(e){var t,n,r;if(t=e.toString(16).toUpperCase(),255>=e)n="x",r=2;else if(65535>=e)n="u",r=4;else{if(!(4294967295>=e))throw new E("code point within a string may not be greater than 0xFFFFFFFF");n="U",r=8}return"\\"+n+O.repeat("0",r-t.length)+t}function o(e){this.schema=e.schema||$,this.indent=Math.max(1,e.indent||2),this.skipInvalid=e.skipInvalid||!1,this.flowLevel=O.isNothing(e.flowLevel)?-1:e.flowLevel,this.styleMap=r(this.schema,e.styles||null),this.sortKeys=e.sortKeys||!1,this.lineWidth=e.lineWidth||80,this.noRefs=e.noRefs||!1,this.noCompatMode=e.noCompatMode||!1,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function a(e,t){for(var n,r=O.repeat(" ",t),i=0,o=-1,a="",s=e.length;s>i;)o=e.indexOf("\n",i),-1===o?(n=e.slice(i),i=s):(n=e.slice(i,o+1),i=o+1),n.length&&"\n"!==n&&(a+=r),a+=n;return a}function s(e,t){return"\n"+O.repeat(" ",e.indent*t)}function u(e,t){var n,r,i;for(n=0,r=e.implicitTypes.length;r>n;n+=1)if(i=e.implicitTypes[n],i.resolve(t))return!0;return!1}function l(e){return e===L||e===j}function c(e){return e>=32&&126>=e||e>=161&&55295>=e&&8232!==e&&8233!==e||e>=57344&&65533>=e&&65279!==e||e>=65536&&1114111>=e}function h(e){return c(e)&&65279!==e&&e!==G&&e!==Q&&e!==J&&e!==te&&e!==re&&e!==Y&&e!==V}function f(e){return c(e)&&65279!==e&&!l(e)&&e!==W&&e!==K&&e!==Y&&e!==G&&e!==Q&&e!==J&&e!==te&&e!==re&&e!==V&&e!==z&&e!==H&&e!==R&&e!==ne&&e!==X&&e!==B&&e!==U&&e!==q&&e!==Z&&e!==ee}function p(e,t,n,r,i){var o,a,s=!1,u=!1,p=-1!==r,d=-1,m=f(e.charCodeAt(0))&&!l(e.charCodeAt(e.length-1));if(t)for(o=0;o<e.length;o++){if(a=e.charCodeAt(o),!c(a))return ce;m=m&&h(a)}else{for(o=0;o<e.length;o++){if(a=e.charCodeAt(o),a===F)s=!0,p&&(u=u||o-d-1>r&&" "!==e[d+1],d=o);else if(!c(a))return ce;m=m&&h(a)}u=u||p&&o-d-1>r&&" "!==e[d+1]}return s||u?" "===e[0]&&n>9?ce:u?le:ue:m&&!i(e)?ae:se}function d(e,t,n,r){e.dump=function(){function i(t){return u(e,t)}if(0===t.length)return"''";if(!e.noCompatMode&&-1!==oe.indexOf(t))return"'"+t+"'";var o=e.indent*Math.max(1,n),s=-1===e.lineWidth?-1:Math.max(Math.min(e.lineWidth,40),e.lineWidth-o),l=r||e.flowLevel>-1&&n>=e.flowLevel;switch(p(t,l,e.indent,s,i)){case ae:return t;case se:return"'"+t.replace(/'/g,"''")+"'";case ue:return"|"+m(t,e.indent)+g(a(t,o));case le:return">"+m(t,e.indent)+g(a(v(t,s),o));case ce:return'"'+b(t,s)+'"';default:throw new E("impossible error: invalid scalar style")}}()}function m(e,t){var n=" "===e[0]?String(t):"",r="\n"===e[e.length-1],i=r&&("\n"===e[e.length-2]||"\n"===e),o=i?"+":r?"":"-";return n+o+"\n"}function g(e){return"\n"===e[e.length-1]?e.slice(0,-1):e}function v(e,t){for(var n,r,i=/(\n+)([^\n]*)/g,o=function(){var n=e.indexOf("\n");return n=-1!==n?n:e.length,i.lastIndex=n,y(e.slice(0,n),t)}(),a="\n"===e[0]||" "===e[0];r=i.exec(e);){var s=r[1],u=r[2];n=" "===u[0],o+=s+(a||n||""===u?"":"\n")+y(u,t),a=n}return o}function y(e,t){if(""===e||" "===e[0])return e;for(var n,r,i=/ [^ ]/g,o=0,a=0,s=0,u="";n=i.exec(e);)s=n.index,s-o>t&&(r=a>o?a:s,u+="\n"+e.slice(o,r),o=r+1),a=s;return u+="\n",u+=e.length-o>t&&a>o?e.slice(o,a)+"\n"+e.slice(a+1):e.slice(o),u.slice(1)}function b(e){for(var t,n,r="",o=0;o<e.length;o++)t=e.charCodeAt(o),n=ie[t],r+=!n&&c(t)?e[o]:n||i(t);return r}function _(e,t,n){var r,i,o="",a=e.tag;for(r=0,i=n.length;i>r;r+=1)k(e,t,n[r],!1,!1)&&(0!==r&&(o+=", "),o+=e.dump);e.tag=a,e.dump="["+o+"]"}function w(e,t,n,r){var i,o,a="",u=e.tag;for(i=0,o=n.length;o>i;i+=1)k(e,t+1,n[i],!0,!0)&&(r&&0===i||(a+=s(e,t)),a+="- "+e.dump);e.tag=u,e.dump=a||"[]"}function x(e,t,n){var r,i,o,a,s,u="",l=e.tag,c=Object.keys(n);for(r=0,i=c.length;i>r;r+=1)s="",0!==r&&(s+=", "),o=c[r],a=n[o],k(e,t,o,!1,!1)&&(e.dump.length>1024&&(s+="? "),s+=e.dump+": ",k(e,t,a,!1,!1)&&(s+=e.dump,u+=s));e.tag=l,e.dump="{"+u+"}"}function S(e,t,n,r){var i,o,a,u,l,c,h="",f=e.tag,p=Object.keys(n);if(e.sortKeys===!0)p.sort();else if("function"==typeof e.sortKeys)p.sort(e.sortKeys);else if(e.sortKeys)throw new E("sortKeys must be a boolean or a function");for(i=0,o=p.length;o>i;i+=1)c="",r&&0===i||(c+=s(e,t)),a=p[i],u=n[a],k(e,t+1,a,!0,!0,!0)&&(l=null!==e.tag&&"?"!==e.tag||e.dump&&e.dump.length>1024,l&&(c+=e.dump&&F===e.dump.charCodeAt(0)?"?":"? "),c+=e.dump,l&&(c+=s(e,t)),k(e,t+1,u,!0,l)&&(c+=e.dump&&F===e.dump.charCodeAt(0)?":":": ",c+=e.dump,h+=c));e.tag=f,e.dump=h||"{}"}function C(e,t,n){var r,i,o,a,s,u;for(i=n?e.explicitTypes:e.implicitTypes,o=0,a=i.length;a>o;o+=1)if(s=i[o],(s.instanceOf||s.predicate)&&(!s.instanceOf||"object"==typeof t&&t instanceof s.instanceOf)&&(!s.predicate||s.predicate(t))){if(e.tag=n?s.tag:"?",s.represent){if(u=e.styleMap[s.tag]||s.defaultStyle,"[object Function]"===I.call(s.represent))r=s.represent(t,u);else{if(!D.call(s.represent,u))throw new E("!<"+s.tag+'> tag resolver accepts not "'+u+'" style');r=s.represent[u](t,u)}e.dump=r}return!0}return!1}function k(e,t,n,r,i,o){e.tag=null,e.dump=n,C(e,n,!1)||C(e,n,!0);var a=I.call(e.dump);r&&(r=e.flowLevel<0||e.flowLevel>t);var s,u,l="[object Object]"===a||"[object Array]"===a;if(l&&(s=e.duplicates.indexOf(n),u=-1!==s),(null!==e.tag&&"?"!==e.tag||u||2!==e.indent&&t>0)&&(i=!1),u&&e.usedDuplicates[s])e.dump="*ref_"+s;else{if(l&&u&&!e.usedDuplicates[s]&&(e.usedDuplicates[s]=!0),"[object Object]"===a)r&&0!==Object.keys(e.dump).length?(S(e,t,e.dump,i),u&&(e.dump="&ref_"+s+e.dump)):(x(e,t,e.dump),u&&(e.dump="&ref_"+s+" "+e.dump));else if("[object Array]"===a)r&&0!==e.dump.length?(w(e,t,e.dump,i),u&&(e.dump="&ref_"+s+e.dump)):(_(e,t,e.dump),u&&(e.dump="&ref_"+s+" "+e.dump));else{if("[object String]"!==a){if(e.skipInvalid)return!1;throw new E("unacceptable kind of an object to dump "+a)}"?"!==e.tag&&d(e,e.dump,t,o)}null!==e.tag&&"?"!==e.tag&&(e.dump="!<"+e.tag+"> "+e.dump)}return!0}function P(e,t){var n,r,i=[],o=[];for(M(e,i,o),n=0,r=o.length;r>n;n+=1)t.duplicates.push(i[o[n]]);t.usedDuplicates=new Array(r)}function M(e,t,n){var r,i,o;if(null!==e&&"object"==typeof e)if(i=t.indexOf(e),-1!==i)-1===n.indexOf(i)&&n.push(i);else if(t.push(e),Array.isArray(e))for(i=0,o=e.length;o>i;i+=1)M(e[i],t,n);else for(r=Object.keys(e),i=0,o=r.length;o>i;i+=1)M(e[r[i]],t,n)}function T(e,t){t=t||{};var n=new o(t);return n.noRefs||P(e,n),k(n,0,e,!0,!0)?n.dump+"\n":""}function A(e,t){return T(e,O.extend({schema:N},t))}var O=e("./common"),E=e("./exception"),$=e("./schema/default_full"),N=e("./schema/default_safe"),I=Object.prototype.toString,D=Object.prototype.hasOwnProperty,j=9,F=10,L=32,R=33,U=34,V=35,q=37,z=38,B=39,H=42,G=44,W=45,Y=58,X=62,K=63,Z=64,Q=91,J=93,ee=96,te=123,ne=124,re=125,ie={};ie[0]="\\0",ie[7]="\\a",ie[8]="\\b",ie[9]="\\t",ie[10]="\\n",ie[11]="\\v",ie[12]="\\f",ie[13]="\\r",ie[27]="\\e",ie[34]='\\"',ie[92]="\\\\",ie[133]="\\N",ie[160]="\\_",ie[8232]="\\L",ie[8233]="\\P";var oe=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],ae=1,se=2,ue=3,le=4,ce=5;t.exports.dump=T,t.exports.safeDump=A},{"./common":2,"./exception":4,"./schema/default_full":9,"./schema/default_safe":10}],4:[function(e,t,n){"use strict";function r(e,t){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack||"",this.name="YAMLException",this.reason=e,this.mark=t,this.message=(this.reason||"(unknown reason)")+(this.mark?" "+this.mark.toString():"")}r.prototype=Object.create(Error.prototype),r.prototype.constructor=r,r.prototype.toString=function(e){var t=this.name+": ";return t+=this.reason||"(unknown reason)",!e&&this.mark&&(t+=" "+this.mark.toString()),t},t.exports=r},{}],5:[function(e,t,n){"use strict";function r(e){return 10===e||13===e}function i(e){return 9===e||32===e}function o(e){return 9===e||32===e||10===e||13===e}function a(e){return 44===e||91===e||93===e||123===e||125===e}function s(e){var t;return e>=48&&57>=e?e-48:(t=32|e,t>=97&&102>=t?t-97+10:-1)}function u(e){return 120===e?2:117===e?4:85===e?8:0}function l(e){return e>=48&&57>=e?e-48:-1}function c(e){return 48===e?"\x00":97===e?"":98===e?"\b":116===e?"	":9===e?"	":110===e?"\n":118===e?"\x0B":102===e?"\f":114===e?"\r":101===e?"":32===e?" ":34===e?'"':47===e?"/":92===e?"\\":78===e?"Â":95===e?"Â ":76===e?"\u2028":80===e?"\u2029":""}function h(e){return 65535>=e?String.fromCharCode(e):String.fromCharCode((e-65536>>10)+55296,(e-65536&1023)+56320)}function f(e,t){this.input=e,this.filename=t.filename||null,this.schema=t.schema||B,this.onWarning=t.onWarning||null,this.legacy=t.legacy||!1,this.json=t.json||!1,this.listener=t.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=e.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.documents=[]}function p(e,t){return new V(t,new q(e.filename,e.input,e.position,e.line,e.position-e.lineStart))}function d(e,t){throw p(e,t)}function m(e,t){e.onWarning&&e.onWarning.call(null,p(e,t))}function g(e,t,n,r){var i,o,a,s;if(n>t){if(s=e.input.slice(t,n),r)for(i=0,o=s.length;o>i;i+=1)a=s.charCodeAt(i),9===a||a>=32&&1114111>=a||d(e,"expected valid JSON character");else J.test(s)&&d(e,"the stream contains non-printable characters");e.result+=s}}function v(e,t,n,r){var i,o,a,s;for(U.isObject(n)||d(e,"cannot merge mappings; the provided source object is unacceptable"),i=Object.keys(n),a=0,s=i.length;s>a;a+=1)o=i[a],H.call(t,o)||(t[o]=n[o],r[o]=!0)}function y(e,t,n,r,i,o){var a,s;if(i=String(i),null===t&&(t={}),"tag:yaml.org,2002:merge"===r)if(Array.isArray(o))for(a=0,s=o.length;s>a;a+=1)v(e,t,o[a],n);else v(e,t,o,n);else e.json||H.call(n,i)||!H.call(t,i)||d(e,"duplicated mapping key"),t[i]=o,delete n[i];return t}function b(e){var t;t=e.input.charCodeAt(e.position),10===t?e.position++:13===t?(e.position++,10===e.input.charCodeAt(e.position)&&e.position++):d(e,"a line break is expected"),e.line+=1,e.lineStart=e.position}function _(e,t,n){for(var o=0,a=e.input.charCodeAt(e.position);0!==a;){for(;i(a);)a=e.input.charCodeAt(++e.position);if(t&&35===a)do a=e.input.charCodeAt(++e.position);while(10!==a&&13!==a&&0!==a);if(!r(a))break;for(b(e),a=e.input.charCodeAt(e.position),o++,e.lineIndent=0;32===a;)e.lineIndent++,a=e.input.charCodeAt(++e.position)}return-1!==n&&0!==o&&e.lineIndent<n&&m(e,"deficient indentation"),o}function w(e){var t,n=e.position;return t=e.input.charCodeAt(n),(45===t||46===t)&&t===e.input.charCodeAt(n+1)&&t===e.input.charCodeAt(n+2)&&(n+=3,t=e.input.charCodeAt(n),0===t||o(t))}function x(e,t){1===t?e.result+=" ":t>1&&(e.result+=U.repeat("\n",t-1))}function S(e,t,n){var s,u,l,c,h,f,p,d,m,v=e.kind,y=e.result;if(m=e.input.charCodeAt(e.position),o(m)||a(m)||35===m||38===m||42===m||33===m||124===m||62===m||39===m||34===m||37===m||64===m||96===m)return!1;if((63===m||45===m)&&(u=e.input.charCodeAt(e.position+1),o(u)||n&&a(u)))return!1;for(e.kind="scalar",e.result="",l=c=e.position,h=!1;0!==m;){if(58===m){if(u=e.input.charCodeAt(e.position+1),o(u)||n&&a(u))break}else if(35===m){if(s=e.input.charCodeAt(e.position-1),o(s))break}else{if(e.position===e.lineStart&&w(e)||n&&a(m))break;if(r(m)){if(f=e.line,p=e.lineStart,d=e.lineIndent,_(e,!1,-1),e.lineIndent>=t){h=!0,m=e.input.charCodeAt(e.position);continue}e.position=c,e.line=f,e.lineStart=p,e.lineIndent=d;break}}h&&(g(e,l,c,!1),x(e,e.line-f),l=c=e.position,h=!1),i(m)||(c=e.position+1),m=e.input.charCodeAt(++e.position)}return g(e,l,c,!1),e.result?!0:(e.kind=v,e.result=y,!1)}function C(e,t){var n,i,o;if(n=e.input.charCodeAt(e.position),39!==n)return!1;for(e.kind="scalar",e.result="",e.position++,i=o=e.position;0!==(n=e.input.charCodeAt(e.position));)if(39===n){if(g(e,i,e.position,!0),n=e.input.charCodeAt(++e.position),39!==n)return!0;i=o=e.position,e.position++}else r(n)?(g(e,i,o,!0),x(e,_(e,!1,t)),i=o=e.position):e.position===e.lineStart&&w(e)?d(e,"unexpected end of the document within a single quoted scalar"):(e.position++,o=e.position);d(e,"unexpected end of the stream within a single quoted scalar")}function k(e,t){var n,i,o,a,l,c;if(c=e.input.charCodeAt(e.position),34!==c)return!1;for(e.kind="scalar",e.result="",e.position++,n=i=e.position;0!==(c=e.input.charCodeAt(e.position));){if(34===c)return g(e,n,e.position,!0),e.position++,!0;if(92===c){if(g(e,n,e.position,!0),c=e.input.charCodeAt(++e.position),r(c))_(e,!1,t);else if(256>c&&ie[c])e.result+=oe[c],e.position++;else if((l=u(c))>0){for(o=l,a=0;o>0;o--)c=e.input.charCodeAt(++e.position),(l=s(c))>=0?a=(a<<4)+l:d(e,"expected hexadecimal character");e.result+=h(a),e.position++}else d(e,"unknown escape sequence");n=i=e.position}else r(c)?(g(e,n,i,!0),x(e,_(e,!1,t)),n=i=e.position):e.position===e.lineStart&&w(e)?d(e,"unexpected end of the document within a double quoted scalar"):(e.position++,i=e.position)}d(e,"unexpected end of the stream within a double quoted scalar")}function P(e,t){var n,r,i,a,s,u,l,c,h,f,p,m=!0,g=e.tag,v=e.anchor,b={};if(p=e.input.charCodeAt(e.position),91===p)a=93,l=!1,r=[];else{if(123!==p)return!1;a=125,l=!0,r={}}for(null!==e.anchor&&(e.anchorMap[e.anchor]=r),p=e.input.charCodeAt(++e.position);0!==p;){if(_(e,!0,t),p=e.input.charCodeAt(e.position),p===a)return e.position++,e.tag=g,e.anchor=v,e.kind=l?"mapping":"sequence",e.result=r,!0;m||d(e,"missed comma between flow collection entries"),h=c=f=null,s=u=!1,63===p&&(i=e.input.charCodeAt(e.position+1),o(i)&&(s=u=!0,e.position++,_(e,!0,t))),n=e.line,N(e,t,G,!1,!0),h=e.tag,c=e.result,_(e,!0,t),p=e.input.charCodeAt(e.position),!u&&e.line!==n||58!==p||(s=!0,p=e.input.charCodeAt(++e.position),_(e,!0,t),N(e,t,G,!1,!0),f=e.result),l?y(e,r,b,h,c,f):s?r.push(y(e,null,b,h,c,f)):r.push(c),_(e,!0,t),p=e.input.charCodeAt(e.position),44===p?(m=!0,p=e.input.charCodeAt(++e.position)):m=!1}d(e,"unexpected end of the stream within a flow collection")}function M(e,t){var n,o,a,s,u=K,c=!1,h=!1,f=t,p=0,m=!1;if(s=e.input.charCodeAt(e.position),124===s)o=!1;else{if(62!==s)return!1;o=!0}for(e.kind="scalar",e.result="";0!==s;)if(s=e.input.charCodeAt(++e.position),43===s||45===s)K===u?u=43===s?Q:Z:d(e,"repeat of a chomping mode identifier");else{if(!((a=l(s))>=0))break;0===a?d(e,"bad explicit indentation width of a block scalar; it cannot be less than one"):h?d(e,"repeat of an indentation width identifier"):(f=t+a-1,h=!0)}if(i(s)){do s=e.input.charCodeAt(++e.position);while(i(s));if(35===s)do s=e.input.charCodeAt(++e.position);while(!r(s)&&0!==s)}for(;0!==s;){for(b(e),e.lineIndent=0,s=e.input.charCodeAt(e.position);(!h||e.lineIndent<f)&&32===s;)e.lineIndent++,s=e.input.charCodeAt(++e.position);if(!h&&e.lineIndent>f&&(f=e.lineIndent),r(s))p++;else{if(e.lineIndent<f){u===Q?e.result+=U.repeat("\n",c?1+p:p):u===K&&c&&(e.result+="\n");break}for(o?i(s)?(m=!0,e.result+=U.repeat("\n",c?1+p:p)):m?(m=!1,e.result+=U.repeat("\n",p+1)):0===p?c&&(e.result+=" "):e.result+=U.repeat("\n",p):e.result+=U.repeat("\n",c?1+p:p),c=!0,h=!0,p=0,n=e.position;!r(s)&&0!==s;)s=e.input.charCodeAt(++e.position);g(e,n,e.position,!1)}}return!0}function T(e,t){var n,r,i,a=e.tag,s=e.anchor,u=[],l=!1;for(null!==e.anchor&&(e.anchorMap[e.anchor]=u),i=e.input.charCodeAt(e.position);0!==i&&45===i&&(r=e.input.charCodeAt(e.position+1),o(r));)if(l=!0,e.position++,_(e,!0,-1)&&e.lineIndent<=t)u.push(null),i=e.input.charCodeAt(e.position);else if(n=e.line,N(e,t,Y,!1,!0),u.push(e.result),_(e,!0,-1),i=e.input.charCodeAt(e.position),(e.line===n||e.lineIndent>t)&&0!==i)d(e,"bad indentation of a sequence entry");else if(e.lineIndent<t)break;return l?(e.tag=a,e.anchor=s,e.kind="sequence",e.result=u,!0):!1}function A(e,t,n){var r,a,s,u,l=e.tag,c=e.anchor,h={},f={},p=null,m=null,g=null,v=!1,b=!1;for(null!==e.anchor&&(e.anchorMap[e.anchor]=h),u=e.input.charCodeAt(e.position);0!==u;){if(r=e.input.charCodeAt(e.position+1),s=e.line,63!==u&&58!==u||!o(r)){if(!N(e,n,W,!1,!0))break;if(e.line===s){for(u=e.input.charCodeAt(e.position);i(u);)u=e.input.charCodeAt(++e.position);if(58===u)u=e.input.charCodeAt(++e.position),o(u)||d(e,"a whitespace character is expected after the key-value separator within a block mapping"),v&&(y(e,h,f,p,m,null),p=m=g=null),b=!0,v=!1,a=!1,p=e.tag,m=e.result;else{if(!b)return e.tag=l,e.anchor=c,!0;d(e,"can not read an implicit mapping pair; a colon is missed")}}else{if(!b)return e.tag=l,e.anchor=c,!0;d(e,"can not read a block mapping entry; a multiline key may not be an implicit key")}}else 63===u?(v&&(y(e,h,f,p,m,null),p=m=g=null),b=!0,v=!0,a=!0):v?(v=!1,a=!0):d(e,"incomplete explicit mapping pair; a key node is missed"),e.position+=1,u=r;if((e.line===s||e.lineIndent>t)&&(N(e,t,X,!0,a)&&(v?m=e.result:g=e.result),v||(y(e,h,f,p,m,g),p=m=g=null),_(e,!0,-1),u=e.input.charCodeAt(e.position)),e.lineIndent>t&&0!==u)d(e,"bad indentation of a mapping entry");else if(e.lineIndent<t)break}return v&&y(e,h,f,p,m,null),b&&(e.tag=l,e.anchor=c,e.kind="mapping",e.result=h),b}function O(e){var t,n,r,i,a=!1,s=!1;if(i=e.input.charCodeAt(e.position),33!==i)return!1;if(null!==e.tag&&d(e,"duplication of a tag property"),i=e.input.charCodeAt(++e.position),60===i?(a=!0,i=e.input.charCodeAt(++e.position)):33===i?(s=!0,n="!!",i=e.input.charCodeAt(++e.position)):n="!",t=e.position,a){do i=e.input.charCodeAt(++e.position);while(0!==i&&62!==i);e.position<e.length?(r=e.input.slice(t,e.position),i=e.input.charCodeAt(++e.position)):d(e,"unexpected end of the stream within a verbatim tag")}else{for(;0!==i&&!o(i);)33===i&&(s?d(e,"tag suffix cannot contain exclamation marks"):(n=e.input.slice(t-1,e.position+1),ne.test(n)||d(e,"named tag handle cannot contain such characters"),s=!0,t=e.position+1)),i=e.input.charCodeAt(++e.position);r=e.input.slice(t,e.position),te.test(r)&&d(e,"tag suffix cannot contain flow indicator characters")}return r&&!re.test(r)&&d(e,"tag name cannot contain such characters: "+r),a?e.tag=r:H.call(e.tagMap,n)?e.tag=e.tagMap[n]+r:"!"===n?e.tag="!"+r:"!!"===n?e.tag="tag:yaml.org,2002:"+r:d(e,'undeclared tag handle "'+n+'"'),!0}function E(e){var t,n;if(n=e.input.charCodeAt(e.position),38!==n)return!1;for(null!==e.anchor&&d(e,"duplication of an anchor property"),n=e.input.charCodeAt(++e.position),t=e.position;0!==n&&!o(n)&&!a(n);)n=e.input.charCodeAt(++e.position);return e.position===t&&d(e,"name of an anchor node must contain at least one character"),e.anchor=e.input.slice(t,e.position),!0}function $(e){var t,n,r;if(r=e.input.charCodeAt(e.position),42!==r)return!1;for(r=e.input.charCodeAt(++e.position),t=e.position;0!==r&&!o(r)&&!a(r);)r=e.input.charCodeAt(++e.position);return e.position===t&&d(e,"name of an alias node must contain at least one character"),n=e.input.slice(t,e.position),e.anchorMap.hasOwnProperty(n)||d(e,'unidentified alias "'+n+'"'),e.result=e.anchorMap[n],_(e,!0,-1),!0}function N(e,t,n,r,i){var o,a,s,u,l,c,h,f,p=1,m=!1,g=!1;if(null!==e.listener&&e.listener("open",e),e.tag=null,e.anchor=null,e.kind=null,e.result=null,o=a=s=X===n||Y===n,r&&_(e,!0,-1)&&(m=!0,e.lineIndent>t?p=1:e.lineIndent===t?p=0:e.lineIndent<t&&(p=-1)),1===p)for(;O(e)||E(e);)_(e,!0,-1)?(m=!0,s=o,e.lineIndent>t?p=1:e.lineIndent===t?p=0:e.lineIndent<t&&(p=-1)):s=!1;if(s&&(s=m||i),1!==p&&X!==n||(h=G===n||W===n?t:t+1,f=e.position-e.lineStart,1===p?s&&(T(e,f)||A(e,f,h))||P(e,h)?g=!0:(a&&M(e,h)||C(e,h)||k(e,h)?g=!0:$(e)?(g=!0,null===e.tag&&null===e.anchor||d(e,"alias node should not have any properties")):S(e,h,G===n)&&(g=!0,null===e.tag&&(e.tag="?")),null!==e.anchor&&(e.anchorMap[e.anchor]=e.result)):0===p&&(g=s&&T(e,f))),null!==e.tag&&"!"!==e.tag)if("?"===e.tag){for(u=0,l=e.implicitTypes.length;l>u;u+=1)if(c=e.implicitTypes[u],c.resolve(e.result)){e.result=c.construct(e.result),e.tag=c.tag,null!==e.anchor&&(e.anchorMap[e.anchor]=e.result);break}}else H.call(e.typeMap,e.tag)?(c=e.typeMap[e.tag],null!==e.result&&c.kind!==e.kind&&d(e,"unacceptable node kind for !<"+e.tag+'> tag; it should be "'+c.kind+'", not "'+e.kind+'"'),c.resolve(e.result)?(e.result=c.construct(e.result),null!==e.anchor&&(e.anchorMap[e.anchor]=e.result)):d(e,"cannot resolve a node with !<"+e.tag+"> explicit tag")):d(e,"unknown tag !<"+e.tag+">");return null!==e.listener&&e.listener("close",e),null!==e.tag||null!==e.anchor||g}function I(e){var t,n,a,s,u=e.position,l=!1;for(e.version=null,e.checkLineBreaks=e.legacy,e.tagMap={},e.anchorMap={};0!==(s=e.input.charCodeAt(e.position))&&(_(e,!0,-1),s=e.input.charCodeAt(e.position),!(e.lineIndent>0||37!==s));){for(l=!0,s=e.input.charCodeAt(++e.position),t=e.position;0!==s&&!o(s);)s=e.input.charCodeAt(++e.position);for(n=e.input.slice(t,e.position),a=[],n.length<1&&d(e,"directive name must not be less than one character in length");0!==s;){for(;i(s);)s=e.input.charCodeAt(++e.position);if(35===s){do s=e.input.charCodeAt(++e.position);while(0!==s&&!r(s));break}if(r(s))break;for(t=e.position;0!==s&&!o(s);)s=e.input.charCodeAt(++e.position);a.push(e.input.slice(t,e.position))}0!==s&&b(e),H.call(se,n)?se[n](e,n,a):m(e,'unknown document directive "'+n+'"')}return _(e,!0,-1),0===e.lineIndent&&45===e.input.charCodeAt(e.position)&&45===e.input.charCodeAt(e.position+1)&&45===e.input.charCodeAt(e.position+2)?(e.position+=3,_(e,!0,-1)):l&&d(e,"directives end mark is expected"),N(e,e.lineIndent-1,X,!1,!0),_(e,!0,-1),e.checkLineBreaks&&ee.test(e.input.slice(u,e.position))&&m(e,"non-ASCII line breaks are interpreted as content"),e.documents.push(e.result),e.position===e.lineStart&&w(e)?void(46===e.input.charCodeAt(e.position)&&(e.position+=3,_(e,!0,-1))):void(e.position<e.length-1&&d(e,"end of the stream or a document separator is expected"))}function D(e,t){e=String(e),t=t||{},0!==e.length&&(10!==e.charCodeAt(e.length-1)&&13!==e.charCodeAt(e.length-1)&&(e+="\n"),65279===e.charCodeAt(0)&&(e=e.slice(1)));var n=new f(e,t);for(n.input+="\x00";32===n.input.charCodeAt(n.position);)n.lineIndent+=1,n.position+=1;for(;n.position<n.length-1;)I(n);return n.documents}function j(e,t,n){var r,i,o=D(e,n);for(r=0,i=o.length;i>r;r+=1)t(o[r])}function F(e,t){var n=D(e,t);if(0!==n.length){if(1===n.length)return n[0];throw new V("expected a single document in the stream, but found more")}}function L(e,t,n){j(e,t,U.extend({schema:z},n))}function R(e,t){return F(e,U.extend({schema:z},t))}for(var U=e("./common"),V=e("./exception"),q=e("./mark"),z=e("./schema/default_safe"),B=e("./schema/default_full"),H=Object.prototype.hasOwnProperty,G=1,W=2,Y=3,X=4,K=1,Z=2,Q=3,J=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,ee=/[\x85\u2028\u2029]/,te=/[,\[\]\{\}]/,ne=/^(?:!|!!|![a-z\-]+!)$/i,re=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i,ie=new Array(256),oe=new Array(256),ae=0;256>ae;ae++)ie[ae]=c(ae)?1:0,oe[ae]=c(ae);var se={YAML:function(e,t,n){var r,i,o;null!==e.version&&d(e,"duplication of %YAML directive"),1!==n.length&&d(e,"YAML directive accepts exactly one argument"),r=/^([0-9]+)\.([0-9]+)$/.exec(n[0]),null===r&&d(e,"ill-formed argument of the YAML directive"),i=parseInt(r[1],10),o=parseInt(r[2],10),1!==i&&d(e,"unacceptable YAML version of the document"),e.version=n[0],e.checkLineBreaks=2>o,1!==o&&2!==o&&m(e,"unsupported YAML version of the document")},TAG:function(e,t,n){var r,i;2!==n.length&&d(e,"TAG directive accepts exactly two arguments"),r=n[0],i=n[1],ne.test(r)||d(e,"ill-formed tag handle (first argument) of the TAG directive"),H.call(e.tagMap,r)&&d(e,'there is a previously declared suffix for "'+r+'" tag handle'),re.test(i)||d(e,"ill-formed tag prefix (second argument) of the TAG directive"),e.tagMap[r]=i}};t.exports.loadAll=j,t.exports.load=F,t.exports.safeLoadAll=L,t.exports.safeLoad=R},{"./common":2,"./exception":4,"./mark":6,"./schema/default_full":9,"./schema/default_safe":10}],6:[function(e,t,n){"use strict";function r(e,t,n,r,i){this.name=e,this.buffer=t,this.position=n,this.line=r,this.column=i}var i=e("./common");r.prototype.getSnippet=function(e,t){var n,r,o,a,s;if(!this.buffer)return null;for(e=e||4,t=t||75,n="",r=this.position;r>0&&-1==="\x00\r\nÂ\u2028\u2029".indexOf(this.buffer.charAt(r-1));)if(r-=1,this.position-r>t/2-1){n=" ... ",r+=5;break}for(o="",a=this.position;a<this.buffer.length&&-1==="\x00\r\nÂ\u2028\u2029".indexOf(this.buffer.charAt(a));)if(a+=1,a-this.position>t/2-1){o=" ... ",a-=5;break}return s=this.buffer.slice(r,a),i.repeat(" ",e)+n+s+o+"\n"+i.repeat(" ",e+this.position-r+n.length)+"^"},r.prototype.toString=function(e){var t,n="";return this.name&&(n+='in "'+this.name+'" '),n+="at line "+(this.line+1)+", column "+(this.column+1),e||(t=this.getSnippet(),t&&(n+=":\n"+t)),n},t.exports=r},{"./common":2}],7:[function(e,t,n){"use strict";function r(e,t,n){var i=[];return e.include.forEach(function(e){n=r(e,t,n)}),e[t].forEach(function(e){n.forEach(function(t,n){t.tag===e.tag&&i.push(n)}),n.push(e)}),n.filter(function(e,t){return-1===i.indexOf(t)})}function i(){function e(e){r[e.tag]=e}var t,n,r={};for(t=0,n=arguments.length;n>t;t+=1)arguments[t].forEach(e);return r}function o(e){this.include=e.include||[],this.implicit=e.implicit||[],this.explicit=e.explicit||[],this.implicit.forEach(function(e){if(e.loadKind&&"scalar"!==e.loadKind)throw new s("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.")}),this.compiledImplicit=r(this,"implicit",[]),this.compiledExplicit=r(this,"explicit",[]),this.compiledTypeMap=i(this.compiledImplicit,this.compiledExplicit)}var a=e("./common"),s=e("./exception"),u=e("./type");o.DEFAULT=null,o.create=function(){var e,t;switch(arguments.length){case 1:e=o.DEFAULT,t=arguments[0];break;case 2:e=arguments[0],t=arguments[1];break;default:throw new s("Wrong number of arguments for Schema.create function")}if(e=a.toArray(e),t=a.toArray(t),!e.every(function(e){return e instanceof o}))throw new s("Specified list of super schemas (or a single Schema object) contains a non-Schema object.");if(!t.every(function(e){return e instanceof u}))throw new s("Specified list of YAML types (or a single Type object) contains a non-Type object.");return new o({include:e,explicit:t})},t.exports=o},{"./common":2,"./exception":4,"./type":13}],8:[function(e,t,n){"use strict";var r=e("../schema");t.exports=new r({include:[e("./json")]})},{"../schema":7,"./json":12}],9:[function(e,t,n){"use strict";var r=e("../schema");t.exports=r.DEFAULT=new r({include:[e("./default_safe")],explicit:[e("../type/js/undefined"),e("../type/js/regexp"),e("../type/js/function")]})},{"../schema":7,"../type/js/function":18,"../type/js/regexp":19,"../type/js/undefined":20,"./default_safe":10}],10:[function(e,t,n){"use strict";var r=e("../schema");t.exports=new r({include:[e("./core")],implicit:[e("../type/timestamp"),e("../type/merge")],explicit:[e("../type/binary"),e("../type/omap"),e("../type/pairs"),e("../type/set")]})},{"../schema":7,"../type/binary":14,"../type/merge":22,"../type/omap":24,"../type/pairs":25,"../type/set":27,"../type/timestamp":29,"./core":8}],11:[function(e,t,n){"use strict";var r=e("../schema");t.exports=new r({explicit:[e("../type/str"),e("../type/seq"),e("../type/map")]})},{"../schema":7,"../type/map":21,"../type/seq":26,"../type/str":28}],12:[function(e,t,n){"use strict";var r=e("../schema");t.exports=new r({include:[e("./failsafe")],implicit:[e("../type/null"),e("../type/bool"),e("../type/int"),e("../type/float")]})},{"../schema":7,"../type/bool":15,"../type/float":16,"../type/int":17,"../type/null":23,"./failsafe":11}],13:[function(e,t,n){"use strict";function r(e){var t={};return null!==e&&Object.keys(e).forEach(function(n){e[n].forEach(function(e){t[String(e)]=n})}),t}function i(e,t){if(t=t||{},Object.keys(t).forEach(function(t){if(-1===a.indexOf(t))throw new o('Unknown option "'+t+'" is met in definition of "'+e+'" YAML type.')}),this.tag=e,this.kind=t.kind||null,this.resolve=t.resolve||function(){return!0},this.construct=t.construct||function(e){return e},this.instanceOf=t.instanceOf||null,this.predicate=t.predicate||null,this.represent=t.represent||null,this.defaultStyle=t.defaultStyle||null,this.styleAliases=r(t.styleAliases||null),-1===s.indexOf(this.kind))throw new o('Unknown kind "'+this.kind+'" is specified for "'+e+'" YAML type.')}var o=e("./exception"),a=["kind","resolve","construct","instanceOf","predicate","represent","defaultStyle","styleAliases"],s=["scalar","sequence","mapping"];t.exports=i},{"./exception":4}],14:[function(e,t,n){"use strict";function r(e){if(null===e)return!1;var t,n,r=0,i=e.length,o=h;for(n=0;i>n;n++)if(t=o.indexOf(e.charAt(n)),!(t>64)){if(0>t)return!1;r+=6}return r%8===0}function i(e){var t,n,r=e.replace(/[\r\n=]/g,""),i=r.length,o=h,a=0,u=[];for(t=0;i>t;t++)t%4===0&&t&&(u.push(a>>16&255),u.push(a>>8&255),u.push(255&a)),a=a<<6|o.indexOf(r.charAt(t));return n=i%4*6,0===n?(u.push(a>>16&255),u.push(a>>8&255),u.push(255&a)):18===n?(u.push(a>>10&255),u.push(a>>2&255)):12===n&&u.push(a>>4&255),s?new s(u):u}function o(e){var t,n,r="",i=0,o=e.length,a=h;for(t=0;o>t;t++)t%3===0&&t&&(r+=a[i>>18&63],r+=a[i>>12&63],r+=a[i>>6&63],r+=a[63&i]),i=(i<<8)+e[t];return n=o%3,0===n?(r+=a[i>>18&63],r+=a[i>>12&63],r+=a[i>>6&63],r+=a[63&i]):2===n?(r+=a[i>>10&63],r+=a[i>>4&63],r+=a[i<<2&63],r+=a[64]):1===n&&(r+=a[i>>2&63],r+=a[i<<4&63],r+=a[64],
r+=a[64]),r}function a(e){return s&&s.isBuffer(e)}var s;try{var u=e;s=u("buffer").Buffer}catch(l){}var c=e("../type"),h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\n\r";t.exports=new c("tag:yaml.org,2002:binary",{kind:"scalar",resolve:r,construct:i,predicate:a,represent:o})},{"../type":13}],15:[function(e,t,n){"use strict";function r(e){if(null===e)return!1;var t=e.length;return 4===t&&("true"===e||"True"===e||"TRUE"===e)||5===t&&("false"===e||"False"===e||"FALSE"===e)}function i(e){return"true"===e||"True"===e||"TRUE"===e}function o(e){return"[object Boolean]"===Object.prototype.toString.call(e)}var a=e("../type");t.exports=new a("tag:yaml.org,2002:bool",{kind:"scalar",resolve:r,construct:i,predicate:o,represent:{lowercase:function(e){return e?"true":"false"},uppercase:function(e){return e?"TRUE":"FALSE"},camelcase:function(e){return e?"True":"False"}},defaultStyle:"lowercase"})},{"../type":13}],16:[function(e,t,n){"use strict";function r(e){return null===e?!1:!!l.test(e)}function i(e){var t,n,r,i;return t=e.replace(/_/g,"").toLowerCase(),n="-"===t[0]?-1:1,i=[],"+-".indexOf(t[0])>=0&&(t=t.slice(1)),".inf"===t?1===n?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:".nan"===t?NaN:t.indexOf(":")>=0?(t.split(":").forEach(function(e){i.unshift(parseFloat(e,10))}),t=0,r=1,i.forEach(function(e){t+=e*r,r*=60}),n*t):n*parseFloat(t,10)}function o(e,t){var n;if(isNaN(e))switch(t){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===e)switch(t){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===e)switch(t){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(s.isNegativeZero(e))return"-0.0";return n=e.toString(10),c.test(n)?n.replace("e",".e"):n}function a(e){return"[object Number]"===Object.prototype.toString.call(e)&&(e%1!==0||s.isNegativeZero(e))}var s=e("../common"),u=e("../type"),l=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)\\.[0-9_]*(?:[eE][-+][0-9]+)?|\\.[0-9_]+(?:[eE][-+][0-9]+)?|[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+\\.[0-9_]*|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$"),c=/^[-+]?[0-9]+e/;t.exports=new u("tag:yaml.org,2002:float",{kind:"scalar",resolve:r,construct:i,predicate:a,represent:o,defaultStyle:"lowercase"})},{"../common":2,"../type":13}],17:[function(e,t,n){"use strict";function r(e){return e>=48&&57>=e||e>=65&&70>=e||e>=97&&102>=e}function i(e){return e>=48&&55>=e}function o(e){return e>=48&&57>=e}function a(e){if(null===e)return!1;var t,n=e.length,a=0,s=!1;if(!n)return!1;if(t=e[a],"-"!==t&&"+"!==t||(t=e[++a]),"0"===t){if(a+1===n)return!0;if(t=e[++a],"b"===t){for(a++;n>a;a++)if(t=e[a],"_"!==t){if("0"!==t&&"1"!==t)return!1;s=!0}return s}if("x"===t){for(a++;n>a;a++)if(t=e[a],"_"!==t){if(!r(e.charCodeAt(a)))return!1;s=!0}return s}for(;n>a;a++)if(t=e[a],"_"!==t){if(!i(e.charCodeAt(a)))return!1;s=!0}return s}for(;n>a;a++)if(t=e[a],"_"!==t){if(":"===t)break;if(!o(e.charCodeAt(a)))return!1;s=!0}return s?":"!==t?!0:/^(:[0-5]?[0-9])+$/.test(e.slice(a)):!1}function s(e){var t,n,r=e,i=1,o=[];return-1!==r.indexOf("_")&&(r=r.replace(/_/g,"")),t=r[0],"-"!==t&&"+"!==t||("-"===t&&(i=-1),r=r.slice(1),t=r[0]),"0"===r?0:"0"===t?"b"===r[1]?i*parseInt(r.slice(2),2):"x"===r[1]?i*parseInt(r,16):i*parseInt(r,8):-1!==r.indexOf(":")?(r.split(":").forEach(function(e){o.unshift(parseInt(e,10))}),r=0,n=1,o.forEach(function(e){r+=e*n,n*=60}),i*r):i*parseInt(r,10)}function u(e){return"[object Number]"===Object.prototype.toString.call(e)&&e%1===0&&!l.isNegativeZero(e)}var l=e("../common"),c=e("../type");t.exports=new c("tag:yaml.org,2002:int",{kind:"scalar",resolve:a,construct:s,predicate:u,represent:{binary:function(e){return"0b"+e.toString(2)},octal:function(e){return"0"+e.toString(8)},decimal:function(e){return e.toString(10)},hexadecimal:function(e){return"0x"+e.toString(16).toUpperCase()}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}})},{"../common":2,"../type":13}],18:[function(e,t,n){"use strict";function r(e){if(null===e)return!1;try{var t="("+e+")",n=s.parse(t,{range:!0});return"Program"===n.type&&1===n.body.length&&"ExpressionStatement"===n.body[0].type&&"FunctionExpression"===n.body[0].expression.type}catch(r){return!1}}function i(e){var t,n="("+e+")",r=s.parse(n,{range:!0}),i=[];if("Program"!==r.type||1!==r.body.length||"ExpressionStatement"!==r.body[0].type||"FunctionExpression"!==r.body[0].expression.type)throw new Error("Failed to resolve function");return r.body[0].expression.params.forEach(function(e){i.push(e.name)}),t=r.body[0].expression.body.range,new Function(i,n.slice(t[0]+1,t[1]-1))}function o(e){return e.toString()}function a(e){return"[object Function]"===Object.prototype.toString.call(e)}var s;try{var u=e;s=u("esprima")}catch(l){"undefined"!=typeof window&&(s=window.esprima)}var c=e("../../type");t.exports=new c("tag:yaml.org,2002:js/function",{kind:"scalar",resolve:r,construct:i,predicate:a,represent:o})},{"../../type":13}],19:[function(e,t,n){"use strict";function r(e){if(null===e)return!1;if(0===e.length)return!1;var t=e,n=/\/([gim]*)$/.exec(e),r="";if("/"===t[0]){if(n&&(r=n[1]),r.length>3)return!1;if("/"!==t[t.length-r.length-1])return!1}return!0}function i(e){var t=e,n=/\/([gim]*)$/.exec(e),r="";return"/"===t[0]&&(n&&(r=n[1]),t=t.slice(1,t.length-r.length-1)),new RegExp(t,r)}function o(e){var t="/"+e.source+"/";return e.global&&(t+="g"),e.multiline&&(t+="m"),e.ignoreCase&&(t+="i"),t}function a(e){return"[object RegExp]"===Object.prototype.toString.call(e)}var s=e("../../type");t.exports=new s("tag:yaml.org,2002:js/regexp",{kind:"scalar",resolve:r,construct:i,predicate:a,represent:o})},{"../../type":13}],20:[function(e,t,n){"use strict";function r(){return!0}function i(){}function o(){return""}function a(e){return"undefined"==typeof e}var s=e("../../type");t.exports=new s("tag:yaml.org,2002:js/undefined",{kind:"scalar",resolve:r,construct:i,predicate:a,represent:o})},{"../../type":13}],21:[function(e,t,n){"use strict";var r=e("../type");t.exports=new r("tag:yaml.org,2002:map",{kind:"mapping",construct:function(e){return null!==e?e:{}}})},{"../type":13}],22:[function(e,t,n){"use strict";function r(e){return"<<"===e||null===e}var i=e("../type");t.exports=new i("tag:yaml.org,2002:merge",{kind:"scalar",resolve:r})},{"../type":13}],23:[function(e,t,n){"use strict";function r(e){if(null===e)return!0;var t=e.length;return 1===t&&"~"===e||4===t&&("null"===e||"Null"===e||"NULL"===e)}function i(){return null}function o(e){return null===e}var a=e("../type");t.exports=new a("tag:yaml.org,2002:null",{kind:"scalar",resolve:r,construct:i,predicate:o,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"}},defaultStyle:"lowercase"})},{"../type":13}],24:[function(e,t,n){"use strict";function r(e){if(null===e)return!0;var t,n,r,i,o,u=[],l=e;for(t=0,n=l.length;n>t;t+=1){if(r=l[t],o=!1,"[object Object]"!==s.call(r))return!1;for(i in r)if(a.call(r,i)){if(o)return!1;o=!0}if(!o)return!1;if(-1!==u.indexOf(i))return!1;u.push(i)}return!0}function i(e){return null!==e?e:[]}var o=e("../type"),a=Object.prototype.hasOwnProperty,s=Object.prototype.toString;t.exports=new o("tag:yaml.org,2002:omap",{kind:"sequence",resolve:r,construct:i})},{"../type":13}],25:[function(e,t,n){"use strict";function r(e){if(null===e)return!0;var t,n,r,i,o,s=e;for(o=new Array(s.length),t=0,n=s.length;n>t;t+=1){if(r=s[t],"[object Object]"!==a.call(r))return!1;if(i=Object.keys(r),1!==i.length)return!1;o[t]=[i[0],r[i[0]]]}return!0}function i(e){if(null===e)return[];var t,n,r,i,o,a=e;for(o=new Array(a.length),t=0,n=a.length;n>t;t+=1)r=a[t],i=Object.keys(r),o[t]=[i[0],r[i[0]]];return o}var o=e("../type"),a=Object.prototype.toString;t.exports=new o("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:r,construct:i})},{"../type":13}],26:[function(e,t,n){"use strict";var r=e("../type");t.exports=new r("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(e){return null!==e?e:[]}})},{"../type":13}],27:[function(e,t,n){"use strict";function r(e){if(null===e)return!0;var t,n=e;for(t in n)if(a.call(n,t)&&null!==n[t])return!1;return!0}function i(e){return null!==e?e:{}}var o=e("../type"),a=Object.prototype.hasOwnProperty;t.exports=new o("tag:yaml.org,2002:set",{kind:"mapping",resolve:r,construct:i})},{"../type":13}],28:[function(e,t,n){"use strict";var r=e("../type");t.exports=new r("tag:yaml.org,2002:str",{kind:"scalar",construct:function(e){return null!==e?e:""}})},{"../type":13}],29:[function(e,t,n){"use strict";function r(e){return null===e?!1:null!==s.exec(e)?!0:null!==u.exec(e)}function i(e){var t,n,r,i,o,a,l,c,h,f,p=0,d=null;if(t=s.exec(e),null===t&&(t=u.exec(e)),null===t)throw new Error("Date resolve error");if(n=+t[1],r=+t[2]-1,i=+t[3],!t[4])return new Date(Date.UTC(n,r,i));if(o=+t[4],a=+t[5],l=+t[6],t[7]){for(p=t[7].slice(0,3);p.length<3;)p+="0";p=+p}return t[9]&&(c=+t[10],h=+(t[11]||0),d=6e4*(60*c+h),"-"===t[9]&&(d=-d)),f=new Date(Date.UTC(n,r,i,o,a,l,p)),d&&f.setTime(f.getTime()-d),f}function o(e){return e.toISOString()}var a=e("../type"),s=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),u=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");t.exports=new a("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:r,construct:i,instanceOf:Date,represent:o})},{"../type":13}],"/":[function(e,t,n){"use strict";var r=e("./lib/js-yaml.js");t.exports=r},{"./lib/js-yaml.js":1}]},{},[])("/")}),define("Atem-MOM/project/IOProjectPersistence",["Atem-MOM/errors","Atem-IO/errors","ufojs/ufoLib/constants","ufojs/ufoLib/UFOReader","ufojs/ufoLib/UFOWriter","obtain/obtain","yaml","path"],function(e,t,n,r,i,o,a,s){function u(e,t){this._io=e,this.__ufoReader=null,this.__ufoWriter=null,Object.defineProperty(this,"baseDir",{value:t})}function l(e){var t,n,r=[],i=this[e[0]],o=i[e[1]];for(t=1,n=arguments.length;n>t;t++)r.push(arguments[t]);return o.apply(i,r)}var c=n.DATA_DIRNAME,h=n.FONTINFO_FILENAME,f=n.GROUPS_FILENAME,p=e.MOMProject,d=t.IONoEntry,m=u.prototype;return m.constructor=u,Object.defineProperties(m,{dataDir:{get:function(){return[this.baseDir,c,"com.metapolator"].join("/")}},projectFile:{get:function(){return this.dataDir+"/project.yaml"}},logFile:{get:function(){return this.dataDir+"/log.yaml"}},cpsDir:{get:function(){return this.dataDir+"/CPS"}},momDir:{get:function(){return this.dataDir+"/MOM"}},cpsGeneratedDir:{get:function(){return this.cpsDir+"/generated"}},_ufoReader:{get:function(){if(!this.__ufoReader)throw new p('Not properly initialized, run "open" or "init" first.');return this.__ufoReader}},_ufoWriter:{get:function(){if(!this.__ufoWriter)throw new p('Not properly initialized, run "open" or "init" first.');return this.__ufoWriter}}}),m._getUFOReader=o.factory({io:[function(){return this._io}],path:[function(){return this.baseDir}],ufoReader:[!1,"io","path",r.factory]},{ufoReader:[!0,"io","path",r.factory]},[],function(e){return e("ufoReader")}),m._getUFOWriter=o.factory({io:[function(){return this._io}],path:[function(){return this.baseDir}],ufoWriter:[!1,"io","path",i.factory]},{ufoWriter:[!0,"io","path",i.factory]},[],function(e){return e("ufoWriter")}),m.init=o.factory({baseDir:[function(){return this.baseDir}],mkdir:[["_io","mkDir"],!1,"baseDir",l],reader:[!1,m._getUFOReader],writer:[!1,m._getUFOWriter]},{mkdir:[["_io","mkDir"],!0,"baseDir",l],reader:[!0,m._getUFOReader],writer:[!0,m._getUFOWriter]},[],function(e){e("mkdir"),this.__ufoWriter=e("writer"),this.__ufoReader=e("reader")}),m.open=o.factory({reader:[!1,m._getUFOReader],writer:[!1,m._getUFOWriter]},{reader:[!0,m._getUFOReader],writer:[!0,m._getUFOWriter]},[],function(e){this.__ufoReader=e("reader"),this.__ufoWriter=e("writer")}),m._readYAMLFile=function(e,t,n){function r(e){if(e instanceof d&&void 0!==n)return n;throw e}function i(e){try{return a.safeLoad(e)}catch(t){throw new p("Invalid yaml file "+t)}}var o;try{o=this._io.readFile(e,t)}catch(s){return r(s)}return e?o.then(i,r):i(o)},m._writeYAMLFile=function(e,t,n){var r,i=a.safeDump(n),o=s.dirname(t);return r=this._io.ensureDirs(e,o),e?r.then(this._io.writeFile.bind(this._io,!0,t,i)):this._io.writeFile(!1,t,i)},m._deleteFile=function(e,t,n){function r(e){if(n&&e instanceof d)return!0;throw e}var i;try{i=this._io.unlink(e,t)}catch(o){return r(o)}return e?i.then(function(){return!0},r):!0},m._makeMOMDataFilename=function(e){return[this.momDir,e+".yaml"].join("/")},m._makeCPSFilename=function(e){return[this.cpsDir,e].join("/")},m.readMOMData=function(e,t){var n=this._makeMOMDataFilename(t);return this._readYAMLFile(e,n)},m.writeMOMData=function(e,t,n){var r=this._makeMOMDataFilename(t);return this._writeYAMLFile(e,r,n)},m.deleteMOMData=function(e,t,n){var r=this._makeMOMDataFilename(t);return this._deleteFile(e,r,n)},m.listMOMItems=function(e){function t(e){var t,n,r,i,o=[],a=".yaml";for(t=0,n=e.length;n>t;t++)r=e[t],i=r.lastIndexOf(a),-1!==i&&o.push(r.slice(0,i));return o}var n=this._io.readDir(e,this.momDir);return e?n.then(t):t(n)},m.readCPSFile=function(e,t){var n=this._makeCPSFilename(t);return this._io._readFile(e,n)},m.writeCPSFile=function(e,t,n){var r=this._makeCPSFilename(t),i=this._io.ensureDirs(e,this.cpsDir);return e?i.then(this._io.writeFile.bind(this._io,!0,r,n)):this._io.writeFile(!1,r,n)},m.deleteCPSFile=function(e,t,n){var r=this._makeCPSFilename(t);return this._deleteFile(e,r,n)},m.readProject=function(e){return this._readYAMLFile(e,this.projectFile)},m.writeProject=function(e,t){return this._writeYAMLFile(e,this.projectFile,t)},m.readLog=function(e){return this._readYAMLFile(e,this.logFile,null)},m.appendLog=function(e,t){return this._io.appendFile(e,this.logFile,t)},m.readGroups=function(e){return this._ufoReader.readGroups(e)},m.writeGroups=function(e,t){return this._ufoWriter.writeGroups(e,t)},m.readFontInfo=function(e){return this._ufoReader.readInfo(e)},m.writeFootInfo=function(e,t){return this._ufoWriter.writeInfo(e,t)},m._importUFOData=o.factory({funcNames:["type",function(e){var t={fontinfo:"readInfo",groups:"readGroups"},n={fontinfo:"writeInfo",groups:"writeGroups"};return{read:t[e],write:n[e]}}],read:["sourceUFOReader","funcNames",function(e,t){return e[t.read](!1)}],write:["funcNames","read",function(e,t){return this._ufoWriter[e.write](!1,t)}]},{read:["sourceUFOReader","funcNames",function(e,t){return e[t.read](!0)}],write:["funcNames","read",function(e,t){return this._ufoWriter[e.write](!0,t)}]},["type","sourceUFOReader"],function(e,t){e("read"),this._log.debug('Importing "'+t+'" into project.'),e("write")}),m.importUFOData=function(e,t,n,i,o,a){function s(e){var t,n,r;for(t=0,n=e.length;n>t;t++)e[t]?this._log.debug(g[t]+" exists in the project, skipping import."):r.push(g[t]);return r}function u(e,t){var n,r,i=[],o=t[0],a=t[1];for(n=0,r=a.length;r>n;n++)i.push(this._importUFOData(e,o,a[n]));return e?Promise.all(i):void 0}var l,c,p,d,m,g=[],v={fontinfo:h,groups:f};if(o&&g.push("fontinfo"),a&&g.push("groups"),!i){for(p=[],l=0,c=g.length;c>l;l++)d=[n,v[g[l]]].join("/"),p.push(t.pathExists(!!e,d));v=e?Promise.all(p).then(s):s(p)}return m=[r.factory(e,t,n),v],e?Promise.all(m).then(u.bind(this,e)):u.call(this,!1,m)},u}),define("util-logging/consolehandler",["require","exports","module","./level","./handler","./formatter","util"],function(e,t,n){"use strict";var r=(e("./level"),e("./handler")),i=e("./formatter"),o=e("util"),a=function(){var e=this;return(e.super_=a.super_).call(e),this._defaultFormatter=new i,this};o.inherits(a,r),a.prototype.getDefaultFormatter=function(){return this._defaultFormatter},a.prototype.publish=function(e){if(this.isLoggable(e)){var t=this.getFormatter();t&&t instanceof i||(t=this.getDefaultFormatter());var n=t.formatMessage(e);n&&"string"==typeof n&&console.warn(n)}},n.exports=a}),define("Atem-Logging/ConsoleHandler",["util-logging/consolehandler"],function(e){return e}),define("Atem-Logging/YAMLFormatter",["util","util-logging/formatter","util-logging/logrecord","yaml"],function(e,t,n,r){"use strict";var i=function(){var e=this;return(e.super_=t.super_).call(e),e};return e.inherits(i,t),i.prototype.formatMessage=function(t){if(!(t&&t instanceof n))return{};var i={};i.message=t.getMessage()||"",e.isError(i.message)&&(i.message=i.message.message||i.message.toString());var o=new Date,a=t.getMillis();a&&"number"==typeof a&&o.setTime(a),i.date=o;var s=t.getLoggerName();s&&"string"==typeof s&&(i.name=s);var u=t.getLevel();u&&(i.level={name:u.getName(),value:u.intValue()});var l=t.getParameters();l&&l instanceof Array&&l.length>0&&(i.parameters=l);var c=t.getThrown();return c&&e.isError(c)&&(i.thrown={message:c.message,stack:c.stack}),r.safeDump([i])},i}),define("Atem-Logging/logRecordFromObject",["util-logging/logrecord","util-logging/level"],function(e,t){"use strict";function n(n){var r=Object.create(n);return r.level=new t(n.level),r.millis=Date.parse(n.date),new e(r)}return n}),define("Atem-CPS/CPS/parsing/curry",[],function(){"use strict";function e(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(this,t.concat(Array.prototype.slice.call(arguments)))}}return e}),define("Atem-CPS/CPS/elements/_Name",["./_Node"],function(e){"use strict";function t(t,n,r,i){e.call(this,r,i),this._comments=n,Object.defineProperty(this,"name",{value:t,enumerable:!0})}var n=t.prototype=Object.create(e.prototype);return n.constructor=t,n.toString=function(){return[this.name,this._comments.length?" ":"",this._comments.join("\n")].join("")},t}),define("Atem-CPS/CPS/elements/PropertyName",["./_Name"],function(e){"use strict";function t(t,n,r,i){e.call(this,t,n,r,i)}var n=t.prototype=Object.create(e.prototype);return n.constructor=t,t}),define("Atem-CPS/CPS/elements/AtRuleName",["./_Name"],function(e){"use strict";function t(t,n,r,i){e.call(this,t,n,r,i)}var n=t.prototype=Object.create(e.prototype);return n.constructor=t,t}),define("Atem-CPS/CPS/elements/AtNamespaceCollection",["Atem-CPS/errors","./PropertyCollection","./SelectorList"],function(e,t,n){"use strict";function r(e,n,r,i,o){t.call(this,r,i,o),this._selectorList=null,e&&(this.name=e),n&&(this.selectorList=n)}function i(e){if(!(e instanceof n))throw new a("selectorList has the wrong type, expected SelectorList but got: "+(e?e.constructor.name?e.constructor.name:e.constructor:e));if(e.invalid&&null!==this._selectorList)throw new s("trying to set an invalid selectorList: "+e);this._selectorList=e,this._trigger(["selector-change","structural-change","update"])}function o(){return this._selectorList}var a=e.CPS,s=e.Value,u=r.prototype=Object.create(t.prototype);return u.constructor=r,u._allowNamespace=!0,u.toString=function(){return["@",this.name,"(",this.selectorList,")"," {\n",this._items.join("\n\n"),"\n}"].join("")},Object.defineProperty(u,"invalid",{get:function(){return!this._selectorList||this._selectorList.invalid}}),u.setSelectorList=i,u.getSelectorList=o,Object.defineProperty(u,"selectorList",{enumerable:!0,set:i,get:o}),r}),define("Atem-CPS/CPS/parsing/propertyFactories",["Atem-CPS/errors","./curry","./selectorFactories","Atem-CPS/CPS/elements/PropertyCollection","Atem-CPS/CPS/elements/PropertyDict","Atem-CPS/CPS/elements/Property","Atem-CPS/CPS/elements/PropertyName","Atem-CPS/CPS/elements/PropertyValue","Atem-CPS/CPS/elements/AtRuleName","Atem-CPS/CPS/elements/AtNamespaceCollection","Atem-CPS/CPS/elements/SelectorList","gonzales/gonzales","./parseSelectorList"],function(e,t,n,r,i,o,a,s,u,l,c,h,f){"use strict";function p(e,t,n){var r,i=t.children.filter(function(e){return"comment"===e.type}).map(function(e){return e.instance});if("__GenericAST__"!==t.children[0].type&&"ident"!==t.children[0].instance.type)throw new d(['The first child of "'+t.type+'" is ','expected to be an __GenericAST__ of type "ident", ','but got "',t.children[0].type,'" ','type: "',t.children[0].instance?t.children[0].instance.type:"<no instance>",'" ',"in a "+t.type+" from: ",n,"line: ",t.lineNo,"."].join(""),(new Error).stack);return r=t.children[0].data,new e(r,i,n,t.lineNo)}var d=e.CPS,m=Object.create(n);return function(e){var t;for(t in e)m[t]=e[t]}({block:function(e,t){for(var n,r=0,o=[],a={comment:null,declaration:null},s={decldelim:null,s:null},u=("children"in e?e.children:[]);r<u.length;r++)(u[r].type in a||"__GenericAST__"===u[r].type&&!(u[r].instance.type in s))&&(n=u[r].instance,o.push(n),n.invalid&&(console.info("FIXME: Get a logger object here, to enable cleaner messaging of this:"),console.warn(["adding invalid",n.constructor.name+":",'"'+n+'"',n.message,n.source,n.lineNo].join(" "))));return new i(o,t,e.lineNo)},declaration:function(e,t,n){var r,i;if("property"!==e.children[0].type)throw new d('The first child of "declaration" is expected to be a "property", but got "'+e.children[0].type+'" " in a declaration from: '+t+"line: "+e.lineNo+".",(new Error).stack);if("value"!==e.children[1].type)throw new d('The second child of "declaration" is expected to be a "value", but got "'+e.children[1].type+'" " in a declaration from: '+t+"line: "+e.lineNo+".",(new Error).stack);return r=e.children[0].instance,i=e.children[1].instance,n&&n.initializePropertyValue(r.name,i),new o(r,i,t,e.lineNo)},property:t(p,a),value:function(e,t){for(var n=[],r=[],i=0,o=("children"in e?e.children:[]);i<o.length;i++)"comment"===o[i].type?n.push(o[i].instance):r.push(o[i].instance);return new s(r,n,t,e.lineNo)},atruler:function(e,t){for(var n,r,i,o=0;o<e.children.length&&!(n&&r&&i);o++)!r&&e.children[o].instance instanceof l?r=e.children[o].instance:!n&&e.children[o].instance instanceof u?n=e.children[o].instance:!i&&e.children[o].instance instanceof c&&(i=e.children[o].instance);return n&&"namespace"===n.name&&r?(void 0!==i&&(r.selectorList=i),r.name=n.name,r):this.__GenericAST__(e,t)},atkeyword:t(p,u),atrulerq:function(e,t,n){var r,i,o;for(r=1;r<e.rawData.length;r++)if(e.rawData[r][0]&&"braces"===e.rawData[r][0]){i=e.rawData[r];break}if(!i)return this.__GenericAST__(e,t);o=h.csspToSrc(i).slice(1,-1).replace(/(\'|\")/gm,"").split(",").map(function(e){return e.trim()}).filter(function(e){return!!e.length}).join(", ");try{return f.fromString(o,void 0,n&&n.selectorEngine)}catch(a){if(!(a instanceof d))throw a}return this.__GenericAST__(e,t)},atrulers:function(e,t){var n,i=[],o=0;if(!e.children)return this.__GenericAST__(e,t);for(;o<e.children.length;o++)("__GenericAST__"!==e.children[o].type||"s"!==e.children[o].instance.type)&&(n=e.children[o].instance,n instanceof r&&!n.name?Array.prototype.push.apply(i,n.items):i.push(n));return new l(void 0,void 0,i,t,e.lineNo)}}),{factories:m,genericNameFactory:p}}),define("Atem-CPS/CPS/parsing/atDictionaryFactories",["Atem-CPS/errors","./curry","./propertyFactories","Atem-CPS/CPS/elements/Property","Atem-CPS/CPS/elements/PropertyCollection","Atem-CPS/CPS/elements/AtRuleName"],function(e,t,n,r,i,o){"use strict";function a(e){return"atruler"===e[0]&&e[1]&&"atkeyword"===e[1][0]&&e[1][1]&&"ident"===e[1][1][0]&&"dictionary"===e[1][1][1]}var s,u,l=e.CPS,c=n.genericNameFactory,h=Object.create(n.factories);return function(e){var t;for(t in e)h[t]=e[t]}({atruler:function(e,t){var n,r,a=0;for(u||(u=!0,console.warn("@dictionary is deprecated!\n",'Remove all occurences of "@dictionary {" and it\'s','closing "}" and you should be good to go.\nThe contents of ',"@dictionary will continue to work as normal properties."));a<e.children.length&&(!r||!n);a++)!n&&e.children[a].instance instanceof i?n=e.children[a].instance:!r&&e.children[a].instance instanceof o&&(r=e.children[a].instance);return n&&r?n:this.__GenericAST__(e,t)},atkeyword:t(c,o),atrulers:function(e,t){for(var n,r=[],o=0;o<e.children.length;o++)("__GenericAST__"!==e.children[o].type||"s"!==e.children[o].instance.type)&&(n=e.children[o].instance,n instanceof i&&!n.name?Array.prototype.push.apply(r,n.items):r.push(n));return new i(r,t,e.lineNo)},declaration:function(e,t,n){var i,o;if("property"!==e.children[0].type)throw new l('The first child of "declaration" is expected to be a "property", but got "'+e.children[0].type+'" " in a declaration from: '+t+"line: "+e.lineNo+".",(new Error).stack);if("value"!==e.children[1].type)throw new l('The second child of "declaration" is expected to be a "value", but got "'+e.children[1].type+'" " in a declaration from: '+t+"line: "+e.lineNo+".",(new Error).stack);return i=e.children[0].instance,o=e.children[1].instance,n.initializePropertyValue(i.name,o),new r(i,o,t,e.lineNo)}}),s=[a,h],{factories:h,atDictionaryParsingSwitch:s}}),define("Atem-CPS/CPS/parsing/atImportFactories",["Atem-CPS/errors","./curry","./propertyFactories","Atem-CPS/CPS/elements/AtImportCollection","Atem-CPS/CPS/elements/AtRuleName","Atem-CPS/CPS/elements/GenericCPSNode"],function(e,t,n,r,i,o){"use strict";function a(e){return"atrules"===e[0]&&e[1]&&"atkeyword"===e[1][0]&&e[1][1]&&"ident"===e[1][1][0]&&"import"===e[1][1][1]}var s,u=(e.CPS,n.genericNameFactory),l=Object.create(n.factories);return function(e){var t;for(t in e)l[t]=e[t]}({atrules:function(e,t,n){var i,a,s;return i=e.children.slice(1).filter(function(e){return e.instance instanceof o&&"s"===e.instance.type?!1:!0}),1===i.length&&i[0].instance instanceof o&&"string"===i[0].instance.type?(a=i[0].data.slice(1,-1),s=new r(n,t,e.lineNo),s.setResource(!1,a),s):this.__GenericAST__(e,t)},atkeyword:t(u,i)}),s=[a,l],{factories:l,atImportParsingSwitch:s}}),define("Atem-CPS/CPS/parsing/parseRules",["Atem-CPS/errors","gonzales/gonzales","./curry","./engine","./propertyFactories","./atDictionaryFactories","./atImportFactories"],function(e,t,n,r,i,o,a){"use strict";function s(e,t,n){var r;try{r=c.parser(e)}catch(i){throw new u("("+t+") "+i.message,i.stack)}return void 0===r&&(r=["stylesheet"]),c.fromAST(r,t,n)}var u=(e.CPS,e.CPSParser),l=i.factories,c={parser:t.srcToCSSP},h=[o.atDictionaryParsingSwitch,a.atImportParsingSwitch],f=n(r,l,h);return c.fromString=s,c.fromAST=f,c}),define("Atem-CPS/CPS/RuleController",["Atem-CPS/errors","./parsing/parseRules","obtain/obtain","Atem-IO/tools/readDirRecursive"],function(e,t,n,r){"use strict";function i(e,t,n,r){this._io=e,this._cpsDir=t,this._commissionIdCounter=0,this._rules=Object.create(null),this._cpsGenerators=Object.create(null),this._generatedRules=Object.create(null),Object.defineProperty(this,"initializePropertyValue",{value:n,enumarable:!0,writable:!1}),Object.defineProperty(this,"selectorEngine",{value:r,enumarable:!0,writable:!1}),this._markDirtyCallback=[this,"_markDirtyHandler"]}function o(e){var t;return h.test(e)&&(t=parseFloat(e),t===t)?t:e}var a=e.Key,s=e.CPSRecursion,u=e.NotImplemented,l=e.Value,c=i.prototype;c._isCached=function(e){return e in this._rules&&this._rules[e].cached},c._markDirtyHandler=function(e,t,n){this._rules[e].dirty=!0},c._set=function(e,t,n){var r;e in this._rules?(r=this._rules[e],r.propertyCollection.reset(t.items,t.source,t.lineNo)):r=this._rules[e]={propertyCollection:t,subscription:t.on("update",this._markDirtyCallback,e)},r.commissionId=n,r.cached=!0,r.dirty=!1},c.purgeRule=function(e){var t=this._rules[e];t&&(t.propertyCollection.destroy(),delete this._rules[e])},c._readFile=function(e,t){return this._io.readFile(e,t)},c._getFilePath=function(e){return[this._cpsDir,e].join("/")},c._getParseRulesArgumentAPI=function(e){var t={initializePropertyValue:this.initializePropertyValue,selectorEngine:this.selectorEngine,getRule:function(t,n){return this._getRule(t,e,n)}.bind(this)};return t},c._getRule=n.factory({fileName:["importing","sourceName",function(e,t){if(t in e)throw new s(t+" @imports itself: "+Object.keys(e).join(" Â» "));return e[t]=!0,this._getFilePath(t)}],cps:[!1,"fileName","commissionId",c._readFile],rule:["cps","sourceName","commissionId","importing",function(e,n,r,i){if(!this._isCached(n)||this._isCached(n)&&r>=this._rules[n].commissionId){var o=this._getParseRulesArgumentAPI(i),a=t.fromString(e,n,o);this._set(n,a,r)}return delete i[n],this._rules[n].propertyCollection}],commissionId:[function(){return this._commissionIdCounter++}]},{cps:[!0,"fileName","commissionId",c._readFile]},["importing","sourceName"],function(e,t,n){return this._isGeneratorPath(n)?this._getGeneratedRule(n,t):(this._isCached(n)||e("rule"),this._rules[n].propertyCollection)}),c.getRule=function(e,t){var n=Object.create(null);return this._getRule(e,n,t)},c._generateRule=function(e,n){var r,i,o,l=this._parseGeneratorPath(e),c=l[0],h=l[1],f=l[2];if(0!==h)throw new u("There's yet no versioning API for CPS generators. Version: "+h);if(!(c in this._cpsGenerators))throw new a('Unknown CPS generator "'+c+'"');if(e in n)throw new s(e+" @imports itself: "+Object.keys(n).join(" Â» "));return n[e]=!0,r=this._cpsGenerators[c].apply(null,f),i=this._getParseRulesArgumentAPI(n),o=t.fromString(r,e,i),delete n[e],o},c._getGeneratedRule=function(e,t){var n=this._generatedRules[e];return n||(this._generatedRules[e]=n=this._generateRule(e,t)),n},c.reloadRule=function(e,t){if(!(t in this._rules))throw new a("Can't reload rule \""+t+"\" because it's not in this controller");return this._rules[t].cached=!1,this.getRule(e,t)},c.write=function(e,t,n){var r,i=void 0===n?"":n;if(this._isGeneratorPath(t))throw new l("Can't write to generator path \""+t+'".');return r=this._getFilePath(t),this._io.writeFile(e,r,i)},c.saveRuleIfChanged=function(e,t){var n,r=this._rules[t];return r&&r.dirty&&(n=this.write(e,t,""+r.propertyCollection),r.dirty=!1),e?n:void 0},c.saveChangedRules=function(e){var t,n,r=[];for(t in this._rules)n=this._rules[t],n.dirty&&(r.push(this.write(e,t,""+n.propertyCollection)),n.dirty=!1);if(e)return r.length?Promise.all(r):new Promise(function(e){setTimeout(e,0)})},c.getAvailableRules=n.factory({files:[function(){return r(!1,this._io,this._cpsDir)}],trimmed:["files",function(e){var t,n,r,i=[],o=this._cpsDir.length+1;for(t=0,n=e.length;n>t;t++)r=e[t],".cps"===r.slice(-4)&&i.push(r.slice(o));return i}]},{files:[function(){return r(!0,this._io,this._cpsDir)}]},[],function(e){return e("trimmed")}),c.registerCPSGenerator=function(e,t){if(e in this._cpsGenerators)throw new l('A generator with name "'+e+'" is already registered.');this._cpsGenerators[e]=t},c._getGeneratorCPSKey=function(e,t,n){if(0!==e)throw new u("There's yet no versioning API for CPS generators. Version: "+e);if(!(t in this._cpsGenerators))throw new a('Unknown CPS generator "'+t+'"');var r=n.join(","),i=["generated://",t,"/",e,"/",r].join("");return i},c.generateCPS=function(e,t){var n=0,r=this._getGeneratorCPSKey(n,e,t);return r},c._isGeneratorPath=function(e){return 0===e.indexOf("generated://")};var h=/^([+-]?(((\d+(\.)?)|(\d*\.\d+))([eE][+-]?\d+)?))$/;return c._parseGeneratorPath=function(e){var t=e.slice("generated://".length).split("/"),n=t[0],r=parseInt(t[1],10),i=t[2]?t[2].split(","):[];return i=i.map(o),[n,r,i]},i}),define("Atem-CPS/CPS/SelectorEngine",["Atem-CPS/errors","./parsing/parseSelectorList","./elements/PropertyCollection","./elements/Rule","./elements/SelectorList","./elements/ComplexSelector","./elements/CompoundSelector","./elements/SimpleSelector","bloomfilter"],function(e,t,n,r,i,o,a,s,u){"use strict";function l(){this._compoundSelectorCache=Object.create(null),this._compoundSelectorBloomLocationsCache=Object.create(null),this._complexSelectorsCache=Object.create(null),this._bloomFilter=new u.BloomFilter(512,5)}function c(e){var t,n,r,i,o,a=e.normalizedValue,s=['"use strict";',"var result = (true"],u=[];for(n=0,r=a.length;r>n;n++){if(t=a[n],o=t.name,t.invalid)throw new g('simpleSelector "'+t+'" is invalid: '+t.message);switch(t.type){case"type":s.push(" && (element.type === ",y(o),")");break;case"id":s.push(" && (element.id === ",y(o),")");break;case"class":s.push(" && (element.hasClass(",y(o),"))");break;case"pseudo-class":"i"===o?(s.push(" && (!!element.parent)"),i=t.value,0>i?s.push(" && (element.parent.children.length + ",i," === element.index)"):s.push(" && (",i," === element.index)")):s.push("&& false");
break;case"universal":break;default:throw new g('simpleSelector.type "'+t.type+'" is not implemented.')}}return s.push(");",u.join(""),"return result;"),new Function(["element"],s.join(""))}function h(e,t){for(var n=0,r=Math.min(e.length,t.length);r>n;n++)if(e[n]!==t[n])return t[n]-e[n];return 0}function f(e,t){return h(e.specificity,t.specificity)}function p(e,t){return h(e[0],t[0])}function d(e,t,n,r,i){var o,a,s,u,l,c,h=n[0],f=[],p=null,m=[],v="descendant"===e;if(!v&&"child"!==e)throw new g('Combinator type "'+e+'" is unsuported');o=[t.children,0,0],o[2]=o[0].length;do for(l=o[1],c=o[2];c>l;){if(u=o[0][l],l++,h.matches(u,i)){if(null===p&&(p=n[1]),!p){u.nodeID in r||(m.push(u),r[u.nodeID]=null);continue}a||(a=n.slice(2)),s=d(p.type,u,a,r,i),s.length&&Array.prototype.push.apply(m,s)}v&&(c>l&&(o[1]=l,o[2]=c,f.push(o)),o=[u.children,0,0],o[2]=o[0].length,l=o[1],c=o[2])}while(o=f.pop());return m}function m(e,t,n,r){var i,o,a,s,u,l,c=n[0],h=[],f=null,p="descendant"===e;if(!p&&"child"!==e)throw new g('Combinator type "'+e+'" is unsuported');i=[t.children,0,0],i[2]=i[0].length;do for(u=i[1],l=i[2];l>u;){if(s=i[0][u],u++,c.matches(s,r)){if(null===f&&(f=n[1]),!f)return s;if(o||(o=n.slice(2)),a=m(f.type,s,o,r))return a}p&&(l>u&&(i[1]=u,i[2]=l,h.push(i)),i=[s.children,0,0],i[2]=i[0].length,u=i[1],l=i[2])}while(i=h.pop());return null}var g=e.CPS,v=t.fromString,y=JSON.stringify,b=l.prototype;b._complexSelectorMatches=function(e,t,n){if(!(e instanceof o))throw new g("complexSelector is not of type ComplexSelector: "+e);var r,i,a,s=e.value;for(a="child",r=s.pop();t;)if(r.matches(t,this)){if(i=s.pop(),void 0===i)return!0;a=i.type,r=s.pop(),t=n&&n===t?void 0:t.parent}else if("child"===a)t=void 0;else{if("descendant"!==a)throw new g('Combinator type "'+a+'" is unsuported');t=t.parent}return!1},b.compileCompoundSelector=function(e){var t=e.normalizedName,n=this._compoundSelectorCache[t];return n||(this._compoundSelectorCache[t]=n=c(e)),n},l.compareSpecificity=h,l.compareSelectorSpecificity=f,b._getCompoundSelectorBloomLocations=function(e){var t,n,r,i,o,a,s=e.normalizedName,u=this._compoundSelectorBloomLocationsCache[s];if(!u){for(t=this._bloomFilter,n={type:!0,"class":!0,id:!0},u=[],r=e.value,i=0,o=r.length;o>i;i++)a=r[i],a.type in n&&u.push(t.getLocations(a.toString(!0)));this._compoundSelectorBloomLocationsCache[s]=u}return u},b._bloomfilterComplexSelector=function(e,t){var n,r,i,o,a,s,u=t.value;for(i=0,o=u.length;o>i;i+=2)for(n=u[i],r=this._getCompoundSelectorBloomLocations(n),a=0,s=r.length;s>a;a++)if(!e.testByLocations(r[a]))return!1;return!0};var _=function(){function e(e){var t,n;for(t=0,n=e.length;n>t;t++)Object.defineProperty(this,t,{value:e[t]});Object.defineProperty(this,"length",{value:n,enumerable:!0}),Object.defineProperty(this,"normalizedName",{value:Array.prototype.join.call(this,",\n"),enumerable:!0})}var t=e.prototype;return t.toString=function(){return this.normalizedName},e}();return b._multiplyComplexSelectorLists=function(e,t){var n,r,i,o,a,s,u,l,c,h,f,p,d=[],m=e instanceof _?e:new _(e),g=t instanceof _?t:new _(t);if(a="!"+m.normalizedName,u="!"+g.normalizedName,s=this._complexSelectorsCache[a],s||(this._complexSelectorsCache[a]=s=Object.create(null)),f=s[u],!f){for(n=0,i=m.length;i>n;n++)for(l=m[n].normalizedName,h=this._complexSelectorsCache[l],h||(this._complexSelectorsCache[l]=h=Object.create(null)),r=0,o=g.length;o>r;r++)c=g[r].normalizedName,p=h[c],p||(p=m[n].add(g[r])),d.push(p);f=new _(d),s[u]=f}return f},b._getNamespacedRules=function(e,t){var i,o,a,s,u,l,c,h,p,d,m,g=this._bloomfilterComplexSelector.bind(this,t.getBloomFilter()),v=null,y=[],b=[];b=[],o=[0,e.items,e,null,[e]];do for(l=o[0],a=o[1],v=o[3],i=o[4],c=a.length;c>l;)if(s=a[l],l++,!s.invalid){if(u=null,"function"==typeof s.getSelectorList){for(u=[],d=s.getSelectorList().value,h=0,p=d.length;p>h;h++)m=d[h],!m.invalid&&g(m)&&u.push(m);if(!u.length)continue;if(u.sort(f),u=v?this._multiplyComplexSelectorLists(v,u):new _(u),s instanceof r){y.push([u,s,i]);continue}}if(s instanceof n){c>l&&(o[0]=l,b.push(o)),i=i.slice(),i.push(s),b.push([0,s.items,s,u||v,i]);break}}while(o=b.pop());return y},b.getMatchingRules=function(e,t){var n,r=this._getNamespacedRules(e,t);return n=this._getMatchingNamespacedRules(r,t)},b._getMatchingNamespacedRules=function(e,t){var n,r,i,o,a,s,u,l=[];for(o=0,s=e.length;s>o;o++)for(n=e[o],r=n[0],a=0,u=r.length;u>a;a++)if(this._complexSelectorMatches(r[a],t)){i=r[a].specificity.slice(),i.push(o),l.push([i,n]);break}return l.sort(p),l.map(function(e){return e[1]})},b.queryAll=function(e,t){var n,r,o,a,s,u,l,c,h=Object.create(null),f=[];if("string"==typeof t)c=v(t,void 0,this);else{if(!(t instanceof i))throw new g("SelectorList expected, but got a "+t+" typeof: "+typeof t);c=t}if(!(e instanceof Array))throw new g("scope must be an Array");for(n=c.value,o=0,a=n.length;a>o;o++)for(r=n[o].value,s=0,u=e.length;u>s;s++)l=d("descendant",e[s],r,h,this),Array.prototype.push.apply(f,l);return f},b.query=function(e,t){var n,r,o,a,s,u,l,c;if("string"==typeof t)c=v(t,void 0,this);else{if(!(t instanceof i))throw new g("SelectorList expected, but got a "+t+" typeof: "+typeof t);c=t}if(!(e instanceof Array))throw new g("scope must be an Array");for(n=c.value,o=0,a=n.length;a>o;o++)for(r=n[o].value,s=0,u=e.length;u>s;s++)if(l=m("descendant",e[s],r,this))return l;return null},l}),define("Atem-CPS/CPS/StyleDict",["Atem-CPS/errors","Atem-CPS-whitelisting/whitelisting","Atem-CPS/emitterMixin","Atem-CPS/OMA/_Node","./elements/SelectorList"],function(e,t,n,r,i){"use strict";function o(e,t,r){var i=this;this.getAPI={get:function(e){return i._subscribeTo(i,e),i.get(e)},query:function(e,t){return i._subscribeTo(e,t),e.query(t)},genericGetter:function(e,t){return i._genericGetter(e,t)}},Object.defineProperty(this,"element",{value:t,enumerable:!0}),this._controller=e,this._getting={recursionDetection:Object.create(null),stack:[],current:null},this._rules=r||null,this._dict=null,this._cache=Object.create(null),this._dictSubscriptions=[],this._propertySubscriptions=Object.create(null),this._cacheSubscriptions=Object.create(null),this._cacheDependencies=Object.create(null),n.init(this,a),n.init(this),this._subscriptionUidCounter=0,this._subscriptionUids=new WeakMap,this._invalidating=0,this._delayedTriggerData=Object.create(null),this.__delayedTrigger=this._delayedTrigger.bind(this)}var a,s=e.Key,u=e.Receiver,l=e.Assertion,c=e.CPSRecursionKey,h=e.assert;a={stateProperty:"_dependants",onAPI:"onPropertyChange",offAPI:"offPropertyChange",triggerAPI:"_triggerPropertyChange"};var f=o.prototype;return f.constructor=o,n(f,a),n(f),f._getSubscriptionUid=function(e,t){var n;return e instanceof r?t instanceof i?e.nodeID+"S:$":e.nodeID+":"+t:e instanceof o?"!"+e.element.nodeID+":"+t:(n=this._subscriptionUids.get(e),n||(n="?"+this._uidCounter++ +":"+t,this._subscriptionUids.set(e,n)),n)},f._unsubscribeFromAll=function(e){var t,n,r,i,o=this._cacheDependencies[e];if(o){for(r=0,i=o.length;i>r;r++)t=o[r],n=this._cacheSubscriptions[t],delete n[2][e],n[3]--,n[3]||(n[0].offPropertyChange(n[1]),delete this._cacheSubscriptions[t]);delete this._cacheDependencies[e]}},f._invalidateCache=function(e){return this._nextTrigger("change",e),e in this._cache?(this._invalidatingKeys||(this._invalidatingKeys=Object.create(null)),h(!(e in this._invalidatingKeys),"Key "+e+"is beeing invalidated at the moment: "+Object.keys(this._invalidatingKeys)),this._invalidatingKeys[e]=!0,this._invalidating+=1,delete this._cache[e],this._unsubscribeFromAll(e),this._triggerPropertyChange(e),this._invalidating-=1,delete this._invalidatingKeys[e],void h(!(e in this._cache),'"'+e+'" was just deleted, yet it is still there: '+Object.keys(this._cache))):void h(!this._cacheDependencies[e]||!this._cacheDependencies[e].length,'Because the key "'+e+'" is not cached, there must not be any dependency or dependant')},f._nextTrigger=function(e,t){var n=this._delayedTriggerData[e];n||(n=this._delayedTriggerData[e]={timeoutID:null,data:[]}),arguments.length>1&&n.data.push(t),n.timeoutID||(n.timeoutID=setTimeout(this.__delayedTrigger,0,e))},f.flushStyleChanges=function(e){var t=this._delayedTriggerData[e];t&&(t.timeoutID&&clearTimeout(t.timeoutID),delete this._delayedTriggerData[e])},f._delayedTrigger=function(e){var t=this._delayedTriggerData[e];if(!t)throw new l('The data for "'+e+'" is missing.');delete this._delayedTriggerData[e],this._trigger(e,t.data.length?t.data:void 0)},f._invalidateCacheHandler=function(e){h(e in this._cacheSubscriptions,"must be subscribed now");var t,n,r=Object.keys(this._cacheSubscriptions[e][2]);for(t=0,n=r.length;n>t;t++)this._invalidateCache(r[t]);h(!(e in this._cacheSubscriptions),"must NOT be subscribed anymore")},f._subscribeTo=function(e,t){var n,o,a=this._getSubscriptionUid(e,t),s=this._getting.current,u=this._cacheSubscriptions[a];if(u){if(s in u[2])return}else{if("function"!=typeof e.onPropertyChange)return;t instanceof i?(h(e instanceof r,'When "key" is a Selector "item" must be an OMA Node.'),o="subtree"):o=t,n=e.onPropertyChange(o,[this,"_invalidateCacheHandler"],a),u=this._cacheSubscriptions[a]=[e,n,Object.create(null),0]}u[2][s]=!0,u[3]+=1,this._cacheDependencies[s]||(this._cacheDependencies[s]=[]),this._cacheDependencies[s].push(a)},f._genericGetter=function(e,n){var i;if(void 0===e)throw new Error('trying to read "'+n+'" from an undefined item');if(e instanceof r){var o=e.getComputedStyle();this._subscribeTo(o,n),i=o.get(n)}else if(e.cpsGet)this._subscribeTo(e,n),i=e.cpsGet(n);else{if(!(e instanceof Array))throw new s('Item "'+e+"\" doesn't specify a whitelist for cps, trying to read "+n);i=t.arrayGet(e,n)}return i},f._fetchNewRules=function(){var e=[[null,this.element,null]];return Array.prototype.push.apply(e,this._controller.getRulesForElement(this.element)),e},f._loadRules=function(e){(null===this._rules||e)&&(this._rules=this._fetchNewRules())},f.getRules=function(e){return this._dict||this._buildIndex(),this._rules.slice(e?0:1)},f._buildIndex=function(){h(null===this._dict,"Index already initialized, run invalidateRules to purge it.");var e,t,n,r,i,o,a,s;for(this._loadRules(),this._dict=Object.create(null),e=0,t=this._rules.length;t>e;e++)for(a=this._rules[e][1].properties,s=a.on("add",[this,"_propertyAddHandler"],e),this._dictSubscriptions.push([a,s]),s=a.on("update",[this,"_propertyUpdateHandler"],e),this._dictSubscriptions.push([a,s]),i=a.keys(),n=0,r=i.length;r>n;n++)o=i[n],o in this._dict||this._setDictValue(a,o,e)},f._unsubscribeFromDicts=function(){var e,t,n;for(e=0,t=this._dictSubscriptions.length;t>e;e++)n=this._dictSubscriptions[e],n[0].off(n[1]);this._dictSubscriptions=[]},f._rulesEqual=function(e,t){var n,r;if(e.length!==t.length)return!1;for(n=0,r=e.length;r>n;n++)if(e[n][1]!==t[n][1])return!1;return!0},f.checkRules=function(){if(this._rules){var e=this._fetchNewRules();this._rulesEqual(this._rules,e)||this._setRules(e)}},f._invalidateDict=function(){var e;for(e in this._dict)this._unsetDictValue(e),this._invalidateCache(e);this._nextTrigger("change"),this._dict=null},f._setRules=function(e){this._rules=e||null,this._unsubscribeFromDicts(),this._invalidateDict()},f.invalidateRules=function(){this._setRules(null)},f._rebuildIndex=function(){this._invalidateDict(),this._buildIndex()},f._propertyUpdateHandler=function(e,t,n){this._nextTrigger("update")},f._propertyAddHandler=function(e,t,n){var r,i;for(r=0,i=n.length;i>r;r++)this.__propertyAddHandler(e,t,n[r])},f.__propertyAddHandler=function(e,t,n){var r=e,i=this._propertySubscriptions[n]?this._propertySubscriptions[n][2]:void 0;if(!(r>i)){if(i>r)this._unsetDictValue(n),this._invalidateCache(n);else if(i===r)throw new l("The old index must not be identical to the new one, but it is.\n index: "+r+" key: "+n+" channel: "+t);this._setDictValue(this._rules[r][1].properties,n,r)}},f._setDictValue=function(e,t,n){h(!(t in this._propertySubscriptions),"there may be no dependency yet!");var r=this._propertySubscriptions[t]=[];this._dict[t]=e.get(t),r[0]=e,r[1]=e.onPropertyChange(t,[this,"_propertyChangeHandler"],e),r[2]=n},f._unsetDictValue=function(e){var t=this._propertySubscriptions[e];t[0].offPropertyChange(t[1]),delete this._dict[e],delete this._propertySubscriptions[e]},f._updateDictEntry=function(e){var t,n,r;for(this._unsetDictValue(e),t=0,n=this._rules.length;n>t;t++)if(r=this._rules[t][1].properties,r.has(e)){this._setDictValue(r,e,t);break}this._invalidateCache(e)},f._propertyChangeHandler=function(e,t,n){switch(n){case"change":this._dict[t]=e.get(t),this._invalidateCache(t);break;case"delete":this._updateDictEntry(t);break;default:throw new u('Expected an event of "change" or "delete" but got "'+n+'" (propertyChangeHandler for "'+t+'")')}},Object.defineProperty(f,"keys",{get:function(){return this._dict||this._buildIndex(),Object.keys(this._dict)}}),f._getProperty=function(e){return this._dict||this._buildIndex(),e in this._dict?this._dict[e]:null},f.__get=function(e,t){var n,r=this._getProperty(e);return r?(n=r.value.evaluate(this.getAPI),this.element.checkPropertyValue(e,n)):(t.push(e+" not found for "+this.element.particulars),this._subscribeTo(this.element,e),n=this.element.cpsGet(e))},f._get=function(e){var t,n=[];if("this"===e)return this.element;if(t=this._getting,e in t.recursionDetection)throw new c('Looking up "'+e+'" is causing recursion in the element: '+this.element.particulars);t.recursionDetection[e]=!0,t.stack.push(t.current),t.current=e;try{return this.__get(e,n)}catch(r){if(r instanceof l)throw r;if(n.push(r),r instanceof c)throw r;throw new s(this.element+": "+n.join("\n----\n"),n[0]&&n[0].stack||void 0)}finally{delete t.recursionDetection[e],t.current=t.stack.pop()}},f.get=function(e){if(this._invalidating)throw new l("This is invalidating, so get is illegal: "+this.element.type+" "+this.element.nodeID);var t,n,r=this._cache[e];if(t=arguments.length>=2,t&&(n=arguments[1]),r instanceof Error){if(t)return n;throw r}if(void 0!==r)return r;try{this._cache[e]=r=this._get(e)}catch(i){if(i instanceof c){if(t)return n;throw i}if(h(i instanceof Error,"Caught something, but it is not an instance of Error: "+i),this._cache[e]=i,t)return n;throw i}return r},o}),define("Atem-CPS/_Controller",["Atem-CPS/errors","Atem-CPS/CPS/elements/Rule","Atem-CPS/CPS/StyleDict"],function(e,t,n){"use strict";function r(e,t,n){this._ruleController=e,this._selectorEngine=n,this._root=t(this),this._elementsData=new Map,this._rules=Object.create(null)}var i=e.CPS,o=e.NotImplemented,a=e.assert,s=r.prototype;return s.StyleDict=n,Object.defineProperty(s,"rootNode",{get:function(){return this._root}}),s.updateChangedRule=function(e,t){return this._ruleController.reloadRule(e,t)},s.getCPSName=function(e){throw new o("getCPSName must be implemented by a subclass.")},s.getRulesForElement=function(e){var t,n,r,i=this.getCPSName(e);return null===i?[]:(this._rules[i]?t=this._rules[i][0]:(t=this._ruleController.getRule(!1,i),n=t.on("structural-change",[this,"_updateRule"],i),this._rules[i]=[t,n,new Set]),r=this._selectorEngine.getMatchingRules(t,e),this._rules[i][2].add(e),r)},s._getStyleDict=function(e){var t=this._elementsData.get(e);return t&&t[0]},s._checkElementRules=function(e){var t=this._getStyleDict(e);t&&t.checkRules()},s._checkElementRulesHandler=function(e){this._checkElementRules(e),e.walkTreeDepthFirst(this._checkElementRules.bind(this))},s._createStyleDict=function(e){var t=null,n=new this.StyleDict(this,e,t),r=e.onPropertyChange(["index","tail-index","classes","id"],[this,"_checkElementRulesHandler"],e);return this._elementsData.set(e,[n,r]),n},s.getComputedStyle=function(e){if(e.root!==this._root)throw new i("getComputedStyle with an element that is not part of the multivers is not supported"+e);return this._getStyleDict(e)||this._createStyleDict(e)},s._updateRule=function(e){var t,n,r,i=Array.from(this._rules[e][2]);for(n=0,r=i.length;r>n;n++)t=this._getStyleDict(i[n]),a(!!t,"Element must have a StyleDict when it's associated with a rule"),t.checkRules()},s._checkScope=function(e){var t,n;if(!e)return[this._root];for(n=e instanceof Array?e:[e],t=0;t<n.length;t++)if(n[t].root!==this._root)throw new i("Query with a scope that is not part of the multivers is not supported "+n[t].particulars);return n},s.purgeNode=function(e){var t,n,r=[],o=e;if(e.parent)throw new i("Can't purge when node has a parent.");do t=this.getCPSName(o),this._rules[t][2]["delete"](o),n=this._elementsData.get(o),n&&(o.offPropertyChange(n[1]),n[0].invalidateRules(),this._elementsData["delete"](o)),Array.prototype.push.apply(r,o.children);while(o=r.pop())},s.queryAll=function(e,t){var n=this._selectorEngine.queryAll(this._checkScope(t),e);return n.query=this._selectorEngine.queryAll.bind(this._selectorEngine,n),n},s.query=function(e,t){return this._selectorEngine.query(this._checkScope(t),e)},r}),define("Atem-MOM/Controller",["Atem-CPS/_Controller"],function(e){"use strict";function t(){e.apply(this,arguments)}var n=t.prototype=Object.create(e.prototype);return n.getCPSName=function(e){var t,n=e.getAttachment("cpsFile");return n||(t=e.isRoot()&&e||"univers"===e.type&&e.root||"master"===e.type&&e||e.master,n=t.getAttachment("cpsFile")),n||null},t}),define("Atem-MOM/MOM/_Node",["Atem-MOM/errors","Atem-CPS/OMA/_Node","Atem-MOM/cpsTools"],function(e,t,n){"use strict";function r(){if(t.call(this),this.constructor.prototype===a)throw new i("MOM _Node must not be instantiated directly")}var i=e.MOM,o=e.NotImplemented,a=r.prototype=Object.create(t.prototype);return a.constructor=r,a._cps_whitelist={glyph:"glyph",master:"master",univers:"univers",multivers:"multivers"},function(e){for(var t in e)this.hasOwnProperty(t)||(this[t]=e[t])}.call(a._cps_whitelist,t.prototype._cps_whitelist),a._propertiesDependentOnParent=["glyph","master","univers","multivers"],Array.prototype.push.apply(a._propertiesDependentOnParent,t.prototype._propertiesDependentOnParent),Object.defineProperty(a,"MOMType",{get:function(){return"MOM "+this.constructor.name}}),a._getAncestor=function(e,t){return this._parent?this._parent.MOMType===e?this._parent:this._parent[t]:null},Object.defineProperty(a,"univers",{get:function(){return this._getAncestor("MOM Univers","univers")}}),a._rootType="multivers",Object.defineProperty(a,"multivers",{get:function(){return this.root}}),Object.defineProperty(a,"master",{get:function(){return this._getAncestor("MOM Master","master")}}),Object.defineProperty(a,"glyph",{get:function(){return this._getAncestor("MOM Glyph","glyph")}}),a.toString=function(){return["<",this.MOMType," ",this.nodeID,">"].join("")},a.isMOMNode=function(e){return e instanceof r},a.loadData=function(e){this._loadData(n.makeProperty,e)},a._validators=null,a._getValidator=function(e){return this._validators&&e in this._validators?this._validators[e]:null},Object.defineProperty(a,"masterIndexPath",{get:function(){var e="master"===this.type?this:this.master;if(e)return this.getIndexPath(e);throw new i(this+" has no master.")}}),a._interpolationCompatibilityTests=null,a.isInterpolationCompatible=function(e,t,n){if(!this._interpolationCompatibilityTests)throw new o(this+" does not support the isInterpolationCompatible interface.");var r,i,a,s,u=void 0===t?!0:!!t,l=void 0===n?!0:!!n,c=!0,h=[];for(r=0,i=this._interpolationCompatibilityTests.length;i>r;r++)if(a=this._interpolationCompatibilityTests[r],s=a.call(this,e,u,l),s!==!0&&!s[0]){c=!1,"string"==typeof s[1]?h.push(s[1]):Array.prototype.push.apply(h,s[1]);break}return[c,h]},r}),define("Atem-CPS/OMA/_Root",["./_Node"],function(e){"use strict";function t(t){e.call(this),this._controller=t}var n=t.prototype=Object.create(e.prototype);return n.constructor=t,Object.defineProperty(n,"idManager",{value:!0}),Object.defineProperty(n,"root",{get:function(){return this}}),n._propertiesDependentOnParent=[],n.removeFromTree=function(e){return e.parent?void e.parent.remove(e):void this._controller.purgeNode(e)},n.query=function(e,t){return this._controller.query(e,t)},n.queryAll=function(e,t){return this._controller.queryAll(e,t)},n.getComputedStyleFor=function(e){return this._controller.getComputedStyle(e)},t}),define("Atem-MOM/MOM/_Contour",["./_Node","Atem-MOM/errors"],function(e,t){"use strict";function n(){if(e.call(this),this.constructor.prototype===i)throw new r("MOM _Contour must not be instantiated directly")}var r=t.MOM,i=n.prototype=Object.create(e.prototype);return i.constructor=n,i._interpolationCompatibilityTests=[function(e,t,n){return e.type!==this.type?[!1,this+":i("+this.index+"): types are different: "+e]:!0},function(e,t,n){var r=e.children.length-this._children.length;return 0!==r?[!1,this+":i("+this.index+"): "+(r>0?"too many":"too few")+" child elements ("+r+") in other "+e.type+"."]:!0}],n}),define("Atem-MOM/MOM/validators",["Atem-MOM/errors","Atem-Math-Tools/Vector","Atem-Math-Tools/transform","./_Node"],function(e,t,n,r){"use strict";function i(e,n){if(!(n instanceof t))throw new h('The value of "'+e+'" must be a Vector, got: "'+n+'" typeof '+typeof n+" in "+this);return n}function o(e,t){if(!(t instanceof f))throw new h('The value of "'+e+'" must be a Transformation, got: "'+t+'" typeof '+typeof t+" in "+this);return t}function a(e,t){if("string"!=typeof t)throw new h('The value of "'+e+'" must be a string, got: "'+t+'" typeof '+typeof t+" in "+this);return t}function s(e,t){if("number"!=typeof t||t!==t)throw new h('The value of "'+e+'" must be a number, got: '+(t!==t?" NaN (happens with division by 0 for example)":'"'+t+'" typeof: '+typeof t+(t&&"function"==typeof t.constructor?" a: "+t.constructor.name:""))+" in "+this);return t}function u(e,t,n){if(!(n instanceof e))throw new h('The value of "'+t+'" must be a MOM '+e.name+', got: "'+n+'" typeof: '+typeof n+(n&&"function"==typeof n.constructor?" a: "+n.constructor.name:"")+" in "+this);return n}function l(e,t){return u.call(this,r,e,t)}function c(e,t){return u.call(this,this.constructor,e,t)}var h=e.Value,f=n.Transform;return{validateVector:i,validateTransform:o,validateString:a,validateNumber:s,validateMOMNode:l,validateMOMSameType:c,validateMOMConstructor:u}}),define("Atem-MOM/MOM/Component",["./_Contour","./validators"],function(e,t){"use strict";function n(){e.call(this),Object.freeze(this._children)}var r=n.prototype=Object.create(e.prototype);return r.constructor=n,function(e){for(var t in e)this.hasOwnProperty(t)||(this[t]=e[t])}.call(r._cps_whitelist,e.prototype._cps_whitelist),Object.defineProperty(r,"MOMType",{value:"MOM Component"}),Object.defineProperty(r,"type",{value:"component"}),r._validators=Object.create(null),r._validators.transformation=t.validateTransform,r._validators.baseGlyphName=t.validateString,n}),define("Atem-MOM/MOM/ContourPoint",["./_Node","./validators"],function(e,t){"use strict";function n(){e.call(this),Object.freeze(this._children)}var r=n.prototype=Object.create(e.prototype);return r.constructor=n,Object.defineProperty(r,"MOMType",{value:"MOM ContourPoint"}),Object.defineProperty(r,"type",{value:"p"}),r._validators=Object.create(null),r._validators.on=t.validateVector,r._validators["in"]=t.validateVector,r._validators.out=t.validateVector,r._validators.inLength=t.validateNumber,r._validators.outLength=t.validateNumber,r._validators.inDir=t.validateNumber,r._validators.outDir=t.validateNumber,r._validators.inTension=t.validateNumber,r._validators.outTension=t.validateNumber,r._validators.pointBefore=t.validateMOMSameType,r._validators.pointAfter=t.validateMOMSameType,n}),define("Atem-MOM/MOM/Contour",["./_Contour","./ContourPoint","./validators"],function(e,t,n){"use strict";function r(){e.call(this)}var i=r.prototype=Object.create(e.prototype);return i.constructor=r,Object.defineProperty(i,"MOMType",{value:"MOM Contour"}),Object.defineProperty(i,"type",{value:"contour"}),i._validators=Object.create(null),i._validators.open=n.validateNumber,i._acceptedChildren=Object.create(null),i._acceptedChildren[t.prototype.type]=t,r}),define("Atem-MOM/MOM/_PenStrokeCenterChild",["./_Node","./validators"],function(e,t){"use strict";function n(){e.call(this),Object.freeze(this._children)}var r=n.prototype=Object.create(e.prototype);return r.constructor=n,r._validators=Object.create(null),r._validators.on=t.validateVector,r._validators["in"]=t.validateVector,r._validators.out=t.validateVector,r._validators.inLength=t.validateNumber,r._validators.outLength=t.validateNumber,r._validators.onLength=t.validateNumber,r._validators.inDir=t.validateNumber,r._validators.outDir=t.validateNumber,r._validators.onDir=t.validateNumber,r._validators.inDirIntrinsic=t.validateNumber,r._validators.outDirIntrinsic=t.validateNumber,r._validators.inTension=t.validateNumber,r._validators.outTension=t.validateNumber,r._validators.pointBefore=t.validateMOMSameType,r._validators.pointAfter=t.validateMOMSameType,n}),define("Atem-MOM/MOM/PenStrokeLeft",["./_PenStrokeCenterChild"],function(e){"use strict";function t(){e.call(this)}var n=t.prototype=Object.create(e.prototype);return n.constructor=t,Object.defineProperty(n,"MOMType",{value:"MOM PenStrokeLeft"}),Object.defineProperty(n,"type",{value:"left"}),t}),define("Atem-MOM/MOM/PenStrokeRight",["./_PenStrokeCenterChild"],function(e){"use strict";function t(){e.call(this)}var n=t.prototype=Object.create(e.prototype);return n.constructor=t,Object.defineProperty(n,"MOMType",{value:"MOM PenStrokeRight"}),Object.defineProperty(n,"type",{value:"right"}),t}),define("Atem-MOM/MOM/PenStrokeCenter",["./_Node","Atem-MOM/errors","./validators","./PenStrokeLeft","./PenStrokeRight"],function(e,t,n,r,i){"use strict";function o(){e.call(this),this.add(new r),this.add(new i),Object.freeze(this._children)}var a=t.Deprecated,s=o.prototype=Object.create(e.prototype);return s.constructor=o,s._cps_whitelist={left:"left",center:"center",right:"right"},function(e){for(var t in e)this.hasOwnProperty(t)||(this[t]=e[t])}.call(s._cps_whitelist,e.prototype._cps_whitelist),Object.defineProperty(s,"MOMType",{value:"MOM PenStrokeCenter"}),Object.defineProperty(s,"type",{value:"center"}),Object.defineProperty(s,"left",{get:function(){return this._children[0]}}),Object.defineProperty(s,"center",{get:function(){throw new a('What used to be the "center" property of this element is now equivalent with the element itself: '+this)}}),Object.defineProperty(s,"right",{get:function(){return this._children[1]}}),s._validators=Object.create(null),s._validators.on=n.validateVector,s._validators["in"]=n.validateVector,s._validators.out=n.validateVector,s._validators.inLength=n.validateNumber,s._validators.outLength=n.validateNumber,s._validators.inDir=n.validateNumber,s._validators.outDir=n.validateNumber,s._validators.inTension=n.validateNumber,s._validators.outTension=n.validateNumber,s._validators.pointBefore=n.validateMOMSameType,s._validators.pointAfter=n.validateMOMSameType,s._acceptedChildren=Object.create(null),s._acceptedChildren[r.prototype.type]=r,s._acceptedChildren[i.prototype.type]=i,o}),define("Atem-MOM/MOM/PenStroke",["./_Contour","./PenStrokeCenter"],function(e,t){"use strict";function n(){e.call(this)}var r=n.prototype=Object.create(e.prototype);return r.constructor=n,Object.defineProperty(r,"MOMType",{value:"MOM PenStroke"}),Object.defineProperty(r,"type",{value:"penstroke"}),r._acceptedChildren=Object.create(null),r._acceptedChildren[t.prototype.type]=t,n}),define("Atem-MOM/MOM/Glyph",["./_Node","./Component","./Contour","./PenStroke","./validators"],function(e,t,n,r,i){"use strict";function o(){e.call(this)}var a=o.prototype=Object.create(e.prototype);return a.constructor=o,Object.defineProperty(a,"idManager",{value:!0}),a._propertiesDependentOnParent=e.prototype._propertiesDependentOnParent.filter(function(e){return"glyph"!==e}),Object.defineProperty(a,"MOMType",{value:"MOM Glyph"}),Object.defineProperty(a,"type",{value:"glyph"}),a._validators=Object.create(null),a._validators.width=i.validateNumber,a._validators.height=i.validateNumber,a._acceptedChildren=Object.create(null),a._acceptedChildren[t.prototype.type]=t,a._acceptedChildren[n.prototype.type]=n,a._acceptedChildren[r.prototype.type]=r,a._interpolationCompatibilityTests=[function(e,t,n){return e instanceof o?!0:[!1,this+' "'+this.id+'": other item is not a Glyph: "'+e+'" (typeof '+typeof e+")."]},function(e,t,n){var r,i,o,a,s=!0,u=[],l=e.children;if(r=l.length-this._children.length,r&&(s=!1,u.push(this+' "'+this.id+'": '+(r>0?"too many":"too few")+" child elements ("+r+") in other glyph."),!t))return[s,u];for(o=Math.min(this._children.length,l.length),i=0;o>i&&(a=this._children[i].isInterpolationCompatible(l[i],t,n),a[0]||(u.push(this+' "'+this.id+'": incompatible child at index '+i+" â¦ "),Array.prototype.push.apply(u,a[1]),t));i++);return[s,u]}],o}),define("Atem-MOM/MOM/Master",["./_Node","./Glyph"],function(e,t){"use strict";function n(){e.call(this)}function r(e,t){var n=t.dumpData(!1,12);n&&(e[t.masterIndexPath]=n)}function i(e,t){var n=e[t.masterIndexPath];n&&t.loadData(n)}var o=n.prototype=Object.create(e.prototype);return o.constructor=n,Object.defineProperty(o,"idManager",{value:!0}),o._propertiesDependentOnParent=e.prototype._propertiesDependentOnParent.filter(function(e){return!(e in{glyph:1,master:1})}),Object.defineProperty(o,"MOMType",{value:"MOM Master"}),Object.defineProperty(o,"type",{value:"master"}),o.findGlyph=function(e){return this.getById(e)||null},Object.defineProperty(o,"particulars",{get:function(){return[this._parent?"":"(no parent)"," ",this.type,this.id?"#"+this.id:"",this._parent?":i("+this.index+")":""].join("")}}),o._acceptedChildren=Object.create(null),o._acceptedChildren[t.prototype.type]=t,o.dumpDataToDict=function(){var e=Object.create(null);return this.walkTreeDepthFirst(r.bind(null,e)),e},o.loadDataFromDict=function(e){this.walkTreeDepthFirst(i.bind(null,e))},o._interpolationCompatibilityTests=[function(e,t,r){return e instanceof n?!0:[!1,this+' "'+this.id+'": other item is not a Master: "'+e+'" (typeof '+typeof e+")."]},function(e,t,n){var r,i,o,a,s=Object.create(null),u=Object.create(null),l=e.children,c=[],h=!0,f=[],p=[];for(r=0,i=this._children.length;i>r;r++)s[this._children[r].id]=this._children[r];for(r=0,i=l.length;i>r;r++)u[l[r].id]=l[r];for(o in s)o in u||p.push(o);if(p.length&&(h=!1,c.push(this+' "'+this.id+'": missing glyphs in Master "'+e.id+'": '+p.join(", ")+".")),n){for(o in u)o in s||f.push(o);f.length&&(h=!1,c.push(this+' "'+this.id+'": excess glyphs in Master "'+e.id+'": '+f.join(", ")+"."))}if(!t&&!h)return[h,c];for(o in s)if(o in u){if(a=s[o].isInterpolationCompatible(u[o],t,n),a[0])continue;if(h=!1,Array.prototype.push.apply(c,a[1]),!t)break}return[h,c]}],n}),define("Atem-MOM/MOM/Univers",["./_Node","./Master"],function(e,t){"use strict";function n(){e.call(this)}var r=n.prototype=Object.create(e.prototype);return r.constructor=n,Object.defineProperty(r,"MOMType",{value:"MOM Univers"}),Object.defineProperty(r,"type",{value:"univers"}),r._propertiesDependentOnParent=e.prototype._propertiesDependentOnParent.filter(function(e){return!(e in{glyph:1,master:1,univers:1})}),r._acceptedChildren=Object.create(null),r._acceptedChildren[t.prototype.type]=t,n}),define("Atem-MOM/MOM/Multivers",["./_Node","Atem-CPS/OMA/_Root","./Univers"],function(e,t,n){"use strict";function r(t){e.call(this),this._controller=t}var i=r.prototype=Object.create(e.prototype);return i.constructor=r,Object.defineProperty(i,"MOMType",{value:"MOM Multivers"}),Object.defineProperty(i,"type",{value:"multivers"}),i._propertiesDependentOnParent=[],i._acceptedChildren=Object.create(null),i._acceptedChildren[n.prototype.type]=n,i.dumpWithoutMasters=function(e){var t=this.dumpData(e),n=this._dumpChildren("dumpData",[e]);return n&&(t||(t=Object.create(null)),t.children=n),t},function(e,t){var n,r,i,o,a=Object.getOwnPropertyNames(e);for(n=0,r=a.length;r>n;n++)i=a[n],t.hasOwnProperty(i)||(o=Object.getOwnPropertyDescriptor(e,i),Object.defineProperty(t,i,o))}(t.prototype,i),r}),define("Atem-Pen-Case/tools/decomposeSuperSegments",["Atem-Errors/errors"],function(e){"use strict";function t(e){var t,n,i,o,a,s,u,l=e.length-1,c=[],h=e[0],f=null,p=null;
for(r(l>1,"Expecting at least 3 Points here"),t=2;l>=t;t++)for(i=Math.min(t,3,l-t+2),n=1;i>n;n++)o=n/i,a=e[t-1],s=e[t-2],u=[s[0]+o*(a[0]-s[0]),s[1]+o*(a[1]-s[1])],null===f?f=u:(p=[.5*(f[0]+u[0]),.5*(f[1]+u[1])],c.push([h,f,p]),h=u,f=null,p=null);return c.push([h,e[e.length-2],e[e.length-1]]),c}function n(e){var t,n,i,o,a,s,u=e.length-1,l=[];for(r(u>0,"Expecting at least 2 Points here"),t=0;u-1>t;t++)n=e[t][0],i=e[t][1],o=e[t+1][0],a=e[t+1][1],s=[.5*(n+o),.5*(i+a)],l.push([e[t],s]);return l.push([e[e.length-2],e[e.length-1]]),l}var r=e.assert;return{decomposeSuperBezierSegment:t,decomposeQuadraticSegment:n}}),define("Atem-Pen-Case/pens/AbstractPen",["Atem-Errors/errors"],function(e){"use strict";function t(){}var n=e.NotImplemented,r=t.prototype;return r.moveTo=function(e){throw new n("AbstractPen has not implemented moveTo")},r.lineTo=function(e){throw new n("AbstractPen has not implemented lineTo")},r.curveTo=function(){throw new n("AbstractPen has not implemented curveTo")},r.qCurveTo=function(){throw new n("AbstractPen has not implemented qCurveTo")},r.closePath=function(){},r.endPath=function(){},r.addComponent=function(e,t){throw new n("AbstractPen has not implemented addComponent")},t}),define("Atem-Pen-Case/pens/TransformPen",["./AbstractPen","Atem-Math-Tools/transform"],function(e,t){"use strict";function n(e,t){t instanceof Array&&(t=new r(t)),this._transformation=t,this._transformPoint=function(e){return t.transformPoint(e)},this._outPen=e,this._stack=[]}var r=t.Transform,i=n.prototype=Object.create(e.prototype);return i.constructor=n,i.moveTo=function(e){this._outPen.moveTo(this._transformPoint(e))},i.lineTo=function(e){this._outPen.lineTo(this._transformPoint(e))},i.curveTo=function(){var e=[].slice.call(arguments);this._outPen.curveTo.apply(this._outPen,this._transformPoints(e))},i.qCurveTo=function(){var e=[].slice.call(arguments);null===e[e.length-1]?(e=this._transformPoints(e.slice(0,-1)),e.push(null)):e=this._transformPoints(e),this._outPen.qCurveTo.apply(this._outPen,e)},i._transformPoints=function(e){return e.map(this._transformPoint)},i.closePath=function(){this._outPen.closePath()},i.addComponent=function(e,t){t=this._transformation.transform(t),this._outPen.addComponent(e,t)},n}),define("Atem-Pen-Case/pens/BasePen",["Atem-Errors/errors","Atem-Pen-Case/tools/decomposeSuperSegments","./AbstractPen","./TransformPen"],function(e,t,n,r){"use strict";function i(e){this.glyphSet=e,this.__currentPoint=null}var o=e.NotImplemented,a=e.Assertion,s=t.decomposeSuperBezierSegment,u=t.decomposeQuadraticSegment,l=e.assert,c=i.prototype=Object.create(n.prototype);return c.constructor=i,c._moveTo=function(e,t){throw new o("implement _moveTo")},c._lineTo=function(e){throw new o("implement _lineTo")},c._curveToOne=function(e,t,n){throw new o("implement _curveToOne")},c._closePath=function(){},c._endPath=function(){},c._qCurveToOne=function(e,t){var n=this.__currentPoint[0],r=this.__currentPoint[1],i=e[0],o=e[1],a=t[0],s=t[1],u=n+.6666666666666666*(i-n),l=r+.6666666666666666*(o-r),c=a+.6666666666666666*(i-a),h=s+.6666666666666666*(o-s);this._curveToOne([u,l],[c,h],t)},c.addComponent=function(e,t,n){var i="function"==typeof this.glyphSet.get?this.glyphSet.get(e):this.glyphSet[e];if(void 0!==i){var o=new r(this,t);i.draw(!1,o)}},c._getCurrentPoint=function(){return this.__currentPoint},c.closePath=function(){this._closePath(),this.__currentPoint=null},c.endPath=function(){this._endPath(),this.__currentPoint=null},c.moveTo=function(e,t){this._moveTo.apply(this,arguments),this.__currentPoint=e},c.lineTo=function(e){this._lineTo(e),this.__currentPoint=e},c.curveTo=function(){var e=[].slice.call(arguments),t=e.length-1;if(l(t>=0,"curveTo needs at least one point"),2===t)this._curveToOne.apply(this,e),this.__currentPoint=e[e.length-1];else if(t>2){var n,r,i=this._curveToOne,o=s(e);for(r in o)n=o[r],i.apply(this,n),this.__currentPoint=n[2]}else if(1===t)this.qCurveTo.apply(this,e);else{if(0!==t)throw new a("curveTo() can't get there from here");this.lineTo(e[0])}},c.qCurveTo=function(){var e=[].slice.call(arguments),t=e.length-1;if(l(t>=0,"qCurveTo needs at least one point"),null===e[e.length-1]){var n=e[e.length-2][0],r=e[e.length-2][1],i=e[0][0],o=e[0][1],a=[.5*(n+i),.5*(r+o)];this.__currentPoint=a,this._moveTo(a),e.splice(-1,1,a)}if(t>0){var s,c,h=this._qCurveToOne,f=u(e);for(c in f)s=f[c],h.apply(this,s),this.__currentPoint=s[1]}else this.lineTo(e[0])},i}),define("Atem-MOM/import/ufo/SegmentPoint",["Atem-Math-Tools/Vector"],function(e){"use strict";function t(t,n,r,i){e.apply(this,t),this.smooth=n,this.name=r,this.kwargs=i||{}}t.factory=function(e,n,r,i){return new t(e,n,r,i)};var n=t.prototype=Object.create(e.prototype);return n.toString=function(){return"<SegmentPoint"+(this.name?" "+this.name:"")+" "+this.valueOf()+">"},t}),define("Atem-MOM/import/ufo/SegmentPen",["Atem-Pen-Case/pens/BasePen","Atem-MOM/errors","./SegmentPoint"],function(e,t,n){"use strict";function r(){this._currentContour=null,this.contours=[],e.apply(this,[{}].concat(arguments))}var i=r.prototype=Object.create(e.prototype);return i.constructor=r,i._PointConstructor=n,i._pointFactory=function(e){return e instanceof Array?new this._PointConstructor(e):e},i._newContour=function(e){t.assert(null===this._currentContour,"this._currentContour should be null"),this._currentContour={commands:[],type:"contour",closed:void 0,kwargs:e}},i._closeContour=function(){t.assert(null!==this._currentContour,"this._currentContour should NOT be null"),this.contours.push(this._currentContour),this._currentContour=null},i._endPath=function(){this._currentContour.closed=!1,this._closeContour()},i._closePath=function(){this._currentContour.closed=!0,this._closeContour()},i.flush=function(){var e=this.contours;return this.contours=[],this._currentContour=null,e},i._moveTo=function(e,t){this._newContour(t),e=this._pointFactory(e),this._currentContour.commands.push(["moveTo",e])},i._lineTo=function(e){e=this._pointFactory(e),this._currentContour.commands.push(["lineTo",e])},i._curveToOne=function(e,t,n){e=this._pointFactory(e),t=this._pointFactory(t),n=this._pointFactory(n),this._currentContour.commands.push(["curveTo",e,t,n])},i.addComponent=function(e,t,n){var r={type:"component",transformation:t,glyphName:e,kwargs:n};this.contours.push(r)},r}),define("Atem-MOM/import/ufo/ImportOutlinePen",["Atem-MOM/errors","Atem-Pen-Case/pens/BasePointToSegmentPen","./SegmentPoint"],function(e,t,n){"use strict";function r(e,n){t.call(this),this.pen=e,this.outputImpliedClosingLine=n||!1}var i=e.assert,o=r.prototype=Object.create(t.prototype);return o.constructor=r,o._flushContour=function(t,r){i(t.length>=1,"Less than one segment");var o,a,s,u,l,c,h,f,p=this.pen;if("move"==t[0][0])o=!1,a=t[0][1],i(1===a.length,"Points length is not 1"),s=a[0],u=[0],l=a[0][1],c=a[0][2],h=a[0][3],t.splice(0,1);else{o=!0;var d=t[t.length-1];f=d[0],a=d[1],s=a[a.length-1],u=s[0],l=s[1],c=s[2],h=s[3]}null===u||p.moveTo(new n(u,l,c,h),r);for(var m=this.outputImpliedClosingLine,g=t.length,v=0;g>v;v++){f=t[v][0],a=[];for(var y=0;y<t[v][1].length;y++)a.push(n.factory.apply(null,t[v][1][y]));if("line"==f){i(1===a.length,"Points length is not 1");var b=a[0];(v+1!=g||m||!o)&&p.lineTo(b)}else if("curve"==f)p.curveTo.apply(p,a);else{if("qcurve"!=f)throw new e.Type("illegal segmentType: "+f);p.qCurveTo.apply(p,a)}}o?p.closePath():p.endPath()},o.addComponent=function(e,t){this.pen.addComponent(e,t)},r}),define("Atem-MOM/import/ufo/tools",["./SegmentPoint"],function(e){"use strict";function t(t,n){var r,i,o=n["-"](t)["*"](.33333),a=["curveTo"];return r=new e(t["+"](o)),i=new e(n["-"](o)),a.push(r,i,n),a.wasLine=!0,a}function n(e,t){return e["+"](t)["*"](.5)}function r(e){var t={};return((e||"").match(/\S+/g)||[]).forEach(function(e){this[e]=null},t),t}function i(e,t){var n,i=r(e),o=r(t),a={};for(n in i)n in o?(a[n]=null,delete o[n]):a["left-"+n]=null;for(n in o)a["right-"+n]=null;return Object.keys(a).join(" ")||null}function o(t,r){return new e(n(t,r),void 0,i(t.name,r.name))}function a(e,t){for(var n=[e[0]],r=1;r<e.length;r++)n.push(o(e[r],t[r]));return n}function s(e,t,n,r,i,o){var a,s,u,l;a=t&&n?t?1===r?{out:!0}:{"in":!0}:1===r?{"in":!0}:{out:!0}:1===r?{out:!0,on:!0,"in":!0}:{"in":!0,on:!0,out:!0};for(s in a)if(u=i[s],l="out"===o?u["-"](e.on):e.on["-"](u),l.magnitude())return l.angle();return!1}return{line2curve:t,getCenter:n,getCenterPoint:o,getCenterSegment:a,getDirection:s}}),define("Atem-MOM/import/ufo/StrokeContour",["Atem-MOM/errors","./tools","Atem-Math-Tools/hobby"],function(e,t,n){"use strict";function r(e){this.length=0;var t,n=1,r=e.length-2,i=.5*(e.length-1),o=this._getTerminals(e);for(this._push([[void 0,o[0][1],e[r].slice(-1).pop()],[void 0,o[0][2],o[0][3]]]);i>n;n++,r--)t=e[r].slice(1,-1).reverse(),t.push(e[r-1].slice(-1).pop()),this._push([t,e[n].slice(1)]);this._push([[o[1][2],void 0,void 0],[o[1][1],void 0,void 0]])}function i(e,t){return t[e]}function o(e,t,n,r){e[r][t]=n}function a(e,t,n,r,i){for(var o,a,s="out"===i?1:-1,u=s,l=t,c=n,h=!0;;){if(o=l===t&&!h,a=p(r,h,o,u,e[l][c],i),h=!1,a!==!1||o)return a;"z"===n?1===u&&l===e.length-1?l=0:-1===u&&0===l?l=e.length-1:l+=u:(u=c===n?s:-1*s,1===u&&l===e.length-1||-1===u&&0===l?(c="l"===n?"r":"l",u=-1*u):l+=u)}}function s(e,t,n,r,i){var o,s,u;if(o=n.out["-"](n.on),n.outLength=o.magnitude(),u=a(e,r,t,n,"out"),u===!1)throw new c("can't find a outgoing direction for point["+r+"]."+t);if(n.outDir=u,s=n.on["-"](n["in"]),n.inLength=s.magnitude(),u=a(e,r,t,n,"in"),u===!1)throw new c("can't find a incoming direction for point["+r+"]."+t);return n.inDir=u,n}function u(e,t,r,i,o){var a,s,u=r[t];i!==o.length-1&&(a=o[i+1][t],s=n.magnitude2tension(u.on,u.outDir,u.outLength,a.inLength,a.inDir,a.on),u.outTension=s[0],a.inTension=s[1]),0===i&&"l"===t?(a=r.r,s=n.magnitude2tension(u.on,u.inDir+Math.PI,u.inLength,a.inLength,a.inDir,a.on),u.inTension=s[0],a.inTension=s[1]):i===o.length-1&&"r"===t&&(a=r.l,s=n.magnitude2tension(u.on,u.outDir,u.outLength,a.outLength,a.outDir+Math.PI,a.on),u.outTension=s[0],a.outTension=s[1])}var l=e.Assertion,c=e.ImportPenstroke,h=t.line2curve,f=t.getCenterPoint,p=t.getDirection,d=r.prototype;return d.constructor=r,d._getTerminals=function(e){var t=e.length-1,n=.5*(e.length-1),r=e[t],i=e[n];return"curveTo"!==r[0]&&(r=h(e[t-1].slice(-1).pop(),r[1])),"curveTo"!==i[0]&&(i=h(e[n-1].slice(-1).pop(),i[1])),[r,i]},d._push=function(){for(var e,t,n,r=Array.prototype.slice.apply(arguments),i=0;i<r.length;i++){for(t=[],e=0;2>e;e++){if(1===r[i][e].length)n=h(this[this.length-1][e].slice(-1).pop(),r[i][e][0]),n.shift();else{if(3!==r[i][e].length)throw new l("A segment is expected to  have 3 items at this stage, but this has "+r[i][e].length+" items. Segment: "+r[i][e].join(", "));n=r[i][e]}t.push(n)}Array.prototype.push.call(this,t)}},d._getMetapolatorPoint=function(e){var t,n=0,r=1;return t={l:{"in":this[e][n][1],on:this[e][n][2],out:this[e+1][n][0],wasLine:!!this[e][n].wasLine},r:{"in":this[e][r][1],on:this[e][r][2],out:this[e+1][r][0],wasLine:!!this[e][r].wasLine},z:{}},t.z.on=f(t.l.on,t.r.on),t.z["in"]=f(t.l["in"],t.r["in"]),t.z.out=f(t.l.out,t.r.out),t.z.wasLine=t.l.wasLine&&t.r.wasLine,t},d._getPenStroke=function(){var e,t=this.length-1,n=[];for(e=0;t>e;e++)n.push(this._getMetapolatorPoint(e));return n},d.getPenStroke=function(){var e=this._getPenStroke();return e.map(i.bind(null,"l")).map(s.bind(null,e,"l")).forEach(o.bind(null,e,"l")),e.map(i.bind(null,"r")).map(s.bind(null,e,"r")).forEach(o.bind(null,e,"r")),e.map(i.bind(null,"z")).map(s.bind(null,e,"z")).forEach(o.bind(null,e,"z")),e.forEach(u.bind(null,e,"l")),e.forEach(u.bind(null,e,"r")),e},r}),define("Atem-MOM/import/ufo/contourFromContour",["Atem-MOM/errors","./tools"],function(e,t){"use strict";function n(e){var t,n,r,i=[];for(n=e.length-1,t=0;t<e.length;t++){if(4===e[t].length)r=e[t];else{if(2!==e[t].length)throw new s("A segment is expected to  have 3 items at this stage, but this has "+e[t].length+" items. Segment: "+e[t].join(", "));r=l(e[n].slice(-1).pop(),e[t][1])}r.shift(),i.push(r),n=t}return i}function r(e,t,n){var r=t===n.length-1?0:t+1;return{"in":e[1],on:e[2],out:n[r][0],wasLine:!!e.wasLine}}function i(e,t,n,r){for(var i,o,a="out"===r?1:-1,s=a,u=t,l=!0;;){if(i=u===t&&!l,o=c(n,l,i,s,e[u],r),l=!1,o!==!1||i)return o;1===s&&u===e.length-1?u=0:-1===s&&0===u?u=e.length-1:u+=s}}function o(e,t,n){var r,o,a;if(r=e.out["-"](e.on),e.outLength=r.magnitude(),a=i(n,t,e,"out"),a===!1)throw new u("Can't find an outgoing direction for point at contour["+t+"].");if(e.outDir=a,o=e.on["-"](e["in"]),e.inLength=o.magnitude(),a=i(n,t,e,"in"),a===!1)throw new u("can't find an incoming direction for point at contour["+t+"].");return e.inDir=a,e}function a(e){return n(e).map(r).map(o)}var s=e.Assertion,u=e.ImportContour,l=t.line2curve,c=t.getDirection;return a}),define("Atem-MOM/timer",[],function(){var e;if("undefined"!=typeof performance)e=function(){return{now:function(){return performance.now()}}};else{if("undefined"==typeof process)throw new Error("No timer implementation is available.");e=function(){return{now:function(){var e=process.hrtime();return 1e3*e[0]+1e-6*e[1]}}}}return e}()),define("Atem-Pen-Case/pens/OpenTypePen",["./BasePen"],function(e){"use strict";function t(t,n){e.call(this,n),this.path=t}var n=t.prototype=Object.create(e.prototype);return n._moveTo=function(e){this.path.moveTo(e[0],e[1])},n._lineTo=function(e){this.path.lineTo(e[0],e[1])},n._curveToOne=function(e,t,n){this.path.curveTo(e[0],e[1],t[0],t[1],n[0],n[1])},n.getPath=function(){return this.path},t}),define("Atem-Pen-Case/tools/arrayTools",[],function(){"use strict";function e(e){if(!e.length)return[0,0,0,0];var t,n,r=[],i=[];for(t=0,n=e.length;n>t;t++)r.push(e[t][0]),i.push(e[t][1]);return[Math.min.apply(null,r),Math.min.apply(null,i),Math.max.apply(null,r),Math.max.apply(null,i)]}function t(e,t){var n=e[0],r=e[1],i=e[2],o=e[3],a=t[0],s=t[1];return n>a&&(n=a),a>i&&(i=a),r>s&&(r=s),s>o&&(o=s),[n,r,i,o]}function n(e,t){var n=e[0],r=e[1],i=t[0],o=t[1],a=t[2],s=t[3];return n>=i&&a>=n&&r>=o&&s>=r}function r(e,t){var n=Math.min(e[0],t[0]),r=Math.min(e[1],t[1]),i=Math.max(e[2],t[2]),o=Math.max(e[3],t[3]);return[n,r,i,o]}return{calcBounds:e,updateBounds:t,pointInRect:n,unionRect:r}}),define("Atem-Pen-Case/pens/ControlBoundsPen",["./BasePen","Atem-Pen-Case/tools/arrayTools"],function(e,t){"use strict";function n(t){e.call(this,t),this.bounds=void 0,this._start=void 0}var r=t.updateBounds,i=n.prototype=Object.create(e.prototype);return i.constructor=n,i._moveTo=function(e,t){this._start=e},i._addMoveTo=function(){if(void 0!==this._start){if(this.bounds)this.bounds=r(this.bounds,this._start);else{var e=this._start[0],t=this._start[1];this.bounds=[e,t,e,t]}this._start=void 0}},i._lineTo=function(e){this._addMoveTo(),this.bounds=r(this.bounds,e)},i._curveToOne=function(e,t,n){this._addMoveTo(),this.bounds=r(this.bounds,e),this.bounds=r(this.bounds,t),this.bounds=r(this.bounds,n)},i._qCurveToOne=function(e,t){this._addMoveTo(),this.bounds=r(this.bounds,e),this.bounds=r(this.bounds,t)},n}),define("Atem-Pen-Case/tools/bezierTools",["./arrayTools"],function(e){"use strict";function t(e,t,n,r){var i,o,s,u=r||Math.sqrt;return Math.abs(e)<a?i=Math.abs(t)<a?[]:[-n/t]:(o=t*t-4*e*n,o>=0?(s=u(o),i=[(-t+s)/2/e,(-t-s)/2/e]):i=[]),i}function n(e,t,n){var r=t[0],i=t[1],o=n[0],a=n[1],s=e[0],u=e[1],l=2*(r-s),c=2*(i-u),h=o-s-l,f=a-u-c;return[[h,f],[l,c],[s,u]]}function r(e,t,n,r){var i=t[0],o=t[1],a=n[0],s=n[1],u=r[0],l=r[1],c=e[0],h=e[1],f=3*(i-c),p=3*(o-h),d=3*(a-i)-f,m=3*(s-o)-p,g=u-c-f-d,v=l-h-p-m;return[[g,v],[d,m],[f,p],[c,h]]}function i(e,t,r){var i,o=n(e,t,r),a=o[0],u=o[1],l=o[2],c=o[3],h=o[4],f=o[5],p=2*a,d=2*u,m=[],g=[];for(0!==p&&g.push(-l/p),0!==d&&g.push(-c/d);void 0!==(i=g.pop());)i>=0&&1>i&&m.push([a*i*i+l*i+h,u*i*i+c*i+f]);return m.push(e,r),s(m)}function o(e,n,i,o){var a,u,l,c=r(e,n,i,o),h=c[0],f=c[1],p=c[2],d=c[3],m=c[4],g=c[5],v=c[6],y=c[7],b=3*h,_=3*f,w=2*p,x=2*d,S=[],C=[];for(C=[].concat(t(b,w,m),t(_,x,g)),a=0,u=C.length;u>a;a++)l=C[a],l>=0&&1>l&&S.push([h*l*l*l+p*l*l+m*l+v,f*l*l*l+d*l*l+g*l+y]);return S.push(e,o),s(S)}var a=1e-12,s=e.calcBounds;return{calcQuadraticBounds:i,calcCubicBounds:o,solveQuadratic:t}}),define("Atem-Pen-Case/pens/BoundsPen",["./ControlBoundsPen","Atem-Pen-Case/tools/arrayTools","Atem-Pen-Case/tools/bezierTools"],function(e,t,n){"use strict";function r(t){e.call(this,t),this.bounds=void 0,this._start=void 0}var i=t.updateBounds,o=t.pointInRect,a=t.unionRect,s=n.calcCubicBounds,u=n.calcQuadraticBounds,l=r.prototype=Object.create(e.prototype);return l.constructor=r,l._curveToOne=function(e,t,n){this._addMoveTo(),this.bounds=i(this.bounds,n),o(e,this.bounds)&&o(t,this.bounds)||(this.bounds=a(this.bounds,s(this._getCurrentPoint(),e,t,n)))},l._qCurveToOne=function(e,t){this._addMoveTo(),this.bounds=i(this.bounds,t),o(e,this.bounds)||(this.bounds=a(this.bounds,u(this._getCurrentPoint(),e,t)))},l.getBounds=function(){return this.bounds},r}),function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define("opentype",[],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.opentype=e()}}(function(){return function e(t,n,r){function i(a,s){if(!n[a]){if(!t[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(o)return o(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[a]={exports:{}};t[a][0].call(c.exports,function(e){var n=t[a][1][e];return i(n?n:e)},c,c.exports,e,t,n,r)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(e,t,n){function r(){this.table=new Uint16Array(16),this.trans=new Uint16Array(288)}function i(e,t){this.source=e,this.sourceIndex=0,this.tag=0,this.bitcount=0,this.dest=t,this.destLen=0,this.ltree=new r,this.dtree=new r}function o(e,t,n,r){var i,o;for(i=0;n>i;++i)e[i]=0;for(i=0;30-n>i;++i)e[i+n]=i/n|0;for(o=r,i=0;30>i;++i)t[i]=o,o+=1<<e[i]}function a(e,t){var n;for(n=0;7>n;++n)e.table[n]=0;for(e.table[7]=24,e.table[8]=152,e.table[9]=112,n=0;24>n;++n)e.trans[n]=256+n;for(n=0;144>n;++n)e.trans[24+n]=n;for(n=0;8>n;++n)e.trans[168+n]=280+n;for(n=0;112>n;++n)e.trans[176+n]=144+n;for(n=0;5>n;++n)t.table[n]=0;for(t.table[5]=32,n=0;32>n;++n)t.trans[n]=n}function s(e,t,n,r){var i,o;for(i=0;16>i;++i)e.table[i]=0;for(i=0;r>i;++i)e.table[t[n+i]]++;for(e.table[0]=0,o=0,i=0;16>i;++i)P[i]=o,o+=e.table[i];for(i=0;r>i;++i)t[n+i]&&(e.trans[P[t[n+i]]++]=i)}function u(e){e.bitcount--||(e.tag=e.source[e.sourceIndex++],e.bitcount=7);var t=1&e.tag;return e.tag>>>=1,t}function l(e,t,n){if(!t)return n;for(;e.bitcount<24;)e.tag|=e.source[e.sourceIndex++]<<e.bitcount,e.bitcount+=8;var r=e.tag&65535>>>16-t;return e.tag>>>=t,e.bitcount-=t,r+n}function c(e,t){for(;e.bitcount<24;)e.tag|=e.source[e.sourceIndex++]<<e.bitcount,e.bitcount+=8;var n=0,r=0,i=0,o=e.tag;do r=2*r+(1&o),o>>>=1,++i,n+=t.table[i],r-=t.table[i];while(r>=0);return e.tag=o,e.bitcount-=i,t.trans[n+r]}function h(e,t,n){var r,i,o,a,u,h;for(r=l(e,5,257),i=l(e,5,1),o=l(e,4,4),a=0;19>a;++a)k[a]=0;for(a=0;o>a;++a){var f=l(e,3,0);k[S[a]]=f}for(s(C,k,0,19),u=0;r+i>u;){var p=c(e,C);switch(p){case 16:var d=k[u-1];for(h=l(e,2,3);h;--h)k[u++]=d;break;case 17:for(h=l(e,3,3);h;--h)k[u++]=0;break;case 18:for(h=l(e,7,11);h;--h)k[u++]=0;break;default:k[u++]=p}}s(t,k,0,r),s(n,k,r,i)}function f(e,t,n){for(;;){var r=c(e,t);if(256===r)return m;if(256>r)e.dest[e.destLen++]=r;else{var i,o,a,s;for(r-=257,i=l(e,b[r],_[r]),o=c(e,n),a=e.destLen-l(e,w[o],x[o]),s=a;a+i>s;++s)e.dest[e.destLen++]=e.dest[s]}}}function p(e){for(var t,n,r;e.bitcount>8;)e.sourceIndex--,e.bitcount-=8;if(t=e.source[e.sourceIndex+1],t=256*t+e.source[e.sourceIndex],n=e.source[e.sourceIndex+3],n=256*n+e.source[e.sourceIndex+2],t!==(65535&~n))return g;for(e.sourceIndex+=4,r=t;r;--r)e.dest[e.destLen++]=e.source[e.sourceIndex++];return e.bitcount=0,m}function d(e,t){var n,r,o=new i(e,t);do{switch(n=u(o),btype=l(o,2,0)){case 0:r=p(o);break;case 1:r=f(o,v,y);break;case 2:h(o,o.ltree,o.dtree),r=f(o,o.ltree,o.dtree);break;default:r=g}if(r!==m)throw new Error("Data error")}while(!n);return o.destLen<o.dest.length?"function"==typeof o.dest.slice?o.dest.slice(0,o.destLen):o.dest.subarray(0,o.destLen):o.dest}var m=0,g=-3,v=new r,y=new r,b=new Uint8Array(30),_=new Uint16Array(30),w=new Uint8Array(30),x=new Uint16Array(30),S=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),C=new r,k=new Uint8Array(320),P=new Uint16Array(16);a(v,y),o(b,_,4,3),o(w,x,2,1),b[28]=0,_[28]=258,t.exports=d},{}],2:[function(e,t,n){"use strict";n.argument=function(e,t){if(!e)throw new Error(t)},n.assert=n.argument},{}],3:[function(e,t,n){"use strict";function r(e,t,n,r,i){e.beginPath(),e.moveTo(t,n),e.lineTo(r,i),e.stroke()}n.line=r},{}],4:[function(e,t,n){"use strict";function r(e){this.font=e}function i(e){this.cmap=e}function o(e,t){this.encoding=e,this.charset=t}function a(e){var t;switch(e.version){case 1:this.names=n.standardNames.slice();break;case 2:for(this.names=new Array(e.numberOfGlyphs),t=0;t<e.numberOfGlyphs;t++)this.names[t]=e.glyphNameIndex[t]<n.standardNames.length?n.standardNames[e.glyphNameIndex[t]]:e.names[e.glyphNameIndex[t]-n.standardNames.length];break;case 2.5:for(this.names=new Array(e.numberOfGlyphs),t=0;t<e.numberOfGlyphs;t++)this.names[t]=n.standardNames[t+e.glyphNameIndex[t]];break;case 3:this.names=[]}}function s(e){for(var t,n=e.tables.cmap.glyphIndexMap,r=Object.keys(n),i=0;i<r.length;i+=1){var o=r[i],a=n[o];t=e.glyphs.get(a),t.addUnicode(parseInt(o))}for(i=0;i<e.glyphs.length;i+=1)t=e.glyphs.get(i),t.name=e.cffEncoding?e.cffEncoding.charset[i]:e.glyphNames.glyphIndexToName(i)}var u=[".notdef","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","endash","dagger","daggerdbl","periodcentered","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","questiondown","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","ring","cedilla","hungarumlaut","ogonek","caron","emdash","AE","ordfeminine","Lslash","Oslash","OE","ordmasculine","ae","dotlessi","lslash","oslash","oe","germandbls","onesuperior","logicalnot","mu","trademark","Eth","onehalf","plusminus","Thorn","onequarter","divide","brokenbar","degree","thorn","threequarters","twosuperior","registered","minus","eth","multiply","threesuperior","copyright","Aacute","Acircumflex","Adieresis","Agrave","Aring","Atilde","Ccedilla","Eacute","Ecircumflex","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Ntilde","Oacute","Ocircumflex","Odieresis","Ograve","Otilde","Scaron","Uacute","Ucircumflex","Udieresis","Ugrave","Yacute","Ydieresis","Zcaron","aacute","acircumflex","adieresis","agrave","aring","atilde","ccedilla","eacute","ecircumflex","edieresis","egrave","iacute","icircumflex","idieresis","igrave","ntilde","oacute","ocircumflex","odieresis","ograve","otilde","scaron","uacute","ucircumflex","udieresis","ugrave","yacute","ydieresis","zcaron","exclamsmall","Hungarumlautsmall","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","266 ff","onedotenleader","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","commasuperior","threequartersemdash","periodsuperior","questionsmall","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","ffi","ffl","parenleftinferior","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","exclamdownsmall","centoldstyle","Lslashsmall","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","Dotaccentsmall","Macronsmall","figuredash","hypheninferior","Ogoneksmall","Ringsmall","Cedillasmall","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall","001.000","001.001","001.002","001.003","Black","Bold","Book","Light","Medium","Regular","Roman","Semibold"],l=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","","endash","dagger","daggerdbl","periodcentered","","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","","questiondown","","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","","ring","cedilla","","hungarumlaut","ogonek","caron","emdash","","","","","","","","","","","","","","","","","AE","","ordfeminine","","","","","Lslash","Oslash","OE","ordmasculine","","","","","","ae","","","","dotlessi","","","lslash","oslash","oe","germandbls"],c=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclamsmall","Hungarumlautsmall","","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","questionsmall","","asuperior","bsuperior","centsuperior","dsuperior","esuperior","","","isuperior","","","lsuperior","msuperior","nsuperior","osuperior","","","rsuperior","ssuperior","tsuperior","","ff","fi","fl","ffi","ffl","parenleftinferior","","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdownsmall","centoldstyle","Lslashsmall","","","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","","Dotaccentsmall","","","Macronsmall","","","figuredash","hypheninferior","","","Ogoneksmall","Ringsmall","Cedillasmall","","","","onequarter","onehalf","threequarters","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","","","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall"],h=[".notdef",".null","nonmarkingreturn","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quotesingle","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","grave","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","Adieresis","Aring","Ccedilla","Eacute","Ntilde","Odieresis","Udieresis","aacute","agrave","acircumflex","adieresis","atilde","aring","ccedilla","eacute","egrave","ecircumflex","edieresis","iacute","igrave","icircumflex","idieresis","ntilde","oacute","ograve","ocircumflex","odieresis","otilde","uacute","ugrave","ucircumflex","udieresis","dagger","degree","cent","sterling","section","bullet","paragraph","germandbls","registered","copyright","trademark","acute","dieresis","notequal","AE","Oslash","infinity","plusminus","lessequal","greaterequal","yen","mu","partialdiff","summation","product","pi","integral","ordfeminine","ordmasculine","Omega","ae","oslash","questiondown","exclamdown","logicalnot","radical","florin","approxequal","Delta","guillemotleft","guillemotright","ellipsis","nonbreakingspace","Agrave","Atilde","Otilde","OE","oe","endash","emdash","quotedblleft","quotedblright","quoteleft","quoteright","divide","lozenge","ydieresis","Ydieresis","fraction","currency","guilsinglleft","guilsinglright","fi","fl","daggerdbl","periodcentered","quotesinglbase","quotedblbase","perthousand","Acircumflex","Ecircumflex","Aacute","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Oacute","Ocircumflex","apple","Ograve","Uacute","Ucircumflex","Ugrave","dotlessi","circumflex","tilde","macron","breve","dotaccent","ring","cedilla","hungarumlaut","ogonek","caron","Lslash","lslash","Scaron","scaron","Zcaron","zcaron","brokenbar","Eth","eth","Yacute","yacute","Thorn","thorn","minus","multiply","onesuperior","twosuperior","threesuperior","onehalf","onequarter","threequarters","franc","Gbreve","gbreve","Idotaccent","Scedilla","scedilla","Cacute","cacute","Ccaron","ccaron","dcroat"];
r.prototype.charToGlyphIndex=function(e){var t=e.charCodeAt(0),n=this.font.glyphs;if(!n)return null;for(var r=0;r<n.length;r+=1)for(var i=n.get(r),o=0;o<i.unicodes.length;o+=1)if(i.unicodes[o]===t)return r},i.prototype.charToGlyphIndex=function(e){return this.cmap.glyphIndexMap[e.charCodeAt(0)]||0},o.prototype.charToGlyphIndex=function(e){var t=e.charCodeAt(0),n=this.encoding[t];return this.charset.indexOf(n)},a.prototype.nameToGlyphIndex=function(e){return this.names.indexOf(e)},a.prototype.glyphIndexToName=function(e){return this.names[e]},n.cffStandardStrings=u,n.cffStandardEncoding=l,n.cffExpertEncoding=c,n.standardNames=h,n.DefaultEncoding=r,n.CmapEncoding=i,n.CffEncoding=o,n.GlyphNames=a,n.addGlyphNames=s},{}],5:[function(e,t,n){"use strict";function r(e){e=e||{},e.empty||(u.checkArgument(e.familyName,"When creating a new Font object, familyName is required."),u.checkArgument(e.styleName,"When creating a new Font object, styleName is required."),u.checkArgument(e.unitsPerEm,"When creating a new Font object, unitsPerEm is required."),u.checkArgument(e.ascender,"When creating a new Font object, ascender is required."),u.checkArgument(e.descender,"When creating a new Font object, descender is required."),u.checkArgument(e.descender<0,"Descender should be negative (e.g. -512)."),this.names={fontFamily:{en:e.familyName||" "},fontSubfamily:{en:e.styleName||" "},fullName:{en:e.fullName||e.familyName+" "+e.styleName},postScriptName:{en:e.postScriptName||e.familyName+e.styleName},designer:{en:e.designer||" "},designerURL:{en:e.designerURL||" "},manufacturer:{en:e.manufacturer||" "},manufacturerURL:{en:e.manufacturerURL||" "},license:{en:e.license||" "},licenseURL:{en:e.licenseURL||" "},version:{en:e.version||"Version 0.1"},description:{en:e.description||" "},copyright:{en:e.copyright||" "},trademark:{en:e.trademark||" "}},this.unitsPerEm=e.unitsPerEm||1e3,this.ascender=e.ascender,this.descender=e.descender),this.supported=!0,this.glyphs=new s.GlyphSet(this,e.glyphs||[]),this.encoding=new a.DefaultEncoding(this),this.tables={}}var i=e("./path"),o=e("./tables/sfnt"),a=e("./encoding"),s=e("./glyphset"),u=e("./util");r.prototype.hasChar=function(e){return null!==this.encoding.charToGlyphIndex(e)},r.prototype.charToGlyphIndex=function(e){return this.encoding.charToGlyphIndex(e)},r.prototype.charToGlyph=function(e){var t=this.charToGlyphIndex(e),n=this.glyphs.get(t);return n||(n=this.glyphs.get(0)),n},r.prototype.stringToGlyphs=function(e){for(var t=[],n=0;n<e.length;n+=1){var r=e[n];t.push(this.charToGlyph(r))}return t},r.prototype.nameToGlyphIndex=function(e){return this.glyphNames.nameToGlyphIndex(e)},r.prototype.nameToGlyph=function(e){var t=this.nametoGlyphIndex(e),n=this.glyphs.get(t);return n||(n=this.glyphs.get(0)),n},r.prototype.glyphIndexToName=function(e){return this.glyphNames.glyphIndexToName?this.glyphNames.glyphIndexToName(e):""},r.prototype.getKerningValue=function(e,t){e=e.index||e,t=t.index||t;var n=this.getGposKerningValue;return n?n(e,t):this.kerningPairs[e+","+t]||0},r.prototype.forEachGlyph=function(e,t,n,r,i,o){t=void 0!==t?t:0,n=void 0!==n?n:0,r=void 0!==r?r:72,i=i||{};for(var a=void 0===i.kerning?!0:i.kerning,s=1/this.unitsPerEm*r,u=this.stringToGlyphs(e),l=0;l<u.length;l+=1){var c=u[l];if(o(c,t,n,r,i),c.advanceWidth&&(t+=c.advanceWidth*s),a&&l<u.length-1){var h=this.getKerningValue(c,u[l+1]);t+=h*s}}},r.prototype.getPath=function(e,t,n,r,o){var a=new i.Path;return this.forEachGlyph(e,t,n,r,o,function(e,t,n,r){var i=e.getPath(t,n,r);a.extend(i)}),a},r.prototype.getPaths=function(e,t,n,r,i){var o=[];return this.forEachGlyph(e,t,n,r,i,function(e,t,n,r){var i=e.getPath(t,n,r);o.push(i)}),o},r.prototype.draw=function(e,t,n,r,i,o){this.getPath(t,n,r,i,o).draw(e)},r.prototype.drawPoints=function(e,t,n,r,i,o){this.forEachGlyph(t,n,r,i,o,function(t,n,r,i){t.drawPoints(e,n,r,i)})},r.prototype.drawMetrics=function(e,t,n,r,i,o){this.forEachGlyph(t,n,r,i,o,function(t,n,r,i){t.drawMetrics(e,n,r,i)})},r.prototype.getEnglishName=function(e){var t=this.names[e];return t?t.en:void 0},r.prototype.validate=function(){function e(e,t){e||n.push(t)}function t(t){var n=r.getEnglishName(t);e(n&&n.trim().length>0,"No English "+t+" specified.")}var n=[],r=this;t("fontFamily"),t("weightName"),t("manufacturer"),t("copyright"),t("version"),e(this.unitsPerEm>0,"No unitsPerEm specified.")},r.prototype.toTables=function(){return o.fontToTable(this)},r.prototype.toBuffer=function(){return console.warn("Font.toBuffer is deprecated. Use Font.toArrayBuffer instead."),this.toArrayBuffer()},r.prototype.toArrayBuffer=function(){for(var e=this.toTables(),t=e.encode(),n=new ArrayBuffer(t.length),r=new Uint8Array(n),i=0;i<t.length;i++)r[i]=t[i];return n},r.prototype.download=function(){var t=this.getEnglishName("fontFamily"),n=this.getEnglishName("fontSubfamily"),r=t.replace(/\s/g,"")+"-"+n+".otf",i=this.toArrayBuffer();if(u.isBrowser())window.requestFileSystem=window.requestFileSystem||window.webkitRequestFileSystem,window.requestFileSystem(window.TEMPORARY,i.byteLength,function(e){e.root.getFile(r,{create:!0},function(e){e.createWriter(function(t){var n=new DataView(i),r=new Blob([n],{type:"font/opentype"});t.write(r),t.addEventListener("writeend",function(){location.href=e.toURL()},!1)})})},function(e){throw e});else{var o=e("fs"),a=u.arrayBufferToNodeBuffer(i);o.writeFileSync(r,a)}},n.Font=r},{"./encoding":4,"./glyphset":7,"./path":10,"./tables/sfnt":27,"./util":29,fs:void 0}],6:[function(e,t,n){"use strict";function r(e,t){var n=t||{commands:[]};return{configurable:!0,get:function(){return"function"==typeof n&&(n=n()),n},set:function(e){n=e}}}function i(e){this.bindConstructorValues(e)}var o=e("./check"),a=e("./draw"),s=e("./path");i.prototype.bindConstructorValues=function(e){this.index=e.index||0,this.name=e.name||null,this.unicode=e.unicode||void 0,this.unicodes=e.unicodes||void 0!==e.unicode?[e.unicode]:[],e.xMin&&(this.xMin=e.xMin),e.yMin&&(this.yMin=e.yMin),e.xMax&&(this.xMax=e.xMax),e.yMax&&(this.yMax=e.yMax),e.advanceWidth&&(this.advanceWidth=e.advanceWidth),Object.defineProperty(this,"path",r(this,e.path))},i.prototype.addUnicode=function(e){0===this.unicodes.length&&(this.unicode=e),this.unicodes.push(e)},i.prototype.getPath=function(e,t,n){e=void 0!==e?e:0,t=void 0!==t?t:0,n=void 0!==n?n:72;for(var r=1/this.path.unitsPerEm*n,i=new s.Path,o=this.path.commands,a=0;a<o.length;a+=1){var u=o[a];"M"===u.type?i.moveTo(e+u.x*r,t+-u.y*r):"L"===u.type?i.lineTo(e+u.x*r,t+-u.y*r):"Q"===u.type?i.quadraticCurveTo(e+u.x1*r,t+-u.y1*r,e+u.x*r,t+-u.y*r):"C"===u.type?i.curveTo(e+u.x1*r,t+-u.y1*r,e+u.x2*r,t+-u.y2*r,e+u.x*r,t+-u.y*r):"Z"===u.type&&i.closePath()}return i},i.prototype.getContours=function(){if(void 0===this.points)return[];for(var e=[],t=[],n=0;n<this.points.length;n+=1){var r=this.points[n];t.push(r),r.lastPointOfContour&&(e.push(t),t=[])}return o.argument(0===t.length,"There are still points left in the current contour."),e},i.prototype.getMetrics=function(){for(var e=this.path.commands,t=[],n=[],r=0;r<e.length;r+=1){var i=e[r];"Z"!==i.type&&(t.push(i.x),n.push(i.y)),("Q"===i.type||"C"===i.type)&&(t.push(i.x1),n.push(i.y1)),"C"===i.type&&(t.push(i.x2),n.push(i.y2))}var o={xMin:Math.min.apply(null,t),yMin:Math.min.apply(null,n),xMax:Math.max.apply(null,t),yMax:Math.max.apply(null,n),leftSideBearing:this.leftSideBearing};return isFinite(o.xMin)||(o.xMin=0),isFinite(o.xMax)||(o.xMax=this.advanceWidth),isFinite(o.yMin)||(o.yMin=0),isFinite(o.yMax)||(o.yMax=0),o.rightSideBearing=this.advanceWidth-o.leftSideBearing-(o.xMax-o.xMin),o},i.prototype.draw=function(e,t,n,r){this.getPath(t,n,r).draw(e)},i.prototype.drawPoints=function(e,t,n,r){function i(t,n,r,i){var o=2*Math.PI;e.beginPath();for(var a=0;a<t.length;a+=1)e.moveTo(n+t[a].x*i,r+t[a].y*i),e.arc(n+t[a].x*i,r+t[a].y*i,2,0,o,!1);e.closePath(),e.fill()}t=void 0!==t?t:0,n=void 0!==n?n:0,r=void 0!==r?r:24;for(var o=1/this.path.unitsPerEm*r,a=[],s=[],u=this.path,l=0;l<u.commands.length;l+=1){var c=u.commands[l];void 0!==c.x&&a.push({x:c.x,y:-c.y}),void 0!==c.x1&&s.push({x:c.x1,y:-c.y1}),void 0!==c.x2&&s.push({x:c.x2,y:-c.y2})}e.fillStyle="blue",i(a,t,n,o),e.fillStyle="red",i(s,t,n,o)},i.prototype.drawMetrics=function(e,t,n,r){var i;t=void 0!==t?t:0,n=void 0!==n?n:0,r=void 0!==r?r:24,i=1/this.path.unitsPerEm*r,e.lineWidth=1,e.strokeStyle="black",a.line(e,t,-1e4,t,1e4),a.line(e,-1e4,n,1e4,n);var o=this.xMin||0,s=this.yMin||0,u=this.xMax||0,l=this.yMax||0,c=this.advanceWidth||0;e.strokeStyle="blue",a.line(e,t+o*i,-1e4,t+o*i,1e4),a.line(e,t+u*i,-1e4,t+u*i,1e4),a.line(e,-1e4,n+-s*i,1e4,n+-s*i),a.line(e,-1e4,n+-l*i,1e4,n+-l*i),e.strokeStyle="green",a.line(e,t+c*i,-1e4,t+c*i,1e4)},n.Glyph=i},{"./check":2,"./draw":3,"./path":10}],7:[function(e,t,n){"use strict";function r(e,t){if(this.font=e,this.glyphs={},Array.isArray(t))for(var n=0;n<t.length;n++)this.glyphs[n]=t[n];this.length=t&&t.length||0}function i(e,t){return new s.Glyph({index:t,font:e})}function o(e,t,n,r,i,o){return function(){var a=new s.Glyph({index:t,font:e});return a.path=function(){n(a,r,i);var t=o(e.glyphs,a);return t.unitsPerEm=e.unitsPerEm,t},a}}function a(e,t,n,r){return function(){var i=new s.Glyph({index:t,font:e});return i.path=function(){var t=n(e,i,r);return t.unitsPerEm=e.unitsPerEm,t},i}}var s=e("./glyph");r.prototype.get=function(e){return"function"==typeof this.glyphs[e]&&(this.glyphs[e]=this.glyphs[e]()),this.glyphs[e]},r.prototype.push=function(e,t){this.glyphs[e]=t,this.length++},n.GlyphSet=r,n.glyphLoader=i,n.ttfGlyphLoader=o,n.cffGlyphLoader=a},{"./glyph":6}],8:[function(e,t,n){"use strict";function r(t,n){var r=e("fs");r.readFile(t,function(e,t){return e?n(e.message):void n(null,v.nodeBufferToArrayBuffer(t))})}function i(e,t){var n=new XMLHttpRequest;n.open("get",e,!0),n.responseType="arraybuffer",n.onload=function(){return 200!==n.status?t("Font could not be loaded: "+n.statusText):t(null,n.response)},n.send()}function o(e,t){for(var n=[],r=12,i=0;t>i;i+=1){var o=m.getTag(e,r),a=m.getULong(e,r+4),s=m.getULong(e,r+8),u=m.getULong(e,r+12);n.push({tag:o,checksum:a,offset:s,length:u,compression:!1}),r+=16}return n}function a(e,t){for(var n=[],r=44,i=0;t>i;i+=1){var o,a=m.getTag(e,r),s=m.getULong(e,r+4),u=m.getULong(e,r+8),l=m.getULong(e,r+12);o=l>u?"WOFF":!1,n.push({tag:a,offset:s,compression:o,compressedLength:u,originalLength:l}),r+=20}return n}function s(e,t){if("WOFF"===t.compression){var n=new Uint8Array(e.buffer,t.offset+2,t.compressedLength-2),r=new Uint8Array(t.originalLength);if(h(n,r),r.byteLength!==t.originalLength)throw new Error("Decompression error: "+t.tag+" decompressed length doesn't match recorded length");var i=new DataView(r.buffer,0);return{data:i,offset:0}}return{data:e,offset:t.offset}}function u(e){var t,n,r,i=new p.Font({empty:!0}),u=new DataView(e,0),l=[],c=m.getTag(u,0);if(c===String.fromCharCode(0,1,0,0))i.outlinesFormat="truetype",r=m.getUShort(u,4),l=o(u,r);else if("OTTO"===c)i.outlinesFormat="cff",r=m.getUShort(u,4),l=o(u,r);else{if("wOFF"!==c)throw new Error("Unsupported OpenType signature "+c);var h=m.getTag(u,4);if(h===String.fromCharCode(0,1,0,0))i.outlinesFormat="truetype";else{if("OTTO"!==h)throw new Error("Unsupported OpenType flavor "+c);i.outlinesFormat="cff"}r=m.getUShort(u,12),l=a(u,r)}for(var d,g,v,N,I,D,j,F,L=0;r>L;L+=1){var R,U=l[L];switch(U.tag){case"cmap":R=s(u,U),i.tables.cmap=y.parse(R.data,R.offset),i.encoding=new f.CmapEncoding(i.tables.cmap);break;case"fvar":g=U;break;case"head":R=s(u,U),i.tables.head=S.parse(R.data,R.offset),i.unitsPerEm=i.tables.head.unitsPerEm,t=i.tables.head.indexToLocFormat;break;case"hhea":R=s(u,U),i.tables.hhea=C.parse(R.data,R.offset),i.ascender=i.tables.hhea.ascender,i.descender=i.tables.hhea.descender,i.numberOfHMetrics=i.tables.hhea.numberOfHMetrics;break;case"hmtx":I=U;break;case"ltag":R=s(u,U),n=M.parse(R.data,R.offset);break;case"maxp":R=s(u,U),i.tables.maxp=A.parse(R.data,R.offset),i.numGlyphs=i.tables.maxp.numGlyphs;break;case"name":F=U;break;case"OS/2":R=s(u,U),i.tables.os2=E.parse(R.data,R.offset);break;case"post":R=s(u,U),i.tables.post=$.parse(R.data,R.offset),i.glyphNames=new f.GlyphNames(i.tables.post);break;case"glyf":v=U;break;case"loca":j=U;break;case"CFF ":d=U;break;case"kern":D=U;break;case"GPOS":N=U}}var V=s(u,F);if(i.tables.name=O.parse(V.data,V.offset,n),i.names=i.tables.name,v&&j){var q=0===t,z=s(u,j),B=T.parse(z.data,z.offset,i.numGlyphs,q),H=s(u,v);i.glyphs=w.parse(H.data,H.offset,B,i)}else{if(!d)throw new Error("Font doesn't contain TrueType or CFF outlines.");var G=s(u,d);b.parse(G.data,G.offset,i)}var W=s(u,I);if(k.parse(W.data,W.offset,i.numberOfHMetrics,i.numGlyphs,i.glyphs),f.addGlyphNames(i),D){var Y=s(u,D);i.kerningPairs=P.parse(Y.data,Y.offset)}else i.kerningPairs={};if(N){var X=s(u,N);x.parse(X.data,X.offset,i)}if(g){var K=s(u,g);i.tables.fvar=_.parse(K.data,K.offset,i.names)}return i}function l(e,t){var n="undefined"==typeof window,o=n?r:i;o(e,function(e,n){if(e)return t(e);var r=u(n);return t(null,r)})}function c(t){var n=e("fs"),r=n.readFileSync(t);return u(v.nodeBufferToArrayBuffer(r))}var h=e("tiny-inflate"),f=e("./encoding"),p=e("./font"),d=e("./glyph"),m=e("./parse"),g=e("./path"),v=e("./util"),y=e("./tables/cmap"),b=e("./tables/cff"),_=e("./tables/fvar"),w=e("./tables/glyf"),x=e("./tables/gpos"),S=e("./tables/head"),C=e("./tables/hhea"),k=e("./tables/hmtx"),P=e("./tables/kern"),M=e("./tables/ltag"),T=e("./tables/loca"),A=e("./tables/maxp"),O=e("./tables/name"),E=e("./tables/os2"),$=e("./tables/post");n._parse=m,n.Font=p.Font,n.Glyph=d.Glyph,n.Path=g.Path,n.parse=u,n.load=l,n.loadSync=c},{"./encoding":4,"./font":5,"./glyph":6,"./parse":9,"./path":10,"./tables/cff":12,"./tables/cmap":13,"./tables/fvar":14,"./tables/glyf":15,"./tables/gpos":16,"./tables/head":17,"./tables/hhea":18,"./tables/hmtx":19,"./tables/kern":20,"./tables/loca":21,"./tables/ltag":22,"./tables/maxp":23,"./tables/name":24,"./tables/os2":25,"./tables/post":26,"./util":29,fs:void 0,"tiny-inflate":1}],9:[function(e,t,n){"use strict";function r(e,t){this.data=e,this.offset=t,this.relativeOffset=0}n.getByte=function(e,t){return e.getUint8(t)},n.getCard8=n.getByte,n.getUShort=function(e,t){return e.getUint16(t,!1)},n.getCard16=n.getUShort,n.getShort=function(e,t){return e.getInt16(t,!1)},n.getULong=function(e,t){return e.getUint32(t,!1)},n.getFixed=function(e,t){var n=e.getInt16(t,!1),r=e.getUint16(t+2,!1);return n+r/65535},n.getTag=function(e,t){for(var n="",r=t;t+4>r;r+=1)n+=String.fromCharCode(e.getInt8(r));return n},n.getOffset=function(e,t,n){for(var r=0,i=0;n>i;i+=1)r<<=8,r+=e.getUint8(t+i);return r},n.getBytes=function(e,t,n){for(var r=[],i=t;n>i;i+=1)r.push(e.getUint8(i));return r},n.bytesToString=function(e){for(var t="",n=0;n<e.length;n+=1)t+=String.fromCharCode(e[n]);return t};var i={"byte":1,uShort:2,"short":2,uLong:4,fixed:4,longDateTime:8,tag:4};r.prototype.parseByte=function(){var e=this.data.getUint8(this.offset+this.relativeOffset);return this.relativeOffset+=1,e},r.prototype.parseChar=function(){var e=this.data.getInt8(this.offset+this.relativeOffset);return this.relativeOffset+=1,e},r.prototype.parseCard8=r.prototype.parseByte,r.prototype.parseUShort=function(){var e=this.data.getUint16(this.offset+this.relativeOffset);return this.relativeOffset+=2,e},r.prototype.parseCard16=r.prototype.parseUShort,r.prototype.parseSID=r.prototype.parseUShort,r.prototype.parseOffset16=r.prototype.parseUShort,r.prototype.parseShort=function(){var e=this.data.getInt16(this.offset+this.relativeOffset);return this.relativeOffset+=2,e},r.prototype.parseF2Dot14=function(){var e=this.data.getInt16(this.offset+this.relativeOffset)/16384;return this.relativeOffset+=2,e},r.prototype.parseULong=function(){var e=n.getULong(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,e},r.prototype.parseFixed=function(){var e=n.getFixed(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,e},r.prototype.parseOffset16List=r.prototype.parseUShortList=function(e){for(var t=new Array(e),r=this.data,i=this.offset+this.relativeOffset,o=0;e>o;o++)t[o]=n.getUShort(r,i),i+=2;return this.relativeOffset+=2*e,t},r.prototype.parseString=function(e){var t=this.data,n=this.offset+this.relativeOffset,r="";this.relativeOffset+=e;for(var i=0;e>i;i++)r+=String.fromCharCode(t.getUint8(n+i));return r},r.prototype.parseTag=function(){return this.parseString(4)},r.prototype.parseLongDateTime=function(){var e=n.getULong(this.data,this.offset+this.relativeOffset+4);return this.relativeOffset+=8,e},r.prototype.parseFixed=function(){var e=n.getULong(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,e/65536},r.prototype.parseVersion=function(){var e=n.getUShort(this.data,this.offset+this.relativeOffset),t=n.getUShort(this.data,this.offset+this.relativeOffset+2);return this.relativeOffset+=4,e+t/4096/10},r.prototype.skip=function(e,t){void 0===t&&(t=1),this.relativeOffset+=i[e]*t},n.Parser=r},{}],10:[function(e,t,n){"use strict";function r(){this.commands=[],this.fill="black",this.stroke=null,this.strokeWidth=1}r.prototype.moveTo=function(e,t){this.commands.push({type:"M",x:e,y:t})},r.prototype.lineTo=function(e,t){this.commands.push({type:"L",x:e,y:t})},r.prototype.curveTo=r.prototype.bezierCurveTo=function(e,t,n,r,i,o){this.commands.push({type:"C",x1:e,y1:t,x2:n,y2:r,x:i,y:o})},r.prototype.quadTo=r.prototype.quadraticCurveTo=function(e,t,n,r){this.commands.push({type:"Q",x1:e,y1:t,x:n,y:r})},r.prototype.close=r.prototype.closePath=function(){this.commands.push({type:"Z"})},r.prototype.extend=function(e){e.commands&&(e=e.commands),Array.prototype.push.apply(this.commands,e)},r.prototype.draw=function(e){e.beginPath();for(var t=0;t<this.commands.length;t+=1){var n=this.commands[t];"M"===n.type?e.moveTo(n.x,n.y):"L"===n.type?e.lineTo(n.x,n.y):"C"===n.type?e.bezierCurveTo(n.x1,n.y1,n.x2,n.y2,n.x,n.y):"Q"===n.type?e.quadraticCurveTo(n.x1,n.y1,n.x,n.y):"Z"===n.type&&e.closePath()}this.fill&&(e.fillStyle=this.fill,e.fill()),this.stroke&&(e.strokeStyle=this.stroke,e.lineWidth=this.strokeWidth,e.stroke())},r.prototype.toPathData=function(e){function t(t){return Math.round(t)===t?""+Math.round(t):t.toFixed(e)}function n(){for(var e="",n=0;n<arguments.length;n+=1){var r=arguments[n];r>=0&&n>0&&(e+=" "),e+=t(r)}return e}e=void 0!==e?e:2;for(var r="",i=0;i<this.commands.length;i+=1){var o=this.commands[i];"M"===o.type?r+="M"+n(o.x,o.y):"L"===o.type?r+="L"+n(o.x,o.y):"C"===o.type?r+="C"+n(o.x1,o.y1,o.x2,o.y2,o.x,o.y):"Q"===o.type?r+="Q"+n(o.x1,o.y1,o.x,o.y):"Z"===o.type&&(r+="Z")}return r},r.prototype.toSVG=function(e){var t='<path d="';return t+=this.toPathData(e),t+='"',this.fill&"black"!==this.fill&&(t+=null===this.fill?' fill="none"':' fill="'+this.fill+'"'),this.stroke&&(t+=' stroke="'+this.stroke+'" stroke-width="'+this.strokeWidth+'"'),t+="/>"},n.Path=r},{}],11:[function(e,t,n){"use strict";function r(e,t,n){var r;for(r=0;r<t.length;r+=1){var i=t[r];this[i.name]=i.value}if(this.tableName=e,this.fields=t,n){var o=Object.keys(n);for(r=0;r<o.length;r+=1){var a=o[r],s=n[a];void 0!==this[a]&&(this[a]=s)}}}var i=e("./types").encode,o=e("./types").sizeOf;r.prototype.encode=function(){return i.TABLE(this)},r.prototype.sizeOf=function(){return o.TABLE(this)},n.Record=n.Table=r},{"./types":28}],12:[function(e,t,n){"use strict";function r(e,t){if(e===t)return!0;if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n+=1)if(!r(e[n],t[n]))return!1;return!0}return!1}function i(e,t,n){var r,i,o,a=[],s=[],u=I.getCard16(e,t);if(0!==u){var l=I.getByte(e,t+2);i=t+(u+1)*l+2;var c=t+3;for(r=0;u+1>r;r+=1)a.push(I.getOffset(e,c,l)),c+=l;o=i+a[u]}else o=t+2;for(r=0;r<a.length-1;r+=1){var h=I.getBytes(e,i+a[r],i+a[r+1]);n&&(h=n(h)),s.push(h)}return{objects:s,startOffset:t,endOffset:o}}function o(e){for(var t="",n=15,r=["0","1","2","3","4","5","6","7","8","9",".","E","E-",null,"-"];;){var i=e.parseByte(),o=i>>4,a=15&i;if(o===n)break;if(t+=r[o],a===n)break;t+=r[a]}return parseFloat(t)}function a(e,t){var n,r,i,a;if(28===t)return n=e.parseByte(),r=e.parseByte(),n<<8|r;if(29===t)return n=e.parseByte(),r=e.parseByte(),i=e.parseByte(),a=e.parseByte(),n<<24|r<<16|i<<8|a;if(30===t)return o(e);if(t>=32&&246>=t)return t-139;if(t>=247&&250>=t)return n=e.parseByte(),256*(t-247)+n+108;if(t>=251&&254>=t)return n=e.parseByte(),256*-(t-251)-n-108;throw new Error("Invalid b0 "+t)}function s(e){for(var t={},n=0;n<e.length;n+=1){var r,i=e[n][0],o=e[n][1];if(r=1===o.length?o[0]:o,t.hasOwnProperty(i))throw new Error("Object "+t+" already has key "+i);t[i]=r}return t}function u(e,t,n){t=void 0!==t?t:0;var r=new I.Parser(e,t),i=[],o=[];for(n=void 0!==n?n:e.length;r.relativeOffset<n;){var u=r.parseByte();21>=u?(12===u&&(u=1200+r.parseByte()),i.push([u,o]),o=[]):o.push(a(r,u))}return s(i)}function l(e,t){return t=390>=t?$.cffStandardStrings[t]:e[t-391]}function c(e,t,n){for(var r={},i=0;i<t.length;i+=1){var o=t[i],a=e[o.op];void 0===a&&(a=void 0!==o.value?o.value:null),"SID"===o.type&&(a=l(n,a)),r[o.name]=a}return r}function h(e,t){var n={};return n.formatMajor=I.getCard8(e,t),n.formatMinor=I.getCard8(e,t+1),n.size=I.getCard8(e,t+2),n.offsetSize=I.getCard8(e,t+3),n.startOffset=t,n.endOffset=t+4,n}function f(e,t){var n=u(e,0,e.byteLength);return c(n,F,t)}function p(e,t,n,r){var i=u(e,t,n);return c(i,L,r)}function d(e,t,n,r){var i,o,a,s=new I.Parser(e,t);n-=1;var u=[".notdef"],c=s.parseCard8();if(0===c)for(i=0;n>i;i+=1)o=s.parseSID(),u.push(l(r,o));else if(1===c)for(;u.length<=n;)for(o=s.parseSID(),a=s.parseCard8(),i=0;a>=i;i+=1)u.push(l(r,o)),o+=1;else{if(2!==c)throw new Error("Unknown charset format "+c);for(;u.length<=n;)for(o=s.parseSID(),a=s.parseCard16(),i=0;a>=i;i+=1)u.push(l(r,o)),o+=1}return u}function m(e,t,n){var r,i,o={},a=new I.Parser(e,t),s=a.parseCard8();if(0===s){var u=a.parseCard8();for(r=0;u>r;r+=1)i=a.parseCard8(),o[i]=r}else{if(1!==s)throw new Error("Unknown encoding format "+s);var l=a.parseCard8();for(i=1,r=0;l>r;r+=1)for(var c=a.parseCard8(),h=a.parseCard8(),f=c;c+h>=f;f+=1)o[f]=i,i+=1}return new $.CffEncoding(o,n)}function g(e,t,n){function r(e,t){m&&c.closePath(),c.moveTo(e,t),m=!0}function i(){var t;t=h.length%2!==0,t&&!p&&(d=h.shift()+e.nominalWidthX),f+=h.length>>1,h.length=0,p=!0}function o(n){for(var y,b,_,w,x,S,C,k,P,M,T,A,O=0;O<n.length;){var E=n[O];switch(O+=1,E){case 1:i();break;case 3:i();break;case 4:h.length>1&&!p&&(d=h.shift()+e.nominalWidthX,p=!0),v+=h.pop(),r(g,v);break;case 5:for(;h.length>0;)g+=h.shift(),v+=h.shift(),c.lineTo(g,v);break;case 6:for(;h.length>0&&(g+=h.shift(),c.lineTo(g,v),0!==h.length);)v+=h.shift(),c.lineTo(g,v);break;case 7:for(;h.length>0&&(v+=h.shift(),c.lineTo(g,v),0!==h.length);)g+=h.shift(),c.lineTo(g,v);break;case 8:for(;h.length>0;)a=g+h.shift(),s=v+h.shift(),u=a+h.shift(),l=s+h.shift(),g=u+h.shift(),v=l+h.shift(),c.curveTo(a,s,u,l,g,v);break;case 10:x=h.pop()+e.subrsBias,S=e.subrs[x],S&&o(S);break;case 11:return;case 12:switch(E=n[O],O+=1,E){case 35:a=g+h.shift(),s=v+h.shift(),u=a+h.shift(),l=s+h.shift(),C=u+h.shift(),k=l+h.shift(),P=C+h.shift(),M=k+h.shift(),T=P+h.shift(),A=M+h.shift(),g=T+h.shift(),v=A+h.shift(),h.shift(),c.curveTo(a,s,u,l,C,k),c.curveTo(P,M,T,A,g,v);break;case 34:a=g+h.shift(),s=v,u=a+h.shift(),l=s+h.shift(),C=u+h.shift(),k=l,P=C+h.shift(),M=l,T=P+h.shift(),A=v,g=T+h.shift(),c.curveTo(a,s,u,l,C,k),c.curveTo(P,M,T,A,g,v);break;case 36:a=g+h.shift(),s=v+h.shift(),u=a+h.shift(),l=s+h.shift(),C=u+h.shift(),k=l,P=C+h.shift(),M=l,T=P+h.shift(),A=M+h.shift(),g=T+h.shift(),c.curveTo(a,s,u,l,C,k),c.curveTo(P,M,T,A,g,v);break;case 37:a=g+h.shift(),s=v+h.shift(),u=a+h.shift(),l=s+h.shift(),C=u+h.shift(),k=l+h.shift(),P=C+h.shift(),M=k+h.shift(),T=P+h.shift(),A=M+h.shift(),Math.abs(T-g)>Math.abs(A-v)?g=T+h.shift():v=A+h.shift(),c.curveTo(a,s,u,l,C,k),c.curveTo(P,M,T,A,g,v);break;default:console.log("Glyph "+t.index+": unknown operator 1200"+E),h.length=0}break;case 14:h.length>0&&!p&&(d=h.shift()+e.nominalWidthX,p=!0),m&&(c.closePath(),m=!1);break;case 18:i();break;case 19:case 20:i(),O+=f+7>>3;break;case 21:h.length>2&&!p&&(d=h.shift()+e.nominalWidthX,p=!0),v+=h.pop(),g+=h.pop(),r(g,v);break;case 22:h.length>1&&!p&&(d=h.shift()+e.nominalWidthX,p=!0),g+=h.pop(),r(g,v);break;case 23:i();break;case 24:for(;h.length>2;)a=g+h.shift(),s=v+h.shift(),u=a+h.shift(),l=s+h.shift(),g=u+h.shift(),v=l+h.shift(),c.curveTo(a,s,u,l,g,v);g+=h.shift(),v+=h.shift(),c.lineTo(g,v);break;case 25:for(;h.length>6;)g+=h.shift(),v+=h.shift(),c.lineTo(g,v);a=g+h.shift(),s=v+h.shift(),u=a+h.shift(),l=s+h.shift(),g=u+h.shift(),v=l+h.shift(),c.curveTo(a,s,u,l,g,v);break;case 26:for(h.length%2&&(g+=h.shift());h.length>0;)a=g,s=v+h.shift(),u=a+h.shift(),l=s+h.shift(),g=u,v=l+h.shift(),c.curveTo(a,s,u,l,g,v);break;case 27:for(h.length%2&&(v+=h.shift());h.length>0;)a=g+h.shift(),s=v,u=a+h.shift(),l=s+h.shift(),g=u+h.shift(),v=l,c.curveTo(a,s,u,l,g,v);break;case 28:y=n[O],b=n[O+1],h.push((y<<24|b<<16)>>16),O+=2;break;case 29:x=h.pop()+e.gsubrsBias,S=e.gsubrs[x],S&&o(S);break;case 30:for(;h.length>0&&(a=g,s=v+h.shift(),u=a+h.shift(),l=s+h.shift(),g=u+h.shift(),v=l+(1===h.length?h.shift():0),c.curveTo(a,s,u,l,g,v),0!==h.length);)a=g+h.shift(),s=v,u=a+h.shift(),l=s+h.shift(),v=l+h.shift(),g=u+(1===h.length?h.shift():0),c.curveTo(a,s,u,l,g,v);break;case 31:for(;h.length>0&&(a=g+h.shift(),s=v,u=a+h.shift(),l=s+h.shift(),v=l+h.shift(),g=u+(1===h.length?h.shift():0),c.curveTo(a,s,u,l,g,v),0!==h.length);)a=g,s=v+h.shift(),u=a+h.shift(),l=s+h.shift(),g=u+h.shift(),v=l+(1===h.length?h.shift():0),c.curveTo(a,s,u,l,g,v);break;default:32>E?console.log("Glyph "+t.index+": unknown operator "+E):247>E?h.push(E-139):251>E?(y=n[O],O+=1,h.push(256*(E-247)+y+108)):255>E?(y=n[O],O+=1,h.push(256*-(E-251)-y-108)):(y=n[O],b=n[O+1],_=n[O+2],w=n[O+3],O+=4,h.push((y<<24|b<<16|_<<8|w)/65536))}}}var a,s,u,l,c=new D.Path,h=[],f=0,p=!1,d=e.defaultWidthX,m=!1,g=0,v=0;return o(n),t.advanceWidth=d,c}function v(e){var t;return t=e.length<1240?107:e.length<33900?1131:32768}function y(e,t,n){n.tables.cff={};var r=h(e,t),o=i(e,r.endOffset,I.bytesToString),a=i(e,o.endOffset),s=i(e,a.endOffset,I.bytesToString),u=i(e,s.endOffset);n.gsubrs=u.objects,n.gsubrsBias=v(n.gsubrs);var l=new DataView(new Uint8Array(a.objects[0]).buffer),c=f(l,s.objects);n.tables.cff.topDict=c;var y=t+c["private"][1],b=p(e,y,c["private"][0],s.objects);if(n.defaultWidthX=b.defaultWidthX,n.nominalWidthX=b.nominalWidthX,0!==b.subrs){var _=y+b.subrs,w=i(e,_);n.subrs=w.objects,n.subrsBias=v(n.subrs)}else n.subrs=[],n.subrsBias=0;var x=i(e,t+c.charStrings);n.nGlyphs=x.objects.length;var S=d(e,t+c.charset,n.nGlyphs,s.objects);n.cffEncoding=0===c.encoding?new $.CffEncoding($.cffStandardEncoding,S):1===c.encoding?new $.CffEncoding($.cffExpertEncoding,S):m(e,t+c.encoding,S),n.encoding=n.encoding||n.cffEncoding,n.glyphs=new N.GlyphSet(n);for(var C=0;C<n.nGlyphs;C+=1){var k=x.objects[C];n.glyphs.push(C,N.cffGlyphLoader(n,C,g,k))}}function b(e,t){var n,r=$.cffStandardStrings.indexOf(e);return r>=0&&(n=r),r=t.indexOf(e),r>=0?n=r+$.cffStandardStrings.length:(n=$.cffStandardStrings.length+t.length,t.push(e)),n}function _(){return new j.Record("Header",[{name:"major",type:"Card8",value:1},{name:"minor",type:"Card8",value:0},{name:"hdrSize",type:"Card8",value:4},{name:"major",type:"Card8",value:1}])}function w(e){var t=new j.Record("Name INDEX",[{name:"names",type:"INDEX",value:[]}]);t.names=[];for(var n=0;n<e.length;n+=1)t.names.push({name:"name_"+n,type:"NAME",value:e[n]});return t}function x(e,t,n){for(var i={},o=0;o<e.length;o+=1){var a=e[o],s=t[a.name];void 0===s||r(s,a.value)||("SID"===a.type&&(s=b(s,n)),i[a.op]={name:a.name,type:a.type,value:s})}return i}function S(e,t){var n=new j.Record("Top DICT",[{name:"dict",type:"DICT",value:{}}]);return n.dict=x(F,e,t),n}function C(e){var t=new j.Record("Top DICT INDEX",[{name:"topDicts",type:"INDEX",value:[]}]);return t.topDicts=[{name:"topDict_0",type:"TABLE",value:e}],t}function k(e){var t=new j.Record("String INDEX",[{name:"strings",type:"INDEX",value:[]}]);t.strings=[];for(var n=0;n<e.length;n+=1)t.strings.push({name:"string_"+n,type:"STRING",value:e[n]});return t}function P(){return new j.Record("Global Subr INDEX",[{name:"subrs",type:"INDEX",value:[]}])}function M(e,t){for(var n=new j.Record("Charsets",[{name:"format",type:"Card8",value:0}]),r=0;r<e.length;r+=1){var i=e[r],o=b(i,t);n.fields.push({name:"glyph_"+r,type:"SID",value:o})}return n}function T(e){var t=[],n=e.path;t.push({name:"width",type:"NUMBER",value:e.advanceWidth});for(var r=0,i=0,o=0;o<n.commands.length;o+=1){var a,s,u=n.commands[o];if("Q"===u.type){var l=1/3,c=2/3;u={type:"C",x:u.x,y:u.y,x1:l*r+c*u.x1,y1:l*i+c*u.y1,x2:l*u.x+c*u.x1,y2:l*u.y+c*u.y1}}if("M"===u.type)a=Math.round(u.x-r),s=Math.round(u.y-i),t.push({name:"dx",type:"NUMBER",value:a}),t.push({name:"dy",type:"NUMBER",value:s}),t.push({name:"rmoveto",type:"OP",value:21}),r=Math.round(u.x),i=Math.round(u.y);else if("L"===u.type)a=Math.round(u.x-r),s=Math.round(u.y-i),t.push({name:"dx",type:"NUMBER",value:a}),t.push({name:"dy",type:"NUMBER",value:s}),t.push({name:"rlineto",type:"OP",value:5}),r=Math.round(u.x),i=Math.round(u.y);else if("C"===u.type){var h=Math.round(u.x1-r),f=Math.round(u.y1-i),p=Math.round(u.x2-u.x1),d=Math.round(u.y2-u.y1);a=Math.round(u.x-u.x2),s=Math.round(u.y-u.y2),t.push({name:"dx1",type:"NUMBER",value:h}),t.push({name:"dy1",type:"NUMBER",value:f}),t.push({name:"dx2",type:"NUMBER",value:p}),t.push({name:"dy2",type:"NUMBER",value:d}),t.push({name:"dx",type:"NUMBER",value:a}),t.push({name:"dy",type:"NUMBER",value:s}),t.push({name:"rrcurveto",type:"OP",value:8}),r=Math.round(u.x),i=Math.round(u.y)}}return t.push({name:"endchar",type:"OP",value:14}),t}function A(e){for(var t=new j.Record("CharStrings INDEX",[{name:"charStrings",type:"INDEX",value:[]}]),n=0;n<e.length;n+=1){var r=e.get(n),i=T(r);t.charStrings.push({name:r.name,type:"CHARSTRING",value:i})}return t}function O(e,t){var n=new j.Record("Private DICT",[{name:"dict",type:"DICT",value:{}}]);return n.dict=x(L,e,t),n}function E(e,t){for(var n,r=new j.Table("CFF ",[{name:"header",type:"RECORD"},{name:"nameIndex",type:"RECORD"},{name:"topDictIndex",type:"RECORD"},{name:"stringIndex",type:"RECORD"},{name:"globalSubrIndex",type:"RECORD"},{name:"charsets",type:"RECORD"},{name:"charStringsIndex",type:"RECORD"},{name:"privateDict",type:"RECORD"}]),i=1/t.unitsPerEm,o={version:t.version,fullName:t.fullName,familyName:t.familyName,weight:t.weightName,fontBBox:t.fontBBox||[0,0,0,0],fontMatrix:[i,0,0,i,0,0],charset:999,encoding:0,charStrings:999,"private":[0,999]},a={},s=[],u=1;u<e.length;u+=1)n=e.get(u),s.push(n.name);var l=[];r.header=_(),r.nameIndex=w([t.postScriptName]);var c=S(o,l);r.topDictIndex=C(c),r.globalSubrIndex=P(),r.charsets=M(s,l),r.charStringsIndex=A(e),r.privateDict=O(a,l),r.stringIndex=k(l);var h=r.header.sizeOf()+r.nameIndex.sizeOf()+r.topDictIndex.sizeOf()+r.stringIndex.sizeOf()+r.globalSubrIndex.sizeOf();return o.charset=h,o.encoding=0,o.charStrings=o.charset+r.charsets.sizeOf(),o["private"][1]=o.charStrings+r.charStringsIndex.sizeOf(),c=S(o,l),r.topDictIndex=C(c),r}var $=e("../encoding"),N=e("../glyphset"),I=e("../parse"),D=e("../path"),j=e("../table"),F=[{name:"version",op:0,type:"SID"},{name:"notice",op:1,type:"SID"},{name:"copyright",op:1200,type:"SID"},{name:"fullName",op:2,type:"SID"},{name:"familyName",op:3,type:"SID"},{name:"weight",op:4,type:"SID"},{name:"isFixedPitch",op:1201,type:"number",value:0},{name:"italicAngle",op:1202,type:"number",value:0},{name:"underlinePosition",op:1203,type:"number",value:-100},{name:"underlineThickness",op:1204,type:"number",value:50},{name:"paintType",op:1205,type:"number",value:0},{name:"charstringType",op:1206,type:"number",value:2},{name:"fontMatrix",op:1207,type:["real","real","real","real","real","real"],value:[.001,0,0,.001,0,0]},{name:"uniqueId",op:13,type:"number"},{name:"fontBBox",op:5,type:["number","number","number","number"],value:[0,0,0,0]},{name:"strokeWidth",op:1208,type:"number",value:0},{name:"xuid",op:14,type:[],value:null},{
name:"charset",op:15,type:"offset",value:0},{name:"encoding",op:16,type:"offset",value:0},{name:"charStrings",op:17,type:"offset",value:0},{name:"private",op:18,type:["number","offset"],value:[0,0]}],L=[{name:"subrs",op:19,type:"offset",value:0},{name:"defaultWidthX",op:20,type:"number",value:0},{name:"nominalWidthX",op:21,type:"number",value:0}];n.parse=y,n.make=E},{"../encoding":4,"../glyphset":7,"../parse":9,"../path":10,"../table":11}],13:[function(e,t,n){"use strict";function r(e,t){var n,r={};r.version=u.getUShort(e,t),s.argument(0===r.version,"cmap table version should be 0."),r.numTables=u.getUShort(e,t+2);var i=-1;for(n=0;n<r.numTables;n+=1){var o=u.getUShort(e,t+4+8*n),a=u.getUShort(e,t+4+8*n+2);if(3===o&&(1===a||0===a)){i=u.getULong(e,t+4+8*n+4);break}}if(-1===i)return null;var l=new u.Parser(e,t+i);r.format=l.parseUShort(),s.argument(4===r.format,"Only format 4 cmap tables are supported."),r.length=l.parseUShort(),r.language=l.parseUShort();var c;r.segCount=c=l.parseUShort()>>1,l.skip("uShort",3),r.glyphIndexMap={};var h=new u.Parser(e,t+i+14),f=new u.Parser(e,t+i+16+2*c),p=new u.Parser(e,t+i+16+4*c),d=new u.Parser(e,t+i+16+6*c),m=t+i+16+8*c;for(n=0;c-1>n;n+=1)for(var g,v=h.parseUShort(),y=f.parseUShort(),b=p.parseShort(),_=d.parseUShort(),w=y;v>=w;w+=1)0!==_?(m=d.offset+d.relativeOffset-2,m+=_,m+=2*(w-y),g=u.getUShort(e,m),0!==g&&(g=g+b&65535)):g=w+b&65535,r.glyphIndexMap[w]=g;return r}function i(e,t,n){e.segments.push({end:t,start:t,delta:-(t-n),offset:0})}function o(e){e.segments.push({end:65535,start:65535,delta:1,offset:0})}function a(e){var t,n=new l.Table("cmap",[{name:"version",type:"USHORT",value:0},{name:"numTables",type:"USHORT",value:1},{name:"platformID",type:"USHORT",value:3},{name:"encodingID",type:"USHORT",value:1},{name:"offset",type:"ULONG",value:12},{name:"format",type:"USHORT",value:4},{name:"length",type:"USHORT",value:0},{name:"language",type:"USHORT",value:0},{name:"segCountX2",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]);for(n.segments=[],t=0;t<e.length;t+=1){for(var r=e.get(t),a=0;a<r.unicodes.length;a+=1)i(n,r.unicodes[a],t);n.segments=n.segments.sort(function(e,t){return e.start-t.start})}o(n);var s;s=n.segments.length,n.segCountX2=2*s,n.searchRange=2*Math.pow(2,Math.floor(Math.log(s)/Math.log(2))),n.entrySelector=Math.log(n.searchRange/2)/Math.log(2),n.rangeShift=n.segCountX2-n.searchRange;var u=[],c=[],h=[],f=[],p=[];for(t=0;s>t;t+=1){var d=n.segments[t];u=u.concat({name:"end_"+t,type:"USHORT",value:d.end}),c=c.concat({name:"start_"+t,type:"USHORT",value:d.start}),h=h.concat({name:"idDelta_"+t,type:"SHORT",value:d.delta}),f=f.concat({name:"idRangeOffset_"+t,type:"USHORT",value:d.offset}),void 0!==d.glyphId&&(p=p.concat({name:"glyph_"+t,type:"USHORT",value:d.glyphId}))}return n.fields=n.fields.concat(u),n.fields.push({name:"reservedPad",type:"USHORT",value:0}),n.fields=n.fields.concat(c),n.fields=n.fields.concat(h),n.fields=n.fields.concat(f),n.fields=n.fields.concat(p),n.length=14+2*u.length+2+2*c.length+2*h.length+2*f.length+2*p.length,n}var s=e("../check"),u=e("../parse"),l=e("../table");n.parse=r,n.make=a},{"../check":2,"../parse":9,"../table":11}],14:[function(e,t,n){"use strict";function r(e,t){var n=JSON.stringify(e),r=256;for(var i in t){var o=parseInt(i);if(o&&!(256>o)){if(JSON.stringify(t[i])===n)return o;o>=r&&(r=o+1)}}return t[r]=e,r}function i(e,t,n){var i=r(t.name,n);return[{name:"tag_"+e,type:"TAG",value:t.tag},{name:"minValue_"+e,type:"FIXED",value:t.minValue<<16},{name:"defaultValue_"+e,type:"FIXED",value:t.defaultValue<<16},{name:"maxValue_"+e,type:"FIXED",value:t.maxValue<<16},{name:"flags_"+e,type:"USHORT",value:0},{name:"nameID_"+e,type:"USHORT",value:i}]}function o(e,t,n){var r={},i=new h.Parser(e,t);return r.tag=i.parseTag(),r.minValue=i.parseFixed(),r.defaultValue=i.parseFixed(),r.maxValue=i.parseFixed(),i.skip("uShort",1),r.name=n[i.parseUShort()]||{},r}function a(e,t,n,i){for(var o=r(t.name,i),a=[{name:"nameID_"+e,type:"USHORT",value:o},{name:"flags_"+e,type:"USHORT",value:0}],s=0;s<n.length;++s){var u=n[s].tag;a.push({name:"axis_"+e+" "+u,type:"FIXED",value:t.coordinates[u]<<16})}return a}function s(e,t,n,r){var i={},o=new h.Parser(e,t);i.name=r[o.parseUShort()]||{},o.skip("uShort",1),i.coordinates={};for(var a=0;a<n.length;++a)i.coordinates[n[a].tag]=o.parseFixed();return i}function u(e,t){var n=new f.Table("fvar",[{name:"version",type:"ULONG",value:65536},{name:"offsetToData",type:"USHORT",value:0},{name:"countSizePairs",type:"USHORT",value:2},{name:"axisCount",type:"USHORT",value:e.axes.length},{name:"axisSize",type:"USHORT",value:20},{name:"instanceCount",type:"USHORT",value:e.instances.length},{name:"instanceSize",type:"USHORT",value:4+4*e.axes.length}]);n.offsetToData=n.sizeOf();for(var r=0;r<e.axes.length;r++)n.fields=n.fields.concat(i(r,e.axes[r],t));for(var o=0;o<e.instances.length;o++)n.fields=n.fields.concat(a(o,e.instances[o],e.axes,t));return n}function l(e,t,n){var r=new h.Parser(e,t),i=r.parseULong();c.argument(65536===i,"Unsupported fvar table version.");var a=r.parseOffset16();r.skip("uShort",1);for(var u=r.parseUShort(),l=r.parseUShort(),f=r.parseUShort(),p=r.parseUShort(),d=[],m=0;u>m;m++)d.push(o(e,t+a+m*l,n));for(var g=[],v=t+a+u*l,y=0;f>y;y++)g.push(s(e,v+y*p,d,n));return{axes:d,instances:g}}var c=e("../check"),h=e("../parse"),f=e("../table");n.make=u,n.parse=l},{"../check":2,"../parse":9,"../table":11}],15:[function(e,t,n){"use strict";function r(e,t,n,r,i){var o;return(t&r)>0?(o=e.parseByte(),0===(t&i)&&(o=-o),o=n+o):o=(t&i)>0?n:n+e.parseShort(),o}function i(e,t,n){var i=new f.Parser(t,n);e.numberOfContours=i.parseShort(),e.xMin=i.parseShort(),e.yMin=i.parseShort(),e.xMax=i.parseShort(),e.yMax=i.parseShort();var o,a;if(e.numberOfContours>0){var s,u=e.endPointIndices=[];for(s=0;s<e.numberOfContours;s+=1)u.push(i.parseUShort());for(e.instructionLength=i.parseUShort(),e.instructions=[],s=0;s<e.instructionLength;s+=1)e.instructions.push(i.parseByte());var l=u[u.length-1]+1;for(o=[],s=0;l>s;s+=1)if(a=i.parseByte(),o.push(a),(8&a)>0)for(var h=i.parseByte(),p=0;h>p;p+=1)o.push(a),s+=1;if(c.argument(o.length===l,"Bad flags."),u.length>0){var d,m=[];if(l>0){for(s=0;l>s;s+=1)a=o[s],d={},d.onCurve=!!(1&a),d.lastPointOfContour=u.indexOf(s)>=0,m.push(d);var g=0;for(s=0;l>s;s+=1)a=o[s],d=m[s],d.x=r(i,a,g,2,16),g=d.x;var v=0;for(s=0;l>s;s+=1)a=o[s],d=m[s],d.y=r(i,a,v,4,32),v=d.y}e.points=m}else e.points=[]}else if(0===e.numberOfContours)e.points=[];else{e.isComposite=!0,e.points=[],e.components=[];for(var y=!0;y;){o=i.parseUShort();var b={glyphIndex:i.parseUShort(),xScale:1,scale01:0,scale10:0,yScale:1,dx:0,dy:0};(1&o)>0?(b.dx=i.parseShort(),b.dy=i.parseShort()):(b.dx=i.parseChar(),b.dy=i.parseChar()),(8&o)>0?b.xScale=b.yScale=i.parseF2Dot14():(64&o)>0?(b.xScale=i.parseF2Dot14(),b.yScale=i.parseF2Dot14()):(128&o)>0&&(b.xScale=i.parseF2Dot14(),b.scale01=i.parseF2Dot14(),b.scale10=i.parseF2Dot14(),b.yScale=i.parseF2Dot14()),e.components.push(b),y=!!(32&o)}}}function o(e,t){for(var n=[],r=0;r<e.length;r+=1){var i=e[r],o={x:t.xScale*i.x+t.scale01*i.y+t.dx,y:t.scale10*i.x+t.yScale*i.y+t.dy,onCurve:i.onCurve,lastPointOfContour:i.lastPointOfContour};n.push(o)}return n}function a(e){for(var t=[],n=[],r=0;r<e.length;r+=1){var i=e[r];n.push(i),i.lastPointOfContour&&(t.push(n),n=[])}return c.argument(0===n.length,"There are still points left in the current contour."),t}function s(e){var t=new p.Path;if(!e)return t;for(var n=a(e),r=0;r<n.length;r+=1){var i,o,s=n[r],u=s[0],l=s[s.length-1];u.onCurve?(i=null,o=!0):(u=l.onCurve?l:{x:(u.x+l.x)/2,y:(u.y+l.y)/2},i=u,o=!1),t.moveTo(u.x,u.y);for(var c=o?1:0;c<s.length;c+=1){var h=s[c],f=0===c?u:s[c-1];if(f.onCurve&&h.onCurve)t.lineTo(h.x,h.y);else if(f.onCurve&&!h.onCurve)i=h;else if(f.onCurve||h.onCurve){if(f.onCurve||!h.onCurve)throw new Error("Invalid state.");t.quadraticCurveTo(i.x,i.y,h.x,h.y),i=null}else{var d={x:(f.x+h.x)/2,y:(f.y+h.y)/2};t.quadraticCurveTo(f.x,f.y,d.x,d.y),i=h}}u!==l&&(i?t.quadraticCurveTo(i.x,i.y,u.x,u.y):t.lineTo(u.x,u.y))}return t.closePath(),t}function u(e,t){if(t.isComposite)for(var n=0;n<t.components.length;n+=1){var r=t.components[n],i=e.get(r.glyphIndex);if(i.getPath(),i.points){var a=o(i.points,r);t.points=t.points.concat(a)}}return s(t.points)}function l(e,t,n,r){var o,a=new h.GlyphSet(r);for(o=0;o<n.length-1;o+=1){var s=n[o],l=n[o+1];s!==l?a.push(o,h.ttfGlyphLoader(r,o,i,e,t+s,u)):a.push(o,h.glyphLoader(r,o))}return a}var c=e("../check"),h=e("../glyphset"),f=e("../parse"),p=e("../path");n.parse=l},{"../check":2,"../glyphset":7,"../parse":9,"../path":10}],16:[function(e,t,n){"use strict";function r(e,t){for(var n=new c.Parser(e,t),r=n.parseUShort(),i=[],o=0;r>o;o++)i[n.parseTag()]={offset:n.parseUShort()};return i}function i(e,t){var n=new c.Parser(e,t),r=n.parseUShort(),i=n.parseUShort();if(1===r)return n.parseUShortList(i);if(2===r){for(var o=[];i--;)for(var a=n.parseUShort(),s=n.parseUShort(),u=n.parseUShort(),l=a;s>=l;l++)o[u++]=l;return o}}function o(e,t){var n=new c.Parser(e,t),r=n.parseUShort();if(1===r){var i=n.parseUShort(),o=n.parseUShort(),a=n.parseUShortList(o);return function(e){return a[e-i]||0}}if(2===r){for(var s=n.parseUShort(),u=[],l=[],h=[],f=0;s>f;f++)u[f]=n.parseUShort(),l[f]=n.parseUShort(),h[f]=n.parseUShort();return function(e){for(var t=0,n=u.length-1;n>t;){var r=t+n+1>>1;e<u[r]?n=r-1:t=r}return u[t]<=e&&e<=l[t]?h[t]||0:0}}}function a(e,t){var n,r,a=new c.Parser(e,t),s=a.parseUShort(),u=a.parseUShort(),l=i(e,t+u),h=a.parseUShort(),f=a.parseUShort();if(4===h&&0===f){var p={};if(1===s){for(var d=a.parseUShort(),m=[],g=a.parseOffset16List(d),v=0;d>v;v++){var y=g[v],b=p[y];if(!b){b={},a.relativeOffset=y;for(var _=a.parseUShort();_--;){var w=a.parseUShort();h&&(n=a.parseShort()),f&&(r=a.parseShort()),b[w]=n}}m[l[v]]=b}return function(e,t){var n=m[e];return n?n[t]:void 0}}if(2===s){for(var x=a.parseUShort(),S=a.parseUShort(),C=a.parseUShort(),k=a.parseUShort(),P=o(e,t+x),M=o(e,t+S),T=[],A=0;C>A;A++)for(var O=T[A]=[],E=0;k>E;E++)h&&(n=a.parseShort()),f&&(r=a.parseShort()),O[E]=n;var $={};for(A=0;A<l.length;A++)$[l[A]]=1;return function(e,t){if($[e]){var n=P(e),r=M(t),i=T[n];return i?i[r]:void 0}}}}}function s(e,t){var n=new c.Parser(e,t),r=n.parseUShort(),i=n.parseUShort(),o=16&i,s=n.parseUShort(),u=n.parseOffset16List(s),l={lookupType:r,lookupFlag:i,markFilteringSet:o?n.parseUShort():-1};if(2===r){for(var h=[],f=0;s>f;f++)h.push(a(e,t+u[f]));l.getKerningValue=function(e,t){for(var n=h.length;n--;){var r=h[n](e,t);if(void 0!==r)return r}return 0}}return l}function u(e,t,n){var i=new c.Parser(e,t),o=i.parseFixed();l.argument(1===o,"Unsupported GPOS table version."),r(e,t+i.parseUShort()),r(e,t+i.parseUShort());var a=i.parseUShort();i.relativeOffset=a;for(var u=i.parseUShort(),h=i.parseOffset16List(u),f=t+a,p=0;u>p;p++){var d=s(e,f+h[p]);2!==d.lookupType||n.getGposKerningValue||(n.getGposKerningValue=d.getKerningValue)}}var l=e("../check"),c=e("../parse");n.parse=u},{"../check":2,"../parse":9}],17:[function(e,t,n){"use strict";function r(e,t){var n={},r=new a.Parser(e,t);return n.version=r.parseVersion(),n.fontRevision=Math.round(1e3*r.parseFixed())/1e3,n.checkSumAdjustment=r.parseULong(),n.magicNumber=r.parseULong(),o.argument(1594834165===n.magicNumber,"Font header has wrong magic number."),n.flags=r.parseUShort(),n.unitsPerEm=r.parseUShort(),n.created=r.parseLongDateTime(),n.modified=r.parseLongDateTime(),n.xMin=r.parseShort(),n.yMin=r.parseShort(),n.xMax=r.parseShort(),n.yMax=r.parseShort(),n.macStyle=r.parseUShort(),n.lowestRecPPEM=r.parseUShort(),n.fontDirectionHint=r.parseShort(),n.indexToLocFormat=r.parseShort(),n.glyphDataFormat=r.parseShort(),n}function i(e){return new s.Table("head",[{name:"version",type:"FIXED",value:65536},{name:"fontRevision",type:"FIXED",value:65536},{name:"checkSumAdjustment",type:"ULONG",value:0},{name:"magicNumber",type:"ULONG",value:1594834165},{name:"flags",type:"USHORT",value:0},{name:"unitsPerEm",type:"USHORT",value:1e3},{name:"created",type:"LONGDATETIME",value:0},{name:"modified",type:"LONGDATETIME",value:0},{name:"xMin",type:"SHORT",value:0},{name:"yMin",type:"SHORT",value:0},{name:"xMax",type:"SHORT",value:0},{name:"yMax",type:"SHORT",value:0},{name:"macStyle",type:"USHORT",value:0},{name:"lowestRecPPEM",type:"USHORT",value:0},{name:"fontDirectionHint",type:"SHORT",value:2},{name:"indexToLocFormat",type:"SHORT",value:0},{name:"glyphDataFormat",type:"SHORT",value:0}],e)}var o=e("../check"),a=e("../parse"),s=e("../table");n.parse=r,n.make=i},{"../check":2,"../parse":9,"../table":11}],18:[function(e,t,n){"use strict";function r(e,t){var n={},r=new o.Parser(e,t);return n.version=r.parseVersion(),n.ascender=r.parseShort(),n.descender=r.parseShort(),n.lineGap=r.parseShort(),n.advanceWidthMax=r.parseUShort(),n.minLeftSideBearing=r.parseShort(),n.minRightSideBearing=r.parseShort(),n.xMaxExtent=r.parseShort(),n.caretSlopeRise=r.parseShort(),n.caretSlopeRun=r.parseShort(),n.caretOffset=r.parseShort(),r.relativeOffset+=8,n.metricDataFormat=r.parseShort(),n.numberOfHMetrics=r.parseUShort(),n}function i(e){return new a.Table("hhea",[{name:"version",type:"FIXED",value:65536},{name:"ascender",type:"FWORD",value:0},{name:"descender",type:"FWORD",value:0},{name:"lineGap",type:"FWORD",value:0},{name:"advanceWidthMax",type:"UFWORD",value:0},{name:"minLeftSideBearing",type:"FWORD",value:0},{name:"minRightSideBearing",type:"FWORD",value:0},{name:"xMaxExtent",type:"FWORD",value:0},{name:"caretSlopeRise",type:"SHORT",value:1},{name:"caretSlopeRun",type:"SHORT",value:0},{name:"caretOffset",type:"SHORT",value:0},{name:"reserved1",type:"SHORT",value:0},{name:"reserved2",type:"SHORT",value:0},{name:"reserved3",type:"SHORT",value:0},{name:"reserved4",type:"SHORT",value:0},{name:"metricDataFormat",type:"SHORT",value:0},{name:"numberOfHMetrics",type:"USHORT",value:0}],e)}var o=e("../parse"),a=e("../table");n.parse=r,n.make=i},{"../parse":9,"../table":11}],19:[function(e,t,n){"use strict";function r(e,t,n,r,i){for(var a,s,u=new o.Parser(e,t),l=0;r>l;l+=1){n>l&&(a=u.parseUShort(),s=u.parseShort());var c=i.get(l);c.advanceWidth=a,c.leftSideBearing=s}}function i(e){for(var t=new a.Table("hmtx",[]),n=0;n<e.length;n+=1){var r=e.get(n),i=r.advanceWidth||0,o=r.leftSideBearing||0;t.fields.push({name:"advanceWidth_"+n,type:"USHORT",value:i}),t.fields.push({name:"leftSideBearing_"+n,type:"SHORT",value:o})}return t}var o=e("../parse"),a=e("../table");n.parse=r,n.make=i},{"../parse":9,"../table":11}],20:[function(e,t,n){"use strict";function r(e,t){var n={},r=new o.Parser(e,t),a=r.parseUShort();i.argument(0===a,"Unsupported kern table version."),r.skip("uShort",1);var s=r.parseUShort();i.argument(0===s,"Unsupported kern sub-table version."),r.skip("uShort",2);var u=r.parseUShort();r.skip("uShort",3);for(var l=0;u>l;l+=1){var c=r.parseUShort(),h=r.parseUShort(),f=r.parseShort();n[c+","+h]=f}return n}var i=e("../check"),o=e("../parse");n.parse=r},{"../check":2,"../parse":9}],21:[function(e,t,n){"use strict";function r(e,t,n,r){for(var o=new i.Parser(e,t),a=r?o.parseUShort:o.parseULong,s=[],u=0;n+1>u;u+=1){var l=a.call(o);r&&(l*=2),s.push(l)}return s}var i=e("../parse");n.parse=r},{"../parse":9}],22:[function(e,t,n){"use strict";function r(e){for(var t=new s.Table("ltag",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"numTags",type:"ULONG",value:e.length}]),n="",r=12+4*e.length,i=0;i<e.length;++i){var o=n.indexOf(e[i]);0>o&&(o=n.length,n+=e[i]),t.fields.push({name:"offset "+i,type:"USHORT",value:r+o}),t.fields.push({name:"length "+i,type:"USHORT",value:e[i].length})}return t.fields.push({name:"stringPool",type:"CHARARRAY",value:n}),t}function i(e,t){var n=new a.Parser(e,t),r=n.parseULong();o.argument(1===r,"Unsupported ltag table version."),n.skip("uLong",1);for(var i=n.parseULong(),s=[],u=0;i>u;u++){for(var l="",c=t+n.parseUShort(),h=n.parseUShort(),f=c;c+h>f;++f)l+=String.fromCharCode(e.getInt8(f));s.push(l)}return s}var o=e("../check"),a=e("../parse"),s=e("../table");n.make=r,n.parse=i},{"../check":2,"../parse":9,"../table":11}],23:[function(e,t,n){"use strict";function r(e,t){var n={},r=new o.Parser(e,t);return n.version=r.parseVersion(),n.numGlyphs=r.parseUShort(),1===n.version&&(n.maxPoints=r.parseUShort(),n.maxContours=r.parseUShort(),n.maxCompositePoints=r.parseUShort(),n.maxCompositeContours=r.parseUShort(),n.maxZones=r.parseUShort(),n.maxTwilightPoints=r.parseUShort(),n.maxStorage=r.parseUShort(),n.maxFunctionDefs=r.parseUShort(),n.maxInstructionDefs=r.parseUShort(),n.maxStackElements=r.parseUShort(),n.maxSizeOfInstructions=r.parseUShort(),n.maxComponentElements=r.parseUShort(),n.maxComponentDepth=r.parseUShort()),n}function i(e){return new a.Table("maxp",[{name:"version",type:"FIXED",value:20480},{name:"numGlyphs",type:"USHORT",value:e}])}var o=e("../parse"),a=e("../table");n.parse=r,n.make=i},{"../parse":9,"../table":11}],24:[function(e,t,n){"use strict";function r(e,t,n){switch(e){case 0:if(65535===t)return"und";if(n)return n[t];break;case 1:return v[t];case 3:return b[t]}}function i(e,t,n){switch(e){case 0:return _;case 1:return x[n]||w[t];case 3:if(1===t||10===t)return _}}function o(e,t,n){for(var o={},a=new d.Parser(e,t),s=a.parseUShort(),u=a.parseUShort(),l=a.offset+a.parseUShort(),c=0;u>c;c++){var h=a.parseUShort(),p=a.parseUShort(),m=a.parseUShort(),v=a.parseUShort(),y=g[v]||v,b=a.parseUShort(),w=a.parseUShort(),x=r(h,m,n),S=i(h,p,m);if(void 0!==S&&void 0!==x){var C;if(C=S===_?f.UTF16(e,l+w,b):f.MACSTRING(e,l+w,b,S)){var k=o[y];void 0===k&&(k=o[y]={}),k[x]=C}}}var P=0;return 1===s&&(P=a.parseUShort()),o}function a(e){var t={};for(var n in e)t[e[n]]=parseInt(n);return t}function s(e,t,n,r,i,o){return new m.Record("NameRecord",[{name:"platformID",type:"USHORT",value:e},{name:"encodingID",type:"USHORT",value:t},{name:"languageID",type:"USHORT",value:n},{name:"nameID",type:"USHORT",value:r},{name:"length",type:"USHORT",value:i},{name:"offset",type:"USHORT",value:o}])}function u(e,t){var n=e.length,r=t.length-n+1;e:for(var i=0;r>i;i++)for(;r>i;i++){for(var o=0;n>o;o++)if(t[i+o]!==e[o])continue e;return i}return-1}function l(e,t){var n=u(e,t);if(0>n){n=t.length;for(var r=0,i=e.length;i>r;++r)t.push(e[r])}return n}function c(e,t){var n,r=[],o={},u=a(g);for(var c in e){var h=u[c];void 0===h&&(h=c),n=parseInt(h),o[n]=e[c],r.push(n)}for(var f=a(v),d=a(b),_=[],w=[],x=0;x<r.length;x++){n=r[x];var S=o[n];for(var C in S){var k=S[C],P=1,M=f[C],T=y[M],A=i(P,T,M),O=p.MACSTRING(k,A);void 0===O&&(P=0,M=t.indexOf(C),0>M&&(M=t.length,t.push(C)),T=4,O=p.UTF16(k));var E=l(O,w);_.push(s(P,T,M,n,O.length,E));var $=d[C];if(void 0!==$){var N=p.UTF16(k),I=l(N,w);_.push(s(3,1,$,n,N.length,I))}}}_.sort(function(e,t){return e.platformID-t.platformID||e.encodingID-t.encodingID||e.languageID-t.languageID||e.nameID-t.nameID});for(var D=new m.Table("name",[{name:"format",type:"USHORT",value:0},{name:"count",type:"USHORT",value:_.length},{name:"stringOffset",type:"USHORT",value:6+12*_.length}]),j=0;j<_.length;j++)D.fields.push({name:"record_"+j,type:"RECORD",value:_[j]});return D.fields.push({name:"strings",type:"LITERAL",value:w}),D}var h=e("../types"),f=h.decode,p=h.encode,d=e("../parse"),m=e("../table"),g=["copyright","fontFamily","fontSubfamily","uniqueID","fullName","version","postScriptName","trademark","manufacturer","designer","description","manufacturerURL","designerURL","license","licenseURL","reserved","preferredFamily","preferredSubfamily","compatibleFullName","sampleText","postScriptFindFontName","wwsFamily","wwsSubfamily"],v={0:"en",1:"fr",2:"de",3:"it",4:"nl",5:"sv",6:"es",7:"da",8:"pt",9:"no",10:"he",11:"ja",12:"ar",13:"fi",14:"el",15:"is",16:"mt",17:"tr",18:"hr",19:"zh-Hant",20:"ur",21:"hi",22:"th",23:"ko",24:"lt",25:"pl",26:"hu",27:"es",28:"lv",29:"se",30:"fo",31:"fa",32:"ru",33:"zh",34:"nl-BE",35:"ga",36:"sq",37:"ro",38:"cz",39:"sk",40:"si",41:"yi",42:"sr",43:"mk",44:"bg",45:"uk",46:"be",47:"uz",48:"kk",49:"az-Cyrl",50:"az-Arab",51:"hy",52:"ka",53:"mo",54:"ky",55:"tg",56:"tk",57:"mn-CN",58:"mn",59:"ps",60:"ks",61:"ku",62:"sd",63:"bo",64:"ne",65:"sa",66:"mr",67:"bn",68:"as",69:"gu",70:"pa",71:"or",72:"ml",73:"kn",74:"ta",75:"te",76:"si",77:"my",78:"km",79:"lo",80:"vi",81:"id",82:"tl",83:"ms",84:"ms-Arab",85:"am",86:"ti",87:"om",88:"so",89:"sw",90:"rw",91:"rn",92:"ny",93:"mg",94:"eo",128:"cy",129:"eu",130:"ca",131:"la",132:"qu",133:"gn",134:"ay",135:"tt",136:"ug",137:"dz",138:"jv",139:"su",140:"gl",141:"af",142:"br",143:"iu",144:"gd",145:"gv",146:"ga",147:"to",148:"el-polyton",149:"kl",150:"az",151:"nn"},y={0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:5,11:1,12:4,13:0,14:6,15:0,16:0,17:0,18:0,19:2,20:4,21:9,22:21,23:3,24:29,25:29,26:29,27:29,28:29,29:0,30:0,31:4,32:7,33:25,34:0,35:0,36:0,37:0,38:29,39:29,40:0,41:5,42:7,43:7,44:7,45:7,46:7,47:7,48:7,49:7,50:4,51:24,52:23,53:7,54:7,55:7,56:7,57:27,58:7,59:4,60:4,61:4,62:4,63:26,64:9,65:9,66:9,67:13,68:13,69:11,70:10,71:12,72:17,73:16,74:14,75:15,76:18,77:19,78:20,79:22,80:30,81:0,82:0,83:0,84:4,85:28,86:28,87:28,88:0,89:0,90:0,91:0,92:0,93:0,94:0,128:0,129:0,130:0,131:0,132:0,133:0,134:0,135:7,136:4,137:26,138:0,139:0,140:0,141:0,142:0,143:28,144:0,145:0,146:0,147:0,148:6,149:0,150:0,151:0},b={1078:"af",1052:"sq",1156:"gsw",1118:"am",5121:"ar-DZ",15361:"ar-BH",3073:"ar",2049:"ar-IQ",11265:"ar-JO",13313:"ar-KW",12289:"ar-LB",4097:"ar-LY",6145:"ary",8193:"ar-OM",16385:"ar-QA",1025:"ar-SA",10241:"ar-SY",7169:"aeb",14337:"ar-AE",9217:"ar-YE",1067:"hy",1101:"as",2092:"az-Cyrl",1068:"az",1133:"ba",1069:"eu",1059:"be",2117:"bn",1093:"bn-IN",8218:"bs-Cyrl",5146:"bs",1150:"br",1026:"bg",1027:"ca",3076:"zh-HK",5124:"zh-MO",2052:"zh",4100:"zh-SG",1028:"zh-TW",1155:"co",1050:"hr",4122:"hr-BA",1029:"cs",1030:"da",1164:"prs",1125:"dv",2067:"nl-BE",1043:"nl",3081:"en-AU",10249:"en-BZ",4105:"en-CA",9225:"en-029",16393:"en-IN",6153:"en-IE",8201:"en-JM",17417:"en-MY",5129:"en-NZ",13321:"en-PH",18441:"en-SG",7177:"en-ZA",11273:"en-TT",2057:"en-GB",1033:"en",12297:"en-ZW",1061:"et",1080:"fo",1124:"fil",1035:"fi",2060:"fr-BE",3084:"fr-CA",1036:"fr",5132:"fr-LU",6156:"fr-MC",4108:"fr-CH",1122:"fy",1110:"gl",1079:"ka",3079:"de-AT",1031:"de",5127:"de-LI",4103:"de-LU",2055:"de-CH",1032:"el",1135:"kl",1095:"gu",1128:"ha",1037:"he",1081:"hi",1038:"hu",1039:"is",1136:"ig",1057:"id",1117:"iu",2141:"iu-Latn",2108:"ga",1076:"xh",1077:"zu",1040:"it",2064:"it-CH",1041:"ja",1099:"kn",1087:"kk",1107:"km",1158:"quc",1159:"rw",1089:"sw",1111:"kok",1042:"ko",1088:"ky",1108:"lo",1062:"lv",1063:"lt",2094:"dsb",1134:"lb",1071:"mk",2110:"ms-BN",1086:"ms",1100:"ml",1082:"mt",1153:"mi",1146:"arn",1102:"mr",1148:"moh",1104:"mn",2128:"mn-CN",1121:"ne",1044:"nb",2068:"nn",1154:"oc",1096:"or",1123:"ps",1045:"pl",1046:"pt",2070:"pt-PT",1094:"pa",1131:"qu-BO",2155:"qu-EC",3179:"qu",1048:"ro",1047:"rm",1049:"ru",9275:"smn",4155:"smj-NO",5179:"smj",3131:"se-FI",1083:"se",2107:"se-SE",8251:"sms",6203:"sma-NO",7227:"sms",1103:"sa",7194:"sr-Cyrl-BA",3098:"sr",6170:"sr-Latn-BA",2074:"sr-Latn",1132:"nso",1074:"tn",1115:"si",1051:"sk",1060:"sl",11274:"es-AR",16394:"es-BO",13322:"es-CL",9226:"es-CO",5130:"es-CR",7178:"es-DO",12298:"es-EC",17418:"es-SV",4106:"es-GT",18442:"es-HN",2058:"es-MX",19466:"es-NI",6154:"es-PA",15370:"es-PY",10250:"es-PE",20490:"es-PR",3082:"es",1034:"es",21514:"es-US",14346:"es-UY",8202:"es-VE",2077:"sv-FI",1053:"sv",1114:"syr",1064:"tg",2143:"tzm",1097:"ta",1092:"tt",1098:"te",1054:"th",1105:"bo",1055:"tr",1090:"tk",1152:"ug",1058:"uk",1070:"hsb",1056:"ur",2115:"uz-Cyrl",1091:"uz",1066:"vi",1106:"cy",1160:"wo",1157:"sah",1144:"ii",1130:"yo"},_="utf-16",w={0:"macintosh",1:"x-mac-japanese",2:"x-mac-chinesetrad",3:"x-mac-korean",6:"x-mac-greek",7:"x-mac-cyrillic",9:"x-mac-devanagai",10:"x-mac-gurmukhi",11:"x-mac-gujarati",12:"x-mac-oriya",13:"x-mac-bengali",14:"x-mac-tamil",15:"x-mac-telugu",16:"x-mac-kannada",17:"x-mac-malayalam",18:"x-mac-sinhalese",19:"x-mac-burmese",20:"x-mac-khmer",21:"x-mac-thai",22:"x-mac-lao",23:"x-mac-georgian",24:"x-mac-armenian",25:"x-mac-chinesesimp",26:"x-mac-tibetan",27:"x-mac-mongolian",28:"x-mac-ethiopic",29:"x-mac-ce",30:"x-mac-vietnamese",31:"x-mac-extarabic"},x={15:"x-mac-icelandic",17:"x-mac-turkish",18:"x-mac-croatian",24:"x-mac-ce",25:"x-mac-ce",26:"x-mac-ce",27:"x-mac-ce",28:"x-mac-ce",30:"x-mac-icelandic",37:"x-mac-romanian",38:"x-mac-ce",39:"x-mac-ce",40:"x-mac-ce",143:"x-mac-inuit",146:"x-mac-gaelic"};n.parse=o,n.make=c},{"../parse":9,"../table":11,"../types":28}],25:[function(e,t,n){"use strict";function r(e){for(var t=0;t<u.length;t+=1){var n=u[t];if(e>=n.begin&&e<n.end)return t}return-1}function i(e,t){var n={},r=new a.Parser(e,t);n.version=r.parseUShort(),n.xAvgCharWidth=r.parseShort(),n.usWeightClass=r.parseUShort(),n.usWidthClass=r.parseUShort(),n.fsType=r.parseUShort(),n.ySubscriptXSize=r.parseShort(),n.ySubscriptYSize=r.parseShort(),n.ySubscriptXOffset=r.parseShort(),n.ySubscriptYOffset=r.parseShort(),n.ySuperscriptXSize=r.parseShort(),n.ySuperscriptYSize=r.parseShort(),n.ySuperscriptXOffset=r.parseShort(),n.ySuperscriptYOffset=r.parseShort(),n.yStrikeoutSize=r.parseShort(),n.yStrikeoutPosition=r.parseShort(),n.sFamilyClass=r.parseShort(),n.panose=[];for(var i=0;10>i;i++)n.panose[i]=r.parseByte();return n.ulUnicodeRange1=r.parseULong(),n.ulUnicodeRange2=r.parseULong(),n.ulUnicodeRange3=r.parseULong(),n.ulUnicodeRange4=r.parseULong(),n.achVendID=String.fromCharCode(r.parseByte(),r.parseByte(),r.parseByte(),r.parseByte()),n.fsSelection=r.parseUShort(),n.usFirstCharIndex=r.parseUShort(),n.usLastCharIndex=r.parseUShort(),n.sTypoAscender=r.parseShort(),n.sTypoDescender=r.parseShort(),n.sTypoLineGap=r.parseShort(),n.usWinAscent=r.parseUShort(),n.usWinDescent=r.parseUShort(),n.version>=1&&(n.ulCodePageRange1=r.parseULong(),n.ulCodePageRange2=r.parseULong()),n.version>=2&&(n.sxHeight=r.parseShort(),n.sCapHeight=r.parseShort(),n.usDefaultChar=r.parseUShort(),n.usBreakChar=r.parseUShort(),n.usMaxContent=r.parseUShort()),n}function o(e){return new s.Table("OS/2",[{name:"version",type:"USHORT",value:3},{name:"xAvgCharWidth",type:"SHORT",value:0},{name:"usWeightClass",type:"USHORT",value:0},{name:"usWidthClass",type:"USHORT",value:0},{name:"fsType",type:"USHORT",value:0},{name:"ySubscriptXSize",type:"SHORT",value:650},{name:"ySubscriptYSize",type:"SHORT",value:699},{name:"ySubscriptXOffset",type:"SHORT",value:0},{name:"ySubscriptYOffset",type:"SHORT",value:140},{name:"ySuperscriptXSize",type:"SHORT",value:650},{name:"ySuperscriptYSize",type:"SHORT",value:699},{name:"ySuperscriptXOffset",type:"SHORT",value:0},{name:"ySuperscriptYOffset",type:"SHORT",value:479},{name:"yStrikeoutSize",type:"SHORT",value:49},{name:"yStrikeoutPosition",type:"SHORT",value:258},{name:"sFamilyClass",type:"SHORT",value:0},{name:"bFamilyType",type:"BYTE",value:0},{name:"bSerifStyle",type:"BYTE",value:0},{name:"bWeight",type:"BYTE",value:0},{name:"bProportion",type:"BYTE",value:0},{name:"bContrast",type:"BYTE",value:0},{name:"bStrokeVariation",type:"BYTE",value:0},{name:"bArmStyle",type:"BYTE",value:0},{name:"bLetterform",type:"BYTE",value:0},{name:"bMidline",type:"BYTE",value:0},{name:"bXHeight",type:"BYTE",value:0},{name:"ulUnicodeRange1",type:"ULONG",value:0},{name:"ulUnicodeRange2",type:"ULONG",value:0},{name:"ulUnicodeRange3",type:"ULONG",value:0},{name:"ulUnicodeRange4",type:"ULONG",value:0},{name:"achVendID",type:"CHARARRAY",value:"XXXX"},{name:"fsSelection",type:"USHORT",value:0},{name:"usFirstCharIndex",type:"USHORT",value:0},{name:"usLastCharIndex",type:"USHORT",value:0},{name:"sTypoAscender",type:"SHORT",value:0},{name:"sTypoDescender",type:"SHORT",value:0},{name:"sTypoLineGap",type:"SHORT",value:0},{name:"usWinAscent",type:"USHORT",value:0},{name:"usWinDescent",type:"USHORT",value:0},{name:"ulCodePageRange1",type:"ULONG",value:0},{name:"ulCodePageRange2",type:"ULONG",value:0},{name:"sxHeight",type:"SHORT",value:0},{name:"sCapHeight",type:"SHORT",value:0},{name:"usDefaultChar",type:"USHORT",value:0},{name:"usBreakChar",type:"USHORT",value:0},{name:"usMaxContext",type:"USHORT",value:0}],e)}var a=e("../parse"),s=e("../table"),u=[{begin:0,end:127},{begin:128,end:255},{begin:256,end:383},{begin:384,end:591},{begin:592,end:687},{begin:688,end:767},{begin:768,end:879},{begin:880,end:1023},{begin:11392,end:11519},{begin:1024,end:1279},{begin:1328,end:1423},{begin:1424,end:1535},{begin:42240,end:42559},{begin:1536,end:1791},{begin:1984,end:2047},{begin:2304,end:2431},{begin:2432,end:2559},{begin:2560,end:2687},{begin:2688,end:2815},{begin:2816,end:2943},{begin:2944,end:3071},{begin:3072,end:3199},{begin:3200,end:3327},{begin:3328,end:3455},{begin:3584,end:3711},{begin:3712,end:3839},{begin:4256,end:4351},{begin:6912,end:7039},{begin:4352,end:4607},{begin:7680,end:7935},{begin:7936,end:8191},{begin:8192,end:8303},{begin:8304,end:8351},{begin:8352,end:8399},{begin:8400,end:8447},{begin:8448,end:8527},{begin:8528,end:8591},{begin:8592,end:8703},{begin:8704,end:8959},{begin:8960,end:9215},{begin:9216,end:9279},{begin:9280,end:9311},{begin:9312,end:9471},{begin:9472,end:9599},{begin:9600,end:9631},{begin:9632,end:9727},{begin:9728,end:9983},{begin:9984,end:10175},{begin:12288,end:12351},{begin:12352,end:12447},{begin:12448,end:12543},{begin:12544,end:12591},{begin:12592,end:12687},{begin:43072,end:43135},{begin:12800,end:13055},{begin:13056,end:13311},{begin:44032,end:55215},{begin:55296,end:57343},{begin:67840,end:67871},{begin:19968,end:40959},{begin:57344,end:63743},{begin:12736,end:12783},{begin:64256,end:64335},{begin:64336,end:65023},{begin:65056,end:65071},{begin:65040,end:65055},{begin:65104,end:65135},{begin:65136,end:65279},{begin:65280,end:65519},{begin:65520,end:65535},{begin:3840,end:4095},{begin:1792,end:1871},{begin:1920,end:1983},{begin:3456,end:3583},{begin:4096,end:4255},{begin:4608,end:4991},{begin:5024,end:5119},{begin:5120,end:5759},{begin:5760,end:5791},{begin:5792,end:5887},{begin:6016,end:6143},{begin:6144,end:6319},{begin:10240,end:10495},{begin:40960,end:42127},{begin:5888,end:5919},{begin:66304,end:66351},{begin:66352,end:66383},{begin:66560,end:66639},{begin:118784,end:119039},{begin:119808,end:120831},{begin:1044480,end:1048573},{begin:65024,end:65039},{begin:917504,end:917631},{begin:6400,end:6479},{begin:6480,end:6527},{begin:6528,end:6623},{begin:6656,end:6687},{begin:11264,end:11359},{begin:11568,end:11647},{begin:19904,end:19967},{begin:43008,end:43055},{begin:65536,end:65663},{begin:65856,end:65935},{begin:66432,end:66463},{begin:66464,end:66527},{begin:66640,end:66687},{begin:66688,end:66735},{begin:67584,end:67647},{begin:68096,end:68191},{begin:119552,end:119647},{begin:73728,end:74751},{begin:119648,end:119679},{begin:7040,end:7103},{begin:7168,end:7247},{begin:7248,end:7295},{begin:43136,end:43231},{begin:43264,end:43311},{begin:43312,end:43359},{begin:43520,end:43615},{begin:65936,end:65999},{begin:66e3,end:66047},{begin:66208,end:66271},{begin:127024,end:127135}];n.unicodeRanges=u,n.getUnicodeRange=r,n.parse=i,n.make=o},{"../parse":9,"../table":11}],26:[function(e,t,n){"use strict";function r(e,t){var n,r={},i=new a.Parser(e,t);switch(r.version=i.parseVersion(),r.italicAngle=i.parseFixed(),r.underlinePosition=i.parseShort(),r.underlineThickness=i.parseShort(),r.isFixedPitch=i.parseULong(),r.minMemType42=i.parseULong(),r.maxMemType42=i.parseULong(),r.minMemType1=i.parseULong(),r.maxMemType1=i.parseULong(),r.version){case 1:r.names=o.standardNames.slice();break;case 2:for(r.numberOfGlyphs=i.parseUShort(),r.glyphNameIndex=new Array(r.numberOfGlyphs),n=0;n<r.numberOfGlyphs;n++)r.glyphNameIndex[n]=i.parseUShort();for(r.names=[],n=0;n<r.numberOfGlyphs;n++)if(r.glyphNameIndex[n]>=o.standardNames.length){var s=i.parseChar();r.names.push(i.parseString(s))}break;case 2.5:for(r.numberOfGlyphs=i.parseUShort(),r.offset=new Array(r.numberOfGlyphs),n=0;n<r.numberOfGlyphs;n++)r.offset[n]=i.parseChar()}return r}function i(){return new s.Table("post",[{name:"version",type:"FIXED",value:196608},{name:"italicAngle",type:"FIXED",value:0},{name:"underlinePosition",
type:"FWORD",value:0},{name:"underlineThickness",type:"FWORD",value:0},{name:"isFixedPitch",type:"ULONG",value:0},{name:"minMemType42",type:"ULONG",value:0},{name:"maxMemType42",type:"ULONG",value:0},{name:"minMemType1",type:"ULONG",value:0},{name:"maxMemType1",type:"ULONG",value:0}])}var o=e("../encoding"),a=e("../parse"),s=e("../table");n.parse=r,n.make=i},{"../encoding":4,"../parse":9,"../table":11}],27:[function(e,t,n){"use strict";function r(e){return Math.log(e)/Math.log(2)|0}function i(e){for(;e.length%4!==0;)e.push(0);for(var t=0,n=0;n<e.length;n+=4)t+=(e[n]<<24)+(e[n+1]<<16)+(e[n+2]<<8)+e[n+3];return t%=Math.pow(2,32)}function o(e,t,n,r){return new h.Record("Table Record",[{name:"tag",type:"TAG",value:void 0!==e?e:""},{name:"checkSum",type:"ULONG",value:void 0!==t?t:0},{name:"offset",type:"ULONG",value:void 0!==n?n:0},{name:"length",type:"ULONG",value:void 0!==r?r:0}])}function a(e){var t=new h.Table("sfnt",[{name:"version",type:"TAG",value:"OTTO"},{name:"numTables",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]);t.tables=e,t.numTables=e.length;var n=Math.pow(2,r(t.numTables));t.searchRange=16*n,t.entrySelector=r(n),t.rangeShift=16*t.numTables-t.searchRange;for(var a=[],s=[],u=t.sizeOf()+o().sizeOf()*t.numTables;u%4!==0;)u+=1,s.push({name:"padding",type:"BYTE",value:0});for(var l=0;l<e.length;l+=1){var f=e[l];c.argument(4===f.tableName.length,"Table name"+f.tableName+" is invalid.");var p=f.sizeOf(),d=o(f.tableName,i(f.encode()),u,p);for(a.push({name:d.tag+" Table Record",type:"RECORD",value:d}),s.push({name:f.tableName+" table",type:"RECORD",value:f}),u+=p,c.argument(!isNaN(u),"Something went wrong calculating the offset.");u%4!==0;)u+=1,s.push({name:"padding",type:"BYTE",value:0})}return a.sort(function(e,t){return e.value.tag>t.value.tag?1:-1}),t.fields=t.fields.concat(a),t.fields=t.fields.concat(s),t}function s(e,t,n){for(var r=0;r<t.length;r+=1){var i=e.charToGlyphIndex(t[r]);if(i>0){var o=e.glyphs.get(i);return o.getMetrics()}}return n}function u(e){for(var t=0,n=0;n<e.length;n+=1)t+=e[n];return t/e.length}function l(e){for(var t,n=[],r=[],o=[],l=[],c=[],h=[],x=[],S=0,C=0,k=0,P=0,M=0,T=0;T<e.glyphs.length;T+=1){var A=e.glyphs.get(T),O=0|A.unicode;(t>O||null===t)&&(t=O),O>S&&(S=O);var E=_.getUnicodeRange(O);if(32>E)C|=1<<E;else if(64>E)k|=1<<E-32;else if(96>E)P|=1<<E-64;else{if(!(123>E))throw new Error("Unicode ranges bits > 123 are reserved for internal usage");M|=1<<E-96}if(".notdef"!==A.name){var $=A.getMetrics();n.push($.xMin),r.push($.yMin),o.push($.xMax),l.push($.yMax),h.push($.leftSideBearing),x.push($.rightSideBearing),c.push(A.advanceWidth)}}var N={xMin:Math.min.apply(null,n),yMin:Math.min.apply(null,r),xMax:Math.max.apply(null,o),yMax:Math.max.apply(null,l),advanceWidthMax:Math.max.apply(null,c),advanceWidthAvg:u(c),minLeftSideBearing:Math.min.apply(null,h),maxLeftSideBearing:Math.max.apply(null,h),minRightSideBearing:Math.min.apply(null,x)};N.ascender=e.ascender,N.descender=e.descender;var I=d.make({flags:3,unitsPerEm:e.unitsPerEm,xMin:N.xMin,yMin:N.yMin,xMax:N.xMax,yMax:N.yMax,lowestRecPPEM:3}),D=m.make({ascender:N.ascender,descender:N.descender,advanceWidthMax:N.advanceWidthMax,minLeftSideBearing:N.minLeftSideBearing,minRightSideBearing:N.minRightSideBearing,xMaxExtent:N.maxLeftSideBearing+(N.xMax-N.xMin),numberOfHMetrics:e.glyphs.length}),j=y.make(e.glyphs.length),F=_.make({xAvgCharWidth:Math.round(N.advanceWidthAvg),usWeightClass:500,usWidthClass:5,usFirstCharIndex:t,usLastCharIndex:S,ulUnicodeRange1:C,ulUnicodeRange2:k,ulUnicodeRange3:P,ulUnicodeRange4:M,fsSelection:64,sTypoAscender:N.ascender,sTypoDescender:N.descender,sTypoLineGap:0,usWinAscent:N.yMax,usWinDescent:Math.abs(N.yMin),ulCodePageRange1:1,sxHeight:s(e,"xyvw",{yMax:Math.round(N.ascender/2)}).yMax,sCapHeight:s(e,"HIKLEFJMNTZBDPRAGOQSUVWXY",N).yMax,usDefaultChar:e.hasChar(" ")?32:0,usBreakChar:e.hasChar(" ")?32:0}),L=g.make(e.glyphs),R=f.make(e.glyphs),U=e.getEnglishName("fontFamily"),V=e.getEnglishName("fontSubfamily"),q=U+" "+V,z=e.getEnglishName("postScriptName");z||(z=U.replace(/\s/g,"")+"-"+V);var B={};for(var H in e.names)B[H]=e.names[H];B.uniqueID||(B.uniqueID={en:e.getEnglishName("manufacturer")+":"+q}),B.postScriptName||(B.postScriptName={en:z}),B.preferredFamily||(B.preferredFamily=e.names.fontFamily),B.preferredSubfamily||(B.preferredSubfamily=e.names.fontSubfamily);var G=[],W=b.make(B,G),Y=G.length>0?v.make(G):void 0,X=w.make(),K=p.make(e.glyphs,{version:e.getEnglishName("version"),fullName:q,familyName:U,weightName:V,postScriptName:z,unitsPerEm:e.unitsPerEm,fontBBox:[0,N.yMin,N.ascender,N.advanceWidthMax]}),Z=[I,D,j,F,W,R,X,K,L];Y&&Z.push(Y);var Q=a(Z),J=Q.encode(),ee=i(J),te=Q.fields,ne=!1;for(T=0;T<te.length;T+=1)if("head table"===te[T].name){te[T].value.checkSumAdjustment=2981146554-ee,ne=!0;break}if(!ne)throw new Error("Could not find head table with checkSum to adjust.");return Q}var c=e("../check"),h=e("../table"),f=e("./cmap"),p=e("./cff"),d=e("./head"),m=e("./hhea"),g=e("./hmtx"),v=e("./ltag"),y=e("./maxp"),b=e("./name"),_=e("./os2"),w=e("./post");n.computeCheckSum=i,n.make=a,n.fontToTable=l},{"../check":2,"../table":11,"./cff":12,"./cmap":13,"./head":17,"./hhea":18,"./hmtx":19,"./ltag":22,"./maxp":23,"./name":24,"./os2":25,"./post":26}],28:[function(e,t,n){"use strict";function r(e){return function(){return e}}var i=e("./check"),o=32768,a=2147483648,s={},u={},l={};u.BYTE=function(e){return i.argument(e>=0&&255>=e,"Byte value should be between 0 and 255."),[e]},l.BYTE=r(1),u.CHAR=function(e){return[e.charCodeAt(0)]},l.CHAR=r(1),u.CHARARRAY=function(e){for(var t=[],n=0;n<e.length;n+=1)t.push(e.charCodeAt(n));return t},l.CHARARRAY=function(e){return e.length},u.USHORT=function(e){return[e>>8&255,255&e]},l.USHORT=r(2),u.SHORT=function(e){return e>=o&&(e=-(2*o-e)),[e>>8&255,255&e]},l.SHORT=r(2),u.UINT24=function(e){return[e>>16&255,e>>8&255,255&e]},l.UINT24=r(3),u.ULONG=function(e){return[e>>24&255,e>>16&255,e>>8&255,255&e]},l.ULONG=r(4),u.LONG=function(e){return e>=a&&(e=-(2*a-e)),[e>>24&255,e>>16&255,e>>8&255,255&e]},l.LONG=r(4),u.FIXED=u.ULONG,l.FIXED=l.ULONG,u.FWORD=u.SHORT,l.FWORD=l.SHORT,u.UFWORD=u.USHORT,l.UFWORD=l.USHORT,u.LONGDATETIME=function(){return[0,0,0,0,0,0,0,0]},l.LONGDATETIME=r(8),u.TAG=function(e){return i.argument(4===e.length,"Tag should be exactly 4 ASCII characters."),[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]},l.TAG=r(4),u.Card8=u.BYTE,l.Card8=l.BYTE,u.Card16=u.USHORT,l.Card16=l.USHORT,u.OffSize=u.BYTE,l.OffSize=l.BYTE,u.SID=u.USHORT,l.SID=l.USHORT,u.NUMBER=function(e){return e>=-107&&107>=e?[e+139]:e>=108&&1131>=e?(e-=108,[(e>>8)+247,255&e]):e>=-1131&&-108>=e?(e=-e-108,[(e>>8)+251,255&e]):e>=-32768&&32767>=e?u.NUMBER16(e):u.NUMBER32(e)},l.NUMBER=function(e){return u.NUMBER(e).length},u.NUMBER16=function(e){return[28,e>>8&255,255&e]},l.NUMBER16=r(3),u.NUMBER32=function(e){return[29,e>>24&255,e>>16&255,e>>8&255,255&e]},l.NUMBER32=r(5),u.REAL=function(e){var t=e.toString(),n=/\.(\d*?)(?:9{5,20}|0{5,20})\d{0,2}(?:e(.+)|$)/.exec(t);if(n){var r=parseFloat("1e"+((n[2]?+n[2]:0)+n[1].length));t=(Math.round(e*r)/r).toString()}var i,o,a="";for(i=0,o=t.length;o>i;i+=1){var s=t[i];a+="e"===s?"-"===t[++i]?"c":"b":"."===s?"a":"-"===s?"e":s}a+=1&a.length?"f":"ff";var u=[30];for(i=0,o=a.length;o>i;i+=2)u.push(parseInt(a.substr(i,2),16));return u},l.REAL=function(e){return u.REAL(e).length},u.NAME=u.CHARARRAY,l.NAME=l.CHARARRAY,u.STRING=u.CHARARRAY,l.STRING=l.CHARARRAY,s.UTF16=function(e,t,n){for(var r=[],i=n/2,o=0;i>o;o++,t+=2)r[o]=e.getUint16(t);return String.fromCharCode.apply(null,r)},u.UTF16=function(e){for(var t=[],n=0;n<e.length;n+=1){var r=e.charCodeAt(n);t.push(r>>8&255),t.push(255&r)}return t},l.UTF16=function(e){return 2*e.length};var c={"x-mac-croatian":"ÃÃÃÃÃÃÃÃ¡Ã Ã¢Ã¤Ã£Ã¥Ã§Ã©Ã¨ÃªÃ«Ã­Ã¬Ã®Ã¯Ã±Ã³Ã²Ã´Ã¶ÃµÃºÃ¹Ã»Ã¼â Â°Â¢Â£Â§â¢Â¶ÃÂ®Å â¢Â´Â¨â Å½ÃâÂ±â¤â¥âÂµâââÅ¡â«ÂªÂºÎ©Å¾Ã¸Â¿Â¡Â¬âÆâÄÂ«Äâ¦Â ÃÃÃÅÅÄâââââÃ·âï£¿Â©ââ¬â¹âºÃÂ»âÂ·âââ°ÃÄÃÄÃÃÃÃÃÃÃÄÃÃÃÃÄ±ËËÂ¯ÏÃËÂ¸ÃÃ¦Ë","x-mac-cyrillic":"ÐÐÐÐÐÐÐÐÐÐÐÐÐÐÐÐÐ Ð¡Ð¢Ð£Ð¤Ð¥Ð¦Ð§Ð¨Ð©ÐªÐ«Ð¬Ð­Ð®Ð¯â Â°ÒÂ£Â§â¢Â¶ÐÂ®Â©â¢ÐÑâ ÐÑâÂ±â¤â¥ÑÂµÒÐÐÑÐÑÐÑÐÑÑÐÂ¬âÆââÂ«Â»â¦Â ÐÑÐÑÑââââââÃ·âÐÑÐÑâÐÑÑÐ°Ð±Ð²Ð³Ð´ÐµÐ¶Ð·Ð¸Ð¹ÐºÐ»Ð¼Ð½Ð¾Ð¿ÑÑÑÑÑÑÑÑÑÑÑÑÑÑÑ","x-mac-gaelic":"ÃÃÃÃÃÃÃÃ¡Ã Ã¢Ã¤Ã£Ã¥Ã§Ã©Ã¨ÃªÃ«Ã­Ã¬Ã®Ã¯Ã±Ã³Ã²Ã´Ã¶ÃµÃºÃ¹Ã»Ã¼â Â°Â¢Â£Â§â¢Â¶ÃÂ®Â©â¢Â´Â¨â ÃÃá¸Â±â¤â¥á¸ÄÄá¸á¸á¸á¸Ä Ä¡á¹Ã¦Ã¸á¹á¹á¹É¼ÆÅ¿á¹ Â«Â»â¦Â ÃÃÃÅÅââââââá¹¡áºÃ¿Å¸á¹ªâ¬â¹âºÅ¶Å·á¹«Â·á»²á»³âÃÃÃÃÃÃÃÃÃÃÃâ£ÃÃÃÃÄ±ÃÃ½Å´Åµáºáºáºáºáºáº","x-mac-greek":"ÃÂ¹Â²ÃÂ³ÃÃÎÃ Ã¢Ã¤ÎÂ¨Ã§Ã©Ã¨ÃªÃ«Â£â¢Ã®Ã¯â¢Â½â°Ã´Ã¶Â¦â¬Ã¹Ã»Ã¼â ÎÎÎÎÎÎ ÃÂ®Â©Î£ÎªÂ§â Â°Â·ÎÂ±â¤â¥Â¥ÎÎÎÎÎÎÎÎ¦Î«Î¨Î©Î¬ÎÂ¬ÎÎ¡âÎ¤Â«Â»â¦Â Î¥Î§ÎÎÅââââââÃ·ÎÎÎÎÎ­Î®Î¯ÏÎÏÎ±Î²ÏÎ´ÎµÏÎ³Î·Î¹Î¾ÎºÎ»Î¼Î½Î¿ÏÏÏÏÏÎ¸ÏÏÏÏÎ¶ÏÏÎÎ°Â­","x-mac-icelandic":"ÃÃÃÃÃÃÃÃ¡Ã Ã¢Ã¤Ã£Ã¥Ã§Ã©Ã¨ÃªÃ«Ã­Ã¬Ã®Ã¯Ã±Ã³Ã²Ã´Ã¶ÃµÃºÃ¹Ã»Ã¼ÃÂ°Â¢Â£Â§â¢Â¶ÃÂ®Â©â¢Â´Â¨â ÃÃâÂ±â¤â¥Â¥ÂµâââÏâ«ÂªÂºÎ©Ã¦Ã¸Â¿Â¡Â¬âÆââÂ«Â»â¦Â ÃÃÃÅÅââââââÃ·âÃ¿Å¸ââ¬ÃÃ°ÃÃ¾Ã½Â·âââ°ÃÃÃÃÃÃÃÃÃÃÃï£¿ÃÃÃÃÄ±ËËÂ¯ËËËÂ¸ËËË","x-mac-inuit":"ááááááá±á²á³á´á¸á¹áááááááá¦á­á®á¯á°á²á³áááááááÂ°á¡á¥á¦â¢Â¶á§Â®Â©â¢á¨áªá«á»áááááááá¯á°á±á²á´áµááááááááªá¨á©áªá«á­â¦Â á®á¾áááââââââáááááááááááá¿áááááááááááááá±á²á³á´áµá¶áá á¡á¢á£á¤á¥á¦á¼ÅÅ","x-mac-ce":"ÃÄÄÃÄÃÃÃ¡ÄÄÃ¤ÄÄÄÃ©Å¹ÅºÄÃ­ÄÄÄÄÃ³ÄÃ´Ã¶ÃµÃºÄÄÃ¼â Â°ÄÂ£Â§â¢Â¶ÃÂ®Â©â¢ÄÂ¨â Ä£Ä®Ä¯Äªâ¤â¥Ä«Ä¶ââÅÄ»Ä¼Ä½Ä¾Ä¹ÄºÅÅÅÂ¬âÅÅâÂ«Â»â¦Â ÅÅÃÅÅââââââÃ·âÅÅÅÅâ¹âºÅÅÅÅ ââÅ¡ÅÅÃÅ¤Å¥ÃÅ½Å¾ÅªÃÃÅ«Å®ÃÅ¯Å°Å±Å²Å³ÃÃ½Ä·Å»ÅÅ¼Ä¢Ë",macintosh:"ÃÃÃÃÃÃÃÃ¡Ã Ã¢Ã¤Ã£Ã¥Ã§Ã©Ã¨ÃªÃ«Ã­Ã¬Ã®Ã¯Ã±Ã³Ã²Ã´Ã¶ÃµÃºÃ¹Ã»Ã¼â Â°Â¢Â£Â§â¢Â¶ÃÂ®Â©â¢Â´Â¨â ÃÃâÂ±â¤â¥Â¥ÂµâââÏâ«ÂªÂºÎ©Ã¦Ã¸Â¿Â¡Â¬âÆââÂ«Â»â¦Â ÃÃÃÅÅââââââÃ·âÃ¿Å¸ââ¬â¹âºï¬ï¬â¡Â·âââ°ÃÃÃÃÃÃÃÃÃÃÃï£¿ÃÃÃÃÄ±ËËÂ¯ËËËÂ¸ËËË","x-mac-romanian":"ÃÃÃÃÃÃÃÃ¡Ã Ã¢Ã¤Ã£Ã¥Ã§Ã©Ã¨ÃªÃ«Ã­Ã¬Ã®Ã¯Ã±Ã³Ã²Ã´Ã¶ÃµÃºÃ¹Ã»Ã¼â Â°Â¢Â£Â§â¢Â¶ÃÂ®Â©â¢Â´Â¨â ÄÈâÂ±â¤â¥Â¥ÂµâââÏâ«ÂªÂºÎ©ÄÈÂ¿Â¡Â¬âÆââÂ«Â»â¦Â ÃÃÃÅÅââââââÃ·âÃ¿Å¸ââ¬â¹âºÈÈâ¡Â·âââ°ÃÃÃÃÃÃÃÃÃÃÃï£¿ÃÃÃÃÄ±ËËÂ¯ËËËÂ¸ËËË","x-mac-turkish":"ÃÃÃÃÃÃÃÃ¡Ã Ã¢Ã¤Ã£Ã¥Ã§Ã©Ã¨ÃªÃ«Ã­Ã¬Ã®Ã¯Ã±Ã³Ã²Ã´Ã¶ÃµÃºÃ¹Ã»Ã¼â Â°Â¢Â£Â§â¢Â¶ÃÂ®Â©â¢Â´Â¨â ÃÃâÂ±â¤â¥Â¥ÂµâââÏâ«ÂªÂºÎ©Ã¦Ã¸Â¿Â¡Â¬âÆââÂ«Â»â¦Â ÃÃÃÅÅââââââÃ·âÃ¿Å¸ÄÄÄ°Ä±ÅÅâ¡Â·âââ°ÃÃÃÃÃÃÃÃÃÃÃï£¿ÃÃÃÃï¢ ËËÂ¯ËËËÂ¸ËËË"};s.MACSTRING=function(e,t,n,r){var i=c[r];if(void 0!==i){for(var o="",a=0;n>a;a++){var s=e.getUint8(t+a);o+=127>=s?String.fromCharCode(s):i[127&s]}return o}};var h,f="function"==typeof WeakMap&&new WeakMap,p=function(e){if(!h){h={};for(var t in c)h[t]=new String(t)}var n=h[e];if(void 0!==n){if(f){var r=f.get(n);if(void 0!==r)return r}var i=c[e];if(void 0!==i){for(var o={},a=0;a<i.length;a++)o[i.charCodeAt(a)]=a+128;return f&&f.set(n,o),o}}};u.MACSTRING=function(e,t){var n=p(t);if(void 0!==n){for(var r=[],i=0;i<e.length;i++){var o=e.charCodeAt(i);if(o>=128&&(o=n[o],void 0===o))return;r.push(o)}return r}},l.MACSTRING=function(e,t){var n=u.MACSTRING(e,t);return void 0!==n?n.length:0},u.INDEX=function(e){var t,n=1,r=[n],i=[],o=0;for(t=0;t<e.length;t+=1){var a=u.OBJECT(e[t]);Array.prototype.push.apply(i,a),o+=a.length,n+=a.length,r.push(n)}if(0===i.length)return[0,0];var s=[],l=1+Math.floor(Math.log(o)/Math.log(2))/8|0,c=[void 0,u.BYTE,u.USHORT,u.UINT24,u.ULONG][l];for(t=0;t<r.length;t+=1){var h=c(r[t]);Array.prototype.push.apply(s,h)}return Array.prototype.concat(u.Card16(e.length),u.OffSize(l),s,i)},l.INDEX=function(e){return u.INDEX(e).length},u.DICT=function(e){for(var t=[],n=Object.keys(e),r=n.length,i=0;r>i;i+=1){var o=parseInt(n[i],0),a=e[o];t=t.concat(u.OPERAND(a.value,a.type)),t=t.concat(u.OPERATOR(o))}return t},l.DICT=function(e){return u.DICT(e).length},u.OPERATOR=function(e){return 1200>e?[e]:[12,e-1200]},u.OPERAND=function(e,t){var n=[];if(Array.isArray(t))for(var r=0;r<t.length;r+=1)i.argument(e.length===t.length,"Not enough arguments given for type"+t),n=n.concat(u.OPERAND(e[r],t[r]));else if("SID"===t)n=n.concat(u.NUMBER(e));else if("offset"===t)n=n.concat(u.NUMBER32(e));else if("number"===t)n=n.concat(u.NUMBER(e));else{if("real"!==t)throw new Error("Unknown operand type "+t);n=n.concat(u.REAL(e))}return n},u.OP=u.BYTE,l.OP=l.BYTE;var d="function"==typeof WeakMap&&new WeakMap;u.CHARSTRING=function(e){if(d){var t=d.get(e);if(void 0!==t)return t}for(var n=[],r=e.length,i=0;r>i;i+=1){var o=e[i];n=n.concat(u[o.type](o.value))}return d&&d.set(e,n),n},l.CHARSTRING=function(e){return u.CHARSTRING(e).length},u.OBJECT=function(e){var t=u[e.type];return i.argument(void 0!==t,"No encoding function for type "+e.type),t(e.value)},l.OBJECT=function(e){var t=l[e.type];return i.argument(void 0!==t,"No sizeOf function for type "+e.type),t(e.value)},u.TABLE=function(e){var t,n=[],r=e.fields.length,o=[],a=[];for(t=0;r>t;t+=1){var s=e.fields[t],l=u[s.type];i.argument(void 0!==l,"No encoding function for field type "+s.type+" ("+s.name+")");var c=e[s.name];void 0===c&&(c=s.value);var h=l(c);"TABLE"===s.type?(a.push(n.length),n=n.concat([0,0]),o.push(h)):n=n.concat(h)}for(t=0;t<o.length;t+=1){var f=a[t],p=n.length;i.argument(65536>p,"Table "+e.tableName+" too big."),n[f]=p>>8,n[f+1]=255&p,n=n.concat(o[t])}return n},l.TABLE=function(e){for(var t=0,n=e.fields.length,r=0;n>r;r+=1){var o=e.fields[r],a=l[o.type];i.argument(void 0!==a,"No sizeOf function for field type "+o.type+" ("+o.name+")");var s=e[o.name];void 0===s&&(s=o.value),t+=a(s),"TABLE"===o.type&&(t+=2)}return t},u.RECORD=u.TABLE,l.RECORD=l.TABLE,u.LITERAL=function(e){return e},l.LITERAL=function(e){return e.length},n.decode=s,n.encode=u,n.sizeOf=l},{"./check":2}],29:[function(e,t,n){"use strict";n.isBrowser=function(){return"undefined"!=typeof window},n.isNode=function(){return"undefined"==typeof window},n.nodeBufferToArrayBuffer=function(e){for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;++r)n[r]=e[r];return t},n.arrayBufferToNodeBuffer=function(e){for(var t=new Buffer(e.byteLength),n=new Uint8Array(e),r=0;r<t.length;++r)t[r]=n[r];return t},n.checkArgument=function(e,t){if(!e)throw t}},{}]},{},[8])(8)}),define("Atem-MOM/export/MasterGlyphSet",["Atem-MOM/errors"],function(e){"use strict";function t(e,t){this._master=e,this._drawFunc=t}var n=e.Key,r=t.prototype;return r.constructor=t,r.get=function(e){var t,r=this._master.getById(e);if(!r)throw new n('Glyph "'+e+'" not found');t=Object.create(null),t.draw=this._drawFunc.bind(r)},t}),define("Atem-IO/tools/zipUtil",["obtain/obtain","path","jszip","./readDirRecursive","Atem-IO/errors"],function(e,t,n,r,i){"use strict";function o(e,n,r,i){if(!e)throw new s("Synchronous ZIP reading is no longer supported by the jszip library.");var o,a,u,l,c,h,f=n.files,p=[];for(o in f)a=f[o],l="/"===i.slice(-1)?"":"/",u=[i,a.name].join(l),a.dir?p.push(r.ensureDirs(e,u)):(h=r.writeFile.bind(r,e,u),c=t.dirname(u),e?p.push(r.ensureDirs(!0,c).then(a.async.bind(a,"binarystring")).then(h)):(r.ensureDirs(!1,c),h(a.sync("binarystring"))));if(e)return p.length?Promise.all(p):Promise.resolve()}function a(e,t,n){var r,i,o=[];for(r=0,i=n.length;i>r;r++)o.push(t.readFile(e,n[r]));return e?o.length?Promise.all(o):Promise.resolve([]):o}var s=i.NotImplemented,u=i.assert,l=e.factory({zip:[function(){throw new s("Synchronous ZIP unpack is no longer supported by the jszip library.")}],unpacked:[!1,"zip","io","targetPath",o]},{zip:["zipData",function(e){return(new n).loadAsync(e)}],unpacked:[!0,"zip","io","targetPath",o]},["zipData","io","targetPath"],function(e){return e("unpacked")}),c=e.factory({files:[!1,"io","sourcePath",r],data:[!1,"io","files",a],generate:[function(){throw new s("Synchronous ZIP generation is no longer supported by the jszip library.")}],zip:["files","data",function(e,t){var r,i,o=new n;for(u(e.length===t.length,"files and data must have the same length"),r=0,i=e.length;i>r;r++)o.file(e[r],t[r],{binary:!0});return o}]},{files:[!0,"io","sourcePath",r],data:[!0,"io","files",a],generate:["zip","dataType",function(e,t){var n={type:t||"base64"};return e.generateAsync(n)}]},["io","sourcePath","dataType"],function(e){return e("generate")});return{unpack:l,pack:c,encode:c}}),define("Atem-IO/io/_base",["Atem-IO/errors","obtain/obtain"],function(e,t){"use strict";function n(){o.call(this)}var r=e.NotImplemented,i=e.IO,o=Object,a=n.prototype=Object.create(o.prototype);return a.isDirName=function(e){return"/"===e.slice(-1)},a.readFile=t.factory({readFile:["path",function(e){throw new r("readFile")}]},{},["path"],function(e){return e("readFile")}),a.writeFile=t.factory({writeFile:["path","data",function(e,t){throw new r("writeFile")}]},{},["path","data"],function(e){return e("writeFile")}),a.appendFile=t.factory({appendFile:["path","data",function(e,t){throw new r("appendFile")}]},{},["path","data"],function(e){return e("appendFile")}),a.unlink=t.factory({unlink:["filename",function(e){throw new r("unlink")}]},{},["filename"],function(e){return e("unlink")}),a.readBytes=t.factory({readBytes:["path","bytes",function(e,t){throw new r("readBytes")}]},{},["path","bytes"],function(e){return e("readBytes")}),a.stat=t.factory({stat:["path",function(e){throw new r("stat")}]},{},["path"],function(e){return e("stat")}),a.pathExists=t.factory({pathExists:["path",function(e){throw new r("pathExists")}]},{},["path"],function(e){return e("pathExists")}),a.getMtime=t.factory({getMtime:["path",function(e){throw new r("getMtime")}]},{},["path"],function(e){return e("getMtime")}),a.setMtime=t.factory({setMtime:["path",function(e){throw new r("setMtime")}]},{},["path"],function(e){return e("setMtime")}),a.readDir=t.factory({readDir:["path",function(e){throw new r("readDir")}]},{},["path"],function(e){return e("readDir")}),a.mkDir=t.factory({mkDir:["path",function(e){throw new r("mkDir")}]},{},["path"],function(e){return e("mkDir")}),a.ensureDir=t.factory({ensureDir:["path",function(e){throw new r("ensureDir")}]},{},["path"],function(e){return e("ensureDir")}),a.rmDir=t.factory({rmDir:["path",function(e){throw new r("rmDir")}]},{},["path"],function(e){return e("rmDir")}),a.rename=t.factory({rename:["oldPath","newPath",function(e,t){throw new r("rmDir")}]},{},["oldPath","newPath"],function(e){return e("rename")}),a.rmDirRecursive=t.factory({rmDirRecursive:["dir",function(e){for(var t,n,r=this.readDir(!1,e),i=0;i<r.length;i++)t=r[i],n=[e,t].join("/"),this[this.isDirName(t)?"rmDirRecursive":"unlink"](!1,n);this.rmDir(!1,e)}]},{contents:["dir",function(e){return this.readDir(!0,e)}],rmDirRecursive:["dir","contents","_callback","_errback",function(e,t,n,r){function o(){var e=new i("rmDirRecursive failed with the following collected Errors:\n"+p.join("\n"),p[0].stack);r(e)}function a(e){f-=1,p.push(e),0===f&&o()}var s,u,l,c,h,f=0,p=[];for(h=function(){f-=1,0===f&&(p.length?o():this.rmDir(!0,e).then(n,r))}.bind(this),s=0,u=t.length;u>s;s++)l=t[s],c=[e,l].join("/"),this[this.isDirName(l)?"rmDirRecursive":"unlink"](!0,c).then(h,a),f+=1}]},["dir"],function(e){return e("rmDirRecursive")}),a.copyRecursive=t.factory({names:["sourcePath",function(e){return this.readDir(!1,e)}],copyDir:["names","targetIO","targetPath","sourcePath",function(e,t,n,r){var i,o,a,s,u;for(i=0;i<e.length;i++)o=e[i],a=[n,o].join("/"),s=[r,o].join("/"),this.isDirName(o)?(t.mkDir(!1,a),this.copyRecursive(!1,s.slice(0,-1),t,a.slice(0,-1))):(u=this.readFile(!1,s),t.writeFile(!1,a,u));return!0}]},{names:["sourcePath",function(e){return this.readDir(!0,e)}],copyDir:["names","targetIO","targetPath","sourcePath","_callback",function(e,t,n,r,i){function o(){p||(f++,f===e.length&&i(null,!0))}function a(e){p=!0,i(e,null)}var s,u,l,c,h,f=0,p=!1;if(!e.length)return void setTimeout(i,0,null,!0);for(s=0;s<e.length;s++)u=e[s],l=[n,u].join("/"),c=[r,u].join("/"),h=this.isDirName(u)?t.mkDir(!0,l).then(this.copyRecursive.bind(this,!0,c.slice(0,-1),t,l.slice(0,-1))):this.readFile(!0,c).then(t.writeFile.bind(t,!0,l)),h.then(o,a)}]},["sourcePath","targetIO","targetPath"],function(e){return e("copyDir")}),a.ensureDirs=t.factory({dirs:["path",function(e){var t,n,r=e.split("/");for(t=1,n=r.length;n>=t;t++)this.ensureDir(!1,r.slice(0,t).join("/"))}]},{dirs:["path","_callback","_errback",function(e,t,n){var r,i=e.split("/"),o=1,a=i.length;(r=function(){a>=o?(this.ensureDir(!0,i.slice(0,o).join("/")).then(r,n),o++):t()}.bind(this))()}]},["path"],function(e){e("dirs")}),n}),define("Atem-IO/io/helpers/Path",["Atem-IO/errors","path"],function(e,t){"use strict";function n(e){var n,r=e||"";if(this.normalPath=t.normalize(r),this.rawPath=r,"/"===this.normalPath[0]&&(this.normalPath=this.normalPath.slice(1)),"/"===this.normalPath.slice(-1)&&(this.normalPath=this.normalPath.slice(0,-1)),this.basename=t.basename(this.normalPath),n=""!==this.normalPath?t.dirname(this.normalPath).split("/"):[],""!==this.basename&&n.push(this.basename),"."===n[0]&&n.shift(),".."===n[0])throw new TypeError('Path "'+this.normalPath+'" is above root.');Object.defineProperty(this,"path",{get:Array.prototype.slice.bind(n)}),Object.defineProperty(this,"directory",{get:Array.prototype.slice.bind(n,0,-1)}),Object.seal(this)}return n.Factory=function(e){return new n(e)},n}),function(e,t){"function"==typeof define&&define.amd?define("EventEmitter",[],function(){return e.returnExportsGlobal=t()}):"object"==typeof exports?module.exports=t():e.EventEmitter=t()}(this,function(){var e;return e=function(){var e=this,t=function(){this.events={}};return t.prototype.on=function(t,n,r){return(this.events[t]=this.events[t]||[]).unshift({fn:n,context:r||e}),this},t.prototype.off=function(e,t){var n=this.events[e]||[],r=n.length;if(e)if(t)for(;r--;)n[r].fn===t&&n.splice(r,1);else delete this.events[e];else this.events={};return this},t.prototype.trigger=function(e){for(var t=Array.prototype.slice.call(arguments,1),n=this.events[e]||[],r=n.length,i=[],o=0;r>o;o++)i.push(n[o]);for(;r--;)i[r].fn.apply(i[r].context,t);return this},t}()}),define("Atem-IO/io/InMemory",["Atem-IO/errors","./_base","obtain/obtain","./helpers/Path","EventEmitter"],function(e,t,n,r,i){"use strict";function o(e){this.modified(void 0,e)}function a(e,t){o.call(this,t),this._content=e||""}function s(e){o.call(this,e),this._content=Object.create(null),this._index=new Map}function u(){t.call(this),this._root=new s,this._events=new i}function l(e,t){var i=["pathString"];return e&&Array.prototype.push.apply(i,e instanceof Array?e:[e]),n.factory({path:["pathString",r.Factory],request:t},{},i,function(e){return e("request")})}var c=(e.NotImplemented,e.IO),h=e.IONotDir,f=e.IOIsDir,p=e.IONoEntry,d=e.IOEntryExists,m=e.IONotEmpty,g=e.assert,v=n.Argument,y="undefined"!=typeof process&&"function"==typeof process.nextTick?process.nextTick.bind(process):function(e){setTimeout(e,0)};o.prototype=Object.create(null),o.prototype.modified=function(e,t){this.mtime=t||new Date,this._parent=void 0},o.prototype.setParent=function(e){g(!this._parent,"Node has a parent."),g(e instanceof s,'"parent" must be a Directory'),g(e.isChild(this),'This is not child of "parent".'),this._parent=e},o.prototype.unsetParent=function(){this._parent&&(g(!this._parent.isChild(this),'This is still a child of "parent".'),this._parent=void 0)},o.prototype.hasParent=function(){return!!this._parent},a.prototype=Object.create(o.prototype),Object.defineProperty(a.prototype,"content",{set:function(e){this._content=e,this.modified()},get:function(){return this._content}}),s.prototype=Object.create(o.prototype),s.prototype.lookup=function(){var e,t=Array.prototype.slice.call(arguments,1),n=arguments[0],r={".":this,"..":this._parent};if(0===arguments.length)return this;if("string"!=typeof n||""===n)throw new TypeError('A name must be a none empty string, but it is: "'+n+'"');if(r.hasOwnProperty(n)?e=r[n]:n in this._content&&(e=this._content[n]),!e)throw new p(n);if(e instanceof s)return e.lookup.apply(e,t);if(t.length)throw new h(n);return e},s.prototype.getItem=function(e,t){var n=this.lookup.apply(this,t);if(!(e!==s||n instanceof s))throw new h('"'+t.join("/")+'" is not a directory');if(e===a&&n instanceof s)throw new f('"'+t.join("/")+'" is not a file');if(e&&!(n instanceof e))throw new c('"'+t.join("/")+'" is not a type of: '+e);return n},s.prototype.isChild=function(e){return this._index.has(e)},s.prototype.setItem=function(e,t){var n;if(!(t instanceof o))throw new TypeError('"item" must be an Node');if(n=this._content[e],n instanceof s){if(t instanceof a)throw new f('"'+e+'" is a directory');throw new d('directory "'+e+'" exists')}if(n instanceof a&&t instanceof s)throw new d('file "'+e+'" exists');if(t.hasParent())throw new c('item "'+e+'" has a parent already');if(t===this)throw new c("item is this directory");this._content[e]=t,this._index.set(t,e),t.setParent(this),this.modified()},s.prototype.isEmpty=function(){for(var e in this._content)return!1;return!0},s.prototype.removeItem=function(e,t){var n=this.getItem(e,[t]);if(n instanceof s&&!n.isEmpty())throw new m(' "'+t+'" directory is not empty');if(!this.isChild(n))throw new c(' "'+t+'" is not a child.');delete this._content[t],this._index["delete"](n),n.unsetParent(this),this.modified()},Object.defineProperty(s.prototype,"entries",{get:function(){var e,t=[];for(e in this._content)t.push(this._content[e]instanceof s?e+"/":e);return t}});var b=u.prototype=Object.create(t.prototype);return b.on=function(){this._events.on.apply(this._events,arguments)},b.off=function(){this._events.off.apply(this._events,arguments)},b._emit=function(e,t){var n,r=[this._events];Array.prototype.push.apply(r,arguments),n=Function.prototype.bind.apply(this._events.trigger,r),y(n)},b._trigger=function(e,t){this._emit(e,t),this._emit("all",Object.freeze({event:e,path:t}))},b._getItem=function(e,t,n){var r=this._root.getItem(t||o,e.path);return void 0===n?r:r[n]},b._writeFile=function(e,t,n){var r,i=this._root.getItem(s,e.directory);try{r=i.getItem(a,[e.basename]),n?r.content+=t:r.content=t,this._trigger("change",e.normalPath)}catch(o){if(!(o instanceof p))throw o;r=new a(t),i.setItem(e.basename,new a(t)),this._trigger("add",e.normalPath)}},b._delete=function(e,t){var n=this._root.getItem(s,e.directory);n.removeItem(t,e.basename),this._trigger("unlink"+(t===s?"Dir":""),e.normalPath)},b._pathExists=function(e){try{return!!this._getItem(e)}catch(t){if(!(t instanceof p))throw t}return!1},b._mkDir=function(e){var t=this._root.getItem(s,e.directory);t.setItem(e.basename,new s),this._trigger("addDir",e.normalPath)},b.readFile=l(void 0,["path",a,new v("content"),b._getItem]),b.getMtime=l(void 0,["path",void 0,new v("mtime"),b._getItem]),b.readDir=l(void 0,["path",s,new v("entries"),b._getItem]),b.pathExists=l(void 0,["path",b._pathExists]),b.writeFile=l("data",["path","data",!1,b._writeFile]),b.appendFile=l("data",["path","data",!0,b._writeFile]),b.unlink=l(void 0,["path",a,b._delete]),b.rmDir=l(void 0,["path",s,b._delete]),b.mkDir=l(void 0,["path",b._mkDir]),b.ensureDir=l(void 0,["path",function(e){try{return this._mkDir(e)}catch(t){if(!(t instanceof d))throw t;return 0}}]),u}),define("Atem-IO/io/Mounting",["Atem-IO/errors","./_base","obtain/obtain","./helpers/Path","EventEmitter"],function(e,t,n,r,i){"use strict";function o(e){t.call(this),this._baseIo=e,this._mounted=Object.create(null),this._mountPointsByPathLength=Object.create(null),this._longestMountPoint=0}function a(e,t,n,r){var i=t[0],o=t[1],a=[e,o];return Array.prototype.push.apply(a,r),i[n].apply(i,a)}function s(e){var t,n=[];for(f(e===arguments.length-1,"Wrong amount of arguments. Expected "+e+" but got "+arguments.length),t=1;e>=t;t++)n.push(arguments[t]);return n}function u(e,t){var r,i=new p(e),o=["path"],u=t?t instanceof Array?t:[t]:[];return r=[u.length],Array.prototype.push.apply(r,u),r.push(s),Array.prototype.push.apply(o,u),n.factory({dispatchTarget:["path",d._dispatchTarget],dispatch:[!1,"dispatchTarget",i,"args",a],args:r},{dispatch:[!0,"dispatchTarget",i,"args",a]},o,function(e){return e("dispatch")})}var l=e.IOEntryExists,c=e.IONotDir,h=e.IONoEntry,f=e.assert,p=n.Argument,d=o.prototype=Object.create(t.prototype);return d.constructor=o,d.mount=function(e,t,n){var i,o,a,s=r.Factory(t);if(s.normalPath in this._mounted)throw new l('Mount Point "'+l+'" is already in use');i=r.Factory(n||""),this._mounted[s.normalPath]=[e,i.normalPath],o=s.path.length,a=this._mountPointsByPathLength[o],a||(this._mountPointsByPathLength[o]=a=Object.create([]),Object.defineProperty(a,"..../length",{value:0,writable:!0})),a["..../length"]+=1,a[s.normalPath]=!0,o>this._longestMountPoint&&(this._longestMountPoint=o)},d.isMountPoint=function(e){var t=new r(e).normalPath;return t in this._mounted?!1:void 0},d.umount=function(e){var t=r.Factory(e),n=t.path.length,i=this._mountPointsByPathLength[n];delete this._mounted[t.normalPath],i&&(i["..../length"]-=1,0===i["..../length"]?(delete this._mountPointsByPathLength[n],this._longestMountPoint===n&&(this._longestMountPoint=Math.max.apply(null,Object.keys(this._mountPointsByPathLength).map(Number).filter(isFinite)))):delete i[t.normalPath])},d._dispatchTarget=function(e){var t,n,i,o,a,s=r.Factory(e),u=s.path,l="",c=e;t=-1,n=u.length,i=t+1;do{if(i>this._longestMountPoint)break;o=this._mountPointsByPathLength[i];{if(o&&l in o)return a=this._mounted[l],c=[a[1]].concat(u.slice(i)).join("/"),[a[0],c];t+=1,i=t+1,l=0===t?u[t]:[l,u[t]].join("/")}}while(n>t);return[this._baseIo,c]},function(e,t,n){var r;for(r in n)e[r]=t.apply(null,n[r])}(d,u,{readFile:["readFile",void 0],writeFile:["writeFile",["data"]],appendFile:["appendFile",["data"]],unlink:["unlink",void 0],readBytes:["readBytes",["bytes"]],stat:["stat",void 0],pathExists:["pathExists",void 0],getMtime:["getMtime",void 0],_readDir:["readDir",void 0],mkDir:["mkDir",void 0],ensureDir:["ensureDir",void 0],_rmDir:["rmDir",void 0]}),d._augmentDirectoryListing=function(e,t){function n(e){return 0===e.indexOf(c)}function i(e){return e.split("/").slice(l,l+1)+"/"}var o,a,s,u=r.Factory(e),l=u.path.length,c=u.normalPath+"/",h=[],f=Object.create(null);for(s in this._mountPointsByPathLength)parseInt(s,10)<=l||Array.prototype.push.apply(h,Object.keys(this._mountPointsByPathLength[s]).filter(n).map(i));for(o=0,a=h.length;a>o;o++)f[h[o]]=!0;for(o=0,a=t.length;a>o;o++)t[o]+"/"in f||(f[t[o]]=!0);return Object.keys(f)},d.readDir=n.factory({readDirResult:["path",function(e){var t={error:null,data:null};try{t.data=this._readDir(!1,e)}catch(n){if(!(n instanceof h||n instanceof c))throw n;t.error=n}return t}],listing:["path","readDirResult",function(e,t){var n=this._augmentDirectoryListing(e,t.data||[]);if(!n.length&&t.error)throw t.error;return n}]},{readDirResult:["path",function(e){function t(e){return r.data=e,r}function n(e){if(!(e instanceof h||e instanceof c))throw e;return r.error=e,r}var r={error:null,data:null};return this._readDir(!0,e).then(t,n)}]},["path"],function(e){return e("listing")}),d.rmDir=n.factory({isMountPoint:["path",d.isMountPoint],rmDir:[!1,"path",d._rmDir]},{rmDir:[!0,"path",d._rmDir]},["path"],function(e,t){if(e("isMountPoint"))throw new c("You can't rmDir(path) \""+t+'",  it is a mount point. Use io.umount(path) instead.');return e("rmDir")}),o}),define("require/text!Atem-MOM/cpsGenerators/interpolation.tpl",[],function(){return'glyph {\n{{#n}}\n    base{{.}}: baseMaster{{.}}[Selector "glyph#" + this:id];\n{{/n}}\n}\n\ncontour > p {\n    indexContour: parent:index;\n{{#n}}\n    base{{.}}: parent:parent:base{{.}}\n        :children[indexContour]\n        :children[index]\n        ;\n{{/n}}\n}\n\ncenter {\n    indexPenstroke: parent:index;\n{{#n}}\n    base{{.}}: parent:parent:base{{.}}\n        :children[indexPenstroke]\n        :children[index]\n        ;\n{{/n}}\n}\n\ncenter > * {\n    indexPenstroke: parent:parent:index;\n    indexCenter: parent:index;\n{{#n}}\n    base{{.}}: parent:parent:parent:base{{.}}\n        :children[indexPenstroke]\n        :children[indexCenter]\n        :children[index]\n        ;\n{{/n}}\n}\n\n* {\n    /* Ensure that the used proportions sum up to 1.\n     * Any other value produces usually unwanted effects.\n     * If you don\'t want this in your master redefine it as\n     * interpolationUnit: 1;\n     */\n    interpolationUnit: 1/(0{{#n}}\n        + proportion{{.}}{{/n}});\n{{#n}}\n    _p{{.}}: proportion{{.}} * interpolationUnit;\n{{/n}}\n}\n\nglyph {\n    width: 0{{#n}}\n        + base{{.}}:width * _p{{.}}{{/n}};\n    height: 0{{#n}}\n        + base{{.}}:height * _p{{.}}{{/n}};\n}\n\ncenter,\ncenter > left,\ncenter > right,\ncontour > p {\n    on: Vector 0 0{{#n}}\n        + base{{.}}:on * _p{{.}}{{/n}};\n    in: Vector 0 0{{#n}}\n        + base{{.}}:in * _p{{.}}{{/n}};\n    out: Vector 0 0{{#n}}\n        + base{{.}}:out * _p{{.}}{{/n}};\n}\n\ncomponent {\n    baseGlyphName: baseNode:baseGlyphName;\n    /* FIXME: there\'s currently no way of interpolating transformation matrixes\nsee: https://github.com/graphicore/Atem-Property-Language/issues/1\n    */\n    transformation: baseNode:transformation;\n{{#n}}\n    base{{.}}: parent:base{{.}}\n        :children[index]\n        ;\n{{/n}}\n}\n\nmaster * {\n{{#n}}\n    baseMaster{{.}}: master:baseMaster{{.}};\n{{/n}}\n{{#n}}\n    proportion{{.}}: master:proportion{{.}};\n{{/n}}\n}\n\n/****\n * set up the baseMasters and the proportions of the <MOM Master>:\n\n* {\n{{#n}}\n    baseMaster{{.}}: S"master#anyName_{{.}}";\n{{/n}}\n{{#n}}\n    proportion{{.}}: 1;\n{{/n}}\n}\n\n****/\n';
}),define("Atem-MOM/cpsGenerators/interpolation",["mustache","require/text!./interpolation.tpl"],function(e,t){return function(n){var r,i={},o=i.n=[];for(r=0;n>r;r++)o.push(r);return e.render(t,i)}}),define("Atem-MOM/project/Project",["Atem-MOM/errors","Atem-IO/errors","obtain/obtain","./IOProjectPersistence","Atem-Logging/Logger","Atem-Logging/Level","Atem-Logging/ConsoleHandler","Atem-Logging/YAMLFormatter","Atem-Logging/CallbackHandler","Atem-Logging/logRecordFromObject","Atem-CPS/CPS/RuleController","Atem-CPS/CPS/SelectorEngine","Atem-MOM/Controller","Atem-MOM/cpsTools","Atem-MOM/MOM/Multivers","Atem-MOM/MOM/Univers","Atem-MOM/MOM/Master","Atem-MOM/import/UFOImporter","Atem-MOM/export/UFOExporter","Atem-MOM/export/OTFExporter","Atem-IO/tools/zipUtil","Atem-IO/io/InMemory","Atem-IO/io/Mounting","yaml","ufojs/ufoLib/UFOWriter","ufojs/ufoLib/UFOReader","Atem-MOM/cpsGenerators/interpolation","Atem-MOM/cpsGenerators/metapolation"],function(e,t,n,r,i,o,a,s,u,l,c,h,f,p,d,m,g,v,y,b,_,w,x,S,C,k,P,M){"use strict";function T(e){var t,n,r=[],i=this[e[0]],o=i[e[1]];for(t=1,n=arguments.length;n>t;t++)r.push(arguments[t]);return o.apply(i,r)}function A(e){return new d(e)}function O(e,t,n,s){if(this._plainIO=e,this._persistedMasters=null,this._cache={glyphGroups:null,fontInfo:null},this.baseDir=t||".",this._io=s?new x(e):e,this._persistence=new r(this._io,this.baseDir),s){var u,l;for(u=0,l=s.length;l>u;u++)this._io.mount(s[u].io||e,[this._persistence.cpsDir,s[u].mountPoint||"lib"].join("/"),s[u].pathOffset,s[u].allowAboveRoot)}this._fsEvents=n,this._selectorEngine=new h,Object.defineProperty(this,"ruleController",{value:new c(this._io,this._persistence.cpsDir,p.initializePropertyValue,this._selectorEngine)}),this.ruleController.registerCPSGenerator("interpolation",P),this.ruleController.registerCPSGenerator("metapolation",M),this._controller=new f(this.ruleController,A,this._selectorEngine),this._log=(new i).setLevel(o.DEBUG),this._log.addHandler(new a)}var E=e.NotImplemented,$=e.Deprecated,N=t.IONoEntry,I=e.assert,D=O.prototype;return D.constructor=O,Object.defineProperty(D,"baseMasterCPSFile",{value:"lib/MOM/primary.cps"}),Object.defineProperty(D,"controller",{get:function(){return this._controller}}),Object.defineProperty(D,"_univers",{get:function(){return this._controller.rootNode.getChild(0)}}),D.setUpdateChangedRuleHandlers=function(t,n){this._updateChangedRuleHandlers=[t||null,n||e.unhandledPromise]},D._fileChangeHandler=function(t){var n,r=t.indexOf(this._persistence.cpsDir);if(0===r){n=t.slice(this._persistence.cpsDir.length+1);try{this.controller.updateChangedRule(!0,n).then(this._updateChangedRuleHandlers[0],this._updateChangedRuleHandlers[1])}catch(i){if(!(i instanceof e.Key))throw i}}},D._getPersistedMasters=function(e){function t(e){var t,n,r,i,o=[],a=".master";for(t=0,n=e.length;n>t;t++)r=e[t],i=r.lastIndexOf(a),-1!==i&&o.push(r.slice(0,i));return o}var n=this._persistence.listMOMItems(e);return e?n.then(t):t(n)},D._initLogging=function(e){e&&e.forEach(function(e){this._log.relog(l(e))},this);var t=new u(this._persistence.appendLog.bind(this._persistence,!0));t.setLevel(o.INFO),t.setFormatter(new s),this._log.addHandler(t)},D._getFreshProject=function(){return{session:{masters:[]}}},D._saveProject=function(e){var t=this._controller.rootNode.dumpWithoutMasters();this._persistence.writeMOMData(e,"multivers",t),this._persistence.writeProject(e,this._project)},D.init=function(e){return this._log.debug("Initializing new project at "+this.baseDir),this._project=this._getFreshProject(),this._persistedMasters=[],e?this._persistence.init(!0).then(this._saveProject.bind(this,!0)).then(this._initLogging.bind(this)):(this._persistence.init(!1),this._controller.rootNode.add(new m),this._saveProject(!1),void this._initLogging())},D._loadProject=function(e){var t=[this._persistence.readProject(!!e),this._persistence.readMOMData(!!e,"multivers")],n=function(e){this._project=e[0],this._controller.rootNode.loadTree(e[1])}.bind(this);return e?Promise.all(t).then(n):n(t)},D.load=function(e){function t(e){var t=[this._getPersistedMasters(e),this._persistence.readLog(e)];return e?Promise.all(t):t}function n(e){this._persistedMasters=e[0],this._initLogging(e[1])}return this._log.debug("Loading project"),e?this._persistence.open(!0).then(this._loadProject.bind(this,!0)).then(t.bind(this,!0)).then(n.bind(this)):(this._persistence.open(!1),this._loadProject(!1),void n.call(this,t.call(this,!1)))},D.addMasterToSession=function(e){-1===this._project.session.masters.indexOf(e)&&this._project.session.masters.push(e)},D.openSession=function(e){if(e)throw new E("openSession currently only supports synchronous execution.");var t,n,r=this._project.session.masters,i=[],o=[];for(t=0,n=r.length;n>t;t++)try{i.push(this.openMaster(e,r[t],!0)),o.push(r[t])}catch(a){if(!(a instanceof N))throw a;this.log.info("Session contained master #"+r[t]+" to load but it was not found on disk.")}return this._project.session.masters=o,i},D.saveMaster=n.factory({momData:["master",function(e){var t;return t=e.hasBaseNode()?{base:e.baseNode.id,data:e.dumpDataToDict()}:e.dumpTree()}],cpsFile:["master",function(e){return e.getAttachment("cpsFile")}],fileName:["master",function(e){return e.id+".master"}],setPersisted:["master","saveMOM",function(e){-1===this._persistedMasters.indexOf(e.id)&&this._persistedMasters.push(e.id)}],saveMOM:[["_persistence","writeMOMData"],!1,"fileName","momData",T],saveCPS:[["ruleController","saveRuleIfChanged"],!1,"cpsFile",T],job:["setPersisted","saveCPS",function(){}]},{saveMOM:[["_persistence","writeMOMData"],!0,"fileName","momData",T],saveCPS:[["ruleController","saveRuleIfChanged"],!1,"cpsFile",T]},["master"],function(e){return e("job")}),D.save=function(e){var t,n,r=this._univers.children;for(this._saveProject(e),t=0,n=r.length;n>t;t++)this.saveMaster(e,r[t]);this.ruleController.saveChangedRules(e)},D.hasMaster=function(e){return!(!this._univers.getById(e)&&-1===this._persistedMasters.indexOf(e))},Object.defineProperty(D,"masters",{get:function(){var e,t,n=Object.create(null),r=this._univers.children;for(e=0,t=r.length;t>e;e++)n[r[e].id]=!0;for(r=this._persistedMasters,e=0,t=r.length;t>e;e++)n[r[e]]=!0;return Object.keys(n)}}),D._initDerivedMaster=function(e,t,n){function r(e){var r=e.clone(19);return r.loadDataFromDict(n.data),r.id=t,r}var i=this._openMaster(e,n.base);return e?i.then(r):r(i)},D._initBaseMaster=function(e,t){var n=new g;return n.loadTree(t),n.id!==e&&(this._log.info("Auto corrected id. Loaded master as #"+e+" but it came with the id #"+n.id+"."),n.id=e),n},D._openMaster=n.factory({momFileName:["masterName",function(e){return e+".master"}],data:[["_persistence","readMOMData"],!1,"momFileName",T],baseMaster:["masterName","data",D._initBaseMaster],derivedMaster:[!1,"masterName","data",D._initDerivedMaster]},{data:[["_persistence","readMOMData"],!0,"masterName",T],derivedMaster:[!0,"masterName","data",D._initDerivedMaster]},["masterName"],function(e,t){var n=this._univers.getById(t);if(n)return n;var r=e("data");return n=e(r.base?"derivedMaster":"baseMaster"),this._univers.add(n),n}),D.openMaster=n.factory({originMaster:[!1,"masterName",D._openMaster],requiredMasters:["originMaster","failedMastersReturn",function(e,t){var n,r,i=new Set,o=e.getAttachment("requiredMasters")||[];for(i.add(e.id);n=o.pop();)if(!i.has(n)){i.add(n);try{r=this._openMaster(!1,n)}catch(a){if(t&&t.push(n),!(a instanceof N))throw a;this._log.warning("Dependency master #"+n+'" of #'+e.id+" does not exist on disk. "+a)}Array.prototype.push.apply(o,r.getAttachment("requiredMasters")||[])}}]},{originMaster:[!0,"masterName",D._openMaster],requiredMasters:["originMaster","failedMastersReturn","_callback","_errback",function(e,t,n,r){var i=0,o=new Set,a=function(r,o){if(i-=1,t&&t.push(r),!(o instanceof N))throw o;this._log.warning("Dependency master #"+r+'" of #'+e.id+" does not exist on disk. "+o),0===i&&n(e)}.bind(this),s=function(t){var r,u,l,c;for(i-=1,l=t.getAttachment("requiredMasters")||[],r=0,u=l.length;u>r;r++)c=l[r],o.has(c)||(o.add(c),i+=1,this._openMaster(!0,c).then(s,a.bind(null,c)));0===i&&n(e)}.bind(this);o.add(e.id),setTimeout(s,0,e)}]},["masterName","openRequiredMasters","failedMastersReturn"],function(e,t,n){var r=e("originMaster");return(void 0!==n||n)&&e("requiredMasters"),r}),D.getMOMMaster=function(){throw new $('"getMOMMaster" is deprecated, use "open" instead.')},D._cloneMaster=n.factory({momMaster:["masterName","sourceMOM","cloneArgs",function(e,t,n){var r=t.clone.apply(t,n),i=this._getUniqueMasterName(e),o=i+".master.cps";return r.attachData("cpsFile",o),r.id=i,r}],cpsFile:["momMaster",function(e){return e.getAttachment("cpsFile")}],sourceMOM:[!1,"sourceMasterName",D._openMaster],saveCPS:[["_persistence","writeCPSFile"],!1,"cpsFile","cpsString",T]},{sourceMOM:[!0,"sourceMasterName",D._openMaster],saveCPS:[["_persistence","writeCPSFile"],!0,"cpsFile","cpsString",T]},["sourceMasterName","masterName","cpsString","cloneArgs"],function(e){e("saveCPS");var t=e("momMaster");return this._univers.add(t),t}),D.createDerivedMaster=function(e,t,n,r){var i=[19];return this._cloneMaster(e,t,n,r,i)},D.cloneMaster=n.factory({cloneArgs:[function(){return[47]}],sourceMOM:[!1,"sourceMasterName",D._openMaster],sourceCPSFile:["sourceMOM",function(e){return e.getAttachment("cpsFile")}],cpsRule:[["ruleController","getRule"],!1,"sourceCPSFile",T],cpsString:["cpsRule",function(e){return e+""}],clone:[!1,"sourceMasterName","masterName","cpsString","cloneArgs",D._cloneMaster]},{sourceMOM:[!0,"sourceMasterName",D._openMaster],cpsRule:[["ruleController","getRule"],!0,"sourceCPSFile",T],clone:[!0,"sourceMasterName","masterName","cpsString","cloneArgs",D._cloneMaster]},["sourceMasterName","masterName"],function(e){return e("clone")}),D._masterHasDependants=function(e){var t,n,r,i;for(t=0,n=this._univers.childrenLength;n>t;t++){if(r=this._univers.getChild(t),r.hasBaseNode()&&r.baseNode===e)return!0;if(i=r.getAttachment("requiredMasters")||[],-1!==i.indexOf(e.id))return!0}return!1},D.deleteMaster=function(e,t,n,r){function i(e){return e!==t}function o(){return e?Promise.resolve(!1):!1}var a,s,u,l=t+".master.cps",c=t+".master",h=this._univers.getById(t);if(h){if(!r&&this._masterHasDependants(h))return o();this._univers.remove(h),n&&h.hasBaseNode()&&(u=this.deleteMaster(!!e,h.baseNode,n,r))}return s=function(e){return this.ruleController.purgeRule(e),!0}.bind(this,l),this._persistedMasters=this._persistedMasters.filter(i),this._project.session.masters=this._project.session.masters.filter(i),a=[this._persistence.deleteMOMData(e,c,!0),this._persistence.deleteCPSFile(e,l,!0),u],e?Promise.all(a).then(s):s()},D._getUniqueMasterName=function(e){var t,n,r,i="_",o=e.lastIndexOf(i);if(!this.hasMaster(e))return e;-1!==o&&(n=e.slice(o+1),/^[0-9]+$/.test(n)&&(n=parseInt(n,10),r=e.slice(0,o))),void 0===r&&(n=0,r=e);do t=[r,n++].join(i);while(this.hasMaster(t));return t},D._getGlyphGroups=n.factory({groups:[["_persistence","readGroups"],!1,T]},{groups:[["_persistence","readGroups"],!0,T]},[],function(e){var t=this._cache.glyphGroups;return t||(t=this._cache.glyphGroups=e("groups")),t}),D._getFontInfo=n.factory({fontInfo:[["_persistence","readFontInfo"],!1,T]},{fontInfo:[["_persistence","readFontInfo"],!0,T]},[],function(e){var t=this._cache.fontInfo;return t||(t=this._cache.fontInfo=e("fontInfo")),t}),D.ufoImporterFactory=function(e,t,n,r){if(e)throw new E("ufoImporterFactory currently only supports synchronous execution.");var i,o=r||this._log,a=this._getGlyphGroups(e),s={classes:a};try{i=k.factory(e,n||this._plainIO,t)}catch(u){return o.warning(u),!1}return a=this._getGlyphGroups(e),s={classes:a},v.factory(e,o,i,s)},D.initializeImportedMaster=function(e,t){var n=this._getUniqueMasterName(t);return e.id=n,e.attachData("cpsFile",this.baseMasterCPSFile),this._univers.add(e),e},D["import"]=function(e,t,n,r,i){if(e)throw new E("import currently only supports synchronous execution.");var o,a=this.ufoImporterFactory(e,n,i);return o=a.doImport(e,r),this.initializeImportedMaster(o,t)},D.importUFOData=function(){var e,t,n=[];for(this._cache.glyphGroups=null,this._cache.fontInfo=null,e=0,t=arguments.length;t>e;e++)n.push(arguments[e]);return this._persistence.importUFOData.apply(this._persistence,n)},D._unpackZippedUFOMasters=function(e,t){var n,r,i,o,a,s,u=e.readDir(!1,"/"),l=[],c=t||this._log,h=function(e,t){c.warning(t,'File: "'+e+'"')};for(n=0,r=u.length;r>n;n++)i=".ufo.zip",o=u[n],o.slice(-i.length)===i&&(a=e.readFile(!1,o),e.unlink(!1,o),s=_.unpack(!0,a,e,"/").then(null,h.bind(null,o)),l.push(s));return l.length?Promise.all(l):Promise.resolve([])},D._getUFOToNameMap=function(e,t,n){function r(e){var t,r,i,o,a,s=".ufo/",u=[];for(t=0,r=e.length;r>t;t++)i=e[t],i.slice(-s.length)===s&&(a=i.slice(0,-1),o=(n+i).split(s)[0],u.push([a,o]));return u}var i=t.readDir(e,"/");return e?i.then(r):r(i)},D._importUFOMastersFromIO=function(e,t,n){if(e)throw new E("Async path is not implemented");var r,i,o,a,s,u,l=this._getUFOToNameMap(e,t,n),c=[];for(r=0,i=l.length;i>r;r++)o=l[r][0],a=l[r][1],s=void 0,u=this["import"](!1,a,o,s,t),c.push(u);return c},D.importZippedUFOMasters=function(e,t,n){if(!e)throw new E("Sync path is not implemented");I(e===!0,"This is not (yet) a complete obtain API");var r=new w;return _.unpack(!0,t,r,"").then(this._unpackZippedUFOMasters.bind(this,r)).then(this._importUFOMastersFromIO.bind(this,!1,r,n))},D.unpackImportBlob=function(e,t,n){var r=new w;return _.unpack(!0,e,r,"").then(this._unpackZippedUFOMasters.bind(this,r,n)).then(this._getUFOToNameMap.bind(this,!0,r,t)).then(function(e){return[r,e]})},D.getUFOExportGenerator=function(e,t,n,r,i){function o(e){return[e.exportGenerator(),a]}var a=new w,s=this._getUFOExporter(!1,a,t,n,r,i);return e?s.then(o):o(s)},D._getUFOExporter=n.factory({master:[!1,"masterName",D.openMaster],ufoWriter:[!1,"io","targetDirName","formatVersion",C.factory],ufoExporter:["ufoWriter","master","precision",function(e,t,n){return new y(this._log,e,t,void 0,!0,n)}]},{master:[!0,"masterName",D.openMaster],ufoWriter:[!0,"io","targetDirName",C.factory]},["io","masterName","targetDirName","formatVersion","precision"],function(e){return e("ufoExporter")}),D._getOTFExporter=function(e,t,n,r){var i=[this.openMaster(e,t),this._getFontInfo(e)],o=function(e){var t=e[0],i=t.getAttachment("fontinfo")||e[1];return new b(this._log,t,i,n,r)}.bind(this);return e?Promise.all(i).then(o):o(i)},D.getOTFExportGenerator=function(e,t,n){function r(e){return[e.exportGenerator(),i]}var i=new w,o=this._getOTFExporter(e,t,i,n);return e?o.then(r):r(o)},D.exportInstance=function(e,t,n){if(".ufo.zip"===t.slice(-8)){var r=this.getZippedInstance(e,t.slice(0,-4),n,"nodebuffer");this._plainIO.writeFile(!1,t,r)}else if(".otf"===t.slice(-4)){var i=this.getOTFInstance(e);this._plainIO.writeFile(!1,t,i)}else this.exportUFOInstance(e,t,n)},D.exportUFOInstance=function(e,t,n,r,i){function o(e){e.doExport()}var a=this._getUFOExporter(!1,this._plainIO,t,n,r,r,i);return e?a.then(o):o(a)},D.getZippedInstance=n.factory({io:[function(){return new w}],ufoExporter:[!1,"io","masterName","targetDirName","formatVersion","precision",D._getUFOExporter],exportedIo:["ufoExporter","io",function(e,t){return e.doExport(),t}],zip:[!1,"exportedIo","targetDirName","dataType",_.pack]},{ufoExporter:[!0,"io","masterName","targetDirName","formatVersion","precision",D._getUFOExporter],zip:[!0,"exportedIo","targetDirName","dataType",_.pack]},["masterName","targetDirName","formatVersion","precision","dataType"],function(e){return e("zip")}),D.getZipFromIo=_.pack,D.getOTFInstance=function(e,t){function n(e){return e.do_export()}var r=this._getOTFExporter(e,t);return e?r.then(n):n(r)},O}),define("metapolator/models/metapolator/_BaseModel",[],function(){"use strict";function e(){}e.prototype;return e}),define("metapolator/models/metapolator/masters/OperatorModel",["../_BaseModel"],function(e){"use strict";function t(e,t,n){this.base=e,this.parameter=n,this.id=t,this.value=e.standardValue}var n=t.prototype=Object.create(e.prototype);return n.setValue=function(e){this.value=e},n.clone=function(){var e={};for(var t in this)"$$hashKey"!==t&&(e[t]=this[t]);return e},t}),define("metapolator/models/metapolator/masters/ParameterModel",["../_BaseModel","./OperatorModel","metapolator/ui/metapolator/ui-tools/selectionTools"],function(e,t,n){"use strict";function r(e,t){this.element=t,this.base=e,this.operators=[],t.level===e.effectiveLevel&&(this.effectiveValue=null,this.initial=null,this.getInitial=e.getInitial),this.stacked=!1}var i=r.prototype=Object.create(e.prototype);return Object.defineProperty(i,"effectiveValue",{set:function(e){if(e!==e)throw new Error("Got a NaN");this._effectiveValue=e},get:function(){return this._effectiveValue}}),i.setInitial=function(e){var t=this.getInitial(e);this.initial=t,this.effectiveValue=t},i.changedOperator=function(e){var t,n,r=this.element,i=r.getEffectedElements(this.base.effectiveLevel);if(e.base.effectiveLocal){t=this.getCPSFactor(),r.writeValueInCPSfile(t,this);for(var o=0,a=i.length;a>o;o++)n=i[o],n.updateEffectiveValue(this.base,!1)}else for(var s=0,u=i.length;u>s;s++)n=i[s],n.updateEffectiveValue(this.base,!0)},i.checkIfHasOperator=function(e,t){var n=e.id,r=this.findOperator(e.base,e.id);return r?r:this.addOperator(e.base,n,t)},i.checkIfHasNonLocalOperators=function(){for(var e=0,t=this.operators.length;t>e;e++){var n=this.operators[e];if(!n.base.effectiveLocal)return!0}return!1},i.addOperator=function(e,r,i){var o=new t(e,r,this);return this.operators.push(o),this.stacked=!0,n.selection[i].addStackedParameter(this),o},i.changeOperator=function(e,t){var n=this.checkIfHasOperator(e,this.element.level);this._cleanUpOperatorEffects(n),n.base=t,n.setValue(t.standardValue)},i.removeOperator=function(e,t){var n,r=this.findOperator(e.base,e.id);r&&(this._cleanUpOperatorEffects(r),n=this.operators.indexOf(r),this.operators.splice(n,1))},i.findOperator=function(e,t){for(var n=this.operators.length-1;n>=0;n--){var r=this.operators[n];if(r.base.name===e.name&&r.id===t)return r}return null},i.destackOperators=function(){if(this.stacked){var e={base:{name:null}},t=[],n={};if(this.operators.length>0){for(var r=0,i=this.operators.length;i>r;r++){var o=this.operators[r];o.id=null,o.base.name===e.base.name?"add"===o.base.name||"subtract"===o.base.name?n.value=parseFloat(n.value)+parseFloat(o.value):("multiply"===o.base.name||"divide"===o.base.name)&&(n.value=parseFloat(n.value)*parseFloat(o.value)):(0!==r&&t.push(n),n=o),e=o}t.push(n),this.operators=t}this.stacked=!1}},i._cleanUpOperatorEffects=function(e){e.setValue(e.base.standardValue),this.changedOperator(e)},i.removeCPS=function(){for(var e=0,t=this.operators.length;t>e;e++){var n=this.operators[e];this._cleanUpOperatorEffects(n)}},i.getCPSFactor=function(){for(var e=1,t=!1,n=this.operators.length-1;n>=0;n--){var r=this.operators[n];r.base.effectiveLocal&&(t=!0,"multiply"===r.base.name?e*=r.value:"divide"===r.base.name&&(e/=r.value))}return t?e:!1},i.updateEffectiveValue=function(e){for(var t=this.element,n=this.base.name,r=null,i=null,o=null,a=null,s=[],u=[],l=0,c=null;"sequence"!==t.level;){var h=t.getParameterByName(n);if(0===l&&(this.initial||this.setInitial(t.momElement),c=this.initial),h)for(var f=0,p=h.operators.length;p>f;f++){var d=h.operators[f];s[l]||(s[l]=[]),u[l]||(u[l]=[]),"min"!==d.base.name||r?"max"!==d.base.name||i?"is"!==d.base.name||o?"add"===d.base.name?s[l].push(parseFloat(d.value)):"subtract"===d.base.name?s[l].push(parseFloat(-d.value)):"multiply"===d.base.name?u[l].push(parseFloat(d.value)):"divide"===d.base.name&&u[l].push(parseFloat(1/d.value)):o=d.value:i=d.value:r=d.value}l++,t=t.parent}a=o?o:c;for(var m=u.length-1;m>=0;m--)if(u[m])for(var g=u[m],v=g.length-1;v>=0;v--)a*=g[v];for(var y=s.length-1;y>=0;y--)if(s[y])for(var b=s[y],_=b.length-1;_>=0;_--)a+=b[_];i&&a>i?a=i:r&&r>a&&(a=r),this.effectiveValue=a,e&&this._setCorrectedCPSfactor()},i._setCorrectedCPSfactor=function(){var e,t;t=this.element.findParentsFactor(this.base),e=this.effectiveValue/t/this.initial,this.element.writeValueInCPSfile(e,this)},i.clone=function(e){var t={};return t=new this.constructor,this._cloneProperties(t),this.operators&&this._cloneOperators(t),t.master=e,t},i._cloneProperties=function(e){for(var t in this)"operators"!==t&&"master"!==t&&"$$hashKey"!==t&&(e[t]=this[t])},i._cloneOperators=function(e){e.operators=[];for(var t=0,n=this.operators.length;n>t;t++)e.operators.push(this.operators[t].clone())},r}),define("metapolator/models/metapolator/masters/_ElementModel",["./ParameterModel","metapolator/ui/metapolator/ui-tools/selectionTools","Atem-MOM/cpsTools"],function(e,t,n){"use strict";function r(){}var i=n.setProperty,o=r.prototype;return o.setInitialParameters=function(){for(var e=t.baseParameters.length-1;e>=0;e--){var n=t.baseParameters[e];n.effectiveLevel===this.level&&this._addParameter(n)}},o.writeValueInCPSfile=function(e,t){i(this.momElement.properties,t.base.cpsKey,e)},o.deselectAllChildren=function(){for(var e=this.children.length-1;e>=0;e--){var t=this.children[e];t.edit=!1}},o.getParameterByName=function(e){for(var t=this.parameters.length-1;t>=0;t--){var n=this.parameters[t];if(n.base.name===e)return n}return null},o.addParameterOperator=function(e,t,n){var r=this.checkIfHasParameter(e);r.addOperator(t,n,this.level)},o.checkIfHasParameter=function(e){var t=this.getParameterByName(e.name);return t?t:this._addParameter(e)},o._addParameter=function(t){var n=new e(t,this);return this.parameters.push(n),n},o.removeParameter=function(e){var t,n=this.getParameterByName(e.name);n&&(n.removeCPS(),t=this.parameters.indexOf(n),this.parameters.splice(t,1))},o.changeParameter=function(e,t){var n=this.checkIfHasParameter(e.base);n.removeCPS(),n.base=t},o.updateEffectiveValue=function(e,t){var n=this.getParameterByName(e.name);n.updateEffectiveValue(t)},o.findParentsFactor=function(e){for(var t=this,n=1;"sequence"!==t.level;){var r,i=t.getParameterByName(e.name);i&&(r=i.getCPSFactor(),r!==!1&&(n*=r)),t=t.parent}return n},o.getEffectedElements=function(e){for(var t=[this],n=[];t.length&&t[0].level!==e;){for(var r=0,i=t.length;i>r;r++)for(var o=t[r],a=0,s=o.children.length;s>a;a++){var u=o.children[a];("glyph"!==u.level||u.displayed)&&n.push(u)}t=n,n=[]}return t},o.clone=function(){var e={};return e=new this.constructor,this._cloneProperties(e),this.children&&this._cloneChildren(e),this.parameters&&this._cloneParameters(e),e},o.setMasterAndMOM=function(e,t){if(this.master=e,this.momElement=t,this.children)for(var n=0,r=this.children.length;r>n;n++){var i=this.children[n];i.setMasterAndMOM(e,t.getChild(n))}if(this.parameters)for(var o=0,a=this.parameters.length;a>o;o++){var s=this.parameters[o];s.master=e,s.element=this}},o._cloneProperties=function(e){for(var t in this)"children"!==t&&"parent"!==t&&"$$hashKey"!==t&&"parameters"!==t&&(e[t]=this[t])},o._cloneChildren=function(e){e.children=[];for(var t=0,n=this.children.length;n>t;t++)e.add(this.children[t].clone())},o._cloneParameters=function(e){e.parameters=[];for(var t=0,n=this.parameters.length;n>t;t++)e.parameters.push(this.parameters[t].clone(this.master))},o.add=function(e){this.children.push(e),e.parent=this},r}),define("metapolator/models/metapolator/masters/PointModel",["./_ElementModel"],function(e){"use strict";function t(e,t,n){this.level="point",this.name=e,this.edit=!0,this.parent=t,this.parameters=[],this.master=t.master,this.momElement=n,this.setInitialParameters()}t.prototype=Object.create(e.prototype);return t}),define("metapolator/models/metapolator/masters/PenstrokeModel",["./_ElementModel","./PointModel"],function(e,t){"use strict";function n(e,t,n){this.level="penstroke",this.name=e,this.edit=!0,this.parent=t,this.children=[],this.parameters=[],this.master=t.master,this.momElement=n,this.setInitialParameters()}var r=n.prototype=Object.create(e.prototype);return r.addPoint=function(e,n){this.children.push(new t(e,this,n))},n}),define("metapolator/models/metapolator/masters/GlyphModel",["./_ElementModel","./PenstrokeModel","metapolator/ui/metapolator/ui-tools/selectionTools"],function(e,t,n){"use strict";function r(e,t,n){this.level="glyph",this.type="master",this.name=e,this.edit=!1,this.displayed=!1,this.master=t,this.parent=t,this.children=[],this.parameters=[],this.measured=!1,this.momElement=n,this.setInitialParameters()}var i=r.prototype=Object.create(e.prototype);return i.getMasterName=function(){return this.parent.name},i.addPenstroke=function(e,n){var r=new t(e,this,n);return this.children.push(r),r},i.checkIfIsDisplayed=function(){this.displayed||(this._isMeasured()||this._measureGlyph(),this._catchUpCPS())},i._isMeasured=function(){var e=this._getOriginalGlyph();return e.measured},i._getOriginalGlyph=function(){var e=this.parent.originalMaster;return e.findGlyphByName(this.name)},i._measureGlyph=function(){for(var e=n.baseParameters.length-1;e>=0;e--){var t,r=n.baseParameters[e];if(this.children.length>0||"glyph"===r.effectiveLevel){t="glyph"===r.effectiveLevel?[this]:this.getEffectedElements(r.effectiveLevel);for(var i=0,o=t.length;o>i;i++){var a=t[i],s=a.getParameterByName(r.name),u=a.momElement;s.setInitial(u)}}}this._getOriginalGlyph().measured=!0},i._catchUpCPS=function(){for(var e=0,t=this.parent.parameters.length;t>e;e++){var n=this.parent.parameters[e];if(n.checkIfHasNonLocalOperators())for(var r=this.getEffectedElements(n.base.effectiveLevel),i=0,o=r.length;o>i;i++){var a=r[i],s=a.getParameterByName(n.base.name);s.updateEffectiveValue(!0)}}this.displayed=!0},r}),define("metapolator/models/metapolator/masters/MasterModel",["./_ElementModel","./GlyphModel"],function(e,t){"use strict";function n(e,t,n,r,i,o,a){this._project=a,this.level="master",this.id=o,this.sequenceId=i,this.name=e,this.displayName=e,this.display=!1,this.edit=!0,this.ag="Ag",this.parent=t,this.originalMaster=this,this.children=[],this.parameters=[],this.master=this,this.cpsFile=r,this.momElement=n,this.setInitialParameters()}var r=n.prototype=Object.create(e.prototype);return r.addGlyph=function(e,n){var r=new t(e,this,n);return this.children.push(r),r},r.findGlyphByName=function(e){for(var t=0,n=this.children.length;n>t;t++){var r=this.children[t];if(r.name===e)return r}return!1},r.remove=function(){var e,t,n=this._project;t=n.deleteMaster(!1,this.momElement.id,!0,!1),t&&(e=this._getIndex(),this.parent.parent.removeMasterFromDesignSpaces(this),this.parent.children.splice(e,1))},r._getIndex=function(){for(var e=this.parent.children.length-1;e>=0;e--){var t=this.parent.children[e];if(t===this)return e}},r.getAllOffspringElements=function(){for(var e=[],t=[this],n=[];t.length>0;){for(var r=0,i=t.length;i>r;r++)if(t[r].children)for(var o=0,a=t[r].children.length;a>o;o++){var s=t[r].children[o];e.push(s),n.push(s)}t=n,n=[]}return e},n}),define("metapolator/models/metapolator/masters/MasterSequenceModel",["./_ElementModel","./MasterModel"],function(e,t){"use strict";function n(e,t,n,r){this._project=r,this.id=n,this.name=e,this.level="sequence",this.canEdit=!0,this.parent=t,this.children=[],this.masterId=0}var r=n.prototype=Object.create(e.prototype);return r.addMaster=function(e,n,r){var i=new t(e,this,n,r,this.id,this.masterId++,this._project);return this.children.push(i),this.addGlyphsToMaster(i,n.children),i},r.addGlyphsToMaster=function(e,t){for(var n=0,r=t.length;r>n;n++)for(var i=t[n],o=i.id,a=i.children,s=e.addGlyph(o,i),u=0,l=a.length;l>u;u++)for(var c=a[u],h="penstroke:i("+u+")",f=c.children,p=s.addPenstroke(h,c),d=0,m=f.length;m>d;d++){var g="point:i("+d+")";p.addPoint(g,f[d])}},r.addToMasterId=function(){return this.masterId++},n}),define("metapolator/models/metapolator/designSpaces/DesignSpaceModel",["../_BaseModel"],function(e){"use strict";function t(e,t,n,r,i,o){this.id=e,this.name=t,this.type=n,this.axes=r,this.slack=i,this.lastInstance=null,Object.defineProperty(this,"parent",{value:o,enumerable:!1,writable:!0,configurable:!0})}var n=t.prototype=Object.create(e.prototype);return n.clone=function(){for(var e,n=this.parent.designSpaceCounter,r="Space "+n,i="Control",o=[],a=this.slack,s=0,u=this.axes.length;u>s;s++)o.push(this.axes[s]);e=new t(n,r,i,o,a,this.parent),this.parent.addDesignSpace(e)},n.remove=function(){var e=this._getIndex();this.parent.designSpaces.splice(e,1),this._findNewCurrentDesignSpace(e)},n.setCurrent=function(){this.parent.currentDesignSpace=this},n.isCurrent=function(){return this.parent.currentDesignSpace===this?!0:!1},n.addAxis=function(e){this.axes.push(e),this.parent.nrOfAxesTrigger++},n.removeAxis=function(e){var t,n=this._findMasterIndex(e);this.axes.splice(n,1),n<this.slack?this.slack--:n===this.slack&&(this.slack=0),this.axes.length<3&&(this.slack=0),t=this.parent.getInstanceAxesWithMaster(e,this),0===this.axes.length?this._removeInstances(t):this._removeMasterFromInstances(t),this.parent.nrOfAxesTrigger++},n._removeInstances=function(e){for(var t=e.length-1;t>=0;t--){var n=e[t].parent;n.remove()}},n._removeMasterFromInstances=function(e){for(var t=e.length-1;t>=0;t--){var n=e[t];n.remove()}},n.hasMaster=function(e){for(var t=this.axes.length-1;t>=0;t--){var n=this.axes[t];if(n===e)return!0}return!1},n._getIndex=function(){for(var e=this.parent.designSpaces.length-1;e>=0;e--){var t=this.parent.designSpaces[e];if(t===this)return e}},n._findNewCurrentDesignSpace=function(e){var t=this.parent.designSpaces.length;t>e?this.parent.designSpaces[e].setCurrent():0===t?this.parent.currentDesignSpace=null:this.parent.designSpaces[t-1].setCurrent()},n._findMasterIndex=function(e){for(var t=this.axes.length-1;t>=0;t--){var n=this.axes[t];if(n===e)return t}},n.setLastInstance=function(e){this.lastInstance=e},t}),define("metapolator/models/metapolator/instances/GlyphModel",["../_BaseModel"],function(e){"use strict";function t(e,t){this.level="glyph",this.type="instance",this.name=e,this.edit=!1,Object.defineProperty(this,"parent",{value:t,enumerable:!1,writable:!0,configurable:!0})}var n=t.prototype=Object.create(e.prototype);return n.getMasterName=function(){return this.parent.name},n.getMasterGlyphs=function(){for(var e=[],t=this.parent.axes.length-1;t>=0;t--){var n=this.parent.axes[t],r=n.master;e.push(r.findGlyphByName(this.name))}return e},t}),define("metapolator/models/metapolator/instances/AxisModel",["../_BaseModel"],function(e){"use strict";function t(e,t,n,r){this.parent=r,this.master=e,this.axisValue=t,this.metapolationValue=n}var n=t.prototype=Object.create(e.prototype);return n.remove=function(e,t){var n=this._getIndex();this.parent.axes.splice(n,1),this.parent.reDestributeAxes(),this.parent.updateCPSFile(),this.parent.setMetapolationValues()},n._getIndex=function(){for(var e=this.parent.axes.length-1;e>=0;e--){var t=this.parent.axes[e];if(t===this)return e}},t}),define("metapolator/models/metapolator/instances/InstanceModel",["../_BaseModel","./GlyphModel","./AxisModel","Atem-MOM/cpsTools","metapolator/ui/metapolator/ui-tools/instanceTools"],function(e,t,n,r,i){"use strict";function o(e,t,n,r,i,o){this.id=e,this.name="instance-"+e,this.displayName="Instance "+e,this.axes=[],this.children=[],this.edit=!1,this.ag="Ag",this.designSpace=n,this.color=r,this.exportFont=!0,this.openTypeFeatures=!0,this.cpsFile=this.name+".cps",this._project=o,Object.defineProperty(this,"parent",{value:i,enumerable:!1,writable:!0,configurable:!0}),this.addInitialAxis(t),this.addInitialGlyphs()}var a=r.setProperty,s=o.prototype=Object.create(e.prototype);return s.clone=function(e,t){var n,r=[],i=this.axes.length;for(n=0;i>n;n++){var o=this.axes[n],a={axisValue:o.axisValue,metapolationValue:o.metapolationValue,master:o.master};r.push(a)}return this.parent.createNewInstance(r,e,t)},s.setMOMElement=function(e){var t,n;for(this.momElement=e,t=0,n=this.children.length;n>t;t++)this.children[t].momElement=e.getChild(t)},s.remove=function(){var e;this._project.deleteMaster(!1,this.momElement.id,!1)&&(e=this._getIndex(),this.parent.children.splice(e,1),this._findNewCurrentInstance(e))},s.addInitialAxis=function(e){for(var t=0,n=e.length;n>t;t++){var r=e[t];
this.addAxis(r.master,r.axisValue,r.metapolationValue)}},s.setCurrent=function(){this.parent.parent.currentInstance=this,this.designSpace.setLastInstance(this)},s.isCurrent=function(){return this.parent.parent.currentInstance===this?!0:!1},s.addInitialGlyphs=function(){for(var e=this.axes[0].master,t=0,n=e.children.length;n>t;t++){var r=e.children[t].name;this._addGlyph(r)}},s._addGlyph=function(e){this.children.push(new t(e,this))},s.setMetapolationValues=function(){this._setMetapolationValuesInModel(),this._setMetapolationValuesInCPS()},s.updateCPSFile=function(){i.update(this._project,this)},s._setMetapolationValuesInModel=function(){var e,t=this.axes,n=t.length-1;if(0===n)t[0].metapolationValue=1;else{for(var r=0,i=n;i>=0;i--)e=parseFloat(t[i].axisValue),r+=e;for(var o=n;o>=0;o--)e=parseFloat(t[o].axisValue),t[o].metapolationValue=e/r}},s._setMetapolationValuesInCPS=function(){var e,t,n=this.momElement.properties;for(e=0,t=this.axes.length;t>e;e++)a(n,"proportion"+e,this.axes[e].metapolationValue)},s.addAxis=function(e,t,r){this.axes.push(new n(e,t,r,this)),this._setMetapolationValuesInModel()},s.reDestributeAxes=function(){var e,t=this.designSpace.slack,n=this.axes,r=n.length,i=null,o=null;if(n.length>1){for(var a=0;r>a;a++)n[a].axisValue>=i&&a!==t&&(o=a,i=n[a].axisValue);e=100/(parseFloat(i)+parseFloat(n[t].axisValue));for(var s=0;r>s;s++)n[s].axisValue=(e*n[s].axisValue).toFixed(1)}},s._getIndex=function(){for(var e=this.parent.children.length-1;e>=0;e--){var t=this.parent.children[e];if(t===this)return e}},s._findNewCurrentInstance=function(e){var t=this.parent.children.length;t>e?this.parent.children[e].setCurrent():0===t?this.parent.currentInstance=null:this.parent.children[t-1].setCurrent()},s.measureAllGlyphs=function(){for(var e=0,t=this.children.length;t>e;e++)for(var n=this.children[e],r=n.getMasterGlyphs(),i=0,o=r.length;o>i;i++){var a=r[i];a.checkIfIsDisplayed()}},o}),define("metapolator/models/metapolator/instances/InstanceSequenceModel",["../_BaseModel","./InstanceModel"],function(e,t){"use strict";function n(e,t){this.name=e,this.instanceCounter=0,this.children=[],this.colors=["#DC1F20","#C95399","#9E42F4","#5939EC","#5A86FE","#A4E5FD","#85C5A5","#A9D323","#F2E21D","#D07f2C"],Object.defineProperty(this,"parent",{value:t,enumerable:!1,writable:!0,configurable:!0})}var r=n.prototype=Object.create(e.prototype);return r.createNewInstance=function(e,n,r){var i=new t(this.instanceCounter,e,n,this.colors[this.instanceCounter%this.colors.length],this,r);return this.instanceCounter++,i},r.addInstance=function(e){this.children.push(e),e.setCurrent()},n}),define("metapolator/models/metapolator/AppModel",["./_BaseModel","./masters/MasterSequenceModel","./designSpaces/DesignSpaceModel","./instances/InstanceSequenceModel"],function(e,t,n,r){"use strict";function i(e){this._project=e,this.projectName="Canola",this.masterSequences=[],this.sequenceId=0,this.lastMasterSelected=null,this.designSpaces=[],this.designSpaceCounter=0,this.currentDesignSpace=null,this.instanceSequences=[],this.currentInstance=null,this.localMenu=null,this.viewState=0}var o=i.prototype=Object.create(e.prototype);return o.addSequence=function(e){var n=new t(e,this,this.sequenceId++,this._project);return this.masterSequences.push(n),n},o.areMastersSelected=function(){for(var e=this.masterSequences.length-1;e>=0;e--)for(var t=this.masterSequences[e],n=t.children.length-1;n>=0;n--){var r=t.children[n];if(r.edit)return!0}return!1},o.createNewDesignSpace=function(){var e,t=this.designSpaceCounter,r="Space "+t,i="Control",o=[],a=0;e=new n(t,r,i,o,a,this),this.addDesignSpace(e)},o.addDesignSpace=function(e){this.designSpaces.push(e),e.setCurrent(),this.designSpaceCounter++},o.addInstanceSequence=function(e){this.instanceSequences.push(new r(e,this))},o.getInstanceAxesWithMaster=function(e,t){for(var n=[],r=this.instanceSequences.length-1;r>=0;r--)for(var i=this.instanceSequences[r],o=i.children.length-1;o>=0;o--){var a=i.children[o];if(a.designSpace===t)for(var s=a.axes.length-1;s>=0;s--){var u=a.axes[s];u.master===e&&n.push(u)}}return n},o.getInstancesInDesignSpace=function(e){for(var t=[],n=this.instanceSequences.length-1;n>=0;n--)for(var r=this.instanceSequences[n],i=r.children.length-1;i>=0;i--){var o=r.children[i];o.designSpace===e&&t.push(o)}return t},o.removeMasterFromDesignSpaces=function(e){for(var t=0,n=this.designSpaces.length;n>t;t++){var r=this.designSpaces[t];r.hasMaster(e)&&r.removeAxis(e)}},i}),define("Atem-IO/io/staticBrowserREST",["Atem-IO/errors","obtain/obtain","./_base"],function(e,t,n){"use strict";function r(){n.call(this)}var i=e.IO,o=e.IONoEntry,a=e.IOEntryExists,s=r.prototype=Object.create(n.prototype),u=function(e){return["Status",e.status,e.statusText].join(" ")},l=function(e){var t,n=u(e);return t=404===e.status?new o(n):new i(n),t.request=e,t},c=function(e){return e.split("/").map(encodeURIComponent).join("/")},h=function(e){function t(e){return e+("/"!==e.slice(-1)?"/":"")}return function(n,r){var i=Array.prototype.slice.call(arguments);return i[1]=t(i[1]),e.apply(this,i)}},f=function(e,n,r,i,o){function a(t,r,i){var o=new XMLHttpRequest;return o.open(e,c(t),!!i),i?(n&&(o.responseType=n),o.onreadystatechange=function(e){4==o.readyState&&i(null,o)}):"arraybuffer"===n&&o.overrideMimeType("text/plain; charset=x-user-defined"),o.send(r),i?void 0:o}function s(e){var t,n,a,s=e("request");if(s.status in r||(t=l(s)),a=[t,s],Array.prototype.push.apply(a,Array.prototype.slice.call(arguments,-o.length)),n=i.apply(null,a),n[0])throw n[0];return n[1]}var u=e in{PUT:!0,POST:!0}?"data":void 0,h=["path"];return i=i||function(e,t){return[e,!!e]},r=r||{200:!0},u&&h.push(u),o=o||[],Array.prototype.push.apply(h,o),t.factory({request:["path",u,a]},{request:["path",u,"_callback",a]},h,s)};return s.readFile=f("GET",void 0,void 0,function(e,t){var n=e?void 0:t.responseText;return[e,n]}),s.writeFile=f("PUT",void 0,{200:!0,204:!0}),s.appendFile=f("POST",void 0,void 0),s.unlink=f("DELETE",void 0,{200:!0,204:!0}),s.readBytes=f("GET","arraybuffer",void 0,function(e,t,n){var r,i,o;if(e);else if(t.response instanceof ArrayBuffer)i=new Uint8Array(t.response,0,n);else{o=t.response.slice(0,n),i=new Uint8Array(n);for(var a=0;a<o.length;a++)i[a]=o.charCodeAt(a)}return e||(r=String.fromCharCode.apply(null,i)),[e,r]},["bytes"]),s.fileExists=f("HEAD",void 0,void 0,function(e,t){return[e instanceof o?null:e,!(e instanceof o)]}),s.dirExists=h(s.fileExists),s.pathExists=s.fileExists,s.getMtime=f("HEAD",void 0,void 0,function(e,t){var n=e?void 0:new Date(t.getResponseHeader("Last-Modified"));return[e,n]}),s.readDir=h(f("GET",void 0,void 0,function(e,t){var n=e?void 0:t.responseText.split("\n").filter(function(e){return!!e});return[e,n]})),s.mkDir=h(f("PUT",void 0,{200:!0,201:!0,204:!0},function(e,t){return 405==t.status&&(e=new a(u(t))),[e,!!e]})),s.ensureDir=h(f("PUT",void 0,{200:!0,201:!0,204:!0,405:!0})),s.rmDir=h(s.unlink),new r}),define("Atem-CPS-Toolkit/dataTransformationCaches/_DataTransformationCache",["Atem-Errors/errors","Atem-CPS/emitterMixin"],function(e,t){"use strict";function n(e){this._items=new Map,this.__update=this._update.bind(this),this._subscribeToMOM=void 0===e?!0:!!e,this._schedulingTimeout=0,t.init(this,o)}var r=e.NotImplemented,i=e.Key,o={stateProperty:"_channel",onAPI:"_on",offAPI:"_off",triggerAPI:"_trigger"},a=function(){function e(e,t){Object.defineProperties(this,{value:{value:e,enumerable:!0},destroy:{value:t,enumerable:!0}})}return e}(),s=n.prototype;return s.constructor=n,n.ReturnValue=a,t(s,o),s._itemFactory=function(e){throw new r("_itemFactory needs to implemented by a subclass!")},s._destroyItem=function(e){throw new r("_destroyItem needs to implemented by a subclass!")},s._getUserItem=function(e){throw new r("_getUserItem needs to implemented by a subclass!")},s._makeItem=function(e){var t={timeoutId:null,referenceCount:0,mom:e,item:this._itemFactory(e),subscriptionId:null,channel:e.nodeID,userSubscriptions:[]};return this._subscribeToMOM&&(t.subscriptionId=t.mom.on("CPS-change",[this,"_onItemChangeHandler"],t)),t},s._onItemChangeHandler=function(e,t,n){e.timeoutId&&clearTimeout(e.timeoutId),e.timeoutId=setTimeout(this.__update,this._schedulingTimeout,e)},s._requestUpdate=function(e){var t=this._items.get(e);if(!t)throw new i("momItem "+e+" ("+e.nodeID+" "+e.particulars+") is not registered! [in "+this.constructor.name+"].");this._onItemChangeHandler(t)},s._update=function(e){e.timeoutId&&(clearTimeout(e.timeoutId),e.timeoutId=null);var t=e.item.update();void 0!==t&&this._trigger(e.channel,t)},s._revoke=function(e){var t,n,r,i=this._items.get(e);if(!i)return 0;if(i.referenceCount-=1,i.referenceCount>0)return i.referenceCount;for(this._items["delete"](e),i.timeoutId&&clearTimeout(i.timeoutId),i.subscriptionId&&i.mom.off(i.subscriptionId),r=i.userSubscriptions,t=0,n=r.length;n>t;t++)this._off(r[t]);return this._destroyItem(i.item),0},s._userItemOff=function(e,t){var n,r=e.userSubscriptions;for(n=r.length-1;n>=0;n--)if(r[n]===t){r.splice(n,1),this._off(t);break}},s._userItemOn=function(e,t,n){var r=this._on(e.channel,t,n);return e.userSubscriptions.push(r),r},s._userItemDestroy=function(e,t){if(t.destroyed)throw new Error("The instance was already destroyed.");return t.destroyed=!0,t.subscriptionID&&this._userItemOff(e,t.subscriptionID),this._revoke(e.mom)},s._getItem=function(e){var t=this._items.get(e);return t||(t=this._makeItem(e),this._items.set(e,t),this._onItemChangeHandler(t)),t},s.get=function(e,t,n){var r,i,o=this._getItem(e),s={destroyed:!1,subscriptionID:null};return o.referenceCount+=1,r=this._getUserItem(o.item),i=this._userItemDestroy.bind(this,o,s),t&&(s.subscriptionID=this._userItemOn(o,t,n)),new a(r,i)},n}),define("Atem-Pen-Case/pens/RecordingPointPen",["./AbstractPointPen"],function(e){"use strict";function t(){e.call(this),this._commands=[]}var n=t.prototype=Object.create(e.prototype);return n._addCommand=function(e,t){this._commands.push([e,t])},n.drawPoints=function(e){var t,n,r,i=this._commands;for(t=0,n=i.length;n>t;t++)r=i[t],e[r[0]].apply(e,r[1])},n.beginPath=function(e){this._addCommand("beginPath",[e||{}])},n.endPath=function(){this._addCommand("endPath",[])},n.addPoint=function(e,t,n,r,i){t=void 0===t?null:t,n=n||!1,r=void 0===r?null:r,i=i||{},this._addCommand("addPoint",[e,t,n,r,i])},n.addComponent=function(e,t){this._addCommand("addComponent",[e,t])},t}),define("Atem-Pen-Case/pens/RecordingAndComparingPointPen",["./RecordingPointPen"],function(e){"use strict";function t(t){e.call(this),this._compareCommands=t||[],this._commands=[],this.changed=!1}var n=t.prototype=Object.create(e.prototype);return n.getCommands=function(){return this._commands},n._hasChanged=function(e){var t,n,r=this._compareCommands[this._commands.length];if(!r)return!0;if(e[0]!==r[0])return!0;switch(t=e[1],n=r[1],e[0]){case"addComponent":if(t[0]!==n[0])return!0;if(Array.prototype.join(t[1],",")!==Array.prototype.join(n[1],","))return!0;break;case"addPoint":if(Array.prototype.join.call(t[0],",")!==Array.prototype.join.call(n[0],","))return!0;if(t[1]!==n[1])return!0;if(t[2]!==n[2])return!0}return!1},n._addCommand=function(e,t){var n=[e,t];this.changed||(this.changed=this._hasChanged(n)),this._commands.push(n)},t}),define("Atem-Pen-Case/pens/TransformPointPen",["./AbstractPointPen","Atem-Math-Tools/transform"],function(e,t){"use strict";function n(t,n){e.call(this),n instanceof Array&&(n=new r(n)),this._transformation=n,this._outPen=t}var r=t.Transform,i=n.prototype=Object.create(e.prototype);return i.constructor=n,i._transformPoint=function(e){return this._transformation.transformPoint(e)},i.beginPath=function(e){this._outPen.beginPath(e)},i.endPath=function(){this._outPen.endPath()},i.addPoint=function(e,t,n,r,i){this._outPen.addPoint(this._transformPoint(e),t,n,r,i)},i.addComponent=function(e,t){t=this._transformation.transform(t),this._outPen.addComponent(e,t)},n}),define("Atem-MOM-Toolkit/dataTransformationCaches/DrawPointsProvider",["Atem-Errors/errors","Atem-CPS-Toolkit/dataTransformationCaches/_DataTransformationCache","Atem-Pen-Case/pens/RecordingAndComparingPointPen","Atem-Pen-Case/pens/TransformPointPen","Atem-Pen-Case/pens/PointToSegmentPen","Atem-MOM/rendering/basics"],function(e,t,n,r,i,o){"use strict";function a(e){t.call(this),this._renderer=e,this._schedulingTimeout=5}var s=e.Value,u=e.Key,l=o.applyGlyph,c=a.prototype=Object.create(t.prototype);return c.constructor=a,c.supports=function(e){return"glyph"===e||"component"===e||e in this._renderer},c._drawPointsGlyphChild=function(e,t){e.recorder.drawPoints(t)},c._drawPointsComponent=function(e,t){var n=new r(t,e.transformation);e.subscription.value.drawPoints(n)},c._drawPointsGlyph=function(e,t){var n,r,i=e.subscriptions;for(n=0,r=i.length;r>n;n++)i[n].value.drawPoints(t)},c._childUpdated=function(e,t,n){e.childUpdated=!0,this._requestUpdate(e.mom)},c._revokeItems=function(e){var t,n;for(t=0,n=e.length;n>t;t++)e[t].destroy()},c._componentUpdate=function(e){var t,n,r=e.transformation;return e.transformation=e.mom.getComputedStyle().get("transformation"),t=e.childUpdated||!r||!e.transformation.cmp(r),e.childUpdated=!1,e.glyphName!==e.mom.baseGlyphName&&(e.glyphName=e.mom.baseGlyphName,t=!0,e.subscription&&e.subscription.destroy(),e.subscription=null,n=e.mom.master.query("glyph#"+e.glyphName),n&&(e.subscription=this.get(n,[this,"_childUpdated"],e))),t?{type:"points-changed"}:void 0},c._glyphUpdate=function(e){var t=e.childUpdated;return e.childUpdated=!1,t?{type:"points-changed"}:void 0},c._glyphChildUpdate=function(e){var t=e.recorder?e.recorder.getCommands():!1,r=e.recorder;e.recorder=new n(t||[]);try{l(this._renderer,{children:[e.mom]},e.recorder)}catch(i){console.warn("Drawing MOM Node",e.mom.particulars,"failed with "+i,i.stack),i instanceof u&&console.info("KeyError means usually that a property definition in the CPS is missing"),console.info("The user should get informed by the UI!"),e.recorder=r||new n([]),e.recorder.changed=!1}return e.recorder.changed||!t?{type:"points-changed"}:void 0},c._initComponent=function(e){e.glyphName=null,e.subscription=null,e.transformation=null,e.childUpdated=!1,e.drawPointsExport=this._drawPointsComponent.bind(this,e),e.update=this._componentUpdate.bind(this,e)},c._initGlyph=function(e){var t,n,r,i,o,a=e.mom.children;for(e.subscriptions=o=[],e.childUpdated=!1,n=0,r=a.length;r>n;n++)t=a[n],this.supports(t.type)&&(i=this.get(t,[this,"_childUpdated"],e),e.subscriptions.push(i));e.drawPointsExport=this._drawPointsGlyph.bind(this,e),e.update=this._glyphUpdate.bind(this,e)},c._initGlyphChild=function(e){e.recorder=null,e.drawPointsExport=this._drawPointsGlyphChild.bind(this,e),e.update=this._glyphChildUpdate.bind(this,e)},c._itemFactory=function(e){if(!this.supports(e.type))throw new s("Node type not supported :"+e);var t={mom:e,drawPointsExport:null,update:null};return"glyph"===e.type?this._initGlyph(t):"component"===e.type?this._initComponent(t):this._initGlyphChild(t),t.update(),t},c._destroyItem=function(e){e.subscription&&e.subscription.destroy(),e.subscriptions&&this._revokeItems(e.subscriptions)},c._getUserItem=function(e){return{drawPoints:e.drawPointsExport}},a}),define("Atem-MOM-Toolkit/dataTransformationCaches/BBoxProvider",["Atem-CPS-Toolkit/dataTransformationCaches/_DataTransformationCache","Atem-Pen-Case/pens/PointToSegmentPen","Atem-Pen-Case/pens/BoundsPen"],function(e,t,n){"use strict";function r(t){var n=!1;e.call(this,n),this._drawPointsProvider=t}var i=r.prototype=Object.create(e.prototype);return i.supports=function(e){return this._drawPointsProvider.supports(e)},i._pointsChanged=function(e){this._requestUpdate(e.mom)},i._itemUpdate=function(e){var r=e.bBox,i=new t(new n({}));return e.subscription.value.drawPoints(i),e.bBox=i.pen.getBounds()||[0,0,0,0],r&&e.bBox.join(",")===r.join(",")?void 0:{type:"bbox-changed"}},i._getBBoxExport=function(e){return e.bBox.slice()},i._itemFactory=function(e){var t;t={mom:e,subscription:null,bBox:null,getBBoxExport:null,update:null},t.subscription=this._drawPointsProvider.get(t.mom,[this,"_pointsChanged"],t),t.getBBoxExport=this._getBBoxExport.bind(this,t),t.update=this._itemUpdate.bind(this,t),t.update()},i._destroyItem=function(e){e.subscription.destroy()},i._getUserItem=function(e){return{getBBox:e.getBBoxExport}},r}),define("Atem-Pen-Case/pens/SVGPen",["./BasePen"],function(e){"use strict";function t(t,n){e.call(this,n),this.path=t}var n=t.prototype=Object.create(e.prototype);return n.constructor=t,n._addSegment=function(e){var t=this.path.getAttribute("d");this.path.setAttribute("d",(t?t+" ":"")+e)},n._moveTo=function(e){this._addSegment(["M",e[0],e[1]].join(" "))},n._lineTo=function(e){this._addSegment(["L",e[0],e[1]].join(" "))},n._curveToOne=function(e,t,n){this._addSegment(["C",e[0],e[1],t[0],t[1],n[0],n[1]].join(" "))},n._closePath=function(){this._addSegment("z")},n.clear=function(){this.path.setAttribute("d","")},t}),define("Atem-Pen-Case/pens/SVGPathsPen",["./SVGPen"],function(e){"use strict";function t(t,n){e.call(this,{},n),this.container=t,this._doc=this.container.ownerDocument}var n="http://www.w3.org/2000/svg",r=t.prototype=Object.create(e.prototype);return r.constructor=t,r._switchPath=function(){this.path=this._doc.createElementNS(n,"path"),this.segments=this.path.pathSegList,this.container.appendChild(this.path)},r._moveTo=function(t){this._switchPath(),e.prototype._moveTo.call(this,t)},r.clear=function(){for(var e,t=this.container;e=t.lastChild;)t.removeChild(e)},t}),define("Atem-MOM-Toolkit/dataTransformationCaches/SVGUsePathsProvider",["Atem-CPS-Toolkit/dataTransformationCaches/_DataTransformationCache","Atem-Pen-Case/pens/PointToSegmentPen","Atem-Pen-Case/pens/SVGPathsPen"],function(e,t,n){"use strict";function r(t,n,r,o){e.call(this),this._subscribeToMOM=!1,this._drawService=r,this._renderComponentsOfGlyphs=o,this._doc=t.ownerDocument,this._requestUpdateExport=this._requestUpdate.bind(this),this._schedulingTimeout=0,this._svgIdNamespace=n,this._glyphContainer=this._doc.createElementNS(i,"defs"),t.appendChild(this._glyphContainer)}var i="http://www.w3.org/2000/svg",o="http://www.w3.org/1999/xlink",a=r.prototype=Object.create(e.prototype);return a.constructor=r,a._revokeItems=function(e){var t,n;for(t=0,n=e.length;n>t;t++)e[t].destroy()},a._glyphItemUpdate=function(e){for(var r,o,a,s,u,l,c=e.element.ownerDocument.createElementNS(i,"g"),h=new n(c,{}),f=new t(h);e.element.lastChild;)e.element.removeChild(e.element.lastChild);for(r=e.subscriptions,e.subscriptions=[],u=e.mom.children,a=0,s=u.length;s>a;a++)l=u[a],(this._renderComponentsOfGlyphs||"component"!==l.type)&&this._drawService.supports(l.type)&&(o=this._drawService.get(l,[this,"_requestUpdate"],e.mom),e.subscriptions.push(o),o.value.drawPoints(f));return this._revokeItems(r),e.element.appendChild(c),{type:"updated"}},a._itemUpdate=function(e){var r=e.element.ownerDocument.createElementNS(i,"g"),o=new n(r,{}),a=new t(o);for(e.subscription.value.drawPoints(a);e.element.lastChild;)e.element.removeChild(e.element.lastChild);return e.element.appendChild(r),{type:"updated"}},a._itemFactory=function(e){var t=this._svgIdNamespace+e.nodeID,n=this._doc.createElementNS(i,"g"),r={mom:e,element:n,subscriptions:null,subscription:null,update:null};return n.setAttribute("id",t),this._glyphContainer.appendChild(n),"glyph"===r.mom.type?(r.subscriptions=[],r.update=this._glyphItemUpdate.bind(this,r),r.subscriptionId=r.mom.on("CPS-change",[this,"_requestUpdate"],r.mom)):(r.subscription=this._drawService.get(r.mom,[this,"_requestUpdate"],r.mom),r.update=this._itemUpdate.bind(this,r)),r},a._destroyItem=function(e){e.subscriptions&&this._revokeItems(e.subscriptions),e.subscription&&e.subscription.destroy(),e.subscriptionId&&e.mom.off(e.subscriptionId),e.element.parentElement.removeChild(e.element)},a._getUserItem=function(e){var t=this._doc.createElementNS(i,"use");return t.setAttributeNS(o,"href","#"+e.element.id),t},r}),define("Atem-MOM-Toolkit/dataTransformationCaches/SVGUseCustomProvider",["Atem-Errors/errors","Atem-CPS-Toolkit/dataTransformationCaches/_DataTransformationCache","Atem-MOM/rendering/basics"],function(e,t,n){"use strict";function r(e,n,r){t.call(this),this._doc=e.ownerDocument,this._renderer=r,this._schedulingTimeout=0,this._glyphIDPrefix=n,this._glyphContainer=this._doc.createElementNS(a,"defs"),e.appendChild(this._glyphContainer)}var i=e.Value,o=e.Key,a="http://www.w3.org/2000/svg",s="http://www.w3.org/1999/xlink",u=n.applyGlyph,l=r.prototype=Object.create(t.prototype);return l.constructor=r,l.supports=function(e){return"glyph"===e||e in this._renderer},l._itemUpdate=function(e,t){for(var n;e.element.lastChild;)e.element.removeChild(e.element.lastChild);try{n="glyph"===e.mom.type?e.mom:{children:[e.mom]},u(this._renderer,n,e.element)}catch(r){console.warn("Drawing MOM Node",e.mom.particulars,"failed with "+r,r.stack),r instanceof o&&console.info("KeyError means usually that a property definition in the CPS is missing"),console.info("The user should get informed by the UI!")}},l._itemFactory=function(e){var t,n,r;if(!this.supports(e.type))throw new i("Node type not supported :"+e);return t=this._glyphIDPrefix+e.nodeID,n=this._doc.createElementNS(a,"g"),n.setAttribute("id",t),this._glyphContainer.appendChild(n),r={element:n,mom:e,update:null},r.update=this._itemUpdate.bind(this,r),r},l._destroyItem=function(e){e.element.parentElement.removeChild(e.element)},l._getUserItem=function(e){var t=this._doc.createElementNS(a,"use");return t.setAttributeNS(s,"href","#"+e.element.id),t},r}),define("Atem-MOM-Toolkit/services/glyph/GlyphInterface",["Atem-Errors/errors","Atem-CPS/emitterMixin"],function(e,t){"use strict";function n(e){var t,r,i=[e.type,":i("+e.index+")"],o=e.classes;for(e.id&&i.push("#"+e.id),t=0,r=o.length;r>t;t++)i.push("."+o[t]);return"point"===e.parent.type&&i.unshift(n(e.parent)+" "),i.join("")}function r(e,t){var r=n(e),i=t.ownerDocument.createElementNS(s,"title");i.appendChild(t.ownerDocument.createTextNode(r)),t.appendChild(i)}function i(e,t,n){var r=e.ownerDocument.createElementNS(s,"circle");r.setAttribute("cx",t[0]),r.setAttribute("cy",t[1]),r.setAttribute("r",n),e.appendChild(r)}function o(e,t){var n=e.getComputedStyle(),r=n.get("on",!1),o=n.get("in",!1),a=n.get("out",!1);r&&i(t,r,4),o&&i(t,o,2),a&&i(t,a,2)}function a(e,n,r,i,o){t.init(this,l),this._doc=e,this._mom=i;var a=o||{};this.element=this._createElement(),this._container=this._doc.createElementNS(s,"g"),this._nodeIds2Mom=Object.create(null),this._listenTo(this._mom,this.element),this.element.appendChild(this._container),this._setViewBox(this._getViewBox()),this._subscriptionId=this._mom.on("CPS-change",[this,"_cpsChangeHandler"]),this._transformation=null,this._setTransformation(i),this._layerSource=n,this._services=r,this._subscriptions=null,this._layerElements=null,this._currentDisplaySet=null,this._displaySets={simple:{full:!0},detailed:{shapes:!0,centerline:!0,meta:!0,points:!0}},this.__selectNodeHandler=this._selectNodeHandler.bind(this),a.showControls?this.showControls():this.hideControls()}var s="http://www.w3.org/2000/svg",u=e.Key,l={stateProperty:"_channel",onAPI:"on",offAPI:"off",triggerAPI:"_trigger"},c=a.prototype;return c.constructor=a,t(c,l),c.showControls=function(){this._switchDisplaySet("detailed"),this.element.addEventListener("click",this.__selectNodeHandler)},c.hideControls=function(){this._switchDisplaySet("simple"),this.element.removeEventListener("click",this.__selectNodeHandler)},c._makeLayer=function(e){var t,n;switch(e){case"shapes":t=this._doc.createElementNS(s,"g"),t.classList.add("layer","layer-shapes"),n=this._drawShapeHandles(this._services.shapes,t,this._mom);break;case"points":t=this._doc.createElementNS(s,"g"),t.classList.add("layer","layer-pointlike"),n=this._drawPointHandles(t,this._mom);break;default:n=this._layerSource[e].get(this._mom),t=n.value,t.classList.add("layer","layer-"+e)}return[t,n]},c._switchDisplaySet=function(e){var t,n,r,i,o;if(this._currentDisplaySet!==e){this._currentDisplaySet=e,i=this._layerElements,o=this._subscriptions,this._layerElements=[],this._subscriptions={layers:[]};for(t in this._displaySets[e])r=this._makeLayer(t),n=r[0],this._layerElements.push(n),this._container.appendChild(n),"points"!==t&&"shapes"!==t?this._subscriptions.layers.push(r[1]):this._subscriptions[t]=r[1];for(o&&this._destroySubscriptions(o);i&&(n=i.pop());)this._container.removeChild(n)}},c._drawShapeHandles=function(e,t,n){var i,o,a,s,u,l=[],c=n.children;for(o=0,a=c.length;a>o;o++)i=c[o],s=e.get(i),u=s.value,r(i,u),u.classList.add("type-"+i.type),this._listenTo(i,u),t.appendChild(u),l.push([i,s]);return l},c._drawPointHandles=function(e,t){for(var n,r,i,o=[],a=new Set(["p","left","center","right"]),u=[t];r=u.pop();)a.has(r.type)&&(n={mom:r,subscriptionId:null,dom:this._doc.createElementNS(s,"g")},n.subscriptionId=r.on("CPS-change",[this,"_pointChanged"],n),this._pointChanged(n),i=n.dom,i.classList.add("point-like","type-"+r.type),this._listenTo(r,i),e.appendChild(i),o.push(n)),Array.prototype.push.apply(u,r.children.reverse());return o},c._pointChanged=function(e){for(;e.dom.lastChild;)e.dom.removeChild(e.dom.lastChild);r(e.mom,e.dom),o(e.mom,e.dom)},c._registerMomNode=function(e){var t=this._nodeIds2Mom[e.nodeID];t||(t=this._nodeIds2Mom[e.nodeID]=[0,e]),t[0]+=1},c._unregisterMomNode=function(e){var t=this._nodeIds2Mom[e.nodeID];t&&(t[0]-=1,t[0]<=0&&delete this._nodeIds2Mom[e.nodeID])},c._getRegisteredMomNode=function(e){var t=this._nodeIds2Mom[e];if(!t)throw new u("MOM-Node with nodeID "+e+"not found.");return t[1]},c._listenTo=function(e,t){t.setAttribute("data-node-id",e.nodeID),this._registerMomNode(e)},c._selectNodeHandler=function(e){for(var t=e.target;;){if(t===this.element.parentElement||!t)return;if(t.hasAttribute("data-node-id"))break;t=t.parentElement}var n=t.getAttribute("data-node-id"),r=this._getRegisteredMomNode(n);this._trigger("select-mom",r)},c._cpsChangeHandler=function(e,t,n){var r=this._getViewBox();this._viewBox.join(" ")!==r.join(" ")&&(this._setViewBox(r),this._trigger("viewBox-change",r))},c._layerChangeHandler=function(e,t,n){this._trigger(e.channel,n)},c._setViewBox=function(e){this._viewBox=e,this.element.setAttribute("viewBox",this._viewBox.join(" "))},c._getViewBox=function(){var e,t=this._mom.getComputedStyle(),n=this._getFontInfo(this._mom.master).unitsPerEm||1e3;try{e=t.get("width")}catch(r){if(!(r instanceof u))throw r;e=n}return e=Math.max(0,e),n=Math.max(0,n),[0,0,e,n]},c._getFontInfo=function(e){return e.getAttachment("fontinfo",!0)||{}},c._getTransformation=function(e){var t=this._getFontInfo(e),n=(t.unitsPerEm||1e3)+(t.descender||0),r=[1,0,0,-1,0,n];return r.join(",")},c._setTransformation=function(e){var t=this._getTransformation(e.master);return this._transformation===t?!1:(this._transformation=t,this._container.setAttribute("transform","matrix("+t+")"),!0)},c._createElement=function(){var e=this._doc.createElementNS(s,"svg");return e.setAttribute("overflow","visible"),e.style.display="block",e},c._destroySubscriptions=function(e){var t;for(t in e)this["_destroy"+t[0].toUpperCase()+t.slice(1)](e[t]),delete e[t]},c._destroyPoints=function(e){var t,n,r;for(t=0,n=e.length;n>t;t++)r=e[t],this._unregisterMomNode(r.mom),r.mom.off(r.subscriptionId)},c._destroyShapes=c._destroyLayers=function(e){var t,n;for(t=0,n=e.length;n>t;t++)this._unregisterMomNode(e[t][0]),e[t][1].destroy()},c._destroyLayers=function(e){var t,n;for(t=0,n=e.length;n>t;t++)e[t].destroy()},c.destroy=function(){this._destroySubscriptions(this._subscriptions),this._mom.off(this._subscriptionId)},a}),define("Atem-MOM-Toolkit/services/glyph/GlyphUIService",["Atem-MOM/rendering/basics","Atem-MOM-Toolkit/dataTransformationCaches/DrawPointsProvider","Atem-MOM-Toolkit/dataTransformationCaches/SVGUsePathsProvider","Atem-MOM-Toolkit/dataTransformationCaches/SVGUseCustomProvider","./GlyphInterface"],function(e,t,n,r,i){"use strict";function o(e,t,n){var r=e.getAttribute("d"),i=["M",t[0],t[1],"L",n[0],n[1]].join(" ");e.setAttribute("d",(r?r+" ":"")+i)}function a(e,i){this._doc=e,this._svg=this._doc.createElementNS(u,"svg"),this._svg.style.display="none",this._doc.body.firstChild?this._doc.body.insertBefore(this._svg,this._doc.body.firstChild):this._doc.body.appendChild(this._svg);var o="mp_glyph_";this.services={},this.services.outline=i,this.services.centerline=new t(l),this.services.shapes=new n(this._svg,o+"base",this.services.outline,!1),this.layers={},this.layers.full=new n(this._svg,o+"full",this.services.outline,!0),this.layers.centerline=new n(this._svg,o+"centerline",this.services.centerline,!1),this.layers.meta=new r(this._svg,o+"meta",s)}var s,u="http://www.w3.org/2000/svg",l={penstroke:e.renderPenstrokeCenterline};s={penstroke:function(e,t){var n,r,i,a,s,l,c,h,f,p,d,m,g,v,y,b=t.children,_=e.ownerDocument.createElementNS(u,"path");for(e.appendChild(_),n=0,r=b.length;r>n;n++)i=b[n],a=i.getComputedStyle(),s=i.left.getComputedStyle(),l=i.right.getComputedStyle(),c=a.get("on",!1),h=a.get("in",!1),f=a.get("out",!1),p=s.get("on",!1),d=s.get("in",!1),m=s.get("out",!1),g=l.get("on",!1),v=l.get("in",!1),y=l.get("out",!1),h&&c&&o(_,h,c),c&&f&&o(_,c,f),c&&p&&o(_,c,p),c&&g&&o(_,c,g),d&&p&&o(_,d,p),p&&m&&o(_,p,m),v&&g&&o(_,v,g),g&&y&&o(_,g,y)},contour:function(e,t){var n,r,i,a,s,l,c=t.children,h=e.ownerDocument.createElementNS(u,"path");for(e.appendChild(h),n=0,r=c.length;r>n;n++)i=c[n].getComputedStyle(),a=i.get("on").valueOf(),s=i.get("in").valueOf(),l=i.get("out").valueOf(),o(h,s,a),o(h,a,l)}};var c=a.prototype;return c.get=function(e,t){var n=new i(this._doc,this.layers,this.services,e,t);return n},a}),define("Atem-CPS-Toolkit/services/dragAndDrop/DragDataService",["Atem-Errors/errors"],function(e){"use strict";function t(){this._type=null,this._data=null}var n=e.Assertion,r=e.Key,i=t.prototype;return i.set=function(e,t){if(null!==this._type)throw new n("Data is already set, but it should be removed before using the set method again.");return this._type=e,this._data=t,this._key},i.get=function(e){return this._type&&this._type===e?this._data:null},i.getFirst=function(e){var t,n,r,i;for(t=0,n=e.length;n>t;t++)if(r=e[t],i=this.get(r))return{type:r,payload:i};return null},i.remove=function(e){if(null!==this._type){if(this._type!==e)throw new r("Wrong type: "+e+" got: "+this._type);this._type=null,this._data=null}},t}),define("Atem-CPS-Toolkit/dom-tool",["Atem-Errors/errors"],function(e){"use strict";function t(e,t){t.parentElement.insertBefore(e,t)}function n(e,t){t.nextSibling||t.parent.appendChild(e),t.parentElement.insertBefore(e,t.nextSibling)}function r(e,r,o){switch(r){case"append":e.appendChild(o);break;case"prepend":t(o,e.firstChild);break;case"before":t(o,e);break;case"after":n(o,e);break;default:throw new i('Unknown position keyword "'+r+'".')}}var i=e.Value;return{insertBefore:t,insertAfter:n,insert:r}}),define("Atem-CPS-Toolkit/services/dragAndDrop/DragIndicatorService",["Atem-CPS-Toolkit/dom-tool"],function(e){"use strict";function t(){this._indicators=Object.create(null)}function n(e,t){t&&"dragenter"===t.type&&t.defaultPrevented||e.parentElement&&e.parentElement.removeChild(e)}var r=t.prototype;return r._createIndicator=function(e){var t,r={drop:null,dragend:null,dragenter:null},i=e.createElement("indicator");Object.defineProperty(r,"handler",{value:n.bind(e,i),enumerable:!1});for(t in r)e.addEventListener(t,r.handler);return[e,i,r]},r.deleteIndicator=function(e){var t,r,i,o,a=this._indicators[e];if(a){t=a[0],r=a[1],i=a[2],n(r);for(o in i)t.removeEventListener(o,i.handler);delete this._indicators[e]}},r._getIndicator=function(e,t){var n=this._indicators[e];return n&&n[0]!==t&&(this.deleteIndicator(),n=void 0),n||(this._indicators[e]=n=this._createIndicator(t)),n[1]},r.insertIndicator=function(t,n,r){var i=n.ownerDocument,o=this._getIndicator(t,i);e.insert(n,r,o)},r.hideIndicator=function(e){var t=this._indicators[e];t&&n(t[1])},t}),define("main",["require/domReady","angular","metapolator/ui/metapolator/app","metapolator/ui/metapolator/ui-tools/selectionTools","Atem-MOM/project/Project","metapolator/models/metapolator/AppModel","Atem-IO/io/staticBrowserREST","Atem-IO/io/InMemory","Atem-MOM/rendering/basics","Atem-MOM-Toolkit/dataTransformationCaches/DrawPointsProvider","Atem-MOM-Toolkit/dataTransformationCaches/BBoxProvider","Atem-MOM-Toolkit/services/glyph/GlyphUIService","Atem-CPS-Toolkit/services/dragAndDrop/DragDataService","Atem-CPS-Toolkit/services/dragAndDrop/DragIndicatorService","Atem-MOM/cpsTools","Atem-MOM/errors"],function(e,t,n,r,i,o,a,s,u,l,c,h,f,p,d,m){
"use strict";function g(e){var t=new o(e);return t.addInstanceSequence("Family 1"),t.createNewDesignSpace(),t}function v(e,t){for(var n=e.addSequence("Sequence 1"),i=t.queryAll("master"),o=0,a=i.length;a>o;o++){var s=i[o],u=s.id;if(0===u.indexOf("master-")){var l=t.getCPSName(s);n.addMaster(u,s,l)}}r.injectSequences(e.masterSequences),r.updateSelection("master")}function y(){var r,o="project",y=new l(u.outlinesRenderer),b=new c(y),_=new h(document,y),w=new f,x=new p,S=new s,C=[{io:a,mountPoint:"lib/MOM",pathOffset:"lib/bower_components/Atem-MOM/lib/cpsLib"},{io:a,mountPoint:"lib/metapolator",pathOffset:"lib/bower_components/metapolator-cpsLib/lib"}],k=new i(S,o,void 0,C),P=g(k);n.constant("cpsTools",d),n.constant("bBoxService",b),n.constant("glyphUIService",_),n.constant("dragDataService",w),n.constant("dragIndicatorService",x),n.constant("project",k),n.constant("cpsController",k.controller),n.constant("ruleController",k.ruleController),n.constant("metapolatorModel",P),S.mkDir(!1,"project"),r=a.copyRecursive(!0,"project",S,"project").then(k.load.bind(k,!0)).then(k.openSession.bind(k,!1)).then(v.bind(null,P,k.controller)).then(null,m.unhandledPromise),e(function(){r.then(t.bootstrap.bind(t,document,[n.name])).then(null,m.unhandledPromise)})}return document.body.classList.add("dependencies-ready"),y});