<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Design spaces</title>

        <!-- jQuery -->
        <script src='https://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js'></script>
        <script src='https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.23/jquery-ui.min.js'></script>
        <link rel='stylesheet' href='http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.23/themes/base/jquery-ui.css'>

        <!-- Angular -->
        <script src='https://ajax.googleapis.com/ajax/libs/angularjs/1.2.16/angular.min.js' type='text/javascript'></script>
        <script src='js/app.js' type='text/javascript'></script>
        <script src='js/designSpaceController.js' type='text/javascript'></script>
        <script src='js/sortable.js' type='text/javascript'></script>
        <script src='js/directives.js' type='text/javascript'></script>

        <!-- d3 JS -->
        <script src="js/d3-v3-min.js" charset="utf-8"></script>

        <style>
            html {
            }

            body {
                -webkit-touch-callout: none;
                -webkit-user-select: none;
                -khtml-user-select: none;
                -moz-user-select: moz-none;
                -ms-user-select: none;
                user-select: none;
            }

            * {
                box-sizing: border-box;
                -webkit-box-sizing: border-box;
                -moz-box-sizing: border-box;
            }

            #masters-panel {
                float: left;
                padding-right: 50px;
            }

            ul {
                list-style: none;
                margin: 0;
                padding: 0;
            }
            
            .master {
                height: 40px;
                width: 100px;
                background: #f85c37;
                border: 1px solid #fff;
                color: #fff;
                padding: 10px;
                cursor: move;
            }

            #design-space-panel {
                float: left;
                width: 700px;
                margin: 0 auto;
                height: 100%;
            }

            #design-space-tabs {
                list-style: none;
                overflow: auto;
                margin: 0;
                padding: 0;
            }

            #design-space-tabs li {
                float: left;
                padding: 6px 10px;
                border-top-left-radius: 8px;
                border-top-right-radius: 8px;
                margin-right: 4px;
                cursor: pointer;
                background: #ddd;
            }

            #design-space-tabs li.selected {
                background: #f85c37;
                color: #fff;
            }

            #design-space-tabs li div {
                float: left;
            }

            #design-space-tabs li img {
                height: 12px;
                width: 12px;
                margin-right: 4px;
            }

            .design-space {
                height: 300px;
                background: #fff;
            }

            .unconfigured {
                background: #ddd;
            }

            .choose-space-type {
                width: 50%;
                float: left;
                text-align: center;
                padding-top: 5%;
            }

            .choose-space-type-button {
                text-decoration: underline;
                cursor: pointer;
            }

            .choose-space-type-button:hover {
                color: #f85c37;
            }

            .drop-area {
                height: 100%;
                width: 100%;
                background: #fff;
                border: 1px solid #ddd;
                position: relative;
            }
            
                .drag-over {
                    border: 1px dashed #000;
                }
            
            
                    control, explore {
                        position: absolute;
                        width: 100%;
                        height: 100%;
                    }
                    
                    control svg, explore svg {
                        position: absolute;
                        width: 100%;
                        height: 100%;
                        left: 0;
                        top: 0;
                    }
                            
                        .slider-axis {
                            stroke: #000;
                            stroke-width: 2;
                        }
                        
            
                        .slider-handle {
                            position: absolute;
                            top: 3px;
                            cursor: pointer;
                        }
                            
                        .slider-label {
                            font-size: 12px;
                        }
                        
                        .triangle-button {
                            position: absolute;
                            bottom: 10px;
                            left: 10px;
                            cursor: pointer;
                        }
                        
                        
                        
                        li:first-child .slider-label-first {
                            display: none;
                        }
                        
                        li:first-child .slider-label-last {
                            left: 50%;
                        }
                        
                            .slider-label {
                                border: none;
                                background: transparent;
                            }

                        .slider-label-first {
                            left: 0;
                            top: 10px;
                        }
                        
                        .slider-label-last {
                            text-align: right;
                            right: 0;
                        }
                        
                        .slider-label-middle {
                            position: absolute;
                            text-align: center;
                            right: 0;
                            top: 10px;
                            width: 100%;
                            font-size: 16px;
                        }
                        
                .li-explore {
                    position: absolute;
                    width: 20px;
                    height: 20px;
                    background: #000;
                    border-radius: 10px;
                    cursor: pointer;
                }
                
                    .explore-name {
                        position: absolute;
                        z-index: 10;
                        color: #fff;
                        left: 6px;
                        top: 4px;
                        text-align: center;
                        font-size: 12px;
                    }
                    
                    .explore-name-full {
                        position: absolute;
                        z-index: 10;
                        left: 24px;
                        top: 0px;
                        background: #ddd;
                        color: #333;
                        padding: 4px 8px;
                        font-size: 12px;
                        opacity: 0;
                        transition: all 1s ease;
                    }
                    
                    .show-name-full .explore-name-full {
                        opacity: 1;
                    }
        </style>

    </head>

    <BODY ng-app="Metapolator" ng-controller="designSpaceController">
        <div id="masters-panel">
            <ul class="ul-masters" ng-model="sequences">
                <li ng-repeat="sequence in sequences">
                    <div class="sequence-name">
                        {{sequence.name}}
                    </div>
                    <ul ui-sortable="sortableOptionsMasters" ng-model="sequence.masters" class="sequence">
                        <li ng-repeat="master in sequence.masters" class="master">
                            {{master.name}}
                        </li>
                    </ul>
                </li>
            </ul>
        </div>
        <!-- end of masters -->

        <div id="design-space-panel">
            <ul id="design-space-tabs">
                <li ng-repeat="space in designSpaces" ng-click="selectDesignSpace($index)" ng-class="{selected : $index == currentDesignSpace}">
                    <div><img ng-src="{{ 'img/' + space.type + '.png'}}">
                    </div>
                    <div>
                        {{space.name}}
                    </div>
                </li>
                <li ng-click="addDesignSpace()">
                    +
                </li>
            </ul>
            <!-- end of tabs -->
            
            <div class="design-space" ng-class="{unconfigured : designSpaces[currentDesignSpace].type =='x'}">
                <div ng-show="designSpaces[currentDesignSpace].type == 'x'">
                    <div class="choose-space-type">
                        <div class="choose-space-type-button" ng-click="designSpaces[currentDesignSpace].type = 'Explore'">
                            <img src="img/Explore.png">
                            <br>
                            Explore
                        </div>
                    </div>
                    <div class="choose-space-type">
                        <div class="choose-space-type-button" ng-click="designSpaces[currentDesignSpace].type = 'Control'">
                            <img src="img/Control.png">
                            <br>
                            Control
                        </div>
                    </div>
                </div>
                
                <div class="drop-area" ng-show="designSpaces[currentDesignSpace].type != 'x'">
                    <control ng-if="designSpaces[currentDesignSpace].type == 'Control'"></control>
                    <explore ng-if="designSpaces[currentDesignSpace].type == 'Explore'"></explore>
                    <button ng-if="designSpaces[currentDesignSpace].type == 'Control' && designSpaces[currentDesignSpace].masters.length == 3" class="triangle-button" ng-click="designSpaces[currentDesignSpace].triangle = !designSpaces[currentDesignSpace].triangle">
                        Triangles: {{!designSpaces[currentDesignSpace].triangle}}
                    </button>
                </div> 
            </div>
            <!-- end of design space -->

            <div>
                <br>
                {{designSpaces[currentDesignSpace]}}
            </div>
        </div>

    </body>
</html>