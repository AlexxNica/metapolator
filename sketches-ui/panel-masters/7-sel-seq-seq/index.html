<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>View-select</title>

        <!-- jQuery -->
        <script src='https://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js'></script>
        <script src='https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.23/jquery-ui.min.js'></script>
        <link rel='stylesheet' href='http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.23/themes/base/jquery-ui.css'>

        <!-- Angular -->
        <script src='https://ajax.googleapis.com/ajax/libs/angularjs/1.2.16/angular.min.js' type='text/javascript'></script>
        <script src='js/app.js' type='text/javascript'></script>
        <script src='js/maincontroller.js' type='text/javascript'></script>
        <script src='js/sortable.js' type='text/javascript'></script>
        <script src='js/directives.js' type='text/javascript'></script>

        <link rel="stylesheet" href="">

        <style>
            body {
                -webkit-touch-callout: none;
                -webkit-user-select: none;
                -khtml-user-select: none;
                -moz-user-select: moz-none;
                -ms-user-select: none;
                user-select: none;
                padding: 100px;
            }

            * {
                box-sizing: border-box;
                -webkit-box-sizing: border-box;
                -moz-box-sizing: border-box;
            }

            #container {
                width: 202px;
                border-left: 1px solid #ffa392;
                border-right: 1px solid #ffa392;
                border-top: 1px solid #ffa392;
            }
            
            .sequence-name {
                padding: 10px;
            }

            ul {
                list-style: none;
                
                margin: 0;
                padding: 0;

            }
            
            .sequence {
                border-top: 1px solid #ffa392;
                width: 200px;
                background: #ddd; 
            }

            .master {
                width: 200px;
                height: 40px;
                background: #fff;
                border-bottom: 1px solid #ffa392;
            }

            .selected {
                background: #f85c37;
            }

            .diamond {
                float: left;
                width: 40px;
                height: 40px;
                position: relative;
            }

            .diamond-line {
                position: absolute;
                left: 19px;
                top: 0;
                width: 2px;
                height: 40px;
            }

            .end .diamond-line-up, .middle .diamond-line-up {
                width: 100%;
                height: 20px;
                background: #000;
            }

            .start .diamond-line-up, .solo .diamond-line-up {
                width: 100%;
                height: 20px;
                background: transparent;
            }

            .start .diamond-line-down, .middle .diamond-line-down {
                width: 100%;
                height: 20px;
                background: #000;
            }

            .end .diamond-line-down, .solo .diamond-line-up {
                width: 100%;
                height: 20px;
                background: transparent;
            }

            .diamond-fix {
                position: absolute;
                width: 12px;
                height: 12px;
                border-radius: 6px;
                background: #000;
                z-index: 10;
                left: 14px;
                top: 14px;
            }

            .diamond-clone, .diamonddrag:hover {
                position: absolute;
                width: 12px;
                height: 12px;
                border-radius: 6px;
                border: 3px solid #0ff;
                background: #000;
                z-index: 11;
                left: 14px;
                top: 14px;
                cursor: pointer;
            }

            .master-name {
                float: left;
                width: calc(100% - 40px);
                height: 40px;
                padding: 10px;
            }

        </style>

        <script>
            $(function() {
                $(".master").disableSelection();
            });
        </script>

    </head>

    <BODY ng-app="Metapolator" ng-controller="MetapolatorController" ng-mouseup="mouseclick = false">
        <div id="container">
            <ul ui-sortable="sortableOptionsSequences" ng-model="sequences">
                <li ng-repeat="sequence in sequences">
                    <div class="sequence-name" ng-click="selectSequenceForEdit(sequence)" ng-class="{selected: allMastersSelected(sequence)}">{{sequence.name}}</div>
                    <ul ui-sortable="sortableOptionsMasters" ng-model="sequence.masters" class="sequence">
                        
                        <li ng-repeat="master in sequence.masters" class="master" ng-class="{selected: master.edit}">
                            <div class="diamond" ng-class="{start : $first && !$last, end : $last, middle : $middle, solo : $first && $last}" ng-mouseover="whileDrag(master, $index)" ng-mousedown="startDrag(master, $index)">
                                <div class="diamond-line">
                                    <div class="diamond-line-up"></div>
                                    <div class="diamond-line-down"></div>
                                </div>
                                <div class="diamond-fix" ng-class="{diamonddrag: !$middle}"></div>
                            </div>
                            <div class="master-name" ng-click="selectMastersForEdit(master, $parent.$index, $index)">
                                {{master.name}}
                            </div>
                        </li>
                    </ul>
                </li>
            </ul>
        </div>

        {{mastersSeqCache}}
        <br>
        <br>

        <b>Highlighted masters:</b>
        <div ng-repeat="sequence in sequences">
            <div ng-repeat="master in sequence.masters | filter:{edit: true}" >
                {{master.name}}
            </div>
        </div>

    </body>
</html>